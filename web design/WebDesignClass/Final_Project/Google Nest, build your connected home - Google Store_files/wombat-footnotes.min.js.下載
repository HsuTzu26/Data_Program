(()=>{var T=class{constructor(){this.resolve=()=>{},this.reject=()=>{},this.complete=!1,this.promise=new Promise((e,t)=>{this.resolve=n=>(this.complete=!0,e(n)),this.reject=n=>(this.complete=!0,t(n))})}getPromise(){return this.complete?new Promise(e=>{e()}):this.promise}};function ee(c,e){let t=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();return e===t}function H(c){return ee(c,"boolean")}function ne(c){return Array.from(c.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))}function N(c,e){ne(c).forEach(n=>{let s=n.tabIndex;n.hasAttribute("originalTabIndex")||n.setAttribute("originalTabIndex",s+""),n.tabIndex=e})}function U(c){Array.from(c.querySelectorAll("[originalTabIndex]")).forEach(t=>{let n=t.getAttribute("originalTabIndex")||"";t.tabIndex=+n})}function F(c){Array.from(c.querySelectorAll("[loading=lazy]")).forEach(t=>{t.removeAttribute("loading")})}var L={ENTER:"DOMContentLoaded",LOAD:"load",TRACKING_NAVIGATION:"trackingNavigationEvent",LEAVE:"mannequinImpendingNavigation"};var D=class{static inview(e,t={},n){let s=null,r=null,u=null,o=!1,a=new T,l=()=>({changes:s,lastChange:r,inview:u,ready:o}),f=b=>{b.length>=1&&(s=b,r=b.slice(-1)[0],u=r.isIntersecting,o=!0,a.resolve()),n&&n(e,b.slice(-1)[0],h)},d=window.location.search.split("evBypass=")[1];if(d=d&&d.split("&")[0],d==="true")return window.setTimeout(()=>{n&&n(e,{isIntersecting:!0,isVisible:!0},()=>{}),a.resolve()}),{observer:null,dispose:()=>{},state:()=>({ready:!0,inview:!0}),readyPromise:a.getPromise()};let h=()=>{i&&i.unobserve(e),i&&i.disconnect(),s=[],r=null},i=new IntersectionObserver(f,t);return i.observe(e),{observer:i,dispose:h,state:l,readyPromise:a.getPromise()}}};function G(c){let e=window.location.search.split(c+"=")[1];return e=e&&e.split("&")[0],e||null}var A;(function(i){i.MQN_DEBUGGER="mqnDebugger",i.MQN_GLOBAL_DEBUG="mqnGlobalDebug",i.SITE_MAX_WIDTH="siteMaxWidth",i.MQN_GRID="mqnGrid",i.MQN_GRID2="grid",i.MQN_GOOGLE_ONE_USER="mqnGoogleOneUser",i.MQN_CONCIERGE_USER="mqnConciergeUser",i.MQN_ANALYTICS="MQN_DEBUG_ANALYTICS",i.MQN_DEBUG_LEVEL="MQN_DEBUG_LEVEL",i.MQN_HIGHLIGHT_ATTRIBUTE="mqnHighlightAttribute",i.MQN_INSPECT_A11Y="mqnInspectAccessibility",i.MQN_IS_SUBSCRIBED="mqnIsSubscribed",i.MQN_SHOW_SECURITY_POLICY_VIOLATIONS="mqnShowSecurityPolicyViolations"})(A||(A={}));var x;(function(r){r[r.NONE=0]="NONE",r[r.MQN_CONTROLLER=1]="MQN_CONTROLLER",r[r.MQN_SMOOTH_SCROLL=2]="MQN_SMOOTH_SCROLL",r[r.MQN_MODULE=3]="MQN_MODULE",r[r.ALL=4]="ALL"})(x||(x={}));var $=class{constructor(){this.debugLevel=4;let e=G(A.MQN_DEBUG_LEVEL);e&&x[e]?this.setDebugLevel(x[e]):this.setDebugLevel(0)}setDebugLevel(e){this.debugLevel=e}log(e,...t){if(this.debugLevel!=0){if(this.debugLevel==4){var t=Array.prototype.slice.call(arguments);console.log(...t)}if(e==this.debugLevel){var t=Array.prototype.slice.call(arguments);console.log(...t)}}}printCurrentDebugLevel(){console.log(this.debugLevel)}},it=new $;function V(...c){}var P=class extends Map{constructor(e=[],t=V){super(e);this.defaultFunction=t}static usingFunction(e){return new this([],e)}get(e){if(this.has(e))return super.get(e);{let t=this.defaultFunction(e);return this.set(e,t),t}}};var O=class{constructor(){this.callbacks=P.usingFunction(()=>new Set)}on(e,t){this.callbacks.get(e).add(t)}dispatch(e,...t){this.callbacks.get(e).forEach(n=>n(...t))}off(e,t){let n=this.callbacks.get(e);n.delete(t),n.size===0&&this.callbacks.delete(e)}dispose(){let e=this.callbacks.values(),t=e.next();for(;!t.done;)t.value.clear(),t=e.next();this.callbacks.clear()}};var w=class{static splitMethodCall(e){let t=e.startsWith("!")||null;t&&(e=e.substring(1));let n=e.trim().split(/\.(.+)/),s=n[0];n[1]||console.log("Could not parse invalid expression: "+e);let r=n[1].split("(")[0],u=null,o=null;n[1].includes("(")?u=r:o=r;let a=null;if(u)try{a=n[1].match(/\(.*\)/g)[0],a=a.substring(1).slice(0,-1),a?a.startsWith("'[")&&a.endsWith("]'")||a.startsWith("'{")&&a.endsWith("}'")?a=[a.substring(1).slice(0,-1)]:(e.includes(",")?a=a.match(/('[^']+'|[^,]+)/g):a=[a],a=a.map((l,f)=>(l.includes("[")?l=JSON.parse(l):(l=l.trim(),l=l.replace(/\'/g,"")),l))):a=[]}catch(l){console.error("Lex Error: Failed interpreting expression.   Make sure this is a valid expression: ",e),console.error(l)}return{hasNot:!!t,controllerName:s,propertyName:o,methodName:u,methodValue:a}}static stripWhiteSpace(e){return e=e.replace(/\:\s/g,":").replace(/\s\:/g,":").trim(),e}};var k;(function(e){e.STATE_CHANGE="stateChange"})(k||(k={}));var y=class{constructor(e,t){this.el=e,this.name=t,this.watcher=new window.MqnLib.DomWatcher,this.readWrite=new window.MqnLib.Raf,this.eventManager=new O,window.MqnLib.debug.log(x.MQN_CONTROLLER,"Creating controller",this.name,this.el),this.makeAccessible(),this.setupDataOnWatchers(),this.setupEventBindings(),this.setupSwipeWatchers()}stateChange(){this.updateDataClassStates(),this.updateAttributeBinding(),this.eventManager.dispatch(k.STATE_CHANGE)}on(e,t){this.eventManager.on(e,t)}off(e,t){this.eventManager.off(e,t)}makeAccessible(){Array.from(this.el.querySelectorAll("[data-click]")).forEach(t=>{t.hasAttribute("data-click-disable-auto-a11y")||(t.setAttribute("role","button"),t.setAttribute("tabindex","0"))})}updateAttributeBinding(){let e=Array.from(this.el.querySelectorAll("[data-attribute]"));this.el.dataset.attribute&&e.push(this.el),e.forEach(t=>{let n=t.dataset.attribute.trim();n=w.stripWhiteSpace(n),n.substring(1).slice(0,-1);let s=n.match(/:'[1-90a-zA-Z,.!]+\([^)]+\)'|:'[a-zA-Z,.\(\)]+/g);s=s.map(o=>(o.endsWith("'")&&(o=o.slice(0,-1)),o.substring(2)));let r=n.match(/\'[1-90a-zA-Z\_\-Z]+\':/g);r=r.map(o=>o.replace(/'/g,"").replace(/"/g,"").replace(/:/g,""));let u={};try{r.forEach((o,a)=>{u[o]=s[a]})}catch(o){console.error("Something went wrong parsing data-bind attribute. Make sure it is not malformed.  Expressions should be strings and all method values should be strings."),console.log(n)}Object.keys(u).forEach(o=>{let a=u[o],l=w.splitMethodCall(a),f=l.controllerName,d=l.methodName,h=l.methodValue,i=l.propertyName,b=l.hasNot;if(f!==this.name)return;let m="";if(d){if(this[d]==null){console.error("No method named: "+d+" available in "+this.name);return}m=this[d].apply(this,h)}else{if(this[i]==null){console.error("No property named: "+i+" available in "+this.name);return}m=this[i]}if(m!=null){b&&H(m)&&(m=!m);let v=m+"";t.setAttribute(o,v),o==="aria-hidden"&&y.handleAriaHiddenChange(t,v)}})})}static handleAriaHiddenChange(e,t){t.toLowerCase()==="true"?N(e,-1):(U(e),Array.from(e.querySelectorAll('[aria-hidden="true"]')).forEach(s=>N(s,-1)))}updateDataClassStates(){let e=Array.from(this.el.querySelectorAll("[data-class]"));this.el.dataset.class&&e.push(this.el),e.forEach(t=>{let n=t.dataset.class;n=w.stripWhiteSpace(n),n.substring(1).slice(0,-1);let s=n.match(/:'[1-90a-zA-Z,.!]+\([^)]+\)'|:'[a-zA-Z,.\(\)]+/g);s=s.map(o=>(o.endsWith("'")&&(o=o.slice(0,-1)),o.substring(2)));let r=n.match(/\'[1-90a-zA\_\-Z]+\':/g);r=r.map(o=>o.replace(/'/g,"").replace(/"/g,"").replace(/:/g,""));let u={};try{r.forEach((o,a)=>{u[o]=s[a]})}catch(o){console.error("Something went wrong parsing data-class attribute. Make sure it is not malformed.  Expressions should be strings and all method values should be strings."),console.log(n)}Object.keys(u).forEach(o=>{let a=u[o],l=w.splitMethodCall(a),f=l.controllerName,d=l.methodName,h=l.methodValue,i=l.propertyName,b=l.hasNot;if(f!==this.name)return;let m=!1;if(d){if(this[d]==null){console.error("No method named: "+d+" available in "+this.name);return}m=this[d].apply(this,h),b&&(m=!m)}else{if(this[i]==null){console.error("No property named: "+i+" available in "+this.name);return}m=this[i],b&&(m=!m)}m?t.classList.add(o):t.classList.remove(o)})})}setupDataOnWatchers(){Array.from(this.el.querySelectorAll("[data-on]")).forEach(t=>{if(!t.hasAttribute("data-on-event"))return;let n=t.getAttribute("data-on-event").trim(),s=t.getAttribute("data-on"),r=w.splitMethodCall(s),u=r.controllerName,o=r.methodName,a=r.propertyName,l=r.methodValue,f=r.hasNot;u===this.name&&o&&u==this.name&&this[o]!==void 0&&this.watcher.add({element:t,on:n,callback:()=>{this[o].apply(this,l)}})})}setupEventBindings(){let e=Array.from(this.el.querySelectorAll("[data-click], [data-mouseenter], [data-mouseleave], [data-mousedown], [data-mouseup], [data-mouseover], [data-mouseout]")),t=(n,s,r,u=!1)=>{let o=r.getAttribute(n);if(!o)return;let a=w.splitMethodCall(o),l=a.controllerName,f=a.methodName,d=a.methodValue;if(l===this.name&&f&&l==this.name&&this[f]!==void 0){let h={};u&&(h.capture=!0),this.watcher.add({element:r,on:s,callback:()=>{this[f].apply(this,d)},eventOptions:h}),(s=="click"||s=="mousedown"||s=="mouseup")&&this.watcher.add({element:r,on:"keydown",callback:i=>{(i.code==="Space"||i.code==="Enter")&&this[f].apply(this,d)}})}};e.forEach(n=>{t("data-click","click",n),t("data-mousedown","mousedown",n),t("data-mouseup","mouseup",n),t("data-mouseenter","mouseenter",n),t("data-mouseleave","mouseleave",n),t("data-mouseover","mouseover",n),t("data-mouseout","mouseout",n),t("data-focus","focus",n,!0),t("data-blur","blur",n,!0)})}setupSwipeWatchers(){let e=Array.from(this.el.querySelectorAll("[data-swipe-left], [data-swipe-right], [data-swipe-up], [data-swipe-down]")),t=(n,s)=>{let r=s.getAttribute(n);if(!r)return;let u=w.splitMethodCall(r),o=u.controllerName,a=u.methodName,l=u.methodValue;if(o===this.name&&a&&o==this.name&&this[a]!==void 0){let f,d,h=!1,i=!1,b=300,m=g=>{f=g.touches&&g.touches[0].clientX||g.x,d=g.touches&&g.touches[0].clientY||g.y,i=!0},v=g=>{i=!1},W=g=>{if(!f||!d||h||!i)return;let X=g.touches&&g.touches[0].clientX||g.x,K=g.touches&&g.touches[0].clientY||g.y,S=X-f,M=K-d;h=Math.abs(S)+Math.abs(M)>0,!!h&&(Math.abs(S)>Math.abs(M)?S>0?n=="data-swipe-left"&&this[a].apply(this,l):n=="data-swipe-right"&&this[a].apply(this,l):M>0?n=="data-swipe-up"&&this[a].apply(this,l):n=="data-swipe-down"&&this[a].apply(this,l),window.setTimeout(()=>{h=!1,i=!1},b))};this.watcher.add({element:s,on:"touchstart",eventOptions:{passive:!0},callback:m}),this.watcher.add({element:s,on:"touchend",eventOptions:{passive:!0},callback:v}),this.watcher.add({element:s,on:"touchmove",eventOptions:{passive:!0},callback:W}),this.watcher.add({element:s,on:"mousedown",eventOptions:{passive:!0},callback:m}),this.watcher.add({element:s,on:"mouseup",eventOptions:{passive:!0},callback:v}),this.watcher.add({element:s,on:"mousemove",eventOptions:{passive:!0},callback:W})}};e.forEach(n=>{t("data-swipe-left",n),t("data-swipe-right",n),t("data-swipe-up",n),t("data-swipe-down",n)})}getElement(){return this.el}dispose(){this.watcher.dispose()}};var R={test:{url:"http://google.com",label:"Google",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:"_test",productName:"Test",ariaLabel:"Test Aria Label"},test_disabled:{url:"http://google.com",label:"Google",source:null,imageUrl:null,behavior:"DISABLED",pageId:null,skuId:"_test",productName:"Test",ariaLabel:"Test Aria Label"},_google_pixel_stand_white:{url:null,label:"Unavailable",source:null,imageUrl:null,behavior:"DISABLED",pageId:null,skuId:"_google_pixel_stand_white",productName:"Google Pixel Stand White",ariaLabel:""},chromecast_google_tv:{url:"/config/chromecast_google_tv",label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Chromecast with Google TV",ariaLabel:"Buy Chromecast with Google TV"},nest_audio:{url:"/config/nest_audio",label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Nest Audio",ariaLabel:"Buy Nest Audio"},nest_thermostat:{url:"/config/nest_thermostat",label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Nest Thermostat",ariaLabel:"Buy Nest Thermostat"},nest_thermostat_e:{url:null,label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Nest Thermostat E",ariaLabel:""},pixel_4:{url:"/config/pixel_4",label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Google Pixel 4",ariaLabel:"Buy Google Pixel 4"},pixel_4a_5g:{url:null,label:"No longer available",source:null,imageUrl:null,behavior:"DISABLED",pageId:null,skuId:null,productName:"Google Pixel 4a with 5G",ariaLabel:""},pixel_4a_5g_case_fabric:{url:"/config/pixel_4a_5g_case_fabric",label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Google Pixel 4a (5G) Case",ariaLabel:"Buy Google Pixel 4a (5G) Case"},pixel_6:{ariaLabel:"Buy Pixel 6",behavior:"REDIRECT",imageUrl:null,label:"Buy",pageId:null,productName:"Pixel 6",skuId:null,source:null,url:"/config/pixel_6"},pixel_5:{url:null,label:"No longer available",source:null,imageUrl:null,behavior:"DISABLED",pageId:null,skuId:null,productName:"Google Pixel 5",ariaLabel:""},pixel_5_case_fabric:{url:"/config/pixel_5_case_fabric",label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Google Pixel 5 Case",ariaLabel:"Buy Google Pixel 5 Case"},pixel_pass:{url:"#compare",label:"Subscribe ",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Pixel Pass",ariaLabel:"Subscribe  Pixel Pass"},stadia:{url:"/product/gaming_entertainment_package",label:"Buy",source:null,imageUrl:null,behavior:"REDIRECT",pageId:null,skuId:null,productName:"Stadia Overview",ariaLabel:"Buy Stadia Overview"},usb_c_earbuds:{url:null,label:"Buy",source:null,imageUrl:null,behavior:"ADD_TO_CART",pageId:null,skuId:"_pixel_usb_c_earbuds_white",productName:"Google Pixel USB-C\u2122 earbuds",ariaLabel:"Add Google Pixel USB-C\u2122 earbuds to cart"}};var j={_pixel_usb_c_earbuds_white:new Promise(c=>c(void 0))};var z={'[[{"docid":"_google_home_mini_chalk","quantity":1},{"docid":"_nest_learning_thermostat_3rd_gen","quantity":1}],"+"]':new Promise(c=>c({html:'<span class="jZS2Hf" data-test-is-price="">From CA$329</span>',financingHtml:"",priceInformation:{was_price:"",was_price_micros:0,current_price:"CA$329",current_price_micros:329e6,currency_code:"CAD",is_discounted:!1,discount_amount:"",is_free:!1,is_same_price:!1,is_eligible_for_epp_pixel_financing:!1,was_epp_per_month_price:"",epp_per_month_price:""},save:"",orMonthlyRateMessage:""})),'[[{"docid":"_google_home_mini_chalk","quantity":1},{"docid":"_nest_learning_thermostat_3rd_gen","quantity":1}],""]':new Promise(c=>c({html:'<span class="jZS2Hf" data-test-is-price="">From CA$329</span>',financingHtml:"",priceInformation:{was_price:"",was_price_micros:0,current_price:"CA$329",current_price_micros:329e6,currency_code:"CAD",is_discounted:!1,discount_amount:"",is_free:!1,is_same_price:!1,is_eligible_for_epp_pixel_financing:!1,was_epp_per_month_price:"",epp_per_month_price:""},save:"",orMonthlyRateMessage:""})),'[[{"docid":"_google_nest_hub_max_chalk","quantity":1},{"docid":"chromecast_google_tv","quantity":1}],"+"]':new Promise(c=>c({html:'<span class="BFggEc" data-test-discount-amount="">Save $60<sup>+</sup></span><span class="jZS2Hf" data-test-is-price="">From $169</span> <span class="h0uEUb" data-test-was-price="">$229</span>',financingHtml:'<div class="fAkyUe"><div class="DYUuAf"><span><span class="BFggEc">Save $60<sup>+</sup> </span>Pay $169 or $28.17/month</span></div><div class="obluzb"><span>with <b>6 months</b> special financing. </span></div></div>',priceInformation:{was_price:"$229",was_price_micros:229e6,current_price:"$169",current_price_micros:169e6,currency_code:"USD",is_discounted:!0,discount_amount:"$60",is_free:!1,is_same_price:!1,is_eligible_for_epp_pixel_financing:!1,was_epp_per_month_price:"$38.17",epp_per_month_price:"$28.17",epp_number_of_months:6},save:"Save $60",orMonthlyRateMessage:"or $28.17/month"})),'[[{"docid":"_google_nest_hub_max_chalk","quantity":1},{"docid":"chromecast_google_tv","quantity":1}],""]':new Promise(c=>c({html:'<span class="BFggEc" data-test-discount-amount="">Save $60</span><span class="jZS2Hf" data-test-is-price="">From $169</span> <span class="h0uEUb" data-test-was-price="">$229</span>',financingHtml:'<div class="fAkyUe"><div class="DYUuAf"><span><span class="BFggEc">Save $60 </span>Pay $169 or $28.17/month</span></div><div class="obluzb"><span>with <b>6 months</b> special financing. </span></div></div>',priceInformation:{was_price:"$229",was_price_micros:229e6,current_price:"$169",current_price_micros:169e6,currency_code:"USD",is_discounted:!0,discount_amount:"$60",is_free:!1,is_same_price:!1,is_eligible_for_epp_pixel_financing:!1,was_epp_per_month_price:"$38.17",epp_per_month_price:"$28.17",epp_number_of_months:6},save:"Save $60",orMonthlyRateMessage:"or $28.17/month"}))};var _=class{constructor(){this._subscribeUserSucceeds=!0;this.productCtaDataMap=new Map,document.addEventListener("populatePrices",()=>{document.querySelectorAll(".is-was-price-text").forEach(t=>{t.textContent="$XX"})})}static getMockProductCtaData(e){if(R[e])return R[e];throw new Error(`No mock Product Cta Data found for ${e}`)}static getMockResponse(e,t){let n=this.fnNameToMockResponse[e],s=JSON.stringify(t);if(!n[s]){let r=t.map(u=>JSON.stringify(u)).join(", ");throw console.log(`Arguments passed to mannequinService.${e}() where no mock response was found:`,...t),new Error(`No mock response is found for the call to mannequinService.${e}. Please run mannequinService.${e}(${r}).then((result) => console.log(JSON.stringify(result))); on gstore-internal.]
Copy the resulting string and put it in the appropriate mock response record for ${e} under the key: ${s}`)}return n[s]}getBundlePrice(e,t){return _.getMockResponse("getBundlePrice",[e,t])}setInnerHtml(e,t){console.warn("MockMannequinService does not properly implement setInnerHtml"),e.innerHTML=t}subscribeUser(e,t){return new Promise((n,s)=>{this._subscribeUserSucceeds?n():s()})}redirectToLogin(){throw new Error("redirectToLogin not implemented in MannequinService mock")}async safeLoad(e,t){throw new Error("safeLoad not implemented in MannequinService mock")}navigateToUrl(e){console.log(`Called mockMannequinService.navigateToUrl with ${e}`)}joinWaitlist(e,t){return new Promise(n=>{n({updatedBehavior:p.LEAVE_WAITLIST,updatedLabel:"Leave Waitlist"})})}leaveWaitlist(e){return new Promise(t=>{t({updatedBehavior:p.JOIN_WAITLIST,updatedLabel:"Join Waitlist"})})}addToCart(e){return _.getMockResponse("addToCart",[e])}fetchPostalCodeRebate(e){throw new Error("fetchPostalCodeRebate not implemented in MannequinService mock")}fetchProductCtaData(e){return e.forEach(t=>{this.productCtaDataMap.set(t,_.getMockProductCtaData(t))}),new Promise(t=>t(new Map(this.productCtaDataMap)))}},C=_;C.fnNameToMockResponse={addToCart:j,getBundlePrice:z};var Q=window.location.host.includes("google.com");var J;(function(r){r.UNKNOWN="UNKNOWN",r.NEST_AWARE="NEST_AWARE",r.CONCIERGE="CONCIERGE",r.PLATFORM="PLATFORM",r.BUNDLE="BUNDLE"})(J||(J={}));var p;(function(o){o.UNSPECIFIED="UNSPECIFIED",o.REDIRECT="REDIRECT",o.JOIN_WAITLIST="JOIN_WAITLIST",o.SIGN_IN_AND_JOIN_WAITLIST="SIGN_IN_AND_JOIN_WAITLIST",o.LEAVE_WAITLIST="LEAVE_WAITLIST",o.ADD_TO_CART="ADD_TO_CART",o.DISABLED="DISABLED"})(p||(p={}));var re=new Promise(c=>{if(Q){let e=()=>window.mannequinService?c(window.mannequinService):window.requestAnimationFrame(e);window.requestAnimationFrame(e)}else console.log("Using Mock Mannequin Service"),c(new C)}),Y=re;var E;(function(n){n.DOC_ID="mqn-dynamic-cta-doc-id",n.READY="mqn-dynamic-cta-done",n.TEXT="text"})(E||(E={}));var oe="unspecified",I=class{constructor(e,t){this.el=e,this.textEl=e.querySelector(`[${E.TEXT}]`),this.docId=t!==oe?t:I.GetDocIdFromUrl(),this.domWatcher=new window.MqnLib.DomWatcher,this.init()}static GetDocIdFromUrl(){return window.location.href.split("/").slice(-1)[0].split("?")[0].split("#")[0]}async init(){this.mannequinService=await Y;let e=n=>{if(this.data=n.get(this.docId),!this.data&&!window.MqnLib.mqnGlobal.isProd){console.error(`No data found for product w/ docID ${this.docId}`);return}this.el.removeAttribute("href"),this.updateFromData(),this.domWatcher.add({element:this.el,on:"click",callback:()=>this.handleClick()})},t=()=>{if(this.docId!==I.GetDocIdFromUrl())return;let n=document.querySelector("#pdb button.transaction")||document.querySelector('button[data-test="cta"]');!n||(this.el.removeAttribute("href"),this.updateFromSniffedCta(n),this.domWatcher.add({element:this.el,on:"click",callback:()=>n.click()}))};this.mannequinService.fetchProductCtaData([this.docId]).then(e,t)}updateFromSniffedCta(e){this.textEl.innerText=e.innerText,this.el.setAttribute("aria-label",e.getAttribute("aria-label")),this.el.disabled=e.disabled,this.el.setAttribute(E.READY,"true")}updateFromData(){this.textEl.innerText=this.data.label,this.data.ariaLabel&&this.el.setAttribute("aria-label",this.data.ariaLabel),this.setDisabledState(),this.el.setAttribute(E.READY,"true")}setDisabledState(){switch(this.data.behavior){case`${p.REDIRECT}`:case`${p.JOIN_WAITLIST}`:case`${p.SIGN_IN_AND_JOIN_WAITLIST}`:case`${p.LEAVE_WAITLIST}`:case`${p.ADD_TO_CART}`:this.el.disabled=!1;break;case`${p.UNSPECIFIED}`:case`${p.DISABLED}`:default:this.el.disabled=!0;break}}handleClick(){if(this.data.behavior===`${p.REDIRECT}`)this.data.url&&this.mannequinService.navigateToUrl(this.data.url);else if(this.data.behavior===`${p.JOIN_WAITLIST}`)this.el.disabled=!0,this.mannequinService.joinWaitlist(this.docId,this.data.productName).then(e=>{this.data.ariaLabel=e.updatedLabel,this.data.behavior=p.LEAVE_WAITLIST,this.el.disabled=!1});else if(this.data.behavior===`${p.SIGN_IN_AND_JOIN_WAITLIST}`){let t=`https://accounts.google.com/ServiceLogin?ltmpl=googlestore&continue=${encodeURIComponent(location.href)}`;this.mannequinService.navigateToUrl(t)}else this.data.behavior===`${p.LEAVE_WAITLIST}`?(this.el.disabled=!0,this.mannequinService.leaveWaitlist(this.docId).then(e=>{this.data.ariaLabel=e.updatedLabel,this.data.behavior=p.JOIN_WAITLIST,this.el.disabled=!1})):this.data.behavior===`${p.ADD_TO_CART}`&&(this.el.disabled=!0,this.mannequinService.addToCart(this.data.skuId))}dispose(){this.domWatcher.dispose()}},q=class extends y{constructor(e){super(e,"dynamicCtaCtrl");this.ctas=Array.from(e.querySelectorAll(`[${E.DOC_ID}]`)).map(t=>new I(t,t.getAttribute(E.DOC_ID)))}dispose(){super.dispose(),this.ctas.forEach(e=>e.dispose()),this.ctas=[]}};var B=class{constructor(e){this.id=e,this.moduleElements=[],this.mqnServiceDynamicCtaControllers=[],this.init()}init(){this.watchPageEvents()}watchPageEvents(){document.addEventListener(L.ENTER,this.handleDOMContentLoaded.bind(this)),document.addEventListener(L.LEAVE,this.handleLeave.bind(this))}addBrowserNames(){this.moduleElements.forEach(e=>{window.MqnLib.appendBrowserNameToElement(e)})}handleDOMContentLoaded(){window.setTimeout(()=>{this.moduleElements=Array.from(document.querySelectorAll(`[mqn2-app-${this.id}]`)),this.moduleElements.length>=1&&(this.addBrowserNames(),this.mounted(),this.moduleElements.forEach(e=>{e.classList.add("ready"),this.setupDynamicCtas(),D.inview(e,{rootMargin:`${window.innerHeight*2}px 0px 0px 0px`},(t,n,s)=>{n.isIntersecting&&(F(t),s())})}))})}mounted(){}handleLeave(){this.moduleElements.length>=1&&this.dispose(),this.moduleElements=[]}setupDynamicCtas(){this.mqnServiceDynamicCtaControllers=this.moduleElements.map(e=>new q(e))}disposeDynamicCtas(){this.mqnServiceDynamicCtaControllers.forEach(e=>{e.dispose()}),this.mqnServiceDynamicCtaControllers=[]}dispose(){this.disposeDynamicCtas()}};var Z=class extends B{constructor(){super("wombat-footnotes");this.populateFootnotes=()=>{this.moduleElements.forEach(e=>{Array.from(e.querySelectorAll("[footnote-id]")).forEach(n=>{let s=n.getAttribute("footnote-id"),r=n.querySelector("sup");if(!r)return;let u=r.textContent.trim();this.updateSuperscripts(s,u)})})}}mounted(){this.populateFootnotes(),window.addEventListener("populateFootnotes",this.populateFootnotes)}updateSuperscripts(e,t){let n=`[data-footnote="${e}"], [mqn-dynamic-footnote="${e}"]`;Array.from(document.querySelectorAll(n)).forEach(s=>{this.updateSuperscript(s,e,t)})}updateSuperscript(e,t,n){let s="footnote:"+t,r=document.createElement("a");r.classList.add("id-no-nav"),r.setAttribute("aria-describedby",s),r.href="#"+s,r.innerText=n,e.textContent="",e.appendChild(r);let u=e.previousElementSibling;u?.tagName==="SUP"&&!u?.attributes?.length&&u.setAttribute("data-footnote-margin","")}dispose(){super.dispose(),window.removeEventListener("populateFootnotes",this.populateFootnotes)}};new Z;})();
