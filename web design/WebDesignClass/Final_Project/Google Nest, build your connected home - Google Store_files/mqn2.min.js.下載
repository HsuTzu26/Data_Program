(()=>{var kq=Object.create;var wd=Object.defineProperty;var Vq=Object.getOwnPropertyDescriptor;var Bq=Object.getOwnPropertyNames;var Uq=Object.getPrototypeOf,Hq=Object.prototype.hasOwnProperty;var Jx=t=>wd(t,"__esModule",{value:!0});var Gh=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Ze=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),eT=(t,e)=>{Jx(t);for(var r in e)wd(t,r,{get:e[r],enumerable:!0})},qq=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Bq(e))!Hq.call(t,n)&&n!=="default"&&wd(t,n,{get:()=>e[n],enumerable:!(r=Vq(e,n))||r.enumerable});return t},re=t=>qq(Jx(wd(t!=null?kq(Uq(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var xl=Ze(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});var El=class{static easeInSine(e){return e==0||e==1?e:1-Math.cos(e*(Math.PI/2))}static easeOutSine(e){return e==0||e==1?e:Math.sin(e*(Math.PI/2))}static easeInOutSine(e){return e==0||e==1?e:-.5*(Math.cos(Math.PI*e)-1)}static easeInQuad(e){return e==0||e==1?e:e*e}static easeOutQuad(e){return e==0||e==1?e:e*(2-e)}static easeInCubic(e){return e==0||e==1?e:e*e*e}static easeInOutQuad(e){return e==0||e==1?e:e<.5?2*e*e:-1+(4-2*e)*e}static easeOutCubic(e){return e==0||e==1?e:--e*e*e+1}static easeInOutCubic(e){return e==0||e==1?e:e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}static easeInQuart(e){return e==0||e==1?e:e*e*e*e}static easeOutQuart(e){return e==0||e==1?e:1- --e*e*e*e}static easeInOutQuart(e){return e==0||e==1?e:e<.5?8*e*e*e*e:1-8*--e*e*e*e}static easeInQuint(e){return e==0||e==1?e:e*e*e*e*e}static easeOutQuint(e){return e==0||e==1?e:1+--e*e*e*e*e}static easeInOutQuint(e){return e==0||e==1?e:e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}static easeInExpo(e){return e==0||e==1?e:Math.pow(2,10*(e-1))}static easeOutExpo(e){return e==0||e==1?e:1-Math.pow(2,-10*e)}static easeInOutExpo(e){return e==0||e==1?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(2-Math.pow(2,-10*(e*2-1)))}static easeInCirc(e){return e==0||e==1?e:1-Math.sqrt(1-e*e)}static easeOutCirc(e){return e==0||e==1?e:Math.sqrt(1-(e-1)*(e-1))}static easeInOutCirc(e){return e==0||e==1?e:e<.5?-.5*(Math.sqrt(1-e*e*4)-1):.5*(Math.sqrt(1-4*(e-1)*(e-1))+1)}static easeInBack(e){return e==0||e==1?e:e*e*(2.70158*e-1.70158)}static easeOutBack(e){return e==0||e==1?e:(e-1)*(e-1)*(2.70158*(e-1)+1.70158)+1}static easeInOutBack(e){return e==0||e==1?e:e<.5?.5*(e*2)*(e*2)*(3.5949095*(e*2)-2.5949095):.5*((e*2-2)*(e*2-2)*(3.5949095*(e*2-2)+2.5949095)+2)}static easeInElastic(e){return e==0||e==1?e:-1*(Math.pow(2,10*(e-1))*Math.sin((e-1.075)*(2*Math.PI)/.3))}static easeOutElastic(e){return e==0||e==1?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}static easeInOutElastic(e){return e==0||e==1?e:e<.5?-.5*(Math.pow(2,10*(e*2-1))*Math.sin((e*2-1.1125)*2*Math.PI/.45)):.5*Math.pow(2,-10*(e*2-1))*Math.sin((e*2-1.1125)*2*Math.PI/.45)+1}static easeInBounce(e){return e==0||e==1?e:1-El.easeOutBounce(1-e)}static easeOutBounce(e){return e==0||e==1?e:e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-1.5/2.75)*(e-1.5/2.75)+.75:e<2.5/2.75?7.5625*(e-2.25/2.75)*(e-2.25/2.75)+.9375:7.5625*(e-2.625/2.75)*(e-2.625/2.75)+.984375}static easeInOutBounce(e){return e==0||e==1?e:e<.5?El.easeInBounce(e*2)*.5:El.easeOutBounce(e*2-1)*.5+.5}static linear(e){return e}};vy.EASE=El});var ui=Ze(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});var tT=xl(),Je=class{static absZero(e){return e==-0?0:e}static fixDigits(e,r){return+parseFloat(e).toFixed(r)}static int(e){return Je.fixDigits(e,0)}static int0(e){return e>>0}static flipCoin(){return Je.getRandomInt(0,1)}static getRandomFloat(e,r){return Math.random()*(r-e)+e}static getRandomInt(e,r){return Math.floor(Math.random()*(r-e+1))+e}static getUniqueRandomInt(e,r,n){let s=Je.getRandomInt(e,r);return s==n?Je.getUniqueRandomInt(e,r,n):s}static clamp(e,r,n){return Math.min(Math.max(n,e),r)}static childProgress(e,r,n,s=!1){let o=n-r,a=Je.clamp(0,1,e-r);return s&&(a=e-r),a=a/o,s?a:Je.clampAsPercent(a)}static roundToPrecision(e,r){r=Je.int(r);let n=Math.pow(10,r);return Math.round(e*n)/n}static floorToPrecision(e,r){r=Je.int(r);let n=Math.pow(10,r);return Math.floor(e*n)/n}static ceilToPrecision(e,r){r=Je.int(r);let n=Math.pow(10,r);return Math.ceil(e*n)/n}static toFixed(e,r){return+e.toFixed(r)}static angleRadians(e,r,n,s){return Math.atan2(s-r,n-e)}static angleDegree(e,r,n,s){return Math.atan2(s-r,n-e)*180/Math.PI}static angleDistanceDegree(e,r,n){let s=Je.degreeToRadian(e),o=Je.degreeToRadian(r);n&&(n=Je.degreeToRadian(n));let a=Je.angleDistanceRadian(s,o,n);return Je.radianToDegree(a)}static angleDistanceRadian(e,r,n){n||(n=Math.PI*2);let s=(r-e)%n;return 2*s%n-s}static degreeToRadian(e){return e*(Math.PI/180)}static radianToDegree(e){return e*180/Math.PI}static boxCollision(e,r){return!(e.y+e.height<r.y||e.y>r.y+r.height||e.x+e.width<r.x||e.x>r.x+r.width)}static collisionCircVsBox(e,r){let n=e.x-Math.max(r.x,Math.min(e.x,r.x+r.width)),s=e.y-Math.max(r.y,Math.min(e.y,r.y+r.height));return n*n+s*s<e.radius*e.radius}static collisionPointVersusConvexPolygon(e,r){let n=!1,s=r.length,o=0,a=s-1;for(var l=0;l<s;l++){let h=r[o],f=r[a];var c=h.y>e.y!=f.y>e.y&&e.x<(f.x-h.x)*(e.y-h.y)/(f.y-h.y)+h.x;c&&(n=!n),a=o,o++}return n}static calculate2dPointRotation(e,r,n,s,o){let a=Math.cos(o),l=Math.sin(o),c=a*(n-e)+l*(s-r)+e,h=a*(s-r)-l*(n-e)+r;return{x:c,y:h}}static calculate2dPointRotationWithDistance(e,r,n,s,o,a){var l=o+Math.atan2(s-r,n-e);return n=e+a*Math.cos(l),s=r+a*Math.sin(l),{x:n,y:s}}static distance(e,r,n,s){return Math.sqrt(Math.pow(n-e,2)+Math.pow(s-r,2))}static direction(e,r){return e==r?0:e<r?1:-1}static calculateCenterOffset(e,r){let n=e/2,s=r/2;return n-s}static scaleX(e,r,n){return e*n/r}static scaleY(e,r,n){return n*r/e}static aspectRatio(e){return e.width/e.height}static isBetween(e,r,n,s=!0){let o=Math.min(r,n),a=Math.max(r,n);return s?e>=o&&e<=a:e>o&&e<a}static resizeDimensionalBoxToWidth(e,r){return{width:r,height:Je.scaleY(e.width,e.height,r)}}static resizeDimensionalBoxToHeight(e,r){return{width:Je.scaleX(e.width,e.height,r),height:r}}static clampAsPercent(e){return Je.clamp(0,1,Je.absZero(e))}static clampAsProgress(e){return Je.clampAsPercent(e)}static clamp01(e){return Je.clampAsPercent(e)}static getValueInRangeByProgress(e,r,n){return Je.lerp(r,n,e)}static getProgressInRangeByValue(e,r,n){return Je.clampAsPercent((e-r)/(n-r))}static normalize(e,r,n){return Je.getProgressInRangeByValue(e,r,n)}static lerp(e,r,n){return e+(r-e)*Je.clamp01(n)}static inverseLerp(e,r,n,s=!1){return s?(n-e)/(r-e):Je.clamp01((n-e)/(r-e))}static mix(e,r,n){return e*(1-n)+r*n}static step(e,r){return r>e?1:0}static smoothStep(e,r,n){var s=Math.max(0,Math.min(1,(n-e)/(r-e)));return s*s*(3-2*s)}static interpolateRange(e,r,n,s,o){let a=Je.clampAsProgress(e/(n-r));return Je.lerp(s,o,a)}static sinNormalized(e){return Je.interpolateRange(Math.sin(e)+1,0,2,0,1)}static lerpEase(e,r,n,s=tT.EASE.linear){return n=s(n),Je.lerp(e,r,n)}static damp(e,r,n,s){return Je.lerp(e,r,1-Math.exp(-n*s))}static ease(e,r,n,s=tT.EASE.linear){return Je.lerpEase(e,r,n,s)}static wrap(e,r,n){let s=n-r;return r+((e-r)%s+s)%s}static calculateBackgroundCover(e,r){let n=Je.aspectRatio(e),s=Je.aspectRatio(r),o,a,l;s>=n?(a=e.height,l=e.height/r.height,o=r.width*l):(o=e.width,l=e.width/r.width,a=r.height*l);let c=Math.max(o/r.width,a/r.height),h=Je.absZero(-Math.round((e.height-a)/2)),f=Je.absZero(-Math.round((e.width-o)/2));return{width:Math.round(o),height:Math.round(a),xOffset:f,yOffset:h,scalar:c}}static calculateBackgroundContain(e,r){let n=e.width,s=e.height,o=r.width,a=r.height,l=e.height/r.height,c=e.width/r.width;return Math.min(l,c)}static asymptoticAverage(e,r,n){return e+=(r-e)*n}static smoothStart2(e){return e*e}static smoothStop2(e){return 1-(1-e)*(1-e)}static smoothStart3(e){return e*e*e}static smoothStop3(e){return 1-(1-e)*(1-e)*(1-e)}static smoothStep2(e,r,n){return Je.lerp(Je.smoothStart2(e),Je.smoothStop2(e),r)*n}static sigmoid(e,r){return this.smoothStep2(e,r,e)}static remap(e,r,n,s,o){let a=Je.inverseLerp(n,s,o);return Je.lerp(e,r,a)}};Je.generateRandomPoints=(t,e,r,n,s)=>{let o=[];for(let a=0;a<t;a++)o.push({x:Je.getRandomInt(e,r),y:Je.getRandomInt(n,s)});return o};yy.mathf=Je});var Sd=Ze(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});var rT=class{constructor(){this.resolve=()=>{},this.reject=()=>{},this.complete=!1,this.promise=new Promise((e,r)=>{this.resolve=n=>(this.complete=!0,e(n)),this.reject=n=>(this.complete=!0,r(n))})}getPromise(){return this.complete?new Promise((e,r)=>{e()}):this.promise}};_y.Defer=rT});var fi=Ze(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});var vt=class{static type(e,r){let n=Object.prototype.toString.call(e).slice(8,-1).toLowerCase();return r==n}static boolean(e){return vt.type(e,"boolean")}static array(e){return vt.type(e,"array")}static string(e){return vt.type(e,"string")}static date(e){return vt.type(e,"date")}static number(e){return vt.type(e,"number")}static function(e){return vt.type(e,"function")}static null(e){return vt.type(e,"null")}static undefined(e){return vt.type(e,"undefined")}static defined(e){return!vt.undefined(e)}static regex(e){return vt.type(e,"regexp")}static object(e){return vt.type(e,"object")}static int(e){return vt.number(e)&&e%1==0}static float(e){return vt.number(e)&&!vt.int(e)}static multipleOf(e,r){return vt.number(e)&&e%r==0}static powerOf2(e){return e!==0&&(e&e-1)==0}static even(e){return vt.number(e)&&vt.multipleOf(e,2)}static odd(e){return vt.number(e)&&!vt.even(e)}static nan(e){return e!==e}static mobile(){return vt.ios()||vt.android()}static ios(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)||vt.ipad()}static android(){return/Android/i.test(navigator.userAgent)}static chrome(){return navigator.userAgent.indexOf("Chrome")!=-1&&!vt.edge()}static safari(){return!vt.chrome()&&navigator.userAgent.indexOf("Safari")!=-1&&!vt.edge()}static ipad(){return navigator.userAgent.toLowerCase().indexOf("macintosh")!==-1&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}static edge(){return navigator.userAgent.indexOf("Edge")!=-1}static firefox(){return navigator.userAgent.indexOf("Firefox")!=-1}static ie(){return/MSIE\/\d+/.test(navigator.userAgent)}static ieOrEdge(){return/Edge\/\d+/.test(navigator.userAgent)||/MSIE\/\d+/.test(navigator.userAgent)||/Trident\/\d+/.test(navigator.userAgent)}static chromeOs(){return/\bCrOS\b/.test(navigator.userAgent)}static supportingOffScreenCanvas(){return!!window.OffscreenCanvas}static supportingWebp(){var e=document.createElement("canvas"),r=!1;return e.toDataURL("image/webp")&&(r=e.toDataURL("image/webp").indexOf("data:image/webp")==0),vt.firefox()&&+navigator.userAgent.match(/Firefox\/(.*)/)[1]>=65&&(r=!0),vt.edge()&&+navigator.userAgent.match(/Edge\/(.*)/)[1]>=18&&(r=!0),r}static supportingWebpAsync(){return new Promise((e,r)=>{var n=new Image;n.onload=function(){var s=n.width>0&&n.height>0;e(s)},n.onerror=()=>{e(!1)},n.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="})}static supportingAdvancedCssCalc(){return document.body.style.transitionTimingFunction="cubic-bezier(calc(1 * 1),1,1,1)",getComputedStyle(document.body).transitionTimingFunction!="ease"}static supportingTouch(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch}static supportingDeviceOrientation(){return!!window.DeviceOrientationEvent}static supportingFileApis(){return!!(window.File&&window.FileReader&&window.FileList&&window.Blob)}static supportingCreateImageBitmap(){return!!window.createImageBitmap&&!vt.firefox()}static cssHex(e){return vt.string(e)&&e.startsWith("#")}static cssRgba(e){return vt.string(e)&&e.startsWith("rgba(")}static cssRgb(e){return vt.string(e)&&e.startsWith("rgb(")}static hex(e){var r=parseInt(e,16);return vt.string(e)&&r.toString(16)===e.toLowerCase()}static windowLoaded(){return performance.timing.loadEventEnd!==0}static isGoogleCloudLikeUrl(e){return e.includes("googleusercontent.com")}static isLandscape(){return window.innerWidth>=window.innerHeight}static landscape(){return window.innerWidth<window.innerHeight}static isPortrait(){return window.innerWidth<window.innerHeight}static portrait(){return window.innerWidth<window.innerHeight}static bot(){var e="(googlebot/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)",r=new RegExp(e,"i");return r.test(navigator.userAgent)}};by.is=vt});var la=Ze(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});var iT=fi(),$h=class{static now(){return Date.now()}static timeDiffMs(e,r){return r-e}static isInBetween(e,r,n){return e&&r?n>=e&&n<r:e?n>=e:r?n<r:!1}static utcDateToLocalTimeZone(e){if(iT.is.safari())return e;var r=e.getTimezoneOffset()*6e4;return new Date(e.getTime()-r)}static createLocalTimeZoneDate(e){if(iT.is.safari()){let n=new Date(e);var r=n.getTimezoneOffset()*6e4;return new Date(n.getTime()+r)}else return new Date(e)}static pacificTimeToLocalTimeDate(e){var r=new Date().getTimezoneOffset()*6e4,n=420*6e4,s=r-n;let o=new Date(new Date(e).getTime()+n);return $h.utcDateToLocalTimeZone(o)}static easternTimeToLocalTimeDate(e){var r=new Date().getTimezoneOffset()*6e4,n=240*6e4,s=r-n;let o=new Date(new Date(e).getTime()+n);return $h.utcDateToLocalTimeZone(o)}static countdown(e,r){var n=r.getTime()-e.getTime();return{days:Math.floor(n/(1e3*60*60*24)),hours:Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(n%(1e3*60*60)/(1e3*60)),seconds:Math.floor(n%(1e3*60)/1e3)}}};wy.time=$h});var Gi=Ze(jh=>{"use strict";var Wq=jh&&jh.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(s,o){function a(h){try{c(n.next(h))}catch(f){o(f)}}function l(h){try{c(n.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):new r(function(f){f(h.value)}).then(a,l)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(jh,"__esModule",{value:!0});var Tl=la(),Ed=class{static debounce(e,r,n){let s;return function(...o){let a=this;var l=()=>{s=void 0,e.apply(a,o)},c=()=>{s=void 0};!n&&s===void 0&&(s=+setTimeout(l,r)),n&&s==null&&(e.apply(a,o),s=+setTimeout(c,r))}}static throttle(e,r){return Ed.debounce(e,r,!0)}static wait(e){return Wq(this,void 0,void 0,function*(){return new Promise(r=>setTimeout(r,e))})}static waitUntil(e,r=0,n=100){let s=Tl.time.now(),o,a,l=new Promise((h,f)=>{o=h,a=f}),c=()=>{let h=Tl.time.timeDiffMs(s,Tl.time.now());e()?o():r&&h>r?a("Wait until timed out"):setTimeout(c,n)};return c(),l}static repeatUntil(e,r,n=0,s=100){let o=Tl.time.now(),a,l,c=new Promise((f,u)=>{a=f,l=u}),h=()=>{let f=Tl.time.timeDiffMs(o,Tl.time.now());e()?a():n&&f>n?l("Wait until timed out"):(r(),setTimeout(h,s))};return h(),c}static memoizeSimple(e){let r=null,n=null;return(...s)=>{let o=JSON.stringify(s);return o==n?r:(n=o,r=e.apply(null,s))}}static memoize(e){let r={};return(...n)=>{let s=JSON.stringify(n);return r[s]?r[s]:r[s]=e.apply(null,n)}}static runOnceOnChange(e){let r=null,n=null;return(...s)=>{let o=JSON.stringify(s);if(o!==n)return n=o,r=e.apply(null,s)}}static setDefault(e,r){return Object.is(e,void 0)?r:e}static times(e,r){[...Array(e)].forEach((n,s)=>{r(s)})}};jh.func=Ed});var Ey=Ze(Sy=>{"use strict";Object.defineProperty(Sy,"__esModule",{value:!0});var un=fi(),nT=class{static smartResize(e,r){let n=0,s=o=>{let a=window.innerWidth;(!un.is.mobile()||n!==a)&&(e(o),n=a)};return window.addEventListener("resize",s,r),()=>{window.removeEventListener("resize",s)}}static appendBrowserNameToElement(e){let r={ieOrEdge:un.is.ieOrEdge,edge:un.is.edge,ie:un.is.ie,mobile:un.is.mobile,safari:un.is.safari,chrome:un.is.chrome,chromeOs:un.is.chrome,firefox:un.is.firefox,ios:un.is.ios,ipad:un.is.ipad};for(let n in r)r[n]()&&e.classList.add(n)}};Sy.bom=nT});var yt=Ze(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});var Gq=Ey(),sT=class{constructor(){this.watcherConfigs=[]}add(e){let r=n=>{e.runWhen?e.runWhen()&&e.callback(n):e.callback(n)};e.listener=r,e.on=="smartResize"?e.remover=Gq.bom.smartResize(r,e.eventOptions||{}):(e.element.addEventListener(e.on,r,e.eventOptions||{}),e.remover=()=>{e.element.removeEventListener(e.on,r)}),this.watcherConfigs.push(e)}removeById(e){this.watcherConfigs=this.watcherConfigs.filter(r=>{if(r.id&&r.id==e){let n=r.remover;n&&n()}else return r})}removeAll(){this.watcherConfigs.forEach(e=>{let r=e.remover;r&&r()}),this.watcherConfigs=[]}run(e){this.watcherConfigs.filter(n=>n.id&&n.id==e).forEach(n=>{n.callback()&&n.callback()})}dispose(){this.removeAll()}};xy.DomWatcher=sT});var vs=Ze(Ty=>{"use strict";Object.defineProperty(Ty,"__esModule",{value:!0});var oT=ui(),$q=Sd(),jq=Gi(),Yh=fi(),Yq=yt(),fn=class{static getElementScrolledPercent(e,r=0,n=0,s=!1){let o=e.getBoundingClientRect(),c=(window.innerHeight-(o.top+r))/(o.height-r+n);return s?c:oT.mathf.clampAsPercent(c)}static getScrollYAtPercent(e,r=0,n=0,s){let o=window.innerHeight,a=fn.getScrollTop(e),l=a-o+r,c=a-o+e.offsetHeight+n;return oT.mathf.lerp(l,c,s)}static setCssVariable(e,r,n){if(!e)throw new Error("You need specificy a valid element to apply a css variable");e.style.setProperty(r,n)}static setCssVariables(e,r){for(let n in r)e.style.setProperty(n,r[n])}static addStyles(e,r){for(var n in r)n.startsWith("--")&&fn.setCssVariable(e,n,r[n]);Object.assign(e.style,r)}static testDescendant(e,r){for(var n=e.parentNode;n;){if(n==r)return!0;n=n.parentNode}return!1}static testVideoIsPlaying(e){return!e.paused&&!e.ended&&e.readyState>2}static resetAllVideosInElement(e){[...e.querySelectorAll("video")].forEach(n=>{n.currentTime=0})}static pauseAllVideosInElement(e,r=!1){[...e.querySelectorAll("video")].forEach(s=>{r&&(s.currentTime=0),s.pause()})}static playAllVideosInElement(e,r=!1){[...e.querySelectorAll("video")].forEach(s=>{r&&(s.currentTime=0),fn.testVideoIsPlaying(s)||s.play().then(()=>{}).catch(a=>{})})}static whenVideosLoadedInElement(e,r=1e4){let n=[...e.querySelectorAll("video")];return this.whenVideosLoaded(n)}static whenVideosLoaded(e,r=1e4){let n=[];return e.forEach(s=>{let o=new $q.Defer;n.push(o.getPromise()),jq.func.waitUntil(()=>s.readyState==4,r,10).then(()=>{o.resolve()})}),Promise.all(n)}static event(e,r,n){var s=new CustomEvent(r,{detail:n});e.dispatchEvent(s)}static createElementFromString(e){var r=document.createElement("div");return r.innerHTML=e.trim(),r.firstChild}static removeElement(e){e.parentNode.removeChild(e)}static runAfterWindowLoad(e){window.setTimeout(()=>{Yh.is.windowLoaded()?e():window.addEventListener("load",()=>{e()},{once:!0})})}static runAfterNotTopOfScreen(e){window.scrollY!==0?e():window.addEventListener("scroll",()=>{e()},{once:!0,passive:!0})}static aspect(){return window.innerWidth/window.innerHeight}static getComputedStyle(e){return window.getComputedStyle(e)}static fetchAndMakeImage(e){return new Promise(r=>{fetch(e).then(n=>n.blob()).then(n=>{let s=n,o=document.createElement("img");o.decoding="async",o.onload=()=>{r(o)},o.src=URL.createObjectURL(s)})})}static makeImageFromBlob(e){return new Promise(r=>{let n=document.createElement("img");n.decoding="async",n.onload=()=>{n.onload=null,r(n)},n.src=URL.createObjectURL(e)})}static makeBase64ImageFromBlob(e){return new Promise(r=>{let n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",()=>{let s=document.createElement("img");s.src=n.result,s.onload=()=>{s.onload=null,r(s)}},{once:!0})})}static copyBase64Image(e){return new Promise(r=>{let n=document.createElement("img");n.src=e.src,n.onload=()=>{n.onload=null,r(n)}})}static deleteImage(e){e&&(e.src&&(e.src.startsWith("blob:")||e.src.startsWith("data:"))&&(URL.revokeObjectURL(e.src),e.src=""),e=null)}static flushVideos(e,r=""){let n=[...e.querySelectorAll("video")];n.forEach(s=>{let o=[...s.querySelectorAll("source")];o.forEach(a=>{let l=a.getAttribute(r)||a.src;a.setAttribute("data-video-src",l),a.removeAttribute("src"),a=null}),o=null,s.load()}),n=null}static unflushVideos(e,r=!1){let n=[...e.querySelectorAll("video")];n.forEach(s=>{let o=[...s.querySelectorAll("source")];o.forEach(a=>{if(!a.hasAttribute("data-video-src"))return;let l=a.getAttribute("data-video-src");a.setAttribute("src",l)}),o=null,s.load()}),n=null,r||fn.playAllVideosInElement(e)}static getScrollTop(e,r=!1){return e?r&&e.offsetParent?e.getBoundingClientRect().top-e.offsetParent.getBoundingClientRect().top+window.scrollY:e.getBoundingClientRect().top+window.scrollY:0}static forceFocus(e){fn.resetForceFocus();let r=e.getAttribute("tabindex");Yh.is.defined(r)&&!Yh.is.null(r)?e.setAttribute("forcetabindex",r):e.setAttribute("forcetabindex","none"),e.setAttribute("tabindex","-1"),e.focus()}static resetForceFocus(){Array.from(document.querySelectorAll("[forcetabindex]")).forEach(r=>{let n=r.getAttribute("forcetabindex");Yh.is.defined(n)&&!Yh.is.null(n)&&n!=="none"?r.setAttribute("tabindex",n):r.removeAttribute("tabindex"),r.removeAttribute("forcetabindex")})}static forceVOFocus(e,r=10,n=10){var s=r,o=n;e.setAttribute("tabindex","0"),e.blur();var a=0,r=window.setInterval(function(){e.focus(),a++,a>=o&&window.clearInterval(r)},s)}static getStyle(e){return e.currentStyle||window.getComputedStyle(e)}static isDisplayNone(e){return window.getComputedStyle(e).display=="none"}static isDisplayNoneWithAncestors(e){let r=fn.isDisplayNone(e);for(;e=e.parentElement;)r||(r=fn.isDisplayNone(e));return r}static removeClassByPrefix(e,r){var n=new RegExp("\\b"+r+".*?\\b","g");return e.className=e.className.replace(n,""),e}static getAllTextNodes(e){for(var r,n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);r=s.nextNode();)n.push(r);return n}static appendAfter(e,r){r.parentNode.insertBefore(e,r.nextSibling)}static disableScrolling(){let e=n=>{n.preventDefault()},r=new Yq.DomWatcher;return r.add({element:window,on:"wheel",callback:e,eventOptions:{passive:!1}}),r.add({element:window,on:"touchmove",callback:e,eventOptions:{passive:!1}}),()=>{r.dispose()}}static unorphan(e,r=!1){let n=fn.getAllTextNodes(e);r&&(n=[n[n.length-1]]);var s="\xA0";n.forEach(o=>{o.nodeValue=o.nodeValue.replace(/\s+([^\s]*)\s*$/,s+"$1")})}static getScrollElement(){return document.scrollingElement||document.documentElement}};Ty.dom=fn});var Et=Ze(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});var Xq=Sd(),aT=class{static inview(e,r={},n){let s=[],o=null,a=null,l=!1,c=new Xq.Defer,h=()=>({changes:s,lastChange:o,inview:a,ready:l}),f=v=>{v.length>=1&&(s=v,o=v.slice(-1)[0],a=o.isIntersecting,l=!0,c.resolve()),n&&n(e,v.slice(-1)[0],m)},u=window.location.search.split("evBypass=")[1];if(u=u&&u.split("&")[0],u=="true")return window.setTimeout(()=>{n&&n(e,{isIntersecting:!0,isVisible:!0},()=>{}),c.resolve()}),{observer:null,dispose:()=>{},state:()=>({ready:!0,inview:!0}),readyPromise:c.getPromise()};let m=()=>{d&&d.unobserve(e),d&&d.disconnect(),s=[],o=null},d=new IntersectionObserver(f,r);return d.observe(e),{observer:d,dispose:m,state:h,readyPromise:c.getPromise()}}};Ay.elementVisibility=aT});var ha=Ze(Cy=>{"use strict";Object.defineProperty(Cy,"__esModule",{value:!0});var My=la(),Zq=Et(),lT=class{constructor(e){this.isReadWriteOnly=!1,this.callbacks=[],this.isDisposed=!1,this.raf_=null,this.frame=null,this.lastUpdateTime=0,this.fps=0,this.currentFps=0,this.isPlaying=!1,this.isRunningRaf=!1,this.callbacks=[],this.runCondition=null,this.delta=0,this.elaspedTime=0,this.startTime=0,e?this.watch(e):this.isReadWriteOnly=!0,window.YANO_RAF_REGISTRY&&window.YANO_RAF_REGISTRY.register(this)}watch(e){this.callbacks.push(e)}setReadWriteMode(e){this.isReadWriteOnly=e}preRead(e){window.YANO_RAF_REGISTRY&&window.YANO_RAF_REGISTRY.addOneTimePreRead({callback:e,raf:this})}read(e){window.YANO_RAF_REGISTRY&&window.YANO_RAF_REGISTRY.addOneTimeRead({callback:e,raf:this})}write(e){window.YANO_RAF_REGISTRY&&window.YANO_RAF_REGISTRY.addOneTimeWrite({callback:e,raf:this})}postWrite(e){window.YANO_RAF_REGISTRY&&window.YANO_RAF_REGISTRY.addOneTimePostWrite({callback:e,raf:this})}unwatch(e){this.callbacks=this.callbacks.filter(r=>r==e)}runWhen(e){this.runCondition=e}runWhenElementIsInview(e,r){return this.ev&&this.ev.dispose(),this.runCondition=null,this.ev=Zq.elementVisibility.inview(e,r||{}),this.runWhen(()=>this.ev.state().inview),this.ev.readyPromise}setFps(e){this.fps=e}start(e=!1){!e&&this.isPlaying||(this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.animationLoop_(),this.isPlaying=!0)}stop(){this.isPlaying=!1,window.cancelAnimationFrame(this.raf_),this.isRunningRaf=!1}dispose(){this.ev&&this.ev.dispose(),this.callbacks=null,this.isDisposed=!0,this.stop(),window.YANO_RAF_REGISTRY&&window.YANO_RAF_REGISTRY.unregister(this)}getDelta(e){return e?this.delta/1e3:this.delta}getElapsedTime(){return this.elaspedTime}getStartTime(){return this.startTime}getCurrentFps(){return this.currentFps}animationLoop_(){if(!this.isRunningRaf){if(this.raf_=window.requestAnimationFrame(e=>{this.frame=e,this.isRunningRaf=!1,this.animationLoop_()}),this.isRunningRaf=!0,this.lastUpdateTime){let r=My.time.now()-this.lastUpdateTime;this.delta=r,this.elaspedTime+=r/1e3;let n=this.fps==0?0:1e3/this.fps;this.currentFps=1e3/r,r>n&&(this.callbacks&&this.callbacks.forEach(s=>{let o=()=>{s(this.frame,this.lastUpdateTime,r,()=>{this.stop()})};this.runCondition?this.runCondition()&&o():o()}),this.lastUpdateTime=My.time.now())}this.lastUpdateTime||(this.lastUpdateTime=My.time.now())}}};Cy.Raf=lT;var ca=class{constructor(){this.preReads=[],this.reads=[],this.writes=[],this.postWrites=[],this.rafs=[]}static runRafCallbacks(e){for(;e.length;){let r=e.splice(0,1)[0];!r.raf.isDisposed&&(r.raf.isPlaying||r.raf.isReadWriteOnly)&&r.callback()}}start(){this.flushScheduled||(this.flushScheduled=!0,requestAnimationFrame(()=>{this.runRaf()}))}runRaf(){window.YANO_RAF_REGISTRY_DEBUG&&console.log("Running raf",this.reads.length,this.writes.length),ca.runRafCallbacks(this.preReads),ca.runRafCallbacks(this.reads),ca.runRafCallbacks(this.writes),ca.runRafCallbacks(this.postWrites),this.flushScheduled=!1}addOneTimePreRead(e){this.preReads.push(e),this.start()}addOneTimeRead(e){this.reads.push(e),this.start()}addOneTimeWrite(e){this.writes.push(e),this.start()}addOneTimePostWrite(e){this.postWrites.push(e),this.start()}getActiveRafCount(){return this.rafs.filter(e=>e.isPlaying).length}getRafCount(){return this.rafs.length}register(e){this.rafs.push(e)}unregister(e){this.rafs=this.rafs.filter(r=>r==e)}};window&&!window.YANO_RAF_REGISTRY&&(window.YANO_RAF_REGISTRY=new ca)});var Iy=Ze(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});var Mi=ui(),cT=fi(),Qq=ha(),hT=Ye(),uT=class{constructor(e){this.currentProgress=0,this.precision=10,this.easeAmount=1,this.damp=1,this.rangeWatchers=[],this.callbacks=[],this.targetProgress=this.currentProgress,this.easingFunction=hT.EASE.linear,e&&this.watch(e),this.raf=new Qq.Raf(()=>{this.rafLoop()})}stop(){this.raf.stop()}setFps(e){this.raf.setFps(e)}run(){this.raf.start()}setPrecision(e){this.precision=e}watch(e){this.callbacks.push(e)}unwatch(e){this.callbacks=this.callbacks.filter(r=>r==e)}watchFor(e,r){this.rangeWatchers.push({range:e,callback:r})}unwatchFor(e){this.rangeWatchers=this.rangeWatchers.filter(r=>r.callback!==e)}rafLoop(){let e=this.currentProgress;cT.is.null(this.damp)?this.currentProgress=Mi.mathf.ease(this.currentProgress,this.targetProgress,this.easeAmount,this.easingFunction):this.currentProgress=Mi.mathf.damp(this.currentProgress,this.targetProgress,this.easeAmount,this.damp),this.currentProgress=Mi.mathf.toFixed(this.currentProgress,this.precision),this.currentProgress<.5?this.currentProgress=Mi.mathf.floorToPrecision(this.currentProgress,this.precision-1):this.currentProgress=Mi.mathf.ceilToPrecision(this.currentProgress,this.precision-1),this.direction=Mi.mathf.direction(e,this.currentProgress),this.callbacks.forEach(r=>{r(this.currentProgress,this.direction)}),this.rangeWatchers.forEach(r=>{let n=!1;cT.is.array(r.range)?n=Mi.mathf.isBetween(this.currentProgress,r.range[0],r.range[1]):n=Mi.mathf.isBetween(r.range,this.currentProgress,e),n&&r.callback(this.currentProgress,this.direction)}),e==this.currentProgress&&this.raf.stop()}setCurrentProgress(e,r=!0){this.currentProgress=r?e:Mi.mathf.clampAsProgress(e),this.targetProgress=this.currentProgress,this.easeAmount=1,this.raf.start()}easeTo(e,r,n=hT.EASE.linear,s=!1){this.targetProgress=s?e:Mi.mathf.clampAsProgress(e),this.easeAmount=Mi.mathf.clampAsPercent(r),this.easingFunction=n,this.damp=null,this.raf.start(!0)}dampTo(e,r,n,s=!1){this.targetProgress=s?e:Mi.mathf.clampAsProgress(e),this.easeAmount=Mi.mathf.clampAsPercent(r),this.easingFunction=null,this.damp=n,this.raf.start(!0)}getLerpDelta(){return this.targetProgress-this.currentProgress}getScrollDirection(){return this.direction}dispose(){this.raf.dispose(),this.callbacks=[],this.rangeWatchers=[]}};Py.RafProgress=uT});var Td=Ze(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0});var xd=la(),Kq=ui(),Jq=ha(),fT=class{constructor(e){this.rafLoop=e,this.raf=new Jq.Raf(()=>{this.animationLoop_()}),this.duration=0,this.progress=0,this.timeElapsed=0,this.timeSnapshot=0,this.playing=!1,this.completeCallback=null}animationLoop_(){if(!this.playing)return;let e=xd.time.timeDiffMs(this.timeSnapshot,xd.time.now());this.timeElapsed+=e,this.progress=Kq.mathf.clampAsPercent(this.timeElapsed/this.duration),this.timeSnapshot=xd.time.now(),this.progress<1?this.rafLoop&&this.rafLoop(this.progress):(this.rafLoop&&this.rafLoop(1),this.reset(),this.raf.stop(),this.completeCallback&&this.completeCallback(1))}setDuration(e){this.duration=e}setFps(e){this.raf.setFps(e)}onComplete(e){this.completeCallback=e}play(){this.playing||(this.playing=!0,this.timeSnapshot=xd.time.now(),this.raf.start())}reset(){this.playing=!1,this.raf.stop(),this.timeElapsed=0}pause(){this.raf.stop(),this.playing=!1}dispose(){this.raf.dispose()}};Ry.RafTimer=fT});var Md=Ze(Oy=>{"use strict";Object.defineProperty(Oy,"__esModule",{value:!0});var ao=ui(),Ly=Ye(),Ad=class{constructor(){}static hexToRgbNormalized(e){let r=[];return r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,r}static colorRgbToRgb(e){return[e.r,e.g,e.b]}static normalizedRgbToHex(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}static rgbToNormalizedRgb(e){return[e[0]/255,e[1]/255,e[2]/255]}static normalizedRgbToRgb(e){return[e[0]*255>>0,e[1]*255>>0,e[2]*255>>0]}static rgbaLerp(e,r,n){return{r:ao.mathf.lerp(e.r,r.r,n)>>0,g:ao.mathf.lerp(e.g,r.g,n)>>0,b:ao.mathf.lerp(e.b,r.b,n)>>0,a:ao.mathf.lerp(e.a,r.a,n)}}static rgbaEase(e,r,n,s){return{r:ao.mathf.ease(e.r,r.r,n,s)>>0,g:ao.mathf.ease(e.g,r.g,n,s)>>0,b:ao.mathf.ease(e.b,r.b,n,s)>>0,a:ao.mathf.ease(e.a,r.a,n,s)}}static rgbToHex(e){let r=e.r,n=e.g,s=e.b;return"#"+((1<<24)+(r<<16)+(n<<8)+s).toString(16).slice(1).toUpperCase()}static hexToRgba(e,r=1){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(n,function(a,l,c,h){return l+l+c+c+h+h});var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),o=null;return s&&(o={r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16),a:r}),o}static cssToRgba(e){if(Ly.is.cssHex(e))return Ad.hexToRgba(e);if(Ly.is.cssRgb(e)&&(e=e.replace(")",",1)"),e=e.replace("rgb","rgba")),Ly.is.cssRgba(e)){var r=e.match(/^rgba\(\s*?(\d{1,3})\s*?,\s*?(\d{1,3})\s*?,\s*?(\d{1,3})\s*?,\s*?(\d*(?:\.\d+)?)\)$/);return r?{r:+r[1],g:+r[2],b:+r[3],a:+r[4]}:null}return null}static rgbaToCss(e){return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}};Oy.color=Ad});var ua=Ze(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});var Dy=fi(),Fy=Md(),ys;(function(t){t.number="num",t.unit="unit",t.cssHex="cssHex",t.rgba="rgba",t.rgb="rgb"})(ys=Xh.CssUnitObjectTypes||(Xh.CssUnitObjectTypes={}));var dT=class{static parse(e){let r=e.replace(/[a-zA-Z%]+/g,""),n=e.match(/[a-zA-Z%]+/g),s={value:null,unit:null,type:null,valueType:null,originalValue:e};return Dy.is.cssRgba(e)?(s.type=ys.rgba,s.value=Fy.color.cssToRgba(e),s.valueType=ys.rgba):Dy.is.cssRgb(e)?(s.type=ys.rgb,s.value=Fy.color.cssToRgba(e),s.valueType=ys.rgba):Dy.is.cssHex(e)?(s.value=Fy.color.cssToRgba(e),s.type=ys.cssHex,s.valueType=ys.rgba):(s.value=r?+r:null,s.unit=n?n[0]:null,s.type=ys.unit,s.valueType=ys.number),s.originalValue=e,s}};Xh.cssUnit=dT});var ky=Ze(Ny=>{"use strict";Object.defineProperty(Ny,"__esModule",{value:!0});var pT=ui(),ez=fi(),mT=Md(),Cd=ua(),Pd=class{constructor(e){this.interpolateConfig=e,this.currentValue=0,this.currentProgress=0,this.calculate(0)}modify(e){return new Pd(e)}calculate(e){if(this.currentProgress=e,ez.is.number(this.interpolateConfig.from))this.currentValue=pT.mathf.ease(this.interpolateConfig.from,this.interpolateConfig.to,this.currentProgress,this.interpolateConfig.easeFunction);else{let r=Cd.cssUnit.parse(this.interpolateConfig.from),n=Cd.cssUnit.parse(this.interpolateConfig.to);if(r.valueType==Cd.CssUnitObjectTypes.number&&(this.currentValue=pT.mathf.ease(r.value,n.value,this.currentProgress,this.interpolateConfig.easeFunction),this.currentValue=`${this.currentValue}${r.unit}`),r.valueType==Cd.CssUnitObjectTypes.rgba){let s=mT.color.rgbaEase(r.value,n.value,this.currentProgress,this.interpolateConfig.easeFunction);this.currentValue=mT.color.rgbaToCss(s)}}return this.currentValue}};Ny.Interpolate=Pd});var Id=Ze(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});var gT=ui(),tz=xl(),rz=ky();lo.multiInterpolateHelper={errors:{FROM_TO_EQUAL:"Range progress from and to values should not equal each other.",FROM_GREATER:"Range progress from greater than the value of to"},checkInvalidRangedProgresses:t=>{t.forEach(e=>{if(e.from==e.to)throw console.error(e),new Error(lo.multiInterpolateHelper.errors.FROM_TO_EQUAL);if(e.from>e.to)throw console.error(e),new Error(lo.multiInterpolateHelper.errors.FROM_GREATER)})},findBestMatchingRangedProgress(t,e){let r=e[0];return e.forEach(n=>{let s=r;r.to<=t&&(r=n),r.from>t&&(r=s)}),r}};var vT=class{constructor(e){this.interpolations=Object,this.parentProgress=0,this.currentValues={},this.config=e,this.updateConfig(this.config)}updateConfig(e){if(this.config=this.createStaggers(e),!this.config.interpolations)throw new Error("Multiinterpolation config is missing interpolations");this.config.interpolations=this.config.interpolations.map(r=>(lo.multiInterpolateHelper.checkInvalidRangedProgresses(r.progress),r))}createStaggers(e){let r=[];return[...e.interpolations].forEach(n=>{if(n.stagger&&!n.staggerItem)for(var s=0;s<n.stagger.count;s++){let o=Object.assign({},n);o.progress=o.progress.map(a=>(a=Object.assign({},a),a.to+=s*n.stagger.progressOffset,a.from+=s*n.stagger.progressOffset,o.id=n.id+"-"+s,o.stagger=null,o.staggerItem=!0,a)),r.push(o)}}),r.forEach(n=>{e.interpolations.push(n)}),e}getCalculations(){return this.currentValues}calculate(e){this.parentProgress=e;let r=this.currentValues;return this.config.interpolations.forEach(n=>{let s=lo.multiInterpolateHelper.findBestMatchingRangedProgress(this.parentProgress,n.progress),o=gT.mathf.childProgress(this.parentProgress,s.from,s.to);if(n.noInterpolation){if(!n.noInterpolationDefault)throw new Error("You are using noInterpolation without a noInterpolation default");gT.mathf.isBetween(this.parentProgress,s.from,s.to,!0)?this.currentValues[n.id]=s.end:this.currentValues[n.id]=n.noInterpolationDefault}else{let a=new rz.Interpolate({from:s.start,to:s.end,easeFunction:s.easingFunction||tz.EASE.linear}).calculate(o);this.currentValues[n.id]=a}n.onUpdate&&n.onUpdate(n.id,this.parentProgress,this.currentValues[n.id])}),this.currentValues}};lo.MultiInterpolate=vT});var yT=Ze(Vy=>{"use strict";Object.defineProperty(Vy,"__esModule",{value:!0});var Rd=class{static deepCopy(e){let r,n,s;if(typeof e!="object"||e===null)return e;r=Array.isArray(e)?[]:{};for(s in e)n=e[s],r[s]=typeof n=="object"&&n!==null?Rd.deepCopy(n):n;return r}static max(e,r){let n,s=Number.NEGATIVE_INFINITY;return e.forEach(o=>{let a=r(o);s<a&&(n=o,s=a)}),n}};Vy.arrayf=Rd});var Uy=Ze(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0});var iz=yT(),_T=class{static deepCopy(e){return iz.arrayf.deepCopy(e)}static jsonCopy(e){return JSON.parse(JSON.stringify(e))}static areEqual(e,r){var n=Object.getOwnPropertyNames(e),s=Object.getOwnPropertyNames(r);if(n.length!=s.length)return!1;for(var o=0;o<n.length;o++){var a=n[o];if(e[a]!==r[a])return!1}return!0}static copy(e){return Object.assign({},e)}static forEach(e,r){Object.entries(e).forEach(([n,s])=>{r(n,s)})}};By.objectf=_T});var Ci=Ze(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});var bT=ui(),wT=Id(),nz=Et(),ST=vs(),sz=fi(),oz=ua(),ET=Uy(),xT=class{constructor(e,r){this.element=e,this.config=r,this.mainProgress=null,this.currentValues={},this.renderSubPixels=!0,r?this.multiInterpolate=new wT.MultiInterpolate(r):this.multiInterpolate=null,this.elementVisibility=nz.elementVisibility.inview(this.element),this.runOnceAfterOutView=!0,this.renderOnlyWhenInview=!0,this.ranOutViewUpdate=!1,this.batchUpdate=!1,this.precision=4,this.noWrite=!1,this.startProgress=0,this.endProgress=1}setInterpolations(e){e&&(this.multiInterpolate=new wT.MultiInterpolate(e))}setPrecision(e){this.precision=e}flush(){this.mainProgress=null}useSubPixelRendering(e){this.renderSubPixels=e}useNoWrite(e){this.noWrite=e}useBatchUpdate(e){this.batchUpdate=e}renderOutview(e){this.renderOnlyWhenInview=!e}update(e,r=!1){if(!!this.multiInterpolate&&!(!r&&e==this.mainProgress)){if(this.renderOnlyWhenInview&&this.elementVisibility.state().ready&&!this.elementVisibility.state().inview){this.runOnceAfterOutView&&!this.ranOutViewUpdate&&(this.ranOutViewUpdate=!0,this.updateValues(e>=.5?1:0));return}this.ranOutViewUpdate=!1,this.updateValues(e)}}updateValues(e){if(!this.multiInterpolate)return;let r=bT.mathf.toFixed(e,this.precision);if(this.mainProgress==r)return;this.mainProgress=bT.mathf.childProgress(r,this.startProgress,this.endProgress,!0);let n=ET.objectf.jsonCopy(this.currentValues);if(this.currentValues=this.multiInterpolate.calculate(this.mainProgress),!ET.objectf.areEqual(n,this.currentValues)&&!this.noWrite){for(var s in this.currentValues){if(!this.renderSubPixels&&sz.is.string(this.currentValues[s])){let o=oz.cssUnit.parse(this.currentValues[s]);o.unit=="px"&&(this.currentValues[s]=(o.value>>0)+"px")}this.batchUpdate||ST.dom.setCssVariable(this.element,s,this.currentValues[s])}this.batchUpdate&&ST.dom.setCssVariables(this.element,this.currentValues)}}setProgressRange(e,r){this.startProgress=e,this.endProgress=r}getValues(){return this.currentValues}};Hy.CssVarInterpolate=xT});var Ye=Ze(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var az=vs();Nr.dom=az.dom;var lz=yt();Nr.DomWatcher=lz.DomWatcher;var cz=Ey();Nr.bom=cz.bom;var hz=ui();Nr.mathf=hz.mathf;var uz=fi();Nr.is=uz.is;var fz=Gi();Nr.func=fz.func;var dz=la();Nr.time=dz.time;var pz=ha();Nr.Raf=pz.Raf;var mz=Iy();Nr.RafProgress=mz.RafProgress;var gz=Td();Nr.RafTimer=gz.RafTimer;var vz=ky();Nr.Interpolate=vz.Interpolate;var yz=Ci();Nr.CssVarInterpolate=yz.CssVarInterpolate;var _z=Id();Nr.MultiInterpolate=_z.MultiInterpolate;var bz=xl();Nr.EASE=bz.EASE});var Nn=Ze((Dee,PT)=>{var Ml=function(t){this.rafLoop=t,this.raf_=null,this.frame=null,this.lastUpdateTime=0,this.fps=0,this.playing=!1};Ml.prototype.setRafLoop=function(t){this.rafLoop=t};Ml.prototype.setFps=function(t){this.fps=t};Ml.prototype.start=function(){this.playing||(this.animationLoop_(),this.playing=!0)};Ml.prototype.animationLoop_=function(){if(this.raf_=window.requestAnimationFrame(function(t){this.frame=t,this.animationLoop_()}.bind(this)),this.lastUpdateTime){let e=Date.now()-this.lastUpdateTime,r=this.fps==0?0:1e3/this.fps;e>r&&(this.rafLoop(this.frame,this.lastUpdateTime,e,()=>{this.stop()}),this.lastUpdateTime=Date.now())}this.lastUpdateTime||(this.lastUpdateTime=Date.now())};Ml.prototype.stop=function(){this.playing=!1,window.cancelAnimationFrame(this.raf_)};PT.exports=Ml});var RT=Ze((Nee,IT)=>{function Sz(t,e,r){e.forEach(function(n){t.classList.remove(n)}),r.forEach(function(n){t.classList.add(n)})}function Ez(t,e,r){r?t.classList.add(e):t.classList.remove(e)}IT.exports={enable:Ez,removeAdd:Sz}});var OT=Ze((kee,LT)=>{function xz(t,e){var r=document.createElement(t);return e&&(r.className=e),r}LT.exports={createDom:xz}});var NT=Ze((Vee,FT)=>{var Ld=new Map,Od=new Map;function qy(t){return Od.has(t)?Od.get(t):0}function Tz(t){Od.set(t,qy(t)+1)}function Az(t){Od.set(t,qy(t)-1)}function DT(t){if(!Ld.has(t)){var e=function(r){r=r||window.event;var n=r.target||r.srcElement;n=n.nodeType===3?n.parentNode:n;do t(n,r),n.parentNode&&(n=n.parentNode);while(n.parentNode)};Ld.set(t,e)}return Ld.get(t)}function Mz(t,e,r){return Tz(r),t.addEventListener(e,DT(r))}function Cz(t,e,r){var n=DT(r);return Az(r),qy(r)<=0&&Ld.delete(r),t.removeEventListener(e,n)}FT.exports={addDelegatedListener:Mz,removeDelegatedListener:Cz}});var Dd=Ze((Bee,kT)=>{function Pz(t){var e={};for(var r in t)e[r]=t[r];return e}function Iz(t,e){for(var r in e)t[r]=e[r]}kT.exports={clone:Pz,merge:Iz}});var dn=Ze((Hee,HT)=>{function Lz(t){window.dataLayer=window.dataLayer||[],window.dataLayer.push(t),window.URLSearchParams&&new URLSearchParams(window.location.search).has("MQN2_ANALYTICS_DEBUG")&&(window.MQN2_DEBUG_ANALYTICS=!0),window.MQN2_DEBUG_ANALYTICS&&console.log(t)}function Oz(t){let e=window.jQuery(t).closest("[mqn-tracking-id]")[0];e||(e=window.jQuery(t).closest("[mqn-tracking-ref]")[0]);let r=e.getAttribute("mqn-tracking-id");return r||(r=e.getAttribute("mqn-tracking-ref")),r}HT.exports={trackDataLayer:Lz,getClosestTrackingId:Oz}});var UA=Ze((mse,BA)=>{function qW(t,e){var r=[];for(var n in t)if(!!t.hasOwnProperty(n)){var s=t[n],o=[];for(var a in s)if(!!s.hasOwnProperty(a)){var l=s[a];o.push(a+":"+l)}r.push(n+"{"+o.join(";")+"}")}r=r.join("");var c=document.createElement("style");return e&&(r="@media "+e+" {"+r+"}"),c.textContent=r,document.head.appendChild(c),c}function zW(t,e,r){var n=t.getBoundingClientRect(),s=document.documentElement,o=n.bottom-n.top,a=0;if(e&&(a=o*e),r!==!0){var l=n.top+a>=0||n.bottom-a<=(window.innerHeight||s.clientHeight);return l&&n.left>=0&&n.right<=(window.innerWidth||s.clientWidth)}else{var c={top:window.scrollTop,left:window.scrollLeft,right:window.scrollTop+window.innerWidth||s.clientWidth,bottom:window.scrollTop+window.innerHeight||s.clientHeight};return!(c.right<n.left||c.left>n.right||c.bottom<n.top||c.top>n.bottom)}return l}BA.exports={createStyle:qW,isElementInView:zW}});var o_=Ze((gse,WA)=>{var HA=Dd();function WW(t,e){var r=e||window.location.href;t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),s=n.exec(r),o=s===null?null:s[1];return o?zA(o):null}function qA(t){return s_(t||window.location.search)}function GW(t,e){return t in qA(e)}var $W={serializeAttr:"data-ak-update-params-serialize-into-key",selector:"a.ak-update-params[href]",attr:"href",params:null};function jW(t){if(!!location.search){var e=HA.clone($W);HA.merge(e,t);var r=e.selector,n=e.attr,s=e.params,o={};n_(location.search,function(p,g){if(!s){o[p]=g;return}for(var y=0;y<s.length;y++){var _=s[y];_ instanceof RegExp?p.match(_)&&(o[p]=g):_===p&&(o[p]=g)}});for(var a=document.querySelectorAll(r),l=0,c;c=a[l];l++){var h=c.getAttribute(n);if(h&&!h.startsWith("#")){var f=new URL(c.getAttribute(n),location.href),u=s_(f.search),m=c.getAttribute(e.serializeAttr);if(m){var d=Wd(o);u[m]=d,f.search=Wd(u)}else{for(var v in o)u[v]=o[v];f.search=Wd(u)}c.setAttribute(n,f.toString())}}}}function n_(t,e){if(!!t){t.startsWith("?")&&(t=t.slice(1));for(var r=t.split("&"),n=0;n<r.length;n++){var s=r[n].indexOf("=");if(s>=0){var o=r[n].substring(0,s),a=r[n].substring(s+1);e(o,zA(a))}else{var o=r[n];e(o,"")}}}}function s_(t){var e={};return n_(t,function(r,n){e[r]=n}),e}function Wd(t){var e=[];for(var r in t){var n=t[r];e.push(r+"="+YW(n))}return e.join("&")}function zA(t){return decodeURIComponent(t.replace(/\+/g," "))}function YW(t){return encodeURIComponent(String(t))}WA.exports={encodeQueryMap:Wd,getParameterValue:WW,hasParameter:GW,getParameters:qA,parseQueryMap:s_,parseQueryString:n_,updateParamsFromUrl:jW}});var YA=Ze((vse,jA)=>{var Gd=Dd(),XW=UA(),ZW=o_(),GA={attributeName:"data-ak-datetoggle",parameterName:"ak-now"};function Ol(t){this.config=t,this.initDom_(),$A(t)}Ol.isEnabledNow=function(t,e,r){return t&&e?r>=t&&r<e:t?r>=t:e?r<e:!1};Ol.prototype.initDom_=function(){var t=document.querySelectorAll("["+this.config.attributeName+"]"),e=ZW.getParameterValue(this.config.parameterName),r=e?new Date(e):new Date;[].forEach.call(t,function(n){this.processElement_(n,r)}.bind(this))};Ol.prototype.processElement_=function(t,e){var r=this.config.attributeName+"-start",n=this.config.attributeName+"-end",s=t.getAttribute(r),o=t.getAttribute(n),a=s?new Date(s):null,l=o?new Date(o):null,c=Ol.isEnabledNow(a,l,e);c&&t.removeAttribute(this.config.attributeName)};function $A(t){var e=Gd.clone(GA);t&&Gd.merge(e,t);var r=e.attributeName,n="["+r+"]",s={};s[n]={display:"none !important"},XW.createStyle(s)}function QW(t){var e=Gd.clone(GA);return t&&Gd.merge(e,t),new Ol(e)}jA.exports={isEnabledNow:Ol.isEnabledNow,initStyle:$A,init:QW}});var fa=Ze((exports,module)=>{typeof navigator!="undefined"&&function(t,e){typeof define=="function"&&define.amd?define(function(){return e(t)}):typeof module=="object"&&module.exports?module.exports=e(t):(t.lottie=e(t),t.bodymovin=t.lottie)}(window||{},function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};(function(){var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e,r=t.length;for(e=0;e<r;e+=1)BMMath[t[e]]=Math[t[e]]})();function ProjectInterface(){return{}}BMMath.random=Math.random,BMMath.abs=function(t){var e=typeof t;if(e==="object"&&t.length){var r=createSizedArray(t.length),n,s=t.length;for(n=0;n<s;n+=1)r[n]=Math.abs(t[n]);return r}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){t?bm_rnd=Math.round:bm_rnd=function(e){return e}}roundValues(!1);function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin=t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility=t.style.webkitBackfaceVisibility="visible",t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,r,n){this.type=t,this.currentTime=e,this.totalTime=r,this.direction=n<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,r,n){this.type=t,this.currentLoop=r,this.totalLoops=e,this.direction=n<0?-1:1}function BMSegmentStartEvent(t,e,r){this.type=t,this.firstFrame=e,this.totalFrames=r}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e,this.currentTime=currentTime}var createElementID=function(){var t=0;return function(){return"__lottie_element_"+ ++t}}();function HSVtoRGB(t,e,r){var n,s,o,a,l,c,h,f;switch(a=Math.floor(t*6),l=t*6-a,c=r*(1-e),h=r*(1-l*e),f=r*(1-(1-l)*e),a%6){case 0:n=r,s=f,o=c;break;case 1:n=h,s=r,o=c;break;case 2:n=c,s=r,o=f;break;case 3:n=c,s=h,o=r;break;case 4:n=f,s=c,o=r;break;case 5:n=r,s=c,o=h;break}return[n,s,o]}function RGBtoHSV(t,e,r){var n=Math.max(t,e,r),s=Math.min(t,e,r),o=n-s,a,l=n===0?0:o/n,c=n/255;switch(n){case s:a=0;break;case t:a=e-r+o*(e<r?6:0),a/=6*o;break;case e:a=r-t+o*2,a/=6*o;break;case r:a=t-e+o*4,a/=6*o;break}return[a,l,c]}function addSaturationToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[1]+=e,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[2]+=e,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(t,e){var r=RGBtoHSV(t[0]*255,t[1]*255,t[2]*255);return r[0]+=e/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){var t=[],e,r;for(e=0;e<256;e+=1)r=e.toString(16),t[e]=r.length==1?"0"+r:r;return function(n,s,o){return n<0&&(n=0),s<0&&(s=0),o<0&&(o=0),"#"+t[n]+t[s]+t[o]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var r=this._cbs[t].length,n=0;n<r;n++)this._cbs[t][n](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(!e)this._cbs[t]=null;else if(this._cbs[t]){for(var r=0,n=this._cbs[t].length;r<n;)this._cbs[t][r]===e&&(this._cbs[t].splice(r,1),r-=1,n-=1),r+=1;this._cbs[t].length||(this._cbs[t]=null)}}};var createTypedArray=function(){function t(r,n){var s=0,o=[],a;switch(r){case"int16":case"uint8c":a=1;break;default:a=1.1;break}for(s=0;s<n;s+=1)o.push(a);return o}function e(r,n){if(r==="float32")return new Float32Array(n);if(r==="int16")return new Int16Array(n);if(r==="uint8c")return new Uint8ClampedArray(n)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?e:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function createNS(t){return document.createElementNS(svgNS,t)}function createTag(t){return document.createElement(t)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var t,e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=function(){var t={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(e){return t[e]||""}}();var Matrix=function(){var t=Math.cos,e=Math.sin,r=Math.tan,n=Math.round;function s(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function o(R){if(R===0)return this;var U=t(R),q=e(R);return this._t(U,-q,0,0,q,U,0,0,0,0,1,0,0,0,0,1)}function a(R){if(R===0)return this;var U=t(R),q=e(R);return this._t(1,0,0,0,0,U,-q,0,0,q,U,0,0,0,0,1)}function l(R){if(R===0)return this;var U=t(R),q=e(R);return this._t(U,0,q,0,0,1,0,0,-q,0,U,0,0,0,0,1)}function c(R){if(R===0)return this;var U=t(R),q=e(R);return this._t(U,-q,0,0,q,U,0,0,0,0,1,0,0,0,0,1)}function h(R,U){return this._t(1,U,R,1,0,0)}function f(R,U){return this.shear(r(R),r(U))}function u(R,U){var q=t(U),Z=e(U);return this._t(q,Z,0,0,-Z,q,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,r(R),1,0,0,0,0,1,0,0,0,0,1)._t(q,-Z,0,0,Z,q,0,0,0,0,1,0,0,0,0,1)}function m(R,U,q){return!q&&q!==0&&(q=1),R===1&&U===1&&q===1?this:this._t(R,0,0,0,0,U,0,0,0,0,q,0,0,0,0,1)}function d(R,U,q,Z,oe,N,M,$,W,H,ee,Y,K,ne,te,ae){return this.props[0]=R,this.props[1]=U,this.props[2]=q,this.props[3]=Z,this.props[4]=oe,this.props[5]=N,this.props[6]=M,this.props[7]=$,this.props[8]=W,this.props[9]=H,this.props[10]=ee,this.props[11]=Y,this.props[12]=K,this.props[13]=ne,this.props[14]=te,this.props[15]=ae,this}function v(R,U,q){return q=q||0,R!==0||U!==0||q!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,R,U,q,1):this}function p(R,U,q,Z,oe,N,M,$,W,H,ee,Y,K,ne,te,ae){var ie=this.props;if(R===1&&U===0&&q===0&&Z===0&&oe===0&&N===1&&M===0&&$===0&&W===0&&H===0&&ee===1&&Y===0)return ie[12]=ie[12]*R+ie[15]*K,ie[13]=ie[13]*N+ie[15]*ne,ie[14]=ie[14]*ee+ie[15]*te,ie[15]=ie[15]*ae,this._identityCalculated=!1,this;var pe=ie[0],me=ie[1],_e=ie[2],B=ie[3],G=ie[4],fe=ie[5],ue=ie[6],Ne=ie[7],Re=ie[8],xe=ie[9],Ce=ie[10],Ve=ie[11],Oe=ie[12],ge=ie[13],Le=ie[14],we=ie[15];return ie[0]=pe*R+me*oe+_e*W+B*K,ie[1]=pe*U+me*N+_e*H+B*ne,ie[2]=pe*q+me*M+_e*ee+B*te,ie[3]=pe*Z+me*$+_e*Y+B*ae,ie[4]=G*R+fe*oe+ue*W+Ne*K,ie[5]=G*U+fe*N+ue*H+Ne*ne,ie[6]=G*q+fe*M+ue*ee+Ne*te,ie[7]=G*Z+fe*$+ue*Y+Ne*ae,ie[8]=Re*R+xe*oe+Ce*W+Ve*K,ie[9]=Re*U+xe*N+Ce*H+Ve*ne,ie[10]=Re*q+xe*M+Ce*ee+Ve*te,ie[11]=Re*Z+xe*$+Ce*Y+Ve*ae,ie[12]=Oe*R+ge*oe+Le*W+we*K,ie[13]=Oe*U+ge*N+Le*H+we*ne,ie[14]=Oe*q+ge*M+Le*ee+we*te,ie[15]=Oe*Z+ge*$+Le*Y+we*ae,this._identityCalculated=!1,this}function g(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function y(R){for(var U=0;U<16;){if(R.props[U]!==this.props[U])return!1;U+=1}return!0}function _(R){var U;for(U=0;U<16;U+=1)R.props[U]=this.props[U]}function b(R){var U;for(U=0;U<16;U+=1)this.props[U]=R[U]}function w(R,U,q){return{x:R*this.props[0]+U*this.props[4]+q*this.props[8]+this.props[12],y:R*this.props[1]+U*this.props[5]+q*this.props[9]+this.props[13],z:R*this.props[2]+U*this.props[6]+q*this.props[10]+this.props[14]}}function S(R,U,q){return R*this.props[0]+U*this.props[4]+q*this.props[8]+this.props[12]}function E(R,U,q){return R*this.props[1]+U*this.props[5]+q*this.props[9]+this.props[13]}function x(R,U,q){return R*this.props[2]+U*this.props[6]+q*this.props[10]+this.props[14]}function T(){var R=this.props[0]*this.props[5]-this.props[1]*this.props[4],U=this.props[5]/R,q=-this.props[1]/R,Z=-this.props[4]/R,oe=this.props[0]/R,N=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/R,M=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/R,$=new Matrix;return $.props[0]=U,$.props[1]=q,$.props[4]=Z,$.props[5]=oe,$.props[12]=N,$.props[13]=M,$}function A(R){var U=this.getInverseMatrix();return U.applyToPointArray(R[0],R[1],R[2]||0)}function P(R){var U,q=R.length,Z=[];for(U=0;U<q;U+=1)Z[U]=A(R[U]);return Z}function z(R,U,q){var Z=createTypedArray("float32",6);if(this.isIdentity())Z[0]=R[0],Z[1]=R[1],Z[2]=U[0],Z[3]=U[1],Z[4]=q[0],Z[5]=q[1];else{var oe=this.props[0],N=this.props[1],M=this.props[4],$=this.props[5],W=this.props[12],H=this.props[13];Z[0]=R[0]*oe+R[1]*M+W,Z[1]=R[0]*N+R[1]*$+H,Z[2]=U[0]*oe+U[1]*M+W,Z[3]=U[0]*N+U[1]*$+H,Z[4]=q[0]*oe+q[1]*M+W,Z[5]=q[0]*N+q[1]*$+H}return Z}function V(R,U,q){var Z;return this.isIdentity()?Z=[R,U,q]:Z=[R*this.props[0]+U*this.props[4]+q*this.props[8]+this.props[12],R*this.props[1]+U*this.props[5]+q*this.props[9]+this.props[13],R*this.props[2]+U*this.props[6]+q*this.props[10]+this.props[14]],Z}function L(R,U){if(this.isIdentity())return R+","+U;var q=this.props;return Math.round((R*q[0]+U*q[4]+q[12])*100)/100+","+Math.round((R*q[1]+U*q[5]+q[13])*100)/100}function O(){for(var R=0,U=this.props,q="matrix3d(",Z=1e4;R<16;)q+=n(U[R]*Z)/Z,q+=R===15?")":",",R+=1;return q}function k(R){var U=1e4;return R<1e-6&&R>0||R>-1e-6&&R<0?n(R*U)/U:R}function X(){var R=this.props,U=k(R[0]),q=k(R[1]),Z=k(R[4]),oe=k(R[5]),N=k(R[12]),M=k(R[13]);return"matrix("+U+","+q+","+Z+","+oe+","+N+","+M+")"}return function(){this.reset=s,this.rotate=o,this.rotateX=a,this.rotateY=l,this.rotateZ=c,this.skew=f,this.skewFromAxis=u,this.shear=h,this.scale=m,this.setTransform=d,this.translate=v,this.transform=p,this.applyToPoint=w,this.applyToX=S,this.applyToY=E,this.applyToZ=x,this.applyToPointArray=V,this.applyToTriplePoints=z,this.applyToPointStringified=L,this.toCSS=O,this.to2dCSS=X,this.clone=_,this.cloneFromProps=b,this.equals=y,this.inversePoints=P,this.inversePoint=A,this.getInverseMatrix=T,this._t=this.transform,this.isIdentity=g,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();(function(t,e){var r=this,n=256,s=6,o=52,a="random",l=e.pow(n,s),c=e.pow(2,o),h=c*2,f=n-1,u;function m(b,w,S){var E=[];w=w===!0?{entropy:!0}:w||{};var x=g(p(w.entropy?[b,_(t)]:b===null?y():b,3),E),T=new d(E),A=function(){for(var P=T.g(s),z=l,V=0;P<c;)P=(P+V)*n,z*=n,V=T.g(1);for(;P>=h;)P/=2,z/=2,V>>>=1;return(P+V)/z};return A.int32=function(){return T.g(4)|0},A.quick=function(){return T.g(4)/4294967296},A.double=A,g(_(T.S),t),(w.pass||S||function(P,z,V,L){return L&&(L.S&&v(L,T),P.state=function(){return v(T,{})}),V?(e[a]=P,z):P})(A,x,"global"in w?w.global:this==e,w.state)}e["seed"+a]=m;function d(b){var w,S=b.length,E=this,x=0,T=E.i=E.j=0,A=E.S=[];for(S||(b=[S++]);x<n;)A[x]=x++;for(x=0;x<n;x++)A[x]=A[T=f&T+b[x%S]+(w=A[x])],A[T]=w;E.g=function(P){for(var z,V=0,L=E.i,O=E.j,k=E.S;P--;)z=k[L=f&L+1],V=V*n+k[f&(k[L]=k[O=f&O+z])+(k[O]=z)];return E.i=L,E.j=O,V}}function v(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function p(b,w){var S=[],E=typeof b,x;if(w&&E=="object")for(x in b)try{S.push(p(b[x],w-1))}catch(T){}return S.length?S:E=="string"?b:b+"\0"}function g(b,w){for(var S=b+"",E,x=0;x<S.length;)w[f&x]=f&(E^=w[f&x]*19)+S.charCodeAt(x++);return _(w)}function y(){try{if(u)return _(u.randomBytes(n));var b=new Uint8Array(n);return(r.crypto||r.msCrypto).getRandomValues(b),_(b)}catch(E){var w=r.navigator,S=w&&w.plugins;return[+new Date,r,S,r.screen,_(t)]}}function _(b){return String.fromCharCode.apply(0,b)}g(e.random(),t)})([],BMMath);var BezierFactory=function(){var t={};t.getBezierEasing=r;var e={};function r(_,b,w,S,E){var x=E||("bez_"+_+"_"+b+"_"+w+"_"+S).replace(/\./g,"p");if(e[x])return e[x];var T=new y([_,b,w,S]);return e[x]=T,T}var n=4,s=.001,o=1e-7,a=10,l=11,c=1/(l-1),h=typeof Float32Array=="function";function f(_,b){return 1-3*b+3*_}function u(_,b){return 3*b-6*_}function m(_){return 3*_}function d(_,b,w){return((f(b,w)*_+u(b,w))*_+m(b))*_}function v(_,b,w){return 3*f(b,w)*_*_+2*u(b,w)*_+m(b)}function p(_,b,w,S,E){var x,T,A=0;do T=b+(w-b)/2,x=d(T,S,E)-_,x>0?w=T:b=T;while(Math.abs(x)>o&&++A<a);return T}function g(_,b,w,S){for(var E=0;E<n;++E){var x=v(b,w,S);if(x===0)return b;var T=d(b,w,S)-_;b-=T/x}return b}function y(_){this._p=_,this._mSampleValues=h?new Float32Array(l):new Array(l),this._precomputed=!1,this.get=this.get.bind(this)}return y.prototype={get:function(_){var b=this._p[0],w=this._p[1],S=this._p[2],E=this._p[3];return this._precomputed||this._precompute(),b===w&&S===E?_:_===0?0:_===1?1:d(this._getTForX(_),w,E)},_precompute:function(){var _=this._p[0],b=this._p[1],w=this._p[2],S=this._p[3];this._precomputed=!0,(_!==b||w!==S)&&this._calcSampleValues()},_calcSampleValues:function(){for(var _=this._p[0],b=this._p[2],w=0;w<l;++w)this._mSampleValues[w]=d(w*c,_,b)},_getTForX:function(_){for(var b=this._p[0],w=this._p[2],S=this._mSampleValues,E=0,x=1,T=l-1;x!==T&&S[x]<=_;++x)E+=c;--x;var A=(_-S[x])/(S[x+1]-S[x]),P=E+A*c,z=v(P,b,w);return z>=s?g(_,P,b,w):z===0?P:p(_,E,E+c,b,w)}},t}();(function(){for(var t=0,e=["ms","moz","webkit","o"],r=0;r<e.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[e[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[r]+"CancelAnimationFrame"]||window[e[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,s){var o=new Date().getTime(),a=Math.max(0,16-(o-t)),l=setTimeout(function(){n(o+a)},a);return t=o+a,l}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();function extendPrototype(t,e){var r,n=t.length,s;for(r=0;r<n;r+=1){s=t[r].prototype;for(var o in s)s.hasOwnProperty(o)&&(e.prototype[o]=s[o])}}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}function bezFunction(){var t=[],e=Math;function r(v,p,g,y,_,b){var w=v*y+p*_+g*b-_*y-b*v-g*p;return w>-.001&&w<.001}function n(v,p,g,y,_,b,w,S,E){if(g===0&&b===0&&E===0)return r(v,p,y,_,w,S);var x=Math.sqrt(Math.pow(y-v,2)+Math.pow(_-p,2)+Math.pow(b-g,2)),T=Math.sqrt(Math.pow(w-v,2)+Math.pow(S-p,2)+Math.pow(E-g,2)),A=Math.sqrt(Math.pow(w-y,2)+Math.pow(S-_,2)+Math.pow(E-b,2)),P;return x>T?x>A?P=x-T-A:P=A-T-x:A>T?P=A-T-x:P=T-x-A,P>-1e-4&&P<1e-4}var s=function(){return function(v,p,g,y){var _=defaultCurveSegments,b,w,S,E,x,T=0,A,P=[],z=[],V=bezier_length_pool.newElement();for(S=g.length,b=0;b<_;b+=1){for(x=b/(_-1),A=0,w=0;w<S;w+=1)E=bm_pow(1-x,3)*v[w]+3*bm_pow(1-x,2)*x*g[w]+3*(1-x)*bm_pow(x,2)*y[w]+bm_pow(x,3)*p[w],P[w]=E,z[w]!==null&&(A+=bm_pow(P[w]-z[w],2)),z[w]=P[w];A&&(A=bm_sqrt(A),T+=A),V.percents[b]=x,V.lengths[b]=T}return V.addedLength=T,V}}();function o(v){var p=segments_length_pool.newElement(),g=v.c,y=v.v,_=v.o,b=v.i,w,S=v._length,E=p.lengths,x=0;for(w=0;w<S-1;w+=1)E[w]=s(y[w],y[w+1],_[w],b[w+1]),x+=E[w].addedLength;return g&&S&&(E[w]=s(y[w],y[0],_[w],b[0]),x+=E[w].addedLength),p.totalLength=x,p}function a(v){this.segmentLength=0,this.points=new Array(v)}function l(v,p){this.partialLength=v,this.point=p}var c=function(){var v={};return function(p,g,y,_){var b=(p[0]+"_"+p[1]+"_"+g[0]+"_"+g[1]+"_"+y[0]+"_"+y[1]+"_"+_[0]+"_"+_[1]).replace(/\./g,"p");if(!v[b]){var w=defaultCurveSegments,S,E,x,T,A,P=0,z,V,L=null;p.length===2&&(p[0]!=g[0]||p[1]!=g[1])&&r(p[0],p[1],g[0],g[1],p[0]+y[0],p[1]+y[1])&&r(p[0],p[1],g[0],g[1],g[0]+_[0],g[1]+_[1])&&(w=2);var O=new a(w);for(x=y.length,S=0;S<w;S+=1){for(V=createSizedArray(x),A=S/(w-1),z=0,E=0;E<x;E+=1)T=bm_pow(1-A,3)*p[E]+3*bm_pow(1-A,2)*A*(p[E]+y[E])+3*(1-A)*bm_pow(A,2)*(g[E]+_[E])+bm_pow(A,3)*g[E],V[E]=T,L!==null&&(z+=bm_pow(V[E]-L[E],2));z=bm_sqrt(z),P+=z,O.points[S]=new l(z,V),L=V}O.segmentLength=P,v[b]=O}return v[b]}}();function h(v,p){var g=p.percents,y=p.lengths,_=g.length,b=bm_floor((_-1)*v),w=v*p.addedLength,S=0;if(b===_-1||b===0||w===y[b])return g[b];for(var E=y[b]>w?-1:1,x=!0;x;)if(y[b]<=w&&y[b+1]>w?(S=(w-y[b])/(y[b+1]-y[b]),x=!1):b+=E,b<0||b>=_-1){if(b===_-1)return g[b];x=!1}return g[b]+(g[b+1]-g[b])*S}function f(v,p,g,y,_,b){var w=h(_,b),S=1,E=1-w,x=Math.round((E*E*E*v[0]+(w*E*E+E*w*E+E*E*w)*g[0]+(w*w*E+E*w*w+w*E*w)*y[0]+w*w*w*p[0])*1e3)/1e3,T=Math.round((E*E*E*v[1]+(w*E*E+E*w*E+E*E*w)*g[1]+(w*w*E+E*w*w+w*E*w)*y[1]+w*w*w*p[1])*1e3)/1e3;return[x,T]}function u(){}var m=createTypedArray("float32",8);function d(v,p,g,y,_,b,w){_=_<0?0:_>1?1:_;var S=h(_,w);b=b>1?1:b;var E=h(b,w),x,T=v.length,A=1-S,P=1-E,z=A*A*A,V=S*A*A*3,L=S*S*A*3,O=S*S*S,k=A*A*P,X=S*A*P+A*S*P+A*A*E,R=S*S*P+A*S*E+S*A*E,U=S*S*E,q=A*P*P,Z=S*P*P+A*E*P+A*P*E,oe=S*E*P+A*E*E+S*P*E,N=S*E*E,M=P*P*P,$=E*P*P+P*E*P+P*P*E,W=E*E*P+P*E*E+E*P*E,H=E*E*E;for(x=0;x<T;x+=1)m[x*4]=Math.round((z*v[x]+V*g[x]+L*y[x]+O*p[x])*1e3)/1e3,m[x*4+1]=Math.round((k*v[x]+X*g[x]+R*y[x]+U*p[x])*1e3)/1e3,m[x*4+2]=Math.round((q*v[x]+Z*g[x]+oe*y[x]+N*p[x])*1e3)/1e3,m[x*4+3]=Math.round((M*v[x]+$*g[x]+W*y[x]+H*p[x])*1e3)/1e3;return m}return{getSegmentsLength:o,getNewSegment:d,getPointInSegment:f,buildBezierData:c,pointOnLine2D:r,pointOnLine3D:n}}var bez=bezFunction();function dataFunctionManager(){function t(m,d,v){var p,g,y,_,b=m.length,w,S,E,x;for(_=0;_<b;_+=1)if(p=m[_],!(!("ks"in p)||p.completed)){if(p.completed=!0,p.tt&&(m[_-1].td=p.tt),g=[],y=-1,p.hasMask){var T=p.masksProperties;for(S=T.length,w=0;w<S;w+=1)if(T[w].pt.k.i)n(T[w].pt.k);else for(x=T[w].pt.k.length,E=0;E<x;E+=1)T[w].pt.k[E].s&&n(T[w].pt.k[E].s[0]),T[w].pt.k[E].e&&n(T[w].pt.k[E].e[0])}p.ty===0?(p.layers=e(p.refId,d),t(p.layers,d,v)):p.ty===4?r(p.shapes):p.ty==5&&f(p,v)}}function e(m,d){for(var v=0,p=d.length;v<p;){if(d[v].id===m)return d[v].layers.__used?JSON.parse(JSON.stringify(d[v].layers)):(d[v].layers.__used=!0,d[v].layers);v+=1}}function r(m){var d,v=m.length,p,g,y=!1;for(d=v-1;d>=0;d-=1)if(m[d].ty=="sh"){if(m[d].ks.k.i)n(m[d].ks.k);else for(g=m[d].ks.k.length,p=0;p<g;p+=1)m[d].ks.k[p].s&&n(m[d].ks.k[p].s[0]),m[d].ks.k[p].e&&n(m[d].ks.k[p].e[0]);y=!0}else m[d].ty=="gr"&&r(m[d].it)}function n(m){var d,v=m.i.length;for(d=0;d<v;d+=1)m.i[d][0]+=m.v[d][0],m.i[d][1]+=m.v[d][1],m.o[d][0]+=m.v[d][0],m.o[d][1]+=m.v[d][1]}function s(m,d){var v=d?d.split("."):[100,100,100];if(m[0]>v[0])return!0;if(v[0]>m[0])return!1;if(m[1]>v[1])return!0;if(v[1]>m[1])return!1;if(m[2]>v[2])return!0;if(v[2]>m[2])return!1}var o=function(){var m=[4,4,14];function d(p){var g=p.t.d;p.t.d={k:[{s:g,t:0}]}}function v(p){var g,y=p.length;for(g=0;g<y;g+=1)p[g].ty===5&&d(p[g])}return function(p){if(s(m,p.v)&&(v(p.layers),p.assets)){var g,y=p.assets.length;for(g=0;g<y;g+=1)p.assets[g].layers&&v(p.assets[g].layers)}}}(),a=function(){var m=[4,7,99];return function(d){if(d.chars&&!s(m,d.v)){var v,p=d.chars.length,g,y,_,b,w,S;for(v=0;v<p;v+=1)if(d.chars[v].data&&d.chars[v].data.shapes)for(S=d.chars[v].data.shapes[0].it,y=S.length,g=0;g<y;g+=1)w=S[g].ks.k,w.__converted||(n(S[g].ks.k),w.__converted=!0)}}}(),l=function(){var m=[4,1,9];function d(p){var g,y=p.length,_,b;for(g=0;g<y;g+=1)if(p[g].ty==="gr")d(p[g].it);else if(p[g].ty==="fl"||p[g].ty==="st")if(p[g].c.k&&p[g].c.k[0].i)for(b=p[g].c.k.length,_=0;_<b;_+=1)p[g].c.k[_].s&&(p[g].c.k[_].s[0]/=255,p[g].c.k[_].s[1]/=255,p[g].c.k[_].s[2]/=255,p[g].c.k[_].s[3]/=255),p[g].c.k[_].e&&(p[g].c.k[_].e[0]/=255,p[g].c.k[_].e[1]/=255,p[g].c.k[_].e[2]/=255,p[g].c.k[_].e[3]/=255);else p[g].c.k[0]/=255,p[g].c.k[1]/=255,p[g].c.k[2]/=255,p[g].c.k[3]/=255}function v(p){var g,y=p.length;for(g=0;g<y;g+=1)p[g].ty===4&&d(p[g].shapes)}return function(p){if(s(m,p.v)&&(v(p.layers),p.assets)){var g,y=p.assets.length;for(g=0;g<y;g+=1)p.assets[g].layers&&v(p.assets[g].layers)}}}(),c=function(){var m=[4,4,18];function d(p){var g,y=p.length,_,b,w=!1;for(g=y-1;g>=0;g-=1)if(p[g].ty=="sh"){if(p[g].ks.k.i)p[g].ks.k.c=p[g].closed;else for(b=p[g].ks.k.length,_=0;_<b;_+=1)p[g].ks.k[_].s&&(p[g].ks.k[_].s[0].c=p[g].closed),p[g].ks.k[_].e&&(p[g].ks.k[_].e[0].c=p[g].closed);w=!0}else p[g].ty=="gr"&&d(p[g].it)}function v(p){var g,y,_=p.length,b,w,S,E;for(y=0;y<_;y+=1){if(g=p[y],g.hasMask){var x=g.masksProperties;for(w=x.length,b=0;b<w;b+=1)if(x[b].pt.k.i)x[b].pt.k.c=x[b].cl;else for(E=x[b].pt.k.length,S=0;S<E;S+=1)x[b].pt.k[S].s&&(x[b].pt.k[S].s[0].c=x[b].cl),x[b].pt.k[S].e&&(x[b].pt.k[S].e[0].c=x[b].cl)}g.ty===4&&d(g.shapes)}}return function(p){if(s(m,p.v)&&(v(p.layers),p.assets)){var g,y=p.assets.length;for(g=0;g<y;g+=1)p.assets[g].layers&&v(p.assets[g].layers)}}}();function h(m,d){m.__complete||(l(m),o(m),a(m),c(m),t(m.layers,m.assets,d),m.__complete=!0)}function f(m,d){m.t.a.length===0&&!("m"in m.t.p)&&(m.singleShape=!0)}var u={};return u.completeData=h,u.checkColors=l,u.checkChars=a,u.checkShapes=c,u.completeLayers=t,u}var dataManager=dataFunctionManager(),FontManager=function(){var t=5e3,e={w:0,size:0,shapes:[]},r=[];r=r.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);function n(g){var y=g.split(","),_,b=y.length,w=[];for(_=0;_<b;_+=1)y[_]!=="sans-serif"&&y[_]!=="monospace"&&w.push(y[_]);return w.join(",")}function s(g,y){var _=createTag("span");_.style.fontFamily=y;var b=createTag("span");b.innerHTML="giItT1WQy@!-/#",_.style.position="absolute",_.style.left="-10000px",_.style.top="-10000px",_.style.fontSize="300px",_.style.fontVariant="normal",_.style.fontStyle="normal",_.style.fontWeight="normal",_.style.letterSpacing="0",_.appendChild(b),document.body.appendChild(_);var w=b.offsetWidth;return b.style.fontFamily=n(g)+", "+y,{node:b,w,parent:_}}function o(){var g,y=this.fonts.length,_,b,w=y;for(g=0;g<y;g+=1){if(this.fonts[g].loaded){w-=1;continue}this.fonts[g].fOrigin==="n"||this.fonts[g].origin===0?this.fonts[g].loaded=!0:(_=this.fonts[g].monoCase.node,b=this.fonts[g].monoCase.w,_.offsetWidth!==b?(w-=1,this.fonts[g].loaded=!0):(_=this.fonts[g].sansCase.node,b=this.fonts[g].sansCase.w,_.offsetWidth!==b&&(w-=1,this.fonts[g].loaded=!0)),this.fonts[g].loaded&&(this.fonts[g].sansCase.parent.parentNode.removeChild(this.fonts[g].sansCase.parent),this.fonts[g].monoCase.parent.parentNode.removeChild(this.fonts[g].monoCase.parent)))}w!==0&&Date.now()-this.initTime<t?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function a(g,y){var _=createNS("text");_.style.fontSize="100px",_.setAttribute("font-family",y.fFamily),_.setAttribute("font-style",y.fStyle),_.setAttribute("font-weight",y.fWeight),_.textContent="1",y.fClass?(_.style.fontFamily="inherit",_.setAttribute("class",y.fClass)):_.style.fontFamily=y.fFamily,g.appendChild(_);var b=createTag("canvas").getContext("2d");return b.font=y.fWeight+" "+y.fStyle+" 100px "+y.fFamily,_}function l(g,y){if(!g){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=g.list;return}var _=g.list,b,w=_.length,S=w;for(b=0;b<w;b+=1){var E=!0,x,T;if(_[b].loaded=!1,_[b].monoCase=s(_[b].fFamily,"monospace"),_[b].sansCase=s(_[b].fFamily,"sans-serif"),!_[b].fPath)_[b].loaded=!0,S-=1;else if(_[b].fOrigin==="p"||_[b].origin===3){if(x=document.querySelectorAll('style[f-forigin="p"][f-family="'+_[b].fFamily+'"], style[f-origin="3"][f-family="'+_[b].fFamily+'"]'),x.length>0&&(E=!1),E){var A=createTag("style");A.setAttribute("f-forigin",_[b].fOrigin),A.setAttribute("f-origin",_[b].origin),A.setAttribute("f-family",_[b].fFamily),A.type="text/css",A.innerHTML="@font-face {font-family: "+_[b].fFamily+"; font-style: normal; src: url('"+_[b].fPath+"');}",y.appendChild(A)}}else if(_[b].fOrigin==="g"||_[b].origin===1){for(x=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),T=0;T<x.length;T++)x[T].href.indexOf(_[b].fPath)!==-1&&(E=!1);if(E){var P=createTag("link");P.setAttribute("f-forigin",_[b].fOrigin),P.setAttribute("f-origin",_[b].origin),P.type="text/css",P.rel="stylesheet",P.href=_[b].fPath,document.body.appendChild(P)}}else if(_[b].fOrigin==="t"||_[b].origin===2){for(x=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),T=0;T<x.length;T++)_[b].fPath===x[T].src&&(E=!1);if(E){var z=createTag("link");z.setAttribute("f-forigin",_[b].fOrigin),z.setAttribute("f-origin",_[b].origin),z.setAttribute("rel","stylesheet"),z.setAttribute("href",_[b].fPath),y.appendChild(z)}}_[b].helper=a(y,_[b]),_[b].cache={},this.fonts.push(_[b])}S===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function c(g){if(!!g){this.chars||(this.chars=[]);var y,_=g.length,b,w=this.chars.length,S;for(y=0;y<_;y+=1){for(b=0,S=!1;b<w;)this.chars[b].style===g[y].style&&this.chars[b].fFamily===g[y].fFamily&&this.chars[b].ch===g[y].ch&&(S=!0),b+=1;S||(this.chars.push(g[y]),w+=1)}}}function h(g,y,_){for(var b=0,w=this.chars.length;b<w;){if(this.chars[b].ch===g&&this.chars[b].style===y&&this.chars[b].fFamily===_)return this.chars[b];b+=1}return(typeof g=="string"&&g.charCodeAt(0)!==13||!g)&&console&&console.warn&&console.warn("Missing character from exported characters list: ",g,y,_),e}function f(g,y,_){var b=this.getFontByName(y),w=g.charCodeAt(0);if(!b.cache[w+1]){var S=b.helper;if(g===" "){S.textContent="|"+g+"|";var E=S.getComputedTextLength();S.textContent="||";var x=S.getComputedTextLength();b.cache[w+1]=(E-x)/100}else S.textContent=g,b.cache[w+1]=S.getComputedTextLength()/100}return b.cache[w+1]*_}function u(g){for(var y=0,_=this.fonts.length;y<_;){if(this.fonts[y].fName===g)return this.fonts[y];y+=1}return this.fonts[0]}function m(){return r}function d(){this.isLoaded=!0}var v=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};v.getCombinedCharacterCodes=m;var p={addChars:c,addFonts:l,getCharData:h,getFontByName:u,measureText:f,checkLoadedFonts:o,setIsLoaded:d};return v.prototype=p,v}(),PropertyFactory=function(){var t=initialDefaultFrame,e=Math.abs;function r(g,y){var _=this.offsetTime,b;this.propType==="multidimensional"&&(b=createTypedArray("float32",this.pv.length));for(var w=y.lastIndex,S=w,E=this.keyframes.length-1,x=!0,T,A;x;){if(T=this.keyframes[S],A=this.keyframes[S+1],S===E-1&&g>=A.t-_){T.h&&(T=A),w=0;break}if(A.t-_>g){w=S;break}S<E-1?S+=1:(w=0,x=!1)}var P,z,V,L,O,k,X=A.t-_,R=T.t-_,U;if(T.to){T.bezierData||(T.bezierData=bez.buildBezierData(T.s,A.s||T.e,T.to,T.ti));var q=T.bezierData;if(g>=X||g<R){var Z=g>=X?q.points.length-1:0;for(z=q.points[Z].point.length,P=0;P<z;P+=1)b[P]=q.points[Z].point[P]}else{T.__fnct?k=T.__fnct:(k=BezierFactory.getBezierEasing(T.o.x,T.o.y,T.i.x,T.i.y,T.n).get,T.__fnct=k),V=k((g-R)/(X-R));var oe=q.segmentLength*V,N,M=y.lastFrame<g&&y._lastKeyframeIndex===S?y._lastAddedLength:0;for(O=y.lastFrame<g&&y._lastKeyframeIndex===S?y._lastPoint:0,x=!0,L=q.points.length;x;){if(M+=q.points[O].partialLength,oe===0||V===0||O===q.points.length-1){for(z=q.points[O].point.length,P=0;P<z;P+=1)b[P]=q.points[O].point[P];break}else if(oe>=M&&oe<M+q.points[O+1].partialLength){for(N=(oe-M)/q.points[O+1].partialLength,z=q.points[O].point.length,P=0;P<z;P+=1)b[P]=q.points[O].point[P]+(q.points[O+1].point[P]-q.points[O].point[P])*N;break}O<L-1?O+=1:x=!1}y._lastPoint=O,y._lastAddedLength=M-q.points[O].partialLength,y._lastKeyframeIndex=S}}else{var $,W,H,ee,Y;if(E=T.s.length,U=A.s||T.e,this.sh&&T.h!==1)if(g>=X)b[0]=U[0],b[1]=U[1],b[2]=U[2];else if(g<=R)b[0]=T.s[0],b[1]=T.s[1],b[2]=T.s[2];else{var K=o(T.s),ne=o(U),te=(g-R)/(X-R);s(b,n(K,ne,te))}else for(S=0;S<E;S+=1)T.h!==1&&(g>=X?V=1:g<R?V=0:(T.o.x.constructor===Array?(T.__fnct||(T.__fnct=[]),T.__fnct[S]?k=T.__fnct[S]:($=typeof T.o.x[S]=="undefined"?T.o.x[0]:T.o.x[S],W=typeof T.o.y[S]=="undefined"?T.o.y[0]:T.o.y[S],H=typeof T.i.x[S]=="undefined"?T.i.x[0]:T.i.x[S],ee=typeof T.i.y[S]=="undefined"?T.i.y[0]:T.i.y[S],k=BezierFactory.getBezierEasing($,W,H,ee).get,T.__fnct[S]=k)):T.__fnct?k=T.__fnct:($=T.o.x,W=T.o.y,H=T.i.x,ee=T.i.y,k=BezierFactory.getBezierEasing($,W,H,ee).get,T.__fnct=k),V=k((g-R)/(X-R)))),U=A.s||T.e,Y=T.h===1?T.s[S]:T.s[S]+(U[S]-T.s[S])*V,this.propType==="multidimensional"?b[S]=Y:b=Y}return y.lastIndex=w,b}function n(g,y,_){var b=[],w=g[0],S=g[1],E=g[2],x=g[3],T=y[0],A=y[1],P=y[2],z=y[3],V,L,O,k,X;return L=w*T+S*A+E*P+x*z,L<0&&(L=-L,T=-T,A=-A,P=-P,z=-z),1-L>1e-6?(V=Math.acos(L),O=Math.sin(V),k=Math.sin((1-_)*V)/O,X=Math.sin(_*V)/O):(k=1-_,X=_),b[0]=k*w+X*T,b[1]=k*S+X*A,b[2]=k*E+X*P,b[3]=k*x+X*z,b}function s(g,y){var _=y[0],b=y[1],w=y[2],S=y[3],E=Math.atan2(2*b*S-2*_*w,1-2*b*b-2*w*w),x=Math.asin(2*_*b+2*w*S),T=Math.atan2(2*_*S-2*b*w,1-2*_*_-2*w*w);g[0]=E/degToRads,g[1]=x/degToRads,g[2]=T/degToRads}function o(g){var y=g[0]*degToRads,_=g[1]*degToRads,b=g[2]*degToRads,w=Math.cos(y/2),S=Math.cos(_/2),E=Math.cos(b/2),x=Math.sin(y/2),T=Math.sin(_/2),A=Math.sin(b/2),P=w*S*E-x*T*A,z=x*T*E+w*S*A,V=x*S*E+w*T*A,L=w*T*E-x*S*A;return[z,V,L,P]}function a(){var g=this.comp.renderedFrame-this.offsetTime,y=this.keyframes[0].t-this.offsetTime,_=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(g===this._caching.lastFrame||this._caching.lastFrame!==t&&(this._caching.lastFrame>=_&&g>=_||this._caching.lastFrame<y&&g<y))){this._caching.lastFrame>=g&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var b=this.interpolateValue(g,this._caching);this.pv=b}return this._caching.lastFrame=g,this.pv}function l(g){var y;if(this.propType==="unidimensional")y=g*this.mult,e(this.v-y)>1e-5&&(this.v=y,this._mdf=!0);else for(var _=0,b=this.v.length;_<b;)y=g[_]*this.mult,e(this.v[_]-y)>1e-5&&(this.v[_]=y,this._mdf=!0),_+=1}function c(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var g,y,_=this.effectsSequence.length,b=this.kf?this.pv:this.data.k;for(y=0;y<_;y+=1)b=this.effectsSequence[y](b);this.setVValue(b),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function h(g){this.effectsSequence.push(g),this.container.addDynamicProperty(this)}function f(g,y,_,b){this.propType="unidimensional",this.mult=_||1,this.data=y,this.v=_?y.k*_:y.k,this.pv=y.k,this._mdf=!1,this.elem=g,this.container=b,this.comp=g.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=c,this.setVValue=l,this.addEffect=h}function u(g,y,_,b){this.propType="multidimensional",this.mult=_||1,this.data=y,this._mdf=!1,this.elem=g,this.container=b,this.comp=g.comp,this.k=!1,this.kf=!1,this.frameId=-1;var w,S=y.k.length;this.v=createTypedArray("float32",S),this.pv=createTypedArray("float32",S);var E=createTypedArray("float32",S);for(this.vel=createTypedArray("float32",S),w=0;w<S;w+=1)this.v[w]=y.k[w]*this.mult,this.pv[w]=y.k[w];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=c,this.setVValue=l,this.addEffect=h}function m(g,y,_,b){this.propType="unidimensional",this.keyframes=y.k,this.offsetTime=g.data.st,this.frameId=-1,this._caching={lastFrame:t,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=y,this.mult=_||1,this.elem=g,this.container=b,this.comp=g.comp,this.v=t,this.pv=t,this._isFirstFrame=!0,this.getValue=c,this.setVValue=l,this.interpolateValue=r,this.effectsSequence=[a.bind(this)],this.addEffect=h}function d(g,y,_,b){this.propType="multidimensional";var w,S=y.k.length,E,x,T,A;for(w=0;w<S-1;w+=1)y.k[w].to&&y.k[w].s&&y.k[w+1]&&y.k[w+1].s&&(E=y.k[w].s,x=y.k[w+1].s,T=y.k[w].to,A=y.k[w].ti,(E.length===2&&!(E[0]===x[0]&&E[1]===x[1])&&bez.pointOnLine2D(E[0],E[1],x[0],x[1],E[0]+T[0],E[1]+T[1])&&bez.pointOnLine2D(E[0],E[1],x[0],x[1],x[0]+A[0],x[1]+A[1])||E.length===3&&!(E[0]===x[0]&&E[1]===x[1]&&E[2]===x[2])&&bez.pointOnLine3D(E[0],E[1],E[2],x[0],x[1],x[2],E[0]+T[0],E[1]+T[1],E[2]+T[2])&&bez.pointOnLine3D(E[0],E[1],E[2],x[0],x[1],x[2],x[0]+A[0],x[1]+A[1],x[2]+A[2]))&&(y.k[w].to=null,y.k[w].ti=null),E[0]===x[0]&&E[1]===x[1]&&T[0]===0&&T[1]===0&&A[0]===0&&A[1]===0&&(E.length===2||E[2]===x[2]&&T[2]===0&&A[2]===0)&&(y.k[w].to=null,y.k[w].ti=null));this.effectsSequence=[a.bind(this)],this.keyframes=y.k,this.offsetTime=g.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=_||1,this.elem=g,this.container=b,this.comp=g.comp,this.getValue=c,this.setVValue=l,this.interpolateValue=r,this.frameId=-1;var P=y.k[0].s.length;for(this.v=createTypedArray("float32",P),this.pv=createTypedArray("float32",P),w=0;w<P;w+=1)this.v[w]=t,this.pv[w]=t;this._caching={lastFrame:t,lastIndex:0,value:createTypedArray("float32",P)},this.addEffect=h}function v(g,y,_,b,w){var S;if(!y.k.length)S=new f(g,y,b,w);else if(typeof y.k[0]=="number")S=new u(g,y,b,w);else switch(_){case 0:S=new m(g,y,b,w);break;case 1:S=new d(g,y,b,w);break}return S.effectsSequence.length&&w.addDynamicProperty(S),S}var p={getProp:v};return p}(),TransformPropertyFactory=function(){var t=[0,0];function e(c){var h=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||h,this.a&&c.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&c.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&c.skewFromAxis(-this.sk.v,this.sa.v),this.r?c.rotate(-this.r.v):c.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?c.translate(this.px.v,this.py.v,-this.pz.v):c.translate(this.px.v,this.py.v,0):c.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function r(c){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||c){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var h,f,u=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(h=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/u,0),f=this.p.getValueAtTime(this.p.keyframes[0].t/u,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(h=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/u,0),f=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/u,0)):(h=this.p.pv,f=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/u,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){h=[],f=[];var m=this.px,d=this.py,u;m._caching.lastFrame+m.offsetTime<=m.keyframes[0].t?(h[0]=m.getValueAtTime((m.keyframes[0].t+.01)/u,0),h[1]=d.getValueAtTime((d.keyframes[0].t+.01)/u,0),f[0]=m.getValueAtTime(m.keyframes[0].t/u,0),f[1]=d.getValueAtTime(d.keyframes[0].t/u,0)):m._caching.lastFrame+m.offsetTime>=m.keyframes[m.keyframes.length-1].t?(h[0]=m.getValueAtTime(m.keyframes[m.keyframes.length-1].t/u,0),h[1]=d.getValueAtTime(d.keyframes[d.keyframes.length-1].t/u,0),f[0]=m.getValueAtTime((m.keyframes[m.keyframes.length-1].t-.01)/u,0),f[1]=d.getValueAtTime((d.keyframes[d.keyframes.length-1].t-.01)/u,0)):(h=[m.pv,d.pv],f[0]=m.getValueAtTime((m._caching.lastFrame+m.offsetTime-.01)/u,m.offsetTime),f[1]=d.getValueAtTime((d._caching.lastFrame+d.offsetTime-.01)/u,d.offsetTime))}else h=f=t;this.v.rotate(-Math.atan2(h[1]-f[1],h[0]-f[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function n(){if(!this.a.k)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;if(this.r)if(!this.r.effectsSequence.length)this.pre.rotate(-this.r.v),this.appliedTransformations=4;else return;else!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function s(){}function o(c){this._addDynamicProperty(c),this.elem.addDynamicProperty(c),this._isDirty=!0}function a(c,h,f){if(this.elem=c,this.frameId=-1,this.propType="transform",this.data=h,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(f||c),h.p&&h.p.s?(this.px=PropertyFactory.getProp(c,h.p.x,0,0,this),this.py=PropertyFactory.getProp(c,h.p.y,0,0,this),h.p.z&&(this.pz=PropertyFactory.getProp(c,h.p.z,0,0,this))):this.p=PropertyFactory.getProp(c,h.p||{k:[0,0,0]},1,0,this),h.rx){if(this.rx=PropertyFactory.getProp(c,h.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(c,h.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(c,h.rz,0,degToRads,this),h.or.k[0].ti){var u,m=h.or.k.length;for(u=0;u<m;u+=1)h.or.k[u].to=h.or.k[u].ti=null}this.or=PropertyFactory.getProp(c,h.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(c,h.r||{k:0},0,degToRads,this);h.sk&&(this.sk=PropertyFactory.getProp(c,h.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(c,h.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(c,h.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(c,h.s||{k:[100,100,100]},1,.01,this),h.o?this.o=PropertyFactory.getProp(c,h.o,0,.01,c):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}a.prototype={applyToMatrix:e,getValue:r,precalculateMatrix:n,autoOrient:s},extendPrototype([DynamicPropertyContainer],a),a.prototype.addDynamicProperty=o,a.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function l(c,h,f){return new a(c,h,f)}return{getTransformProperty:l}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var r=0;r<e;)this.v[r]=point_pool.newElement(),this.o[r]=point_pool.newElement(),this.i[r]=point_pool.newElement(),r+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,r,n,s){var o;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o;break}(!o[n]||o[n]&&!s)&&(o[n]=point_pool.newElement()),o[n][0]=t,o[n][1]=e},ShapePath.prototype.setTripleAt=function(t,e,r,n,s,o,a,l){this.setXYAt(t,e,"v",a,l),this.setXYAt(r,n,"o",a,l),this.setXYAt(s,o,"i",a,l)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,r=this.o,n=this.i,s=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],n[0][0],n[0][1],r[0][0],r[0][1],0,!1),s=1);var o=this._length-1,a=this._length,l;for(l=s;l<a;l+=1)t.setTripleAt(e[o][0],e[o][1],n[o][0],n[o][1],r[o][0],r[o][1],l,!1),o-=1;return t};var ShapePropertyFactory=function(){var t=-999999;function e(y,_,b){var w=b.lastIndex,S,E,x,T,A,P,z,V,L,O=this.keyframes;if(y<O[0].t-this.offsetTime)S=O[0].s[0],x=!0,w=0;else if(y>=O[O.length-1].t-this.offsetTime)S=O[O.length-1].s?O[O.length-1].s[0]:O[O.length-2].e[0],x=!0;else{for(var k=w,X=O.length-1,R=!0,U,q;R&&(U=O[k],q=O[k+1],!(q.t-this.offsetTime>y));)k<X-1?k+=1:R=!1;if(x=U.h===1,w=k,!x){if(y>=q.t-this.offsetTime)V=1;else if(y<U.t-this.offsetTime)V=0;else{var Z;U.__fnct?Z=U.__fnct:(Z=BezierFactory.getBezierEasing(U.o.x,U.o.y,U.i.x,U.i.y).get,U.__fnct=Z),V=Z((y-(U.t-this.offsetTime))/(q.t-this.offsetTime-(U.t-this.offsetTime)))}E=q.s?q.s[0]:U.e[0]}S=U.s[0]}for(P=_._length,z=S.i[0].length,b.lastIndex=w,T=0;T<P;T+=1)for(A=0;A<z;A+=1)L=x?S.i[T][A]:S.i[T][A]+(E.i[T][A]-S.i[T][A])*V,_.i[T][A]=L,L=x?S.o[T][A]:S.o[T][A]+(E.o[T][A]-S.o[T][A])*V,_.o[T][A]=L,L=x?S.v[T][A]:S.v[T][A]+(E.v[T][A]-S.v[T][A])*V,_.v[T][A]=L}function r(){var y=this.comp.renderedFrame-this.offsetTime,_=this.keyframes[0].t-this.offsetTime,b=this.keyframes[this.keyframes.length-1].t-this.offsetTime,w=this._caching.lastFrame;return w!==t&&(w<_&&y<_||w>b&&y>b)||(this._caching.lastIndex=w<y?this._caching.lastIndex:0,this.interpolateShape(y,this.pv,this._caching)),this._caching.lastFrame=y,this.pv}function n(){this.paths=this.localShapeCollection}function s(y,_){if(y._length!==_._length||y.c!==_.c)return!1;var b,w=y._length;for(b=0;b<w;b+=1)if(y.v[b][0]!==_.v[b][0]||y.v[b][1]!==_.v[b][1]||y.o[b][0]!==_.o[b][0]||y.o[b][1]!==_.o[b][1]||y.i[b][0]!==_.i[b][0]||y.i[b][1]!==_.i[b][1])return!1;return!0}function o(y){s(this.v,y)||(this.v=shape_pool.clone(y),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var y=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,_,b=this.effectsSequence.length;for(_=0;_<b;_+=1)y=this.effectsSequence[_](y);this.setVValue(y),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function l(y,_,b){this.propType="shape",this.comp=y.comp,this.container=y,this.elem=y,this.data=_,this.k=!1,this.kf=!1,this._mdf=!1;var w=b===3?_.pt.k:_.ks.k;this.v=shape_pool.clone(w),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=n,this.effectsSequence=[]}function c(y){this.effectsSequence.push(y),this.container.addDynamicProperty(this)}l.prototype.interpolateShape=e,l.prototype.getValue=a,l.prototype.setVValue=o,l.prototype.addEffect=c;function h(y,_,b){this.propType="shape",this.comp=y.comp,this.elem=y,this.container=y,this.offsetTime=y.data.st,this.keyframes=b===3?_.pt.k:_.ks.k,this.k=!0,this.kf=!0;var w,S=this.keyframes[0].s[0].i.length,E=this.keyframes[0].s[0].i[0].length;this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,S),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=n,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[r.bind(this)]}h.prototype.getValue=a,h.prototype.interpolateShape=e,h.prototype.setVValue=o,h.prototype.addEffect=c;var f=function(){var y=roundCorner;function _(b,w){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=w.d,this.elem=b,this.comp=b.comp,this.frameId=-1,this.initDynamicPropertyContainer(b),this.p=PropertyFactory.getProp(b,w.p,1,0,this),this.s=PropertyFactory.getProp(b,w.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return _.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var b=this.p.v[0],w=this.p.v[1],S=this.s.v[0]/2,E=this.s.v[1]/2,x=this.d!==3,T=this.v;T.v[0][0]=b,T.v[0][1]=w-E,T.v[1][0]=x?b+S:b-S,T.v[1][1]=w,T.v[2][0]=b,T.v[2][1]=w+E,T.v[3][0]=x?b-S:b+S,T.v[3][1]=w,T.i[0][0]=x?b-S*y:b+S*y,T.i[0][1]=w-E,T.i[1][0]=x?b+S:b-S,T.i[1][1]=w-E*y,T.i[2][0]=x?b+S*y:b-S*y,T.i[2][1]=w+E,T.i[3][0]=x?b-S:b+S,T.i[3][1]=w+E*y,T.o[0][0]=x?b+S*y:b-S*y,T.o[0][1]=w-E,T.o[1][0]=x?b+S:b-S,T.o[1][1]=w+E*y,T.o[2][0]=x?b-S*y:b+S*y,T.o[2][1]=w+E,T.o[3][0]=x?b-S:b+S,T.o[3][1]=w-E*y}},extendPrototype([DynamicPropertyContainer],_),_}(),u=function(){function y(_,b){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=_,this.comp=_.comp,this.data=b,this.frameId=-1,this.d=b.d,this.initDynamicPropertyContainer(_),b.sy===1?(this.ir=PropertyFactory.getProp(_,b.ir,0,0,this),this.is=PropertyFactory.getProp(_,b.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(_,b.pt,0,0,this),this.p=PropertyFactory.getProp(_,b.p,1,0,this),this.r=PropertyFactory.getProp(_,b.r,0,degToRads,this),this.or=PropertyFactory.getProp(_,b.or,0,0,this),this.os=PropertyFactory.getProp(_,b.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return y.prototype={reset:n,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var _=Math.floor(this.pt.v)*2,b=Math.PI*2/_,w=!0,S=this.or.v,E=this.ir.v,x=this.os.v,T=this.is.v,A=2*Math.PI*S/(_*2),P=2*Math.PI*E/(_*2),z,V,L,O,k=-Math.PI/2;k+=this.r.v;var X=this.data.d===3?-1:1;for(this.v._length=0,z=0;z<_;z+=1){V=w?S:E,L=w?x:T,O=w?A:P;var R=V*Math.cos(k),U=V*Math.sin(k),q=R===0&&U===0?0:U/Math.sqrt(R*R+U*U),Z=R===0&&U===0?0:-R/Math.sqrt(R*R+U*U);R+=+this.p.v[0],U+=+this.p.v[1],this.v.setTripleAt(R,U,R-q*O*L*X,U-Z*O*L*X,R+q*O*L*X,U+Z*O*L*X,z,!0),w=!w,k+=b*X}},convertPolygonToPath:function(){var _=Math.floor(this.pt.v),b=Math.PI*2/_,w=this.or.v,S=this.os.v,E=2*Math.PI*w/(_*4),x,T=-Math.PI/2,A=this.data.d===3?-1:1;for(T+=this.r.v,this.v._length=0,x=0;x<_;x+=1){var P=w*Math.cos(T),z=w*Math.sin(T),V=P===0&&z===0?0:z/Math.sqrt(P*P+z*z),L=P===0&&z===0?0:-P/Math.sqrt(P*P+z*z);P+=+this.p.v[0],z+=+this.p.v[1],this.v.setTripleAt(P,z,P-V*E*S*A,z-L*E*S*A,P+V*E*S*A,z+L*E*S*A,x,!0),T+=b*A}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],y),y}(),m=function(){function y(_,b){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=_,this.comp=_.comp,this.frameId=-1,this.d=b.d,this.initDynamicPropertyContainer(_),this.p=PropertyFactory.getProp(_,b.p,1,0,this),this.s=PropertyFactory.getProp(_,b.s,1,0,this),this.r=PropertyFactory.getProp(_,b.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return y.prototype={convertRectToPath:function(){var _=this.p.v[0],b=this.p.v[1],w=this.s.v[0]/2,S=this.s.v[1]/2,E=bm_min(w,S,this.r.v),x=E*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(_+w,b-S+E,_+w,b-S+E,_+w,b-S+x,0,!0),this.v.setTripleAt(_+w,b+S-E,_+w,b+S-x,_+w,b+S-E,1,!0),E!==0?(this.v.setTripleAt(_+w-E,b+S,_+w-E,b+S,_+w-x,b+S,2,!0),this.v.setTripleAt(_-w+E,b+S,_-w+x,b+S,_-w+E,b+S,3,!0),this.v.setTripleAt(_-w,b+S-E,_-w,b+S-E,_-w,b+S-x,4,!0),this.v.setTripleAt(_-w,b-S+E,_-w,b-S+x,_-w,b-S+E,5,!0),this.v.setTripleAt(_-w+E,b-S,_-w+E,b-S,_-w+x,b-S,6,!0),this.v.setTripleAt(_+w-E,b-S,_+w-x,b-S,_+w-E,b-S,7,!0)):(this.v.setTripleAt(_-w,b+S,_-w+x,b+S,_-w,b+S,2),this.v.setTripleAt(_-w,b-S,_-w,b-S+x,_-w,b-S,3))):(this.v.setTripleAt(_+w,b-S+E,_+w,b-S+x,_+w,b-S+E,0,!0),E!==0?(this.v.setTripleAt(_+w-E,b-S,_+w-E,b-S,_+w-x,b-S,1,!0),this.v.setTripleAt(_-w+E,b-S,_-w+x,b-S,_-w+E,b-S,2,!0),this.v.setTripleAt(_-w,b-S+E,_-w,b-S+E,_-w,b-S+x,3,!0),this.v.setTripleAt(_-w,b+S-E,_-w,b+S-x,_-w,b+S-E,4,!0),this.v.setTripleAt(_-w+E,b+S,_-w+E,b+S,_-w+x,b+S,5,!0),this.v.setTripleAt(_+w-E,b+S,_+w-x,b+S,_+w-E,b+S,6,!0),this.v.setTripleAt(_+w,b+S-E,_+w,b+S-E,_+w,b+S-x,7,!0)):(this.v.setTripleAt(_-w,b-S,_-w+x,b-S,_-w,b-S,1,!0),this.v.setTripleAt(_-w,b+S,_-w,b+S-x,_-w,b+S,2,!0),this.v.setTripleAt(_+w,b+S,_+w-x,b+S,_+w,b+S,3,!0)))},getValue:function(_){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:n},extendPrototype([DynamicPropertyContainer],y),y}();function d(y,_,b){var w;if(b===3||b===4){var S=b===3?_.pt:_.ks,E=S.k;E.length?w=new h(y,_,b):w=new l(y,_,b)}else b===5?w=new m(y,_):b===6?w=new f(y,_):b===7&&(w=new u(y,_));return w.k&&y.addDynamicProperty(w),w}function v(){return l}function p(){return h}var g={};return g.getShapeProp=d,g.getConstructorFunction=v,g.getKeyframedConstructorFunction=p,g}(),ShapeModifiers=function(){var t={},e={};t.registerModifier=r,t.getModifier=n;function r(s,o){e[s]||(e[s]=o)}function n(s,o,a){return new e[s](o,a)}return t}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,r,n,s){var o=[];e<=1?o.push({s:t,e}):t>=1?o.push({s:t-1,e:e-1}):(o.push({s:t,e:1}),o.push({s:0,e:e-1}));var a=[],l,c=o.length,h;for(l=0;l<c;l+=1)if(h=o[l],!(h.e*s<n||h.s*s>n+r)){var f,u;h.s*s<=n?f=0:f=(h.s*s-n)/r,h.e*s>=n+r?u=1:u=(h.e*s-n)/r,a.push([f,u])}return a.length||a.push([0,0]),a},TrimModifier.prototype.releasePathsData=function(t){var e,r=t.length;for(e=0;e<r;e+=1)segments_length_pool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,r;if(this._mdf||t){var n=this.o.v%360/360;if(n<0&&(n+=1),e=(this.s.v>1?1:this.s.v<0?0:this.s.v)+n,r=(this.e.v>1?1:this.e.v<0?0:this.e.v)+n,e>r){var s=e;e=r,r=s}e=Math.round(e*1e4)*1e-4,r=Math.round(r*1e4)*1e-4,this.sValue=e,this.eValue=r}else e=this.sValue,r=this.eValue;var o,a,l=this.shapes.length,c,h,f,u,m,d=0;if(r===e)for(a=0;a<l;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection,this._mdf&&(this.shapes[a].pathsData.length=0);else if(r===1&&e===0||r===0&&e===1){if(this._mdf)for(a=0;a<l;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var v=[],p,g;for(a=0;a<l;a+=1)if(p=this.shapes[a],!p.shape._mdf&&!this._mdf&&!t&&this.m!==2)p.shape.paths=p.localShapeCollection;else{if(o=p.shape.paths,h=o._length,m=0,!p.shape._mdf&&p.pathsData.length)m=p.totalShapeLength;else{for(f=this.releasePathsData(p.pathsData),c=0;c<h;c+=1)u=bez.getSegmentsLength(o.shapes[c]),f.push(u),m+=u.totalLength;p.totalShapeLength=m,p.pathsData=f}d+=m,p.shape._mdf=!0}var y=e,_=r,b=0,w;for(a=l-1;a>=0;a-=1)if(p=this.shapes[a],p.shape._mdf){for(g=p.localShapeCollection,g.releaseShapes(),this.m===2&&l>1?(w=this.calculateShapeEdges(e,r,p.totalShapeLength,b,d),b+=p.totalShapeLength):w=[[y,_]],h=w.length,c=0;c<h;c+=1){y=w[c][0],_=w[c][1],v.length=0,_<=1?v.push({s:p.totalShapeLength*y,e:p.totalShapeLength*_}):y>=1?v.push({s:p.totalShapeLength*(y-1),e:p.totalShapeLength*(_-1)}):(v.push({s:p.totalShapeLength*y,e:p.totalShapeLength}),v.push({s:0,e:p.totalShapeLength*(_-1)}));var S=this.addShapes(p,v[0]);if(v[0].s!==v[0].e){if(v.length>1){var E=p.shape.paths.shapes[p.shape.paths._length-1];if(E.c){var x=S.pop();this.addPaths(S,g),S=this.addShapes(p,v[1],x)}else this.addPaths(S,g),S=this.addShapes(p,v[1])}this.addPaths(S,g)}}p.shape.paths=g}}},TrimModifier.prototype.addPaths=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e.addShape(t[r])},TrimModifier.prototype.addSegment=function(t,e,r,n,s,o,a){s.setXYAt(e[0],e[1],"o",o),s.setXYAt(r[0],r[1],"i",o+1),a&&s.setXYAt(t[0],t[1],"v",o),s.setXYAt(n[0],n[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,r,n){e.setXYAt(t[1],t[5],"o",r),e.setXYAt(t[2],t[6],"i",r+1),n&&e.setXYAt(t[0],t[4],"v",r),e.setXYAt(t[3],t[7],"v",r+1)},TrimModifier.prototype.addShapes=function(t,e,r){var n=t.pathsData,s=t.shape.paths.shapes,o,a=t.shape.paths._length,l,c,h=0,f,u,m,d,v=[],p,g=!0;for(r?(u=r._length,p=r._length):(r=shape_pool.newElement(),u=0,p=0),v.push(r),o=0;o<a;o+=1){for(m=n[o].lengths,r.c=s[o].c,c=s[o].c?m.length:m.length+1,l=1;l<c;l+=1)if(f=m[l-1],h+f.addedLength<e.s)h+=f.addedLength,r.c=!1;else if(h>e.e){r.c=!1;break}else e.s<=h&&e.e>=h+f.addedLength?(this.addSegment(s[o].v[l-1],s[o].o[l-1],s[o].i[l],s[o].v[l],r,u,g),g=!1):(d=bez.getNewSegment(s[o].v[l-1],s[o].v[l],s[o].o[l-1],s[o].i[l],(e.s-h)/f.addedLength,(e.e-h)/f.addedLength,m[l-1]),this.addSegmentFromArray(d,r,u,g),g=!1,r.c=!1),h+=f.addedLength,u+=1;if(s[o].c&&m.length){if(f=m[l-1],h<=e.e){var y=m[l-1].addedLength;e.s<=h&&e.e>=h+y?(this.addSegment(s[o].v[l-1],s[o].o[l-1],s[o].i[0],s[o].v[0],r,u,g),g=!1):(d=bez.getNewSegment(s[o].v[l-1],s[o].v[0],s[o].o[l-1],s[o].i[0],(e.s-h)/y,(e.e-h)/y,m[l-1]),this.addSegmentFromArray(d,r,u,g),g=!1,r.c=!1)}else r.c=!1;h+=f.addedLength,u+=1}if(r._length&&(r.setXYAt(r.v[p][0],r.v[p][1],"i",p),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),h>e.e)break;o<a-1&&(r=shape_pool.newElement(),g=!0,v.push(r),u=0)}return v},ShapeModifiers.registerModifier("tm",TrimModifier);function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var r=shape_pool.newElement();r.c=t.c;var n,s=t._length,o,a,l,c,h,f,u,m,d,v=0,p,g,y,_,b,w;for(n=0;n<s;n+=1)o=t.v[n],l=t.o[n],a=t.i[n],o[0]===l[0]&&o[1]===l[1]&&o[0]===a[0]&&o[1]===a[1]?(n===0||n===s-1)&&!t.c?(r.setTripleAt(o[0],o[1],l[0],l[1],a[0],a[1],v),v+=1):(n===0?c=t.v[s-1]:c=t.v[n-1],m=Math.sqrt(Math.pow(o[0]-c[0],2)+Math.pow(o[1]-c[1],2)),d=m?Math.min(m/2,e)/m:0,p=b=o[0]+(c[0]-o[0])*d,g=w=o[1]-(o[1]-c[1])*d,y=p-(p-o[0])*roundCorner,_=g-(g-o[1])*roundCorner,r.setTripleAt(p,g,y,_,b,w,v),v+=1,n===s-1?c=t.v[0]:c=t.v[n+1],m=Math.sqrt(Math.pow(o[0]-c[0],2)+Math.pow(o[1]-c[1],2)),d=m?Math.min(m/2,e)/m:0,p=y=o[0]+(c[0]-o[0])*d,g=_=o[1]+(c[1]-o[1])*d,b=p-(p-o[0])*roundCorner,w=g-(g-o[1])*roundCorner,r.setTripleAt(p,g,y,_,b,w,v),v+=1):(r.setTripleAt(t.v[n][0],t.v[n][1],t.o[n][0],t.o[n][1],t.i[n][0],t.i[n][1],v),v+=1);return r},RoundCornersModifier.prototype.processShapes=function(t){var e,r,n=this.shapes.length,s,o,a=this.rd.v;if(a!==0){var l,c,h;for(r=0;r<n;r+=1){if(l=this.shapes[r],c=l.shape.paths,h=l.localShapeCollection,!(!l.shape._mdf&&!this._mdf&&!t))for(h.releaseShapes(),l.shape._mdf=!0,e=l.shape.paths.shapes,o=l.shape.paths._length,s=0;s<o;s+=1)h.addShape(this.processPath(e[s],a));l.shape.paths=l.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier);function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,r,n,s,o){var a=o?-1:1,l=n.s.v[0]+(1-n.s.v[0])*(1-s),c=n.s.v[1]+(1-n.s.v[1])*(1-s);t.translate(n.p.v[0]*a*s,n.p.v[1]*a*s,n.p.v[2]),e.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),e.rotate(-n.r.v*a*s),e.translate(n.a.v[0],n.a.v[1],n.a.v[2]),r.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),r.scale(o?1/l:l,o?1/c:c),r.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(t,e,r,n){this.elem=t,this.arr=e,this.pos=r,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[r]);for(var s=0;r>0;)r-=1,this._elements.unshift(e[r]),s+=1;this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e]._processed=!1,t[e].ty==="gr"&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e,r=t.length,n=JSON.parse(JSON.stringify(t));return this.resetElements(n),n},RepeaterModifier.prototype.changeGroupRender=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)t[r]._render=e,t[r].ty==="gr"&&this.changeGroupRender(t[r].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,r,n,s,o;if(this._mdf||t){var a=Math.ceil(this.c.v);if(this._groups.length<a){for(;this._groups.length<a;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes()}o=0;var c;for(n=0;n<=this._groups.length-1;n+=1)c=o<a,this._groups[n]._render=c,this.changeGroupRender(this._groups[n].it,c),o+=1;this._currentCopies=a;var h=this.o.v,f=h%1,u=h>0?Math.floor(h):Math.ceil(h),m,d=this.tr.v.props,v=this.pMatrix.props,p=this.rMatrix.props,g=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var y=0;if(h>0){for(;y<u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),y+=1;f&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,f,!1),y+=f)}else if(h<0){for(;y>u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),y-=1;f&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-f,!0),y-=f)}n=this.data.m===1?0:this._currentCopies-1,s=this.data.m===1?1:-1,o=this._currentCopies;for(var _,b;o;){if(e=this.elemsData[n].it,r=e[e.length-1].transform.mProps.v.props,b=r.length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),y!==0){for((n!==0&&s===1||n!==this._currentCopies-1&&s===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),_=0;_<b;_+=1)r[_]=this.matrix.props[_];this.matrix.reset()}else for(this.matrix.reset(),_=0;_<b;_+=1)r[_]=this.matrix.props[_];y+=1,o-=1,n+=s}}else for(o=this._currentCopies,n=0,s=1;o;)e=this.elemsData[n].it,r=e[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,o-=1,n+=s},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier);function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shape_pool.release(this.shapes[t]);this._length=0};function DashProperty(t,e,r,n){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);var s,o=e.length||0,a;for(s=0;s<o;s+=1)a=PropertyFactory.getProp(t,e[s].v,0,0,this),this.k=a.k||this.k,this.dataProps[s]={n:e[s].n,p:a};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(t){if(!(this.elem.globalData.frameId===this.frameId&&!t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,r=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<r;e+=1)this.dataProps[e].n!="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function GradientProperty(t,e,r){this.data=e,this.c=createTypedArray("uint8c",e.p*4);var n=e.k.k[0].s?e.k.k[0].s.length-e.p*4:e.k.k.length-e.p*4;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(t,e){for(var r=0,n=this.o.length/2,s;r<n;){if(s=Math.abs(t[r*4]-t[e*4+r*2]),s>.01)return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,r=this.data.p*4,n,s;for(e=0;e<r;e+=1)n=e%4==0?100:255,s=Math.round(this.prop.v[e]*n),this.c[e]!==s&&(this.c[e]=s,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,e=this.data.p*4;e<r;e+=1)n=e%2==0?100:1,s=e%2==0?Math.round(this.prop.v[e]*100):this.prop.v[e],this.o[e-this.data.p*4]!==s&&(this.o[e-this.data.p*4]=s,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(t,e,r,n){if(e===0)return"";var s=t.o,o=t.i,a=t.v,l,c=" M"+n.applyToPointStringified(a[0][0],a[0][1]);for(l=1;l<e;l+=1)c+=" C"+n.applyToPointStringified(s[l-1][0],s[l-1][1])+" "+n.applyToPointStringified(o[l][0],o[l][1])+" "+n.applyToPointStringified(a[l][0],a[l][1]);return r&&e&&(c+=" C"+n.applyToPointStringified(s[l-1][0],s[l-1][1])+" "+n.applyToPointStringified(o[0][0],o[0][1])+" "+n.applyToPointStringified(a[0][0],a[0][1]),c+="z"),c},ImagePreloader=function(){var t=function(){var d=createTag("canvas");d.width=1,d.height=1;var v=d.getContext("2d");return v.fillStyle="rgba(0,0,0,0)",v.fillRect(0,0,1,1),d}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(d,v,p){var g="";if(d.e)g=d.p;else if(v){var y=d.p;y.indexOf("images/")!==-1&&(y=y.split("/")[1]),g=v+y}else g=p,g+=d.u?d.u:"",g+=d.p;return g}function n(d){var v=r(d,this.assetsPath,this.path),p=createNS("image");p.addEventListener("load",this._imageLoaded,!1),p.addEventListener("error",function(){g.img=t,this._imageLoaded()}.bind(this),!1),p.setAttributeNS("http://www.w3.org/1999/xlink","href",v);var g={img:p,assetData:d};return g}function s(d){var v=r(d,this.assetsPath,this.path),p=createTag("img");p.crossOrigin="anonymous",p.addEventListener("load",this._imageLoaded,!1),p.addEventListener("error",function(){g.img=t,this._imageLoaded()}.bind(this),!1),p.src=v;var g={img:p,assetData:d};return g}function o(d,v){this.imagesLoadedCb=v;var p,g=d.length;for(p=0;p<g;p+=1)d[p].layers||(this.totalImages+=1,this.images.push(this._createImageData(d[p])))}function a(d){this.path=d||""}function l(d){this.assetsPath=d||""}function c(d){for(var v=0,p=this.images.length;v<p;){if(this.images[v].assetData===d)return this.images[v].img;v+=1}}function h(){this.imagesLoadedCb=null,this.images.length=0}function f(){return this.totalImages===this.loadedAssets}function u(d){d==="svg"?this._createImageData=this.createImageData.bind(this):this._createImageData=this.createImgData.bind(this)}function m(d){this._imageLoaded=e.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}return m.prototype={loadAssets:o,setAssetsPath:l,setPath:a,loaded:f,destroy:h,getImage:c,createImgData:s,createImageData:n,imageLoaded:e,setCacheType:u},m}(),featureSupport=function(){var t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),t}(),filtersFactory=function(){var t={};t.createFilter=e,t.createAlphaToLuminanceFilter=r;function e(n){var s=createNS("filter");return s.setAttribute("id",n),s.setAttribute("filterUnits","objectBoundingBox"),s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s}function r(){var n=createNS("feColorMatrix");return n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),n}return t}(),assetLoader=function(){function t(r){if(r.response&&typeof r.response=="object")return r.response;if(r.response&&typeof r.response=="string")return JSON.parse(r.response);if(r.responseText)return JSON.parse(r.responseText)}function e(r,n,s){var o,a=new XMLHttpRequest;a.open("GET",r,!0);try{a.responseType="json"}catch(l){}a.send(),a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200)o=t(a),n(o);else try{o=t(a),n(o)}catch(l){s&&s(l)}}}return{load:e}}();function TextAnimatorProperty(t,e,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}TextAnimatorProperty.prototype.searchProperties=function(){var t,e=this._textData.a.length,r,n=PropertyFactory.getProp;for(t=0;t<e;t+=1)r=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,r,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:n(this._elem,this._textData.p.f,0,0,this),l:n(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=n(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,!(!this._mdf&&!this._isFirstFrame&&!e&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var r=this._moreOptions.alignment.v,n=this._animatorsData,s=this._textData,o=this.mHelper,a=this._renderType,l=this.renderedLetters.length,c=this.data,h,f,u,m,d=t.l,v,p,g,y,_,b,w,S,E,x,T,A,P,z,V;if(this._hasMaskedPath){if(V=this._pathData.m,!this._pathData.n||this._pathData._mdf){var L=V.v;this._pathData.r&&(L=L.reverse()),v={tLength:0,segments:[]},m=L._length-1;var O;for(A=0,u=0;u<m;u+=1)O=bez.buildBezierData(L.v[u],L.v[u+1],[L.o[u][0]-L.v[u][0],L.o[u][1]-L.v[u][1]],[L.i[u+1][0]-L.v[u+1][0],L.i[u+1][1]-L.v[u+1][1]]),v.tLength+=O.segmentLength,v.segments.push(O),A+=O.segmentLength;u=m,V.v.c&&(O=bez.buildBezierData(L.v[u],L.v[0],[L.o[u][0]-L.v[u][0],L.o[u][1]-L.v[u][1]],[L.i[0][0]-L.v[0][0],L.i[0][1]-L.v[0][1]]),v.tLength+=O.segmentLength,v.segments.push(O),A+=O.segmentLength),this._pathData.pi=v}if(v=this._pathData.pi,p=this._pathData.f.v,w=0,b=1,y=0,_=!0,x=v.segments,p<0&&V.v.c)for(v.tLength<Math.abs(p)&&(p=-Math.abs(p)%v.tLength),w=x.length-1,E=x[w].points,b=E.length-1;p<0;)p+=E[b].partialLength,b-=1,b<0&&(w-=1,E=x[w].points,b=E.length-1);E=x[w].points,S=E[b-1],g=E[b],T=g.partialLength}m=d.length,h=0,f=0;var k=t.finalSize*1.2*.714,X=!0,R,U,q,Z,oe;Z=n.length;var N,M,$=-1,W,H,ee,Y=p,K=w,ne=b,te=-1,ae,ie,pe,me,_e,B=0,G,fe,ue,Ne="",Re=this.defaultPropsArray,xe;if(t.j===2||t.j===1){var Ce=0,Ve=0,Oe=t.j===2?-.5:-1,ge=0,Le=!0;for(u=0;u<m;u+=1)if(d[u].n){for(Ce&&(Ce+=Ve);ge<u;)d[ge].animatorJustifyOffset=Ce,ge+=1;Ce=0,Le=!0}else{for(q=0;q<Z;q+=1)R=n[q].a,R.t.propType&&(Le&&t.j===2&&(Ve+=R.t.v*Oe),U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),M.length?Ce+=R.t.v*M[0]*Oe:Ce+=R.t.v*M*Oe);Le=!1}for(Ce&&(Ce+=Ve);ge<u;)d[ge].animatorJustifyOffset=Ce,ge+=1}for(u=0;u<m;u+=1){if(o.reset(),ae=1,d[u].n)h=0,f+=t.yOffset,f+=X?1:0,p=Y,X=!1,B=0,this._hasMaskedPath&&(w=K,b=ne,E=x[w].points,S=E[b-1],g=E[b],T=g.partialLength,y=0),xe=G=ue=Ne="",Re=this.defaultPropsArray;else{if(this._hasMaskedPath){if(te!==d[u].line){switch(t.j){case 1:p+=A-t.lineWidths[d[u].line];break;case 2:p+=(A-t.lineWidths[d[u].line])/2;break}te=d[u].line}$!==d[u].ind&&(d[$]&&(p+=d[$].extra),p+=d[u].an/2,$=d[u].ind),p+=r[0]*d[u].an/200;var we=0;for(q=0;q<Z;q+=1)R=n[q].a,R.p.propType&&(U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),M.length?we+=R.p.v[0]*M[0]:we+=R.p.v[0]*M),R.a.propType&&(U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),M.length?we+=R.a.v[0]*M[0]:we+=R.a.v[0]*M);for(_=!0;_;)y+T>=p+we||!E?(P=(p+we-y)/g.partialLength,H=S.point[0]+(g.point[0]-S.point[0])*P,ee=S.point[1]+(g.point[1]-S.point[1])*P,o.translate(-r[0]*d[u].an/200,-(r[1]*k/100)),_=!1):E&&(y+=g.partialLength,b+=1,b>=E.length&&(b=0,w+=1,x[w]?E=x[w].points:V.v.c?(b=0,w=0,E=x[w].points):(y-=g.partialLength,E=null)),E&&(S=g,g=E[b],T=g.partialLength));W=d[u].an/2-d[u].add,o.translate(-W,0,0)}else W=d[u].an/2-d[u].add,o.translate(-W,0,0),o.translate(-r[0]*d[u].an/200,-r[1]*k/100,0);for(B+=d[u].l/2,q=0;q<Z;q+=1)R=n[q].a,R.t.propType&&(U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),(h!==0||t.j!==0)&&(this._hasMaskedPath?M.length?p+=R.t.v*M[0]:p+=R.t.v*M:M.length?h+=R.t.v*M[0]:h+=R.t.v*M));for(B+=d[u].l/2,t.strokeWidthAnim&&(pe=t.sw||0),t.strokeColorAnim&&(t.sc?ie=[t.sc[0],t.sc[1],t.sc[2]]:ie=[0,0,0]),t.fillColorAnim&&t.fc&&(me=[t.fc[0],t.fc[1],t.fc[2]]),q=0;q<Z;q+=1)R=n[q].a,R.a.propType&&(U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),M.length?o.translate(-R.a.v[0]*M[0],-R.a.v[1]*M[1],R.a.v[2]*M[2]):o.translate(-R.a.v[0]*M,-R.a.v[1]*M,R.a.v[2]*M));for(q=0;q<Z;q+=1)R=n[q].a,R.s.propType&&(U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),M.length?o.scale(1+(R.s.v[0]-1)*M[0],1+(R.s.v[1]-1)*M[1],1):o.scale(1+(R.s.v[0]-1)*M,1+(R.s.v[1]-1)*M,1));for(q=0;q<Z;q+=1){if(R=n[q].a,U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),R.sk.propType&&(M.length?o.skewFromAxis(-R.sk.v*M[0],R.sa.v*M[1]):o.skewFromAxis(-R.sk.v*M,R.sa.v*M)),R.r.propType&&(M.length?o.rotateZ(-R.r.v*M[2]):o.rotateZ(-R.r.v*M)),R.ry.propType&&(M.length?o.rotateY(R.ry.v*M[1]):o.rotateY(R.ry.v*M)),R.rx.propType&&(M.length?o.rotateX(R.rx.v*M[0]):o.rotateX(R.rx.v*M)),R.o.propType&&(M.length?ae+=(R.o.v*M[0]-ae)*M[0]:ae+=(R.o.v*M-ae)*M),t.strokeWidthAnim&&R.sw.propType&&(M.length?pe+=R.sw.v*M[0]:pe+=R.sw.v*M),t.strokeColorAnim&&R.sc.propType)for(_e=0;_e<3;_e+=1)M.length?ie[_e]=ie[_e]+(R.sc.v[_e]-ie[_e])*M[0]:ie[_e]=ie[_e]+(R.sc.v[_e]-ie[_e])*M;if(t.fillColorAnim&&t.fc){if(R.fc.propType)for(_e=0;_e<3;_e+=1)M.length?me[_e]=me[_e]+(R.fc.v[_e]-me[_e])*M[0]:me[_e]=me[_e]+(R.fc.v[_e]-me[_e])*M;R.fh.propType&&(M.length?me=addHueToRGB(me,R.fh.v*M[0]):me=addHueToRGB(me,R.fh.v*M)),R.fs.propType&&(M.length?me=addSaturationToRGB(me,R.fs.v*M[0]):me=addSaturationToRGB(me,R.fs.v*M)),R.fb.propType&&(M.length?me=addBrightnessToRGB(me,R.fb.v*M[0]):me=addBrightnessToRGB(me,R.fb.v*M))}}for(q=0;q<Z;q+=1)R=n[q].a,R.p.propType&&(U=n[q].s,M=U.getMult(d[u].anIndexes[q],s.a[q].s.totalChars),this._hasMaskedPath?M.length?o.translate(0,R.p.v[1]*M[0],-R.p.v[2]*M[1]):o.translate(0,R.p.v[1]*M,-R.p.v[2]*M):M.length?o.translate(R.p.v[0]*M[0],R.p.v[1]*M[1],-R.p.v[2]*M[2]):o.translate(R.p.v[0]*M,R.p.v[1]*M,-R.p.v[2]*M));if(t.strokeWidthAnim&&(G=pe<0?0:pe),t.strokeColorAnim&&(fe="rgb("+Math.round(ie[0]*255)+","+Math.round(ie[1]*255)+","+Math.round(ie[2]*255)+")"),t.fillColorAnim&&t.fc&&(ue="rgb("+Math.round(me[0]*255)+","+Math.round(me[1]*255)+","+Math.round(me[2]*255)+")"),this._hasMaskedPath){if(o.translate(0,-t.ls),o.translate(0,r[1]*k/100+f,0),s.p.p){z=(g.point[1]-S.point[1])/(g.point[0]-S.point[0]);var Q=Math.atan(z)*180/Math.PI;g.point[0]<S.point[0]&&(Q+=180),o.rotate(-Q*Math.PI/180)}o.translate(H,ee,0),p-=r[0]*d[u].an/200,d[u+1]&&$!==d[u+1].ind&&(p+=d[u].an/2,p+=t.tr/1e3*t.finalSize)}else{switch(o.translate(h,f,0),t.ps&&o.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:o.translate(d[u].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[d[u].line]),0,0);break;case 2:o.translate(d[u].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[d[u].line])/2,0,0);break}o.translate(0,-t.ls),o.translate(W,0,0),o.translate(r[0]*d[u].an/200,r[1]*k/100,0),h+=d[u].l+t.tr/1e3*t.finalSize}a==="html"?Ne=o.toCSS():a==="svg"?Ne=o.to2dCSS():Re=[o.props[0],o.props[1],o.props[2],o.props[3],o.props[4],o.props[5],o.props[6],o.props[7],o.props[8],o.props[9],o.props[10],o.props[11],o.props[12],o.props[13],o.props[14],o.props[15]],xe=ae}l<=u?(oe=new LetterProps(xe,G,fe,ue,Ne,Re),this.renderedLetters.push(oe),l+=1,this.lettersChangedFlag=!0):(oe=this.renderedLetters[u],this.lettersChangedFlag=oe.update(xe,G,fe,ue,Ne,Re)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function TextAnimatorDataProperty(t,e,r){var n={propType:!1},s=PropertyFactory.getProp,o=e.a;this.a={r:o.r?s(t,o.r,0,degToRads,r):n,rx:o.rx?s(t,o.rx,0,degToRads,r):n,ry:o.ry?s(t,o.ry,0,degToRads,r):n,sk:o.sk?s(t,o.sk,0,degToRads,r):n,sa:o.sa?s(t,o.sa,0,degToRads,r):n,s:o.s?s(t,o.s,1,.01,r):n,a:o.a?s(t,o.a,1,0,r):n,o:o.o?s(t,o.o,0,.01,r):n,p:o.p?s(t,o.p,1,0,r):n,sw:o.sw?s(t,o.sw,0,0,r):n,sc:o.sc?s(t,o.sc,1,0,r):n,fc:o.fc?s(t,o.fc,1,0,r):n,fh:o.fh?s(t,o.fh,0,0,r):n,fs:o.fs?s(t,o.fs,0,.01,r):n,fb:o.fb?s(t,o.fb,0,.01,r):n,t:o.t?s(t,o.t,0,0,r):n},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,r),this.s.t=e.s.t}function LetterProps(t,e,r,n,s,o){this.o=t,this.sw=e,this.sc=r,this.fc=n,this.m=s,this.p=o,this._mdf={o:!0,sw:!!e,sc:!!r,fc:!!n,m:!0,p:!0}}LetterProps.prototype.update=function(t,e,r,n,s,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,a=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,a=!0),this.sc!==r&&(this.sc=r,this._mdf.sc=!0,a=!0),this.fc!==n&&(this.fc=n,this._mdf.fc=!0,a=!0),this.m!==s&&(this.m=s,this._mdf.m=!0,a=!0),o.length&&(this.p[0]!==o[0]||this.p[1]!==o[1]||this.p[4]!==o[4]||this.p[5]!==o[5]||this.p[12]!==o[12]||this.p[13]!==o[13])&&(this.p=o,this._mdf.p=!0,a=!0),a};function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!t)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,r=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var n,s,o=this.effectsSequence.length,a=t||this.data.d.k[this.keysIndex].s;for(s=0;s<o;s+=1)r!==this.keysIndex?a=this.effectsSequence[s](a,a.t):a=this.effectsSequence[s](this.currentData,a.t);e!==a&&this.setCurrentData(a),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e,r=this.elem.comp.renderedFrame,n=0,s=t.length;n<=s-1&&(e=t[n].s,!(n===s-1||t[n+1].t>r));)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e=FontManager.getCombinedCharacterCodes(),r=[],n=0,s=t.length,o;n<s;)o=t.charCodeAt(n),e.indexOf(o)!==-1?r[r.length-1]+=t.charAt(n):o>=55296&&o<=56319?(o=t.charCodeAt(n+1),o>=56320&&o<=57343?(r.push(t.substr(n,2)),++n):r.push(t.charAt(n))):r.push(t.charAt(n)),n+=1;return r},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e=this.elem.globalData.fontManager,r=this.data,n=[],s,o,a,l=0,c,h=r.m.g,f=0,u=0,m=0,d=[],v=0,p=0,g,y,_=e.getFontByName(t.f),b,w=0,S=_.fStyle?_.fStyle.split(" "):[],E="normal",x="normal";o=S.length;var T;for(s=0;s<o;s+=1)switch(T=S[s].toLowerCase(),T){case"italic":x="italic";break;case"bold":E="700";break;case"black":E="900";break;case"medium":E="500";break;case"regular":case"normal":E="400";break;case"light":case"thin":E="200";break}t.fWeight=_.fWeight||E,t.fStyle=x,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),o=t.finalText.length,t.finalLineHeight=t.lh;var A=t.tr/1e3*t.finalSize,P;if(t.sz)for(var z=!0,V=t.sz[0],L=t.sz[1],O,k;z;){k=this.buildFinalText(t.t),O=0,v=0,o=k.length,A=t.tr/1e3*t.finalSize;var X=-1;for(s=0;s<o;s+=1)P=k[s].charCodeAt(0),a=!1,k[s]===" "?X=s:(P===13||P===3)&&(v=0,a=!0,O+=t.finalLineHeight||t.finalSize*1.2),e.chars?(b=e.getCharData(k[s],_.fStyle,_.fFamily),w=a?0:b.w*t.finalSize/100):w=e.measureText(k[s],t.f,t.finalSize),v+w>V&&k[s]!==" "?(X===-1?o+=1:s=X,O+=t.finalLineHeight||t.finalSize*1.2,k.splice(s,X===s?1:0,"\r"),X=-1,v=0):(v+=w,v+=A);O+=_.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&L<O?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=k,o=t.finalText.length,z=!1)}v=-A,w=0;var R=0,U;for(s=0;s<o;s+=1)if(a=!1,U=t.finalText[s],P=U.charCodeAt(0),P===13||P===3?(R=0,d.push(v),p=v>p?v:p,v=-2*A,c="",a=!0,m+=1):c=U,e.chars?(b=e.getCharData(U,_.fStyle,e.getFontByName(t.f).fFamily),w=a?0:b.w*t.finalSize/100):w=e.measureText(c,t.f,t.finalSize),U===" "?R+=w+A:(v+=w+A+R,R=0),n.push({l:w,an:w,add:f,n:a,anIndexes:[],val:c,line:m,animatorJustifyOffset:0}),h==2){if(f+=w,c===""||c===" "||s===o-1){for((c===""||c===" ")&&(f-=w);u<=s;)n[u].an=f,n[u].ind=l,n[u].extra=w,u+=1;l+=1,f=0}}else if(h==3){if(f+=w,c===""||s===o-1){for(c===""&&(f-=w);u<=s;)n[u].an=f,n[u].ind=l,n[u].extra=w,u+=1;f=0,l+=1}}else n[l].ind=l,n[l].extra=0,l+=1;if(t.l=n,p=v>p?v:p,d.push(v),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=p,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=d;var q=r.a,Z,oe;y=q.length;var N,M,$=[];for(g=0;g<y;g+=1){for(Z=q[g],Z.a.sc&&(t.strokeColorAnim=!0),Z.a.sw&&(t.strokeWidthAnim=!0),(Z.a.fc||Z.a.fh||Z.a.fs||Z.a.fb)&&(t.fillColorAnim=!0),M=0,N=Z.s.b,s=0;s<o;s+=1)oe=n[s],oe.anIndexes[g]=M,(N==1&&oe.val!==""||N==2&&oe.val!==""&&oe.val!==" "||N==3&&(oe.n||oe.val==" "||s==o-1)||N==4&&(oe.n||s==o-1))&&(Z.s.rn===1&&$.push(M),M+=1);r.a[g].s.totalChars=M;var W=-1,H;if(Z.s.rn===1)for(s=0;s<o;s+=1)oe=n[s],W!=oe.anIndexes[g]&&(W=oe.anIndexes[g],H=$.splice(Math.floor(Math.random()*$.length),1)[0]),oe.anIndexes[g]=H}t.yOffset=t.finalLineHeight||t.finalSize*1.2,t.ls=t.ls||0,t.ascent=_.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=e===void 0?this.keysIndex:e;var r=this.copyData({},this.data.d.k[e].s);r=this.copyData(r,t),this.data.d.k[e].s=r,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,r=Math.floor;function n(o,a){this._currentTextLength=-1,this.k=!1,this.data=a,this.elem=o,this.comp=o.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(o),this.s=PropertyFactory.getProp(o,a.s||{k:0},0,0,this),"e"in a?this.e=PropertyFactory.getProp(o,a.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(o,a.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(o,a.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(o,a.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(o,a.a,0,.01,this),this.dynamicProperties.length||this.getValue()}n.prototype={getMult:function(o){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var a=0,l=0,c=1,h=1;this.ne.v>0?a=this.ne.v/100:l=-this.ne.v/100,this.xe.v>0?c=1-this.xe.v/100:h=1+this.xe.v/100;var f=BezierFactory.getBezierEasing(a,l,c,h).get,u=0,m=this.finalS,d=this.finalE,v=this.data.sh;if(v===2)d===m?u=o>=d?1:0:u=t(0,e(.5/(d-m)+(o-m)/(d-m),1)),u=f(u);else if(v===3)d===m?u=o>=d?0:1:u=1-t(0,e(.5/(d-m)+(o-m)/(d-m),1)),u=f(u);else if(v===4)d===m?u=0:(u=t(0,e(.5/(d-m)+(o-m)/(d-m),1)),u<.5?u*=2:u=1-2*(u-.5)),u=f(u);else if(v===5){if(d===m)u=0;else{var p=d-m;o=e(t(0,o+.5-m),d-m);var g=-p/2+o,y=p/2;u=Math.sqrt(1-g*g/(y*y))}u=f(u)}else v===6?(d===m?u=0:(o=e(t(0,o+.5-m),d-m),u=(1+Math.cos(Math.PI+Math.PI*2*o/(d-m)))/2),u=f(u)):(o>=r(m)&&(o-m<0?u=t(0,e(e(d,1)-(m-o),1)):u=t(0,e(d-o,1))),u=f(u));return u*this.a.v},getValue:function(o){this.iterateDynamicProperties(),this._mdf=o||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,o&&this.data.r===2&&(this.e.v=this._currentTextLength);var a=this.data.r===2?1:100/this.data.totalChars,l=this.o.v/a,c=this.s.v/a+l,h=this.e.v/a+l;if(c>h){var f=c;c=h,h=f}this.finalS=c,this.finalE=h}},extendPrototype([DynamicPropertyContainer],n);function s(o,a,l){return new n(o,a,l)}return{getTextSelectorProp:s}}(),pool_factory=function(){return function(t,e,r,n){var s=0,o=t,a=createSizedArray(o),l={newElement:c,release:h};function c(){var u;return s?(s-=1,u=a[s]):u=e(),u}function h(u){s===o&&(a=pooling.double(a),o=o*2),r&&r(u),a[s]=u,s+=1}function f(){var u=c();return n(u)}return l}}(),pooling=function(){function t(e){return e.concat(createSizedArray(e.length))}return{double:t}}(),point_pool=function(){function t(){return createTypedArray("float32",2)}return pool_factory(8,t)}(),shape_pool=function(){function t(){return new ShapePath}function e(s){var o=s._length,a;for(a=0;a<o;a+=1)point_pool.release(s.v[a]),point_pool.release(s.i[a]),point_pool.release(s.o[a]),s.v[a]=null,s.i[a]=null,s.o[a]=null;s._length=0,s.c=!1}function r(s){var o=n.newElement(),a,l=s._length===void 0?s.v.length:s._length;o.setLength(l),o.c=s.c;var c;for(a=0;a<l;a+=1)o.setTripleAt(s.v[a][0],s.v[a][1],s.o[a][0],s.o[a][1],s.i[a][0],s.i[a][1],a);return o}var n=pool_factory(4,t,e);return n.clone=r,n}(),shapeCollection_pool=function(){var t={newShapeCollection:s,release:o},e=0,r=4,n=createSizedArray(r);function s(){var a;return e?(e-=1,a=n[e]):a=new ShapeCollection,a}function o(a){var l,c=a._length;for(l=0;l<c;l+=1)shape_pool.release(a.shapes[l]);a._length=0,e===r&&(n=pooling.double(n),r=r*2),n[e]=a,e+=1}return t}(),segments_length_pool=function(){function t(){return{lengths:[],totalLength:0}}function e(r){var n,s=r.lengths.length;for(n=0;n<s;n+=1)bezier_length_pool.release(r.lengths[n]);r.lengths.length=0}return pool_factory(8,t,e)}(),bezier_length_pool=function(){function t(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}return pool_factory(8,t)}();function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(t){var e,r=this.layers.length,n;for(this.completeLayers=!0,e=r-1;e>=0;e--)this.elements[e]||(n=this.layers[e],n.ip-n.st<=t-this.layers[e].st&&n.op-n.st>t-this.layers[e].st&&this.buildItem(e)),this.completeLayers=this.elements[e]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 13:return this.createCamera(t)}return this.createNull(t)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;var e,r=t.length,n,s=this.layers.length;for(e=0;e<r;e+=1)for(n=0;n<s;){if(this.layers[n].id==t[e].id){this.layers[n]=t[e];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,r){for(var n=this.elements,s=this.layers,o=0,a=s.length;o<a;)s[o].ind==e&&(!n[o]||n[o]===!0?(this.buildItem(o),this.addPendingElement(t)):(r.push(n[o]),n[o].setAsParent(),s[o].parent!==void 0?this.buildElementParenting(t,s[o].parent,r):t.setHierarchy(r))),o+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length;for(e=0;e<r;e+=1)if(t[e].xt){var n=this.createComp(t[e]);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r="";if(e&&e.title){var n=createNS("title"),s=createElementID();n.setAttribute("id",s),n.textContent=e.title,this.svgElement.appendChild(n),r+=s}if(e&&e.description){var o=createNS("desc"),a=createElementID();o.setAttribute("id",a),o.textContent=e.description,this.svgElement.appendChild(o),r+=" "+a}r&&this.svgElement.setAttribute("aria-labelledby",r);var l=createNS("defs");this.svgElement.appendChild(l);var c=createNS("g");this.svgElement.appendChild(c),this.layerElement=c,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:l,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextElement(t,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var r=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",t.w),n.setAttribute("height",t.h),n.setAttribute("x",0),n.setAttribute("y",0);var s=createElementID();r.setAttribute("id",s),r.appendChild(n),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+s+")"),e.appendChild(r),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty==99)){e[t]=!0;var r=this.createItem(this.layers[t]);e[t]=r,expressionsPlugin&&(this.layers[t].ty===0&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,t),this.layers[t].tt&&(!this.elements[t-1]||this.elements[t-1]===!0?(this.buildItem(t-1),this.addPendingElement(r)):r.setMatte(e[t-1].layerId))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,r=this.elements.length;e<r;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(!(this.renderedFrame===t||this.destroyed)){t===null?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var e,r=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=r-1;e>=0;e--)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<r;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(!!r){for(var n=0,s;n<e;)this.elements[n]&&this.elements[n]!==!0&&this.elements[n].getBaseElement()&&(s=this.elements[n].getBaseElement()),n+=1;s?this.layerElement.insertBefore(r,s):this.layerElement.appendChild(r)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"};function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:e&&e.clearCanvas!==void 0?e.clearCanvas:!0,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",className:e&&e.className||"",id:e&&e.id||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(t){if(!(t[0]===1&&t[1]===0&&t[4]===0&&t[5]===1&&t[12]===0&&t[13]===0)){if(!this.renderConfig.clearCanvas){this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13]);return}this.transformMat.cloneFromProps(t);var e=this.contextData.cTr.props;this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var r=this.contextData.cTr.props;this.canvasContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])}},CanvasRenderer.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=t<0?0:t,this.globalData.currentGlobalAlpha=this.contextData.cO;return}this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRenderer.prototype.save=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}t&&this.canvasContext.save();var e=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var r,n=this.contextData.saved[this.contextData.cArrPos];for(r=0;r<16;r+=1)n[r]=e[r];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRenderer.prototype.restore=function(t){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var e=this.contextData.saved[this.contextData.cArrPos],r,n=this.contextData.cTr.props;for(r=0;r<16;r+=1)n[r]=e[r];this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]),e=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=e,this.globalData.currentGlobalAlpha!==e&&(this.canvasContext.globalAlpha=e,this.globalData.currentGlobalAlpha=e)},CanvasRenderer.prototype.configAnimation=function(t){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)):this.canvasContext=this.renderConfig.context,this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){this.reset();var t,e;this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr);var r,n;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var s=this.renderConfig.preserveAspectRatio.split(" "),o=s[1]||"meet",a=s[0]||"xMidYMid",l=a.substr(0,4),c=a.substr(4);r=t/e,n=this.transformCanvas.w/this.transformCanvas.h,n>r&&o==="meet"||n<r&&o==="slice"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),l==="xMid"&&(n<r&&o==="meet"||n>r&&o==="slice")?this.transformCanvas.tx=(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:l==="xMax"&&(n<r&&o==="meet"||n>r&&o==="slice")?this.transformCanvas.tx=(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,c==="YMid"&&(n>r&&o==="meet"||n<r&&o==="slice")?this.transformCanvas.ty=(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:c==="YMax"&&(n>r&&o==="meet"||n<r&&o==="slice")?this.transformCanvas.ty=(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio=="none"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML="");var t,e=this.layers?this.layers.length:0;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t,e){if(!(this.renderedFrame===t&&this.renderConfig.clearCanvas===!0&&!e||this.destroyed||t===-1)){this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(t),r=0;r<n;r++)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(t-this.layers[r].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(t){var e=this.elements;if(!(e[t]||this.layers[t].ty==99)){var r=this.createItem(this.layers[t],this,this.globalData);e[t]=r,r.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"};function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();t.checkParenting()}},HybridRenderer.prototype.appendElementInPos=function(t,e){var r=t.getBaseElement();if(!!r){var n=this.layers[e];if(!n.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(r,e);else{for(var s=0,o,a,l;s<e;)this.elements[s]&&this.elements[s]!==!0&&this.elements[s].getBaseElement&&(a=this.elements[s],l=this.layers[s].ddd?this.getThreeDContainerByPos(s):a.getBaseElement(),o=l||o),s+=1;o?(!n.ddd||!this.supports3d)&&this.layerElement.insertBefore(r,o):(!n.ddd||!this.supports3d)&&this.layerElement.appendChild(r)}else this.addTo3dContainer(r,e)}},HybridRenderer.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextElement(t,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,r=this.threeDElements.length;e<r;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}},HybridRenderer.prototype.createThreeDContainer=function(t,e){var r=createTag("div");styleDiv(r);var n=createTag("div");styleDiv(n),e==="3d"&&(r.style.width=this.globalData.compSize.w+"px",r.style.height=this.globalData.compSize.h+"px",r.style.transformOrigin=r.style.mozTransformOrigin=r.style.webkitTransformOrigin="50% 50%",n.style.transform=n.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),r.appendChild(n);var s={container:n,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(s),s},HybridRenderer.prototype.build3dContainers=function(){var t,e=this.layers.length,r,n="";for(t=0;t<e;t+=1)this.layers[t].ddd&&this.layers[t].ty!==3?(n!=="3d"&&(n="3d",r=this.createThreeDContainer(t,"3d")),r.endPos=Math.max(r.endPos,t)):(n!=="2d"&&(n="2d",r=this.createThreeDContainer(t,"2d")),r.endPos=Math.max(r.endPos,t));for(e=this.threeDElements.length,t=e-1;t>=0;t--)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var r=0,n=this.threeDElements.length;r<n;){if(e<=this.threeDElements[r].endPos){for(var s=this.threeDElements[r].startPos,o;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(o=this.elements[s].getBaseElement()),s+=1;o?this.threeDElements[r].container.insertBefore(t,o):this.threeDElements[r].container.appendChild(t);break}r+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=createTag("div"),r=this.animationItem.wrapper;e.style.width=t.w+"px",e.style.height=t.h+"px",this.resizerElem=e,styleDiv(e),e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),r.appendChild(e),e.style.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var s=createNS("defs");n.appendChild(s),this.data=t,this.setupGlobalData(t,n),this.globalData.defs=s,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var t,e=this.layers?this.layers.length:0;for(t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,r=t/e,n=this.globalData.compSize.w/this.globalData.compSize.h,s,o,a,l;n>r?(s=t/this.globalData.compSize.w,o=t/this.globalData.compSize.w,a=0,l=(e-this.globalData.compSize.h*(t/this.globalData.compSize.w))/2):(s=e/this.globalData.compSize.h,o=e/this.globalData.compSize.h,a=(t-this.globalData.compSize.w*(e/this.globalData.compSize.h))/2,l=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+s+",0,0,0,0,"+o+",0,0,0,0,1,0,"+a+","+l+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t=this.globalData.compSize.w,e=this.globalData.compSize.h,r,n=this.threeDElements.length;for(r=0;r<n;r+=1)this.threeDElements[r].perspectiveElem.style.perspective=this.threeDElements[r].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(t){var e,r=t.length,n=createTag("div");for(e=0;e<r;e+=1)if(t[e].xt){var s=this.createComp(t[e],n,this.globalData.comp,null);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}};function MaskElement(t,e,r){this.data=t,this.element=e,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n=this.globalData.defs,s,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var a,l=this.masksProperties,c=0,h=[],f,u,m=createElementID(),d,v,p,g,y="clipPath",_="clip-path";for(s=0;s<o;s++){if((l[s].mode!=="a"&&l[s].mode!=="n"||l[s].inv||l[s].o.k!==100||l[s].o.x)&&(y="mask",_="mask"),(l[s].mode=="s"||l[s].mode=="i")&&c===0?(d=createNS("rect"),d.setAttribute("fill","#ffffff"),d.setAttribute("width",this.element.comp.data.w||0),d.setAttribute("height",this.element.comp.data.h||0),h.push(d)):d=null,a=createNS("path"),l[s].mode=="n"){this.viewData[s]={op:PropertyFactory.getProp(this.element,l[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[s],3),elem:a,lastPath:""},n.appendChild(a);continue}c+=1,a.setAttribute("fill",l[s].mode==="s"?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero");var b;if(l[s].x.k!==0?(y="mask",_="mask",g=PropertyFactory.getProp(this.element,l[s].x,0,null,this.element),b=createElementID(),v=createNS("filter"),v.setAttribute("id",b),p=createNS("feMorphology"),p.setAttribute("operator","erode"),p.setAttribute("in","SourceGraphic"),p.setAttribute("radius","0"),v.appendChild(p),n.appendChild(v),a.setAttribute("stroke",l[s].mode==="s"?"#000000":"#ffffff")):(p=null,g=null),this.storedData[s]={elem:a,x:g,expan:p,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},l[s].mode=="i"){u=h.length;var w=createNS("g");for(f=0;f<u;f+=1)w.appendChild(h[f]);var S=createNS("mask");S.setAttribute("mask-type","alpha"),S.setAttribute("id",m+"_"+c),S.appendChild(a),n.appendChild(S),w.setAttribute("mask","url("+locationHref+"#"+m+"_"+c+")"),h.length=0,h.push(w)}else h.push(a);l[s].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[s]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,l[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,l[s],3),invRect:d},this.viewData[s].prop.k||this.drawPath(l[s],this.viewData[s].prop.v,this.viewData[s])}for(this.maskElement=createNS(y),o=h.length,s=0;s<o;s+=1)this.maskElement.appendChild(h[s]);c>0&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(_,"url("+locationHref+"#"+m+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e=this.element.finalTransform.mat,r,n=this.masksProperties.length;for(r=0;r<n;r++)if((this.viewData[r].prop._mdf||t)&&this.drawPath(this.masksProperties[r],this.viewData[r].prop.v,this.viewData[r]),(this.viewData[r].op._mdf||t)&&this.viewData[r].elem.setAttribute("fill-opacity",this.viewData[r].op.v),this.masksProperties[r].mode!=="n"&&(this.viewData[r].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[r].invRect.setAttribute("transform",e.getInverseMatrix().to2dCSS()),this.storedData[r].x&&(this.storedData[r].x._mdf||t))){var s=this.storedData[r].expan;this.storedData[r].x.v<0?(this.storedData[r].lastOperator!=="erode"&&(this.storedData[r].lastOperator="erode",this.storedData[r].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[r].filterId+")")),s.setAttribute("radius",-this.storedData[r].x.v)):(this.storedData[r].lastOperator!=="dilate"&&(this.storedData[r].lastOperator="dilate",this.storedData[r].elem.setAttribute("filter",null)),this.storedData[r].elem.setAttribute("stroke-width",this.storedData[r].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" ",t},MaskElement.prototype.drawPath=function(t,e,r){var n=" M"+e.v[0][0]+","+e.v[0][1],s,o;for(o=e._length,s=1;s<o;s+=1)n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[s][0]+","+e.i[s][1]+" "+e.v[s][0]+","+e.v[s][1];if(e.c&&o>1&&(n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),r.lastPath!==n){var a="";r.elem&&(e.c&&(a=t.inv?this.solidPath+n:n),r.elem.setAttribute("d",a)),r.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var r,n=this.dynamicProperties.length;for(r=0;r<n;r+=1)(e||this._isParent&&this.dynamicProperties[r].propType==="transform")&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){this.dynamicProperties.indexOf(t)===-1&&this.dynamicProperties.push(t)}};function TransformElement(){}TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty!==11},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,r=0,n=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<n;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),r=0;r<n;r+=1)t=this.hierarchy[r].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var r=!0,n=this.comp;r;)n.finalTransform?(n.data.hasMask&&e.splice(0,0,n.finalTransform),n=n.comp):r=!1;var s,o=e.length,a;for(s=0;s<o;s+=1)a=e[s].mat.applyToPointArray(0,0,0),t=[t[0]-a[0],t[1]-a[1],0];return t},mHelper:new Matrix};function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){this.renderableComponents.indexOf(t)===-1&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){this.renderableComponents.indexOf(t)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};function RenderableDOMElement(){}(function(){var t={initElement:function(e,r,n){this.initFrame(),this.initBaseData(e,r,n),this.initTransform(e,r,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var e=this.baseElement||this.layerElement;e.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var e=this.baseElement||this.layerElement;e.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(t)],RenderableDOMElement)})();function ProcessedElement(t,e){this.elem=t,this.pos=e}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=t.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function SVGShapeData(t,e,r){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=r,this.lvl=e,this._isAnimated=!!r.k;for(var n=0,s=t.length;n<s;){if(t[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGTransformData(t,e,r){this.transform={mProps:t,op:e,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=r}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGGradientFillStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,r)}SVGGradientFillStyleData.prototype.initGradientData=function(t,e,r){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,e),this.setGradientOpacity(e,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var r=createElementID(),n=createNS(e.t===1?"linearGradient":"radialGradient");n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");var s=[],o,a,l;for(l=e.g.p*4,a=0;a<l;a+=4)o=createNS("stop"),n.appendChild(o),s.push(o);t.setAttribute(e.ty==="gf"?"fill":"stroke","url("+locationHref+"#"+r+")"),this.gf=n,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var r,n,s,o=createNS("mask"),a=createNS("path");o.appendChild(a);var l=createElementID(),c=createElementID();o.setAttribute("id",c);var h=createNS(t.t===1?"linearGradient":"radialGradient");h.setAttribute("id",l),h.setAttribute("spreadMethod","pad"),h.setAttribute("gradientUnits","userSpaceOnUse"),s=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var f=this.stops;for(n=t.g.p*4;n<s;n+=2)r=createNS("stop"),r.setAttribute("stop-color","rgb(255,255,255)"),h.appendChild(r),f.push(r);a.setAttribute(t.ty==="gf"?"fill":"stroke","url("+locationHref+"#"+l+")"),this.of=h,this.ms=o,this.ost=f,this.maskId=c,e.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(t,e,r){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,r),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}var SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix,r={createRenderFunction:n};function n(f){var u=f.ty;switch(f.ty){case"fl":return a;case"gf":return c;case"gs":return l;case"st":return h;case"sh":case"el":case"rc":case"sr":return o;case"tr":return s}}function s(f,u,m){(m||u.transform.op._mdf)&&u.transform.container.setAttribute("opacity",u.transform.op.v),(m||u.transform.mProps._mdf)&&u.transform.container.setAttribute("transform",u.transform.mProps.v.to2dCSS())}function o(f,u,m){var d,v,p,g,y,_,b=u.styles.length,w=u.lvl,S,E,x,T,A;for(_=0;_<b;_+=1){if(g=u.sh._mdf||m,u.styles[_].lvl<w){for(E=e.reset(),T=w-u.styles[_].lvl,A=u.transformers.length-1;!g&&T>0;)g=u.transformers[A].mProps._mdf||g,T--,A--;if(g)for(T=w-u.styles[_].lvl,A=u.transformers.length-1;T>0;)x=u.transformers[A].mProps.v.props,E.transform(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15]),T--,A--}else E=t;if(S=u.sh.paths,v=S._length,g){for(p="",d=0;d<v;d+=1)y=S.shapes[d],y&&y._length&&(p+=buildShapeString(y,y._length,y.c,E));u.caches[_]=p}else p=u.caches[_];u.styles[_].d+=f.hd===!0?"":p,u.styles[_]._mdf=g||u.styles[_]._mdf}}function a(f,u,m){var d=u.style;(u.c._mdf||m)&&d.pElem.setAttribute("fill","rgb("+bm_floor(u.c.v[0])+","+bm_floor(u.c.v[1])+","+bm_floor(u.c.v[2])+")"),(u.o._mdf||m)&&d.pElem.setAttribute("fill-opacity",u.o.v)}function l(f,u,m){c(f,u,m),h(f,u,m)}function c(f,u,m){var d=u.gf,v=u.g._hasOpacity,p=u.s.v,g=u.e.v;if(u.o._mdf||m){var y=f.ty==="gf"?"fill-opacity":"stroke-opacity";u.style.pElem.setAttribute(y,u.o.v)}if(u.s._mdf||m){var _=f.t===1?"x1":"cx",b=_==="x1"?"y1":"cy";d.setAttribute(_,p[0]),d.setAttribute(b,p[1]),v&&!u.g._collapsable&&(u.of.setAttribute(_,p[0]),u.of.setAttribute(b,p[1]))}var w,S,E,x;if(u.g._cmdf||m){w=u.cst;var T=u.g.c;for(E=w.length,S=0;S<E;S+=1)x=w[S],x.setAttribute("offset",T[S*4]+"%"),x.setAttribute("stop-color","rgb("+T[S*4+1]+","+T[S*4+2]+","+T[S*4+3]+")")}if(v&&(u.g._omdf||m)){var A=u.g.o;for(u.g._collapsable?w=u.cst:w=u.ost,E=w.length,S=0;S<E;S+=1)x=w[S],u.g._collapsable||x.setAttribute("offset",A[S*2]+"%"),x.setAttribute("stop-opacity",A[S*2+1])}if(f.t===1)(u.e._mdf||m)&&(d.setAttribute("x2",g[0]),d.setAttribute("y2",g[1]),v&&!u.g._collapsable&&(u.of.setAttribute("x2",g[0]),u.of.setAttribute("y2",g[1])));else{var P;if((u.s._mdf||u.e._mdf||m)&&(P=Math.sqrt(Math.pow(p[0]-g[0],2)+Math.pow(p[1]-g[1],2)),d.setAttribute("r",P),v&&!u.g._collapsable&&u.of.setAttribute("r",P)),u.e._mdf||u.h._mdf||u.a._mdf||m){P||(P=Math.sqrt(Math.pow(p[0]-g[0],2)+Math.pow(p[1]-g[1],2)));var z=Math.atan2(g[1]-p[1],g[0]-p[0]),V=u.h.v>=1?.99:u.h.v<=-1?-.99:u.h.v,L=P*V,O=Math.cos(z+u.a.v)*L+p[0],k=Math.sin(z+u.a.v)*L+p[1];d.setAttribute("fx",O),d.setAttribute("fy",k),v&&!u.g._collapsable&&(u.of.setAttribute("fx",O),u.of.setAttribute("fy",k))}}}function h(f,u,m){var d=u.style,v=u.d;v&&(v._mdf||m)&&v.dashStr&&(d.pElem.setAttribute("stroke-dasharray",v.dashStr),d.pElem.setAttribute("stroke-dashoffset",v.dashoffset[0])),u.c&&(u.c._mdf||m)&&d.pElem.setAttribute("stroke","rgb("+bm_floor(u.c.v[0])+","+bm_floor(u.c.v[1])+","+bm_floor(u.c.v[2])+")"),(u.o._mdf||m)&&d.pElem.setAttribute("stroke-opacity",u.o.v),(u.w._mdf||m)&&(d.pElem.setAttribute("stroke-width",u.w.v),d.msElem&&d.msElem.setAttribute("stroke-width",u.w.v))}return r}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(t){var e,r=t.length,n="_";for(e=0;e<r;e+=1)n+=t[e].transform.key+"_";var s=this.sequences[n];return s||(s={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[n]=s,this.sequenceList.push(s)),s},processSequence:function(t,e){for(var r=0,n=t.transforms.length,s=e;r<n&&!e;){if(t.transforms[r].transform.mProps._mdf){s=!0;break}r+=1}if(s){var o;for(t.finalTransform.reset(),r=n-1;r>=0;r-=1)o=t.transforms[r].transform.mProps.v.props,t.finalTransform.transform(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15])}t._mdf=s},processSequences:function(t){var e,r=this.sequenceList.length;for(e=0;e<r;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return"_"+this.transform_key_count++}};function CVShapeData(t,e,r,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var s=4;e.ty=="rc"?s=5:e.ty=="el"?s=6:e.ty=="sr"&&(s=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,s,t);var o,a=r.length,l;for(o=0;o<a;o+=1)r[o].closed||(l={transforms:n.addTransformSequence(r[o].transforms),trNodes:[]},this.styledShapes.push(l),r[o].elements.push(l))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if(this.data.masksProperties[t].mode!=="n"&&this.data.masksProperties[t].cl!==!1)return!0;t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),this.data.ty===0||this.data.xt?this.compInterface=CompExpressionInterface(this):this.data.ty===4?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var t=getBlendMode(this.data.bm),e=this.baseElement||this.layerElement;e.style["mix-blend-mode"]=t},initBaseData:function(t,e,r){this.globalData=e,this.comp=r,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function NullElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initFrame(),this.initTransform(t,e,r),this.initHierarchy()}NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null,e,r,n;if(this.data.td){if(this.data.td==3||this.data.td==1){var s=createNS("mask");s.setAttribute("id",this.layerId),s.setAttribute("mask-type",this.data.td==3?"luminance":"alpha"),s.appendChild(this.layerElement),t=s,this.globalData.defs.appendChild(s),!featureSupport.maskType&&this.data.td==1&&(s.setAttribute("mask-type","luminance"),e=createElementID(),r=filtersFactory.createFilter(e),this.globalData.defs.appendChild(r),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),n.appendChild(this.layerElement),t=n,s.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+e+")"))}else if(this.data.td==2){var o=createNS("mask");o.setAttribute("id",this.layerId),o.setAttribute("mask-type","alpha");var a=createNS("g");o.appendChild(a),e=createElementID(),r=filtersFactory.createFilter(e);var l=createNS("feComponentTransfer");l.setAttribute("in","SourceGraphic"),r.appendChild(l);var c=createNS("feFuncA");c.setAttribute("type","table"),c.setAttribute("tableValues","1.0 0.0"),l.appendChild(c),this.globalData.defs.appendChild(r);var h=createNS("rect");h.setAttribute("width",this.comp.data.w),h.setAttribute("height",this.comp.data.h),h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("fill","#ffffff"),h.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+e+")"),a.appendChild(h),a.appendChild(this.layerElement),t=a,featureSupport.maskType||(o.setAttribute("mask-type","luminance"),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),a.appendChild(h),n.appendChild(this.layerElement),t=n,a.appendChild(n)),this.globalData.defs.appendChild(o)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var f=createNS("clipPath"),u=createNS("path");u.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var m=createElementID();if(f.setAttribute("id",m),f.appendChild(u),this.globalData.defs.appendChild(f),this.checkMasks()){var d=createNS("g");d.setAttribute("clip-path","url("+locationHref+"#"+m+")"),d.appendChild(this.layerElement),this.transformedElement=d,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+m+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(t){!this.matteElement||this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")}};function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(t){var e,r=this.shapeModifiers.length;for(e=0;e<r;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=0,r=this.shapeModifiers.length;e<r;)if(this.shapeModifiers[e].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(!!this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(e=this.shapeModifiers.length,t=e-1;t>=0;t-=1)this.shapeModifiers[t].processShapes(this._isFirstFrame)}},lcEnum:{"1":"butt","2":"round","3":"square"},ljEnum:{"1":"miter","2":"round","3":"bevel"},searchProcessedElement:function(t){for(var e=this.processedElements,r=0,n=e.length;r<n;){if(e[r].elem===t)return e[r].pos;r+=1}return 0},addProcessedElement:function(t,e){for(var r=this.processedElements,n=r.length;n;)if(n-=1,r[n].elem===t){r[n].pos=e;return}r.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};function ITextElement(){}ITextElement.prototype.initElement=function(t,e,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,r),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){var r,n=e.length,s,o,a,l="";for(r=0;r<n;r+=1)a=e[r].ks.k,l+=buildShapeString(a,a.i.length,!0,t);return l},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,r,n,s){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[r])/2,0,0);break}e.translate(n,s,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(t[0]*255)+","+Math.round(t[1]*255)+","+Math.round(t[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initTransform(t,e,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!e.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var r,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=n-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st),this.elements[r]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function IImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ISolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)};function SVGCompElement(t,e,r){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement);function SVGTextElement(t,e,r){this.textSpans=[],this.renderType="svg",this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(t){for(var e=0,r=t.length,n=[],s="";e<r;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(n.push(s),s=""):s+=t[e],e+=1;return n.push(s),n},SVGTextElement.prototype.buildNewText=function(){var t,e,r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r?r.l.length:0),r.fc?this.layerElement.setAttribute("fill",this.buildColor(r.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),r.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(r.sc)),this.layerElement.setAttribute("stroke-width",r.sw)),this.layerElement.setAttribute("font-size",r.finalSize);var n=this.globalData.fontManager.getFontByName(r.f);if(n.fClass)this.layerElement.setAttribute("class",n.fClass);else{this.layerElement.setAttribute("font-family",n.fFamily);var s=r.fWeight,o=r.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",s)}this.layerElement.setAttribute("aria-label",r.t);var a=r.l||[],l=!!this.globalData.fontManager.chars;e=a.length;var c,h=this.mHelper,f,u="",m=this.data.singleShape,d=0,v=0,p=!0,g=r.tr/1e3*r.finalSize;if(m&&!l&&!r.sz){var y=this.textContainer,_="start";switch(r.j){case 1:_="end";break;case 2:_="middle";break}y.setAttribute("text-anchor",_),y.setAttribute("letter-spacing",g);var b=this.buildTextContents(r.finalText);for(e=b.length,v=r.ps?r.ps[1]+r.ascent:0,t=0;t<e;t+=1)c=this.textSpans[t]||createNS("tspan"),c.textContent=b[t],c.setAttribute("x",0),c.setAttribute("y",v),c.style.display="inherit",y.appendChild(c),this.textSpans[t]=c,v+=r.finalLineHeight;this.layerElement.appendChild(y)}else{var w=this.textSpans.length,S,E;for(t=0;t<e;t+=1)(!l||!m||t===0)&&(c=w>t?this.textSpans[t]:createNS(l?"path":"text"),w<=t&&(c.setAttribute("stroke-linecap","butt"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit","4"),this.textSpans[t]=c,this.layerElement.appendChild(c)),c.style.display="inherit"),h.reset(),h.scale(r.finalSize/100,r.finalSize/100),m&&(a[t].n&&(d=-g,v+=r.yOffset,v+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(r,h,a[t].line,d,v),d+=a[t].l||0,d+=g),l?(E=this.globalData.fontManager.getCharData(r.finalText[t],n.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily),S=E&&E.data||{},f=S.shapes?S.shapes[0].it:[],m?u+=this.createPathShape(h,f):c.setAttribute("d",this.createPathShape(h,f))):(m&&c.setAttribute("transform","translate("+h.props[12]+","+h.props[13]+")"),c.textContent=a[t].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));m&&c&&c.setAttribute("d",u)}for(;t<this.textSpans.length;)this.textSpans[t].style.display="none",t+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(t){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var t,e,r=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l;e=n.length;var s,o;for(t=0;t<e;t+=1)n[t].n||(s=r[t],o=this.textSpans[t],s._mdf.m&&o.setAttribute("transform",s.m),s._mdf.o&&o.setAttribute("opacity",s.o),s._mdf.sw&&o.setAttribute("stroke-width",s.sw),s._mdf.sc&&o.setAttribute("stroke",s.sc),s._mdf.fc&&o.setAttribute("fill",s.fc))}};function SVGShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,r),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e=this.shapes.length,r,n,s=this.stylesList.length,o,a=0,l=[],c=!1;for(n=0;n<s;n+=1){for(o=this.stylesList[n],c=!1,l.length=0,t=0;t<e;t+=1)r=this.shapes[t],r.styles.indexOf(o)!==-1&&(l.push(r),c=r._isAnimated||c);l.length>1&&c&&this.setShapesAsAnimated(l)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,r=t.length;for(e=0;e<r;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var r,n=new SVGStyleData(t,e),s=n.pElem;if(t.ty==="st")r=new SVGStrokeStyleData(this,t,n);else if(t.ty==="fl")r=new SVGFillStyleData(this,t,n);else if(t.ty==="gf"||t.ty==="gs"){var o=t.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;r=new o(this,t,n),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),s.setAttribute("mask","url("+locationHref+"#"+r.maskId+")"))}return(t.ty==="st"||t.ty==="gs")&&(s.setAttribute("stroke-linecap",this.lcEnum[t.lc]||"round"),s.setAttribute("stroke-linejoin",this.ljEnum[t.lj]||"round"),s.setAttribute("fill-opacity","0"),t.lj===1&&s.setAttribute("stroke-miterlimit",t.ml)),t.r===2&&s.setAttribute("fill-rule","evenodd"),t.ln&&s.setAttribute("id",t.ln),t.cl&&s.setAttribute("class",t.cl),t.bm&&(s.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(n),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var r=TransformPropertyFactory.getTransformProperty(this,t,this),n=new SVGTransformData(r,r.o,e);return this.addToAnimatedContents(t,n),n},SVGShapeElement.prototype.createShapeElement=function(t,e,r){var n=4;t.ty==="rc"?n=5:t.ty==="el"?n=6:t.ty==="sr"&&(n=7);var s=ShapePropertyFactory.getShapeProp(this,t,n,this),o=new SVGShapeData(e,r,s);return this.shapes.push(o),this.addShapeToModifiers(o),this.addToAnimatedContents(t,o),o},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var r=0,n=this.animatedContents.length;r<n;){if(this.animatedContents[r].element===e)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e=t.styles,r,n=this.stylesList.length;for(r=0;r<n;r+=1)this.stylesList[r].closed||e.push(this.stylesList[r])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,r,n,s,o,a){var l=[].concat(o),c,h=t.length-1,f,u,m=[],d=[],v,p,g,y;for(c=h;c>=0;c-=1){if(y=this.searchProcessedElement(t[c]),y?e[c]=r[y-1]:t[c]._render=a,t[c].ty=="fl"||t[c].ty=="st"||t[c].ty=="gf"||t[c].ty=="gs")y?e[c].style.closed=!1:e[c]=this.createStyleElement(t[c],s),t[c]._render&&n.appendChild(e[c].style.pElem),m.push(e[c].style);else if(t[c].ty=="gr"){if(!y)e[c]=this.createGroupElement(t[c]);else for(u=e[c].it.length,f=0;f<u;f+=1)e[c].prevViewData[f]=e[c].it[f];this.searchShapes(t[c].it,e[c].it,e[c].prevViewData,e[c].gr,s+1,l,a),t[c]._render&&n.appendChild(e[c].gr)}else t[c].ty=="tr"?(y||(e[c]=this.createTransformElement(t[c],n)),p=e[c].transform,l.push(p)):t[c].ty=="sh"||t[c].ty=="rc"||t[c].ty=="el"||t[c].ty=="sr"?(y||(e[c]=this.createShapeElement(t[c],l,s)),this.setElementStyles(e[c])):t[c].ty=="tm"||t[c].ty=="rd"||t[c].ty=="ms"?(y?(g=e[c],g.closed=!1):(g=ShapeModifiers.getModifier(t[c].ty),g.init(this,t[c]),e[c]=g,this.shapeModifiers.push(g)),d.push(g)):t[c].ty=="rp"&&(y?(g=e[c],g.closed=!0):(g=ShapeModifiers.getModifier(t[c].ty),e[c]=g,g.init(this,t,c,e),this.shapeModifiers.push(g),a=!1),d.push(g));this.addProcessedElement(t[c],c+1)}for(h=m.length,c=0;c<h;c+=1)m[c].closed=!0;for(h=d.length,c=0;c<h;c+=1)d[c].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e=this.animatedContents.length,r;for(t=0;t<e;t+=1)r=this.animatedContents[t],(this._isFirstFrame||r.element._isAnimated)&&r.data!==!0&&r.fn(r.data,r.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function SVGTintFilter(t,e){this.filterManager=e;var r=createNS("feColorMatrix");if(r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.setAttribute("result","f1"),t.appendChild(r),r=createNS("feColorMatrix"),r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result","f2"),t.appendChild(r),this.matrixFilter=r,e.effectElements[2].p.v!==100||e.effectElements[2].p.k){var n=createNS("feMerge");t.appendChild(n);var s;s=createNS("feMergeNode"),s.setAttribute("in","SourceGraphic"),n.appendChild(s),s=createNS("feMergeNode"),s.setAttribute("in","f2"),n.appendChild(s)}}SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",r[0]-e[0]+" 0 0 0 "+e[0]+" "+(r[1]-e[1])+" 0 0 0 "+e[1]+" "+(r[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+n+" 0")}};function SVGFillFilter(t,e){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(r),this.matrixFilter=r}SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+r+" 0")}};function SVGGaussianBlurEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var r=createNS("feGaussianBlur");t.appendChild(r),this.feGaussianBlur=r}SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3,r=this.filterManager.effectElements[0].p.v*e,n=this.filterManager.effectElements[1].p.v,s=n==3?0:r,o=n==2?0:r;this.feGaussianBlur.setAttribute("stdDeviation",s+" "+o);var a=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",a)}};function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var t=this.elem.layerElement.children||this.elem.layerElement.childNodes,e,r,n,s;for(this.filterManager.effectElements[1].p.v===1?(s=this.elem.maskManager.masksProperties.length,n=0):(n=this.filterManager.effectElements[0].p.v-1,s=n+1),r=createNS("g"),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-dashoffset",1),n;n<s;n+=1)e=createNS("path"),r.appendChild(e),this.paths.push({p:e,m:n});if(this.filterManager.effectElements[10].p.v===3){var o=createNS("mask"),a=createElementID();o.setAttribute("id",a),o.setAttribute("mask-type","alpha"),o.appendChild(r),this.elem.globalData.defs.appendChild(o);var l=createNS("g");for(l.setAttribute("mask","url("+locationHref+"#"+a+")");t[0];)l.appendChild(t[0]);this.elem.layerElement.appendChild(l),this.masker=o,r.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(t=this.elem.layerElement.children||this.elem.layerElement.childNodes;t.length;)this.elem.layerElement.removeChild(t[0]);this.elem.layerElement.appendChild(r),this.elem.layerElement.removeAttribute("mask"),r.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=r},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();var e,r=this.paths.length,n,s;for(e=0;e<r;e+=1)if(this.paths[e].m!==-1&&(n=this.elem.maskManager.viewData[this.paths[e].m],s=this.paths[e].p,(t||this.filterManager._mdf||n.prop._mdf)&&s.setAttribute("d",n.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var o;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var a=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,c=s.getTotalLength();o="0 0 0 "+c*a+" ";var h=c*(l-a),f=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100,u=Math.floor(h/f),m;for(m=0;m<u;m+=1)o+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100+" ";o+="0 "+c*10+" 0 0"}else o="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;s.setAttribute("stroke-dasharray",o)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(t||this.filterManager.effectElements[3].p._mdf)){var d=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(d[0]*255)+","+bm_floor(d[1]*255)+","+bm_floor(d[2]*255)+")")}};function SVGTritoneFilter(t,e){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.setAttribute("result","f1"),t.appendChild(r);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.matrixFilter=n;var s=createNS("feFuncR");s.setAttribute("type","table"),n.appendChild(s),this.feFuncR=s;var o=createNS("feFuncG");o.setAttribute("type","table"),n.appendChild(o),this.feFuncG=o;var a=createNS("feFuncB");a.setAttribute("type","table"),n.appendChild(a),this.feFuncB=a}SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v,s=n[0]+" "+r[0]+" "+e[0],o=n[1]+" "+r[1]+" "+e[1],a=n[2]+" "+r[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",s),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",a)}};function SVGProLevelsFilter(t,e){this.filterManager=e;var r=this.filterManager.effectElements,n=createNS("feComponentTransfer"),s,o,a;(r[10].p.k||r[10].p.v!==0||r[11].p.k||r[11].p.v!==1||r[12].p.k||r[12].p.v!==1||r[13].p.k||r[13].p.v!==0||r[14].p.k||r[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(r[17].p.k||r[17].p.v!==0||r[18].p.k||r[18].p.v!==1||r[19].p.k||r[19].p.v!==1||r[20].p.k||r[20].p.v!==0||r[21].p.k||r[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(r[24].p.k||r[24].p.v!==0||r[25].p.k||r[25].p.v!==1||r[26].p.k||r[26].p.v!==1||r[27].p.k||r[27].p.v!==0||r[28].p.k||r[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(r[31].p.k||r[31].p.v!==0||r[32].p.k||r[32].p.v!==1||r[33].p.k||r[33].p.v!==1||r[34].p.k||r[34].p.v!==0||r[35].p.k||r[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),n=createNS("feComponentTransfer")),(r[3].p.k||r[3].p.v!==0||r[4].p.k||r[4].p.v!==1||r[5].p.k||r[5].p.v!==1||r[6].p.k||r[6].p.v!==0||r[7].p.k||r[7].p.v!==1)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var r=createNS(t);return r.setAttribute("type","table"),e.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(t,e,r,n,s){for(var o=0,a=256,l,c=Math.min(t,e),h=Math.max(t,e),f=Array.call(null,{length:a}),u,m=0,d=s-n,v=e-t;o<=256;)l=o/256,l<=c?u=v<0?s:n:l>=h?u=v<0?n:s:u=n+d*Math.pow((l-t)/v,1/r),f[m++]=u,o+=256/(a-1);return f.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,r,n,s,o=this.filterManager.effectElements;this.feFuncRComposed&&(t||o[3].p._mdf||o[4].p._mdf||o[5].p._mdf||o[6].p._mdf||o[7].p._mdf)&&(e=this.getTableValue(o[3].p.v,o[4].p.v,o[5].p.v,o[6].p.v,o[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||o[10].p._mdf||o[11].p._mdf||o[12].p._mdf||o[13].p._mdf||o[14].p._mdf)&&(e=this.getTableValue(o[10].p.v,o[11].p.v,o[12].p.v,o[13].p.v,o[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||o[17].p._mdf||o[18].p._mdf||o[19].p._mdf||o[20].p._mdf||o[21].p._mdf)&&(e=this.getTableValue(o[17].p.v,o[18].p.v,o[19].p.v,o[20].p.v,o[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||o[24].p._mdf||o[25].p._mdf||o[26].p._mdf||o[27].p._mdf||o[28].p._mdf)&&(e=this.getTableValue(o[24].p.v,o[25].p.v,o[26].p.v,o[27].p.v,o[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||o[31].p._mdf||o[32].p._mdf||o[33].p._mdf||o[34].p._mdf||o[35].p._mdf)&&(e=this.getTableValue(o[31].p.v,o[32].p.v,o[33].p.v,o[34].p.v,o[35].p.v),this.feFuncA.setAttribute("tableValues",e))}};function SVGDropShadowEffect(t,e){var r=e.container.globalData.renderConfig.filterSize;t.setAttribute("x",r.x),t.setAttribute("y",r.y),t.setAttribute("width",r.width),t.setAttribute("height",r.height),this.filterManager=e;var n=createNS("feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,t.appendChild(n);var s=createNS("feOffset");s.setAttribute("dx","25"),s.setAttribute("dy","0"),s.setAttribute("in","drop_shadow_1"),s.setAttribute("result","drop_shadow_2"),this.feOffset=s,t.appendChild(s);var o=createNS("feFlood");o.setAttribute("flood-color","#00ff00"),o.setAttribute("flood-opacity","1"),o.setAttribute("result","drop_shadow_3"),this.feFlood=o,t.appendChild(o);var a=createNS("feComposite");a.setAttribute("in","drop_shadow_3"),a.setAttribute("in2","drop_shadow_2"),a.setAttribute("operator","in"),a.setAttribute("result","drop_shadow_4"),t.appendChild(a);var l=createNS("feMerge");t.appendChild(l);var c;c=createNS("feMergeNode"),l.appendChild(c),c=createNS("feMergeNode"),c.setAttribute("in","SourceGraphic"),this.feMergeNode=c,this.feMerge=l,this.originalNodeAdded=!1,l.appendChild(c)}SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(e[0]*255),Math.round(e[1]*255),Math.round(e[2]*255)))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var r=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,s=r*Math.cos(n),o=r*Math.sin(n);this.feOffset.setAttribute("dx",s),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,r){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=r,r.matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,r=_svgMatteSymbols.length;e<r;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var r=t.layerElement.parentNode;if(!!r){for(var n=r.children,s=0,o=n.length;s<o&&n[s]!==t.layerElement;)s+=1;var a;s<=o-2&&(a=n[s+1]);var l=createNS("use");l.setAttribute("href","#"+e),a?r.insertBefore(l,a):r.appendChild(l)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var r=createElementID(),n=createNS("mask");n.setAttribute("id",e.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var s=t.globalData.defs;s.appendChild(n);var o=createNS("symbol");o.setAttribute("id",r),this.replaceInParent(e,r),o.appendChild(e.layerElement),s.appendChild(o);var a=createNS("use");a.setAttribute("href","#"+r),n.appendChild(a),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,r=0,n=e.length;r<n;)e[r]&&e[r].data.ind===t&&this.setElementAsMask(this.elem,e[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGEffects(t){var e,r=t.data.ef?t.data.ef.length:0,n=createElementID(),s=filtersFactory.createFilter(n),o=0;this.filters=[];var a;for(e=0;e<r;e+=1)a=null,t.data.ef[e].ty===20?(o+=1,a=new SVGTintFilter(s,t.effectsManager.effectElements[e])):t.data.ef[e].ty===21?(o+=1,a=new SVGFillFilter(s,t.effectsManager.effectElements[e])):t.data.ef[e].ty===22?a=new SVGStrokeEffect(t,t.effectsManager.effectElements[e]):t.data.ef[e].ty===23?(o+=1,a=new SVGTritoneFilter(s,t.effectsManager.effectElements[e])):t.data.ef[e].ty===24?(o+=1,a=new SVGProLevelsFilter(s,t.effectsManager.effectElements[e])):t.data.ef[e].ty===25?(o+=1,a=new SVGDropShadowEffect(s,t.effectsManager.effectElements[e])):t.data.ef[e].ty===28?a=new SVGMatte3Effect(s,t.effectsManager.effectElements[e],t):t.data.ef[e].ty===29&&(o+=1,a=new SVGGaussianBlurEffect(s,t.effectsManager.effectElements[e])),a&&this.filters.push(a);o&&(t.globalData.defs.appendChild(s),t.layerElement.setAttribute("filter","url("+locationHref+"#"+n+")")),this.filters.length&&t.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(t){var e,r=this.filters.length;for(e=0;e<r;e+=1)this.filters[e].renderFrame(t)};function CVContextData(){this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;var t,e=15;for(this.savedOp=createTypedArray("float32",e),t=0;t<e;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=e}CVContextData.prototype.duplicate=function(){var t=this._length*2,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);var r=0;for(r=this._length;r<t;r+=1)this.saved[r]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1};function CVBaseElement(){}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!(this.hidden||this.data.hd)){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var t=this.data.ty===0;this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getImage(this.assetData),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e=t.getContext("2d"),r=this.img.width,n=this.img.height,s=r/n,o=this.assetData.w/this.assetData.h,a,l,c=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;s>o&&c==="xMidYMid slice"||s<o&&c!=="xMidYMid slice"?(l=n,a=l*o):(a=r,l=a/o),e.drawImage(this.img,(r-a)/2,(n-l)/2,a,l,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(t){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVCompElement(t,e,r){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip();var e,r=this.layers.length;for(e=r-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var t,e=this.layers.length;for(t=e-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null};function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r,n=this.masksProperties.length,s=!1;for(r=0;r<n;r++)this.masksProperties[r].mode!=="n"&&(s=!0),this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3);this.hasMasks=s,s&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(!!this.hasMasks){var t=this.element.finalTransform.mat,e=this.element.canvasContext,r,n=this.masksProperties.length,s,o,a;for(e.beginPath(),r=0;r<n;r++)if(this.masksProperties[r].mode!=="n"){this.masksProperties[r].inv&&(e.moveTo(0,0),e.lineTo(this.element.globalData.compSize.w,0),e.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),e.lineTo(0,this.element.globalData.compSize.h),e.lineTo(0,0)),a=this.viewData[r].v,s=t.applyToPointArray(a.v[0][0],a.v[0][1],0),e.moveTo(s[0],s[1]);var l,c=a._length;for(l=1;l<c;l++)o=t.applyToTriplePoints(a.o[l-1],a.i[l],a.v[l]),e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);o=t.applyToTriplePoints(a.o[l-1],a.i[0],a.v[0]),e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}this.element.globalData.renderer.save(!0),e.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var r={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:t.hd===!0},n={};if(t.ty=="fl"||t.ty=="st"?(n.c=PropertyFactory.getProp(this,t.c,1,255,this),n.c.k||(r.co="rgb("+bm_floor(n.c.v[0])+","+bm_floor(n.c.v[1])+","+bm_floor(n.c.v[2])+")")):(t.ty==="gf"||t.ty==="gs")&&(n.s=PropertyFactory.getProp(this,t.s,1,null,this),n.e=PropertyFactory.getProp(this,t.e,1,null,this),n.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),n.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),n.g=new GradientProperty(this,t.g,this)),n.o=PropertyFactory.getProp(this,t.o,0,.01,this),t.ty=="st"||t.ty=="gs"){if(r.lc=this.lcEnum[t.lc]||"round",r.lj=this.ljEnum[t.lj]||"round",t.lj==1&&(r.ml=t.ml),n.w=PropertyFactory.getProp(this,t.w,0,null,this),n.w.k||(r.wi=n.w.v),t.d){var s=new DashProperty(this,t.d,"canvas",this);n.d=s,n.d.k||(r.da=n.d.dashArray,r.do=n.d.dashoffset[0])}}else r.r=t.r===2?"evenodd":"nonzero";return this.stylesList.push(r),n.style=r,n},CVShapeElement.prototype.createGroupElement=function(t){var e={it:[],prevViewData:[]};return e},CVShapeElement.prototype.createTransformElement=function(t){var e={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}};return e},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var t,e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,r=this.stylesList.length;for(e=0;e<r;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,r=t.length,n,s;for(e=0;e<r;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,r,n,s){var o,a=t.length-1,l,c,h=[],f=[],u,m,d,v=[].concat(s);for(o=a;o>=0;o-=1){if(u=this.searchProcessedElement(t[o]),u?e[o]=r[u-1]:t[o]._shouldRender=n,t[o].ty=="fl"||t[o].ty=="st"||t[o].ty=="gf"||t[o].ty=="gs")u?e[o].style.closed=!1:e[o]=this.createStyleElement(t[o],v),h.push(e[o].style);else if(t[o].ty=="gr"){if(!u)e[o]=this.createGroupElement(t[o]);else for(c=e[o].it.length,l=0;l<c;l+=1)e[o].prevViewData[l]=e[o].it[l];this.searchShapes(t[o].it,e[o].it,e[o].prevViewData,n,v)}else t[o].ty=="tr"?(u||(d=this.createTransformElement(t[o]),e[o]=d),v.push(e[o]),this.addTransformToStyleList(e[o])):t[o].ty=="sh"||t[o].ty=="rc"||t[o].ty=="el"||t[o].ty=="sr"?u||(e[o]=this.createShapeElement(t[o])):t[o].ty=="tm"||t[o].ty=="rd"?(u?(m=e[o],m.closed=!1):(m=ShapeModifiers.getModifier(t[o].ty),m.init(this,t[o]),e[o]=m,this.shapeModifiers.push(m)),f.push(m)):t[o].ty=="rp"&&(u?(m=e[o],m.closed=!0):(m=ShapeModifiers.getModifier(t[o].ty),e[o]=m,m.init(this,t,o,e),this.shapeModifiers.push(m),n=!1),f.push(m));this.addProcessedElement(t[o],o+1)}for(this.removeTransformFromStyleList(),this.closeStyles(h),a=f.length,o=0;o<a;o+=1)f[o].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){var r,n;(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e=this.stylesList.length,r,n,s,o,a,l,c=this.globalData.renderer,h=this.globalData.canvasContext,f,u;for(t=0;t<e;t+=1)if(u=this.stylesList[t],f=u.type,!((f==="st"||f==="gs")&&u.wi===0||!u.data._shouldRender||u.coOp===0||this.globalData.currentGlobalAlpha===0)){for(c.save(),a=u.elements,f==="st"||f==="gs"?(h.strokeStyle=f==="st"?u.co:u.grd,h.lineWidth=u.wi,h.lineCap=u.lc,h.lineJoin=u.lj,h.miterLimit=u.ml||0):h.fillStyle=f==="fl"?u.co:u.grd,c.ctxOpacity(u.coOp),f!=="st"&&f!=="gs"&&h.beginPath(),c.ctxTransform(u.preTransforms.finalTransform.props),n=a.length,r=0;r<n;r+=1){for((f==="st"||f==="gs")&&(h.beginPath(),u.da&&(h.setLineDash(u.da),h.lineDashOffset=u.do)),l=a[r].trNodes,o=l.length,s=0;s<o;s+=1)l[s].t=="m"?h.moveTo(l[s].p[0],l[s].p[1]):l[s].t=="c"?h.bezierCurveTo(l[s].pts[0],l[s].pts[1],l[s].pts[2],l[s].pts[3],l[s].pts[4],l[s].pts[5]):h.closePath();(f==="st"||f==="gs")&&(h.stroke(),u.da&&h.setLineDash(this.dashResetter))}f!=="st"&&f!=="gs"&&h.fill(u.r),c.restore()}},CVShapeElement.prototype.renderShape=function(t,e,r,n){var s,o=e.length-1,a;for(a=t,s=o;s>=0;s-=1)e[s].ty=="tr"?(a=r[s].transform,this.renderShapeTransform(t,a)):e[s].ty=="sh"||e[s].ty=="el"||e[s].ty=="rc"||e[s].ty=="sr"?this.renderPath(e[s],r[s]):e[s].ty=="fl"?this.renderFill(e[s],r[s],a):e[s].ty=="st"?this.renderStroke(e[s],r[s],a):e[s].ty=="gf"||e[s].ty=="gs"?this.renderGradientFill(e[s],r[s],a):e[s].ty=="gr"?this.renderShape(a,e[s].it,r[s].it):e[s].ty=="tm";n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var r=t.trNodes,n=e.paths,s,o,a,l=n._length;r.length=0;var c=t.transforms.finalTransform;for(a=0;a<l;a+=1){var h=n.shapes[a];if(h&&h.v){for(o=h._length,s=1;s<o;s+=1)s===1&&r.push({t:"m",p:c.applyToPointArray(h.v[0][0],h.v[0][1],0)}),r.push({t:"c",pts:c.applyToTriplePoints(h.o[s-1],h.i[s],h.v[s])});o===1&&r.push({t:"m",p:c.applyToPointArray(h.v[0][0],h.v[0][1],0)}),h.c&&o&&(r.push({t:"c",pts:c.applyToTriplePoints(h.o[s-1],h.i[0],h.v[0])}),r.push({t:"z"}))}}t.trNodes=r}},CVShapeElement.prototype.renderPath=function(t,e){if(t.hd!==!0&&t._shouldRender){var r,n=e.styledShapes.length;for(r=0;r<n;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,r){var n=e.style;(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,r){var n=e.style;if(!n.grd||e.g._mdf||e.s._mdf||e.e._mdf||t.t!==1&&(e.h._mdf||e.a._mdf)){var s=this.globalData.canvasContext,o,a=e.s.v,l=e.e.v;if(t.t===1)o=s.createLinearGradient(a[0],a[1],l[0],l[1]);else var c=Math.sqrt(Math.pow(a[0]-l[0],2)+Math.pow(a[1]-l[1],2)),h=Math.atan2(l[1]-a[1],l[0]-a[0]),f=e.h.v>=1?.99:e.h.v<=-1?-.99:e.h.v,u=c*f,m=Math.cos(h+e.a.v)*u+a[0],d=Math.sin(h+e.a.v)*u+a[1],o=s.createRadialGradient(m,d,0,a[0],a[1],c);var v,p=t.g.p,g=e.g.c,y=1;for(v=0;v<p;v+=1)e.g._hasOpacity&&e.g._collapsable&&(y=e.g.o[v*2+1]),o.addColorStop(g[v*4]/100,"rgba("+g[v*4+1]+","+g[v*4+2]+","+g[v*4+3]+","+y+")");n.grd=o}n.coOp=e.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(t,e,r){var n=e.style,s=e.d;s&&(s._mdf||this._isFirstFrame)&&(n.da=s.dashArray,n.do=s.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=e.o.v*r.opacity),(e.w._mdf||this._isFirstFrame)&&(n.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)};function CVTextElement(t,e,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var r=!1;t.sc&&(r=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var n=this.globalData.fontManager.getFontByName(t.f),s,o,a=t.l,l=this.mHelper;this.stroke=r,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,o=t.finalText.length;var c,h,f,u,m,d,v,p,g,y,_=this.data.singleShape,b=t.tr/1e3*t.finalSize,w=0,S=0,E=!0,x=0;for(s=0;s<o;s+=1){for(c=this.globalData.fontManager.getCharData(t.finalText[s],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),h=c&&c.data||{},l.reset(),_&&a[s].n&&(w=-b,S+=t.yOffset,S+=E?1:0,E=!1),m=h.shapes?h.shapes[0].it:[],v=m.length,l.scale(t.finalSize/100,t.finalSize/100),_&&this.applyTextPropertiesToMatrix(t,l,a[s].line,w,S),g=createSizedArray(v),d=0;d<v;d+=1){for(u=m[d].ks.k.i.length,p=m[d].ks.k,y=[],f=1;f<u;f+=1)f==1&&y.push(l.applyToX(p.v[0][0],p.v[0][1],0),l.applyToY(p.v[0][0],p.v[0][1],0)),y.push(l.applyToX(p.o[f-1][0],p.o[f-1][1],0),l.applyToY(p.o[f-1][0],p.o[f-1][1],0),l.applyToX(p.i[f][0],p.i[f][1],0),l.applyToY(p.i[f][0],p.i[f][1],0),l.applyToX(p.v[f][0],p.v[f][1],0),l.applyToY(p.v[f][0],p.v[f][1],0));y.push(l.applyToX(p.o[f-1][0],p.o[f-1][1],0),l.applyToY(p.o[f-1][0],p.o[f-1][1],0),l.applyToX(p.i[0][0],p.i[0][1],0),l.applyToY(p.i[0][0],p.i[0][1],0),l.applyToX(p.v[0][0],p.v[0][1],0),l.applyToY(p.v[0][0],p.v[0][1],0)),g[d]=y}_&&(w+=a[s].l,w+=b),this.textSpans[x]?this.textSpans[x].elem=g:this.textSpans[x]={elem:g},x+=1}},CVTextElement.prototype.renderInnerContent=function(){var t=this.canvasContext,e=this.finalTransform.mat.props;t.font=this.values.fValue,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var r,n,s,o,a,l,c=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;n=h.length;var f,u=null,m=null,d=null,v,p;for(r=0;r<n;r+=1)if(!h[r].n){if(f=c[r],f&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(f.p),this.globalData.renderer.ctxOpacity(f.o)),this.fill){for(f&&f.fc?u!==f.fc&&(u=f.fc,t.fillStyle=f.fc):u!==this.values.fill&&(u=this.values.fill,t.fillStyle=this.values.fill),v=this.textSpans[r].elem,o=v.length,this.globalData.canvasContext.beginPath(),s=0;s<o;s+=1)for(p=v[s],l=p.length,this.globalData.canvasContext.moveTo(p[0],p[1]),a=2;a<l;a+=6)this.globalData.canvasContext.bezierCurveTo(p[a],p[a+1],p[a+2],p[a+3],p[a+4],p[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(f&&f.sw?d!==f.sw&&(d=f.sw,t.lineWidth=f.sw):d!==this.values.sWidth&&(d=this.values.sWidth,t.lineWidth=this.values.sWidth),f&&f.sc?m!==f.sc&&(m=f.sc,t.strokeStyle=f.sc):m!==this.values.stroke&&(m=this.values.stroke,t.strokeStyle=this.values.stroke),v=this.textSpans[r].elem,o=v.length,this.globalData.canvasContext.beginPath(),s=0;s<o;s+=1)for(p=v[s],l=p.length,this.globalData.canvasContext.moveTo(p[0],p[1]),a=2;a<l;a+=6)this.globalData.canvasContext.bezierCurveTo(p[a],p[a+1],p[a+2],p[a+3],p[a+4],p[a+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}f&&this.globalData.renderer.restore()}};function CVEffects(){}CVEffects.prototype.renderFrame=function(){};function HBaseElement(t,e,r){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting;function HSolidElement(t,e,r){this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?(t=createNS("rect"),t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(t=createTag("div"),t.style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)};function HCompElement(t,e,r){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,r),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var r=0,n;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(t,n):this.layerElement.appendChild(t)};function HShapeElement(t,e,r){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var r,n=t.length;for(r=0;r<n;r+=1)e=t[r].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var r=t.sh.v,n=t.transformers,s,o=r._length,a,l,c,h,f;if(!(o<=1)){for(s=0;s<o-1;s+=1)a=this.getTransformedPoint(n,r.v[s]),l=this.getTransformedPoint(n,r.o[s]),c=this.getTransformedPoint(n,r.i[s+1]),h=this.getTransformedPoint(n,r.v[s+1]),this.checkBounds(a,l,c,h,e);r.c&&(a=this.getTransformedPoint(n,r.v[s]),l=this.getTransformedPoint(n,r.o[s]),c=this.getTransformedPoint(n,r.i[0]),h=this.getTransformedPoint(n,r.v[0]),this.checkBounds(a,l,c,h,e))}},HShapeElement.prototype.checkBounds=function(t,e,r,n,s){this.getBoundsOfCurve(t,e,r,n);var o=this.shapeBoundingBox;s.x=bm_min(o.left,s.x),s.xMax=bm_max(o.right,s.xMax),s.y=bm_min(o.top,s.y),s.yMax=bm_max(o.bottom,s.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,r,n){for(var s=[[t[0],n[0]],[t[1],n[1]]],o,a,l,c,h,f,u,m=0;m<2;++m){if(a=6*t[m]-12*e[m]+6*r[m],o=-3*t[m]+9*e[m]-9*r[m]+3*n[m],l=3*e[m]-3*t[m],a=a|0,o=o|0,l=l|0,o===0){if(a===0)continue;c=-l/a,0<c&&c<1&&s[m].push(this.calculateF(c,t,e,r,n,m));continue}h=a*a-4*l*o,!(h<0)&&(f=(-a+bm_sqrt(h))/(2*o),0<f&&f<1&&s[m].push(this.calculateF(f,t,e,r,n,m)),u=(-a-bm_sqrt(h))/(2*o),0<u&&u<1&&s[m].push(this.calculateF(u,t,e,r,n,m)))}this.shapeBoundingBox.left=bm_min.apply(null,s[0]),this.shapeBoundingBox.top=bm_min.apply(null,s[1]),this.shapeBoundingBox.right=bm_max.apply(null,s[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,s[1])},HShapeElement.prototype.calculateF=function(t,e,r,n,s,o){return bm_pow(1-t,3)*e[o]+3*bm_pow(1-t,2)*t*r[o]+3*(1-t)*bm_pow(t,2)*n[o]+bm_pow(t,3)*s[o]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var r,n=t.length,s;for(r=0;r<n;r+=1)t[r]&&t[r].sh?this.calculateShapeBoundingBox(t[r],e):t[r]&&t[r].it&&this.calculateBoundingBox(t[r].it,e)},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var r=!1;this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),r=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),r=!0),(r||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y)&&(this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}};function HTextElement(t,e,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style;e.color=e.fill=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)",t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var r=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",r.fClass)this.innerElem.className=r.fClass;else{e.fontFamily=r.fFamily;var n=t.fWeight,s=t.fStyle;e.fontStyle=s,e.fontWeight=n}var o,a,l=t.l;a=l.length;var c,h,f,u=this.mHelper,m,d="",v=0;for(o=0;o<a;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[v]?c=this.textPaths[v]:(c=createNS("path"),c.setAttribute("stroke-linecap","butt"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[v]?(h=this.textSpans[v],f=h.children[0]):(h=createTag("div"),h.style.lineHeight=0,f=createNS("svg"),f.appendChild(c),styleDiv(h)))):this.isMasked?c=this.textPaths[v]?this.textPaths[v]:createNS("text"):this.textSpans[v]?(h=this.textSpans[v],c=this.textPaths[v]):(h=createTag("span"),styleDiv(h),c=createTag("span"),styleDiv(c),h.appendChild(c)),this.globalData.fontManager.chars){var p=this.globalData.fontManager.getCharData(t.finalText[o],r.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily),g;if(p?g=p.data:g=null,u.reset(),g&&g.shapes&&(m=g.shapes[0].it,u.scale(t.finalSize/100,t.finalSize/100),d=this.createPathShape(u,m),c.setAttribute("d",d)),this.isMasked)this.innerElem.appendChild(c);else{if(this.innerElem.appendChild(h),g&&g.shapes){document.body.appendChild(f);var y=f.getBBox();f.setAttribute("width",y.width+2),f.setAttribute("height",y.height+2),f.setAttribute("viewBox",y.x-1+" "+(y.y-1)+" "+(y.width+2)+" "+(y.height+2)),f.style.transform=f.style.webkitTransform="translate("+(y.x-1)+"px,"+(y.y-1)+"px)",l[o].yOffset=y.y-1}else f.setAttribute("width",1),f.setAttribute("height",1);h.appendChild(f)}}else c.textContent=l[o].val,c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(c):(this.innerElem.appendChild(h),c.style.transform=c.style.webkitTransform="translate3d(0,"+-t.finalSize/1.2+"px,0)");this.isMasked?this.textSpans[v]=c:this.textSpans[v]=h,this.textSpans[v].style.display="block",this.textPaths[v]=c,v+=1}for(;v<this.textSpans.length;)this.textSpans[v].style.display="none",v+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var t,e,r=0,n=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;e=s.length;var o,a,l;for(t=0;t<e;t+=1){if(s[t].n){r+=1;continue}a=this.textSpans[t],l=this.textPaths[t],o=n[r],r+=1,o._mdf.m&&(this.isMasked?a.setAttribute("transform",o.m):a.style.transform=a.style.webkitTransform=o.m),a.style.opacity=o.o,o.sw&&o._mdf.sw&&l.setAttribute("stroke-width",o.sw),o.sc&&o._mdf.sc&&l.setAttribute("stroke",o.sc),o.fc&&o._mdf.fc&&(l.setAttribute("fill",o.fc),l.style.color=o.fc)}if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var c=this.innerElem.getBBox();this.currentBBox.w!==c.width&&(this.currentBBox.w=c.width,this.svgElement.setAttribute("width",c.width)),this.currentBBox.h!==c.height&&(this.currentBBox.h=c.height,this.svgElement.setAttribute("height",c.height));var h=1;(this.currentBBox.w!==c.width+h*2||this.currentBBox.h!==c.height+h*2||this.currentBBox.x!==c.x-h||this.currentBBox.y!==c.y-h)&&(this.currentBBox.w=c.width+h*2,this.currentBBox.h=c.height+h*2,this.currentBBox.x=c.x-h,this.currentBBox.y=c.y-h,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}}};function HImageElement(t,e,r){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,r)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HCameraElement(t,e,r){this.initFrame(),this.initBaseData(t,e,r),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,t.pe,0,0,this),t.ks.p.s?(this.px=n(this,t.ks.p.x,1,0,this),this.py=n(this,t.ks.p.y,1,0,this),this.pz=n(this,t.ks.p.z,1,0,this)):this.p=n(this,t.ks.p,1,0,this),t.ks.a&&(this.a=n(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var s,o=t.ks.or.k.length;for(s=0;s<o;s+=1)t.ks.or.k[s].to=null,t.ks.or.k[s].ti=null}this.or=n(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,t.ks.rx,0,degToRads,this),this.ry=n(this,t.ks.ry,0,degToRads,this),this.rz=n(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e=this.comp.threeDElements.length,r;for(t=0;t<e;t+=1)r=this.comp.threeDElements[t],r.type==="3d"&&(r.perspectiveElem.style.perspective=r.perspectiveElem.style.webkitPerspective=this.pe.v+"px",r.container.style.transformOrigin=r.container.style.mozTransformOrigin=r.container.style.webkitTransformOrigin="0px 0px 0px",r.perspectiveElem.style.transform=r.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t=this._isFirstFrame,e,r;if(this.hierarchy)for(r=this.hierarchy.length,e=0;e<r;e+=1)t=this.hierarchy[e].finalTransform.mProp._mdf||t;if(t||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy){var n;for(r=this.hierarchy.length-1,e=r;e>=0;e-=1){var s=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-s.p.v[0],-s.p.v[1],s.p.v[2]),this.mat.rotateX(-s.or.v[0]).rotateY(-s.or.v[1]).rotateZ(s.or.v[2]),this.mat.rotateX(-s.rx.v).rotateY(-s.ry.v).rotateZ(s.rz.v),this.mat.scale(1/s.s.v[0],1/s.s.v[1],1/s.s.v[2]),this.mat.translate(s.a.v[0],s.a.v[1],s.a.v[2])}}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var o;this.p?o=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:o=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var a=Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2)+Math.pow(o[2],2)),l=[o[0]/a,o[1]/a,o[2]/a],c=Math.sqrt(l[2]*l[2]+l[0]*l[0]),h=Math.atan2(l[1],c),f=Math.atan2(l[0],-l[2]);this.mat.rotateY(f).rotateX(-h)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){r=this.comp.threeDElements.length;var m;for(e=0;e<r;e+=1)m=this.comp.threeDElements[e],m.type==="3d"&&(u&&(m.container.style.transform=m.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(m.perspectiveElem.style.perspective=m.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HEffects(){}HEffects.prototype.renderFrame=function(){};var animationManager=function(){var t={},e=[],r=0,n=0,s=0,o=!0,a=!1;function l(L){for(var O=0,k=L.target;O<n;)e[O].animation===k&&(e.splice(O,1),O-=1,n-=1,k.isPaused||u()),O+=1}function c(L,O){if(!L)return null;for(var k=0;k<n;){if(e[k].elem==L&&e[k].elem!==null)return e[k].animation;k+=1}var X=new AnimationItem;return m(X,L),X.setData(L,O),X}function h(){var L,O=e.length,k=[];for(L=0;L<O;L+=1)k.push(e[L].animation);return k}function f(){s+=1,P()}function u(){s-=1}function m(L,O){L.addEventListener("destroy",l),L.addEventListener("_active",f),L.addEventListener("_idle",u),e.push({elem:O,animation:L}),n+=1}function d(L){var O=new AnimationItem;return m(O,null),O.setParams(L),O}function v(L,O){var k;for(k=0;k<n;k+=1)e[k].animation.setSpeed(L,O)}function p(L,O){var k;for(k=0;k<n;k+=1)e[k].animation.setDirection(L,O)}function g(L){var O;for(O=0;O<n;O+=1)e[O].animation.play(L)}function y(L){var O=L-r,k;for(k=0;k<n;k+=1)e[k].animation.advanceTime(O);r=L,s&&!a?window.requestAnimationFrame(y):o=!0}function _(L){r=L,window.requestAnimationFrame(y)}function b(L){var O;for(O=0;O<n;O+=1)e[O].animation.pause(L)}function w(L,O,k){var X;for(X=0;X<n;X+=1)e[X].animation.goToAndStop(L,O,k)}function S(L){var O;for(O=0;O<n;O+=1)e[O].animation.stop(L)}function E(L){var O;for(O=0;O<n;O+=1)e[O].animation.togglePause(L)}function x(L){var O;for(O=n-1;O>=0;O-=1)e[O].animation.destroy(L)}function T(L,O,k){var X=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),R,U=X.length;for(R=0;R<U;R+=1)k&&X[R].setAttribute("data-bm-type",k),c(X[R],L);if(O&&U===0){k||(k="svg");var q=document.getElementsByTagName("body")[0];q.innerHTML="";var Z=createTag("div");Z.style.width="100%",Z.style.height="100%",Z.setAttribute("data-bm-type",k),q.appendChild(Z),c(Z,L)}}function A(){var L;for(L=0;L<n;L+=1)e[L].animation.resize()}function P(){!a&&s&&o&&(window.requestAnimationFrame(_),o=!1)}function z(){a=!0}function V(){a=!1,P()}return t.registerAnimation=c,t.loadAnimation=d,t.setSpeed=v,t.setDirection=p,t.play=g,t.pause=b,t.stop=S,t.togglePause=E,t.searchAnimations=T,t.resize=A,t.goToAndStop=w,t.destroy=x,t.freeze=z,t.unfreeze=V,t.getRegisteredAnimations=h,t}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e=t.animType?t.animType:t.renderer?t.renderer:"svg";switch(e){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;default:this.renderer=new HybridRenderer(this,t.rendererSettings);break}this.imagePreloader.setCacheType(e),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,t.loop===""||t.loop===null||t.loop===void 0||t.loop===!0?this.loop=!0:t.loop===!1?this.loop=!1:this.loop=parseInt(t.loop),this.autoplay="autoplay"in t?t.autoplay:!0,this.name=t.name?t.name:"",this.autoloadSegments=t.hasOwnProperty("autoloadSegments")?t.autoloadSegments:!0,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.animationData?this.configAnimation(t.animationData):t.path&&(t.path.lastIndexOf("\\")!==-1?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(t.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(t,e){var r={wrapper:t,animationData:e?typeof e=="object"?e:JSON.parse(e):null},n=t.attributes;r.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",r.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var s=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";s===""||(s==="false"?r.loop=!1:s==="true"?r.loop=!0:r.loop=parseInt(s));var o=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:n.getNamedItem("bm-autoplay")?n.getNamedItem("bm-autoplay").value:!0;r.autoplay=o!=="false",r.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"";var a=n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"";a==="false"&&(r.prerender=!1),this.setParams(r)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e=this.animationData.layers,r,n=e.length,s=t.layers,o,a=s.length;for(o=0;o<a;o+=1)for(r=0;r<n;){if(e[r].id==s[o].id){e[r]=s[o];break}r+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(n=t.assets.length,r=0;r<n;r+=1)this.animationData.assets.push(t.assets[r]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||t.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var e=t.shift();this.timeCompleted=e.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(r,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){var t=this.animationData.segments;t||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(!!this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){!this.renderer||(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loaded()||this.renderer.rendererType!=="canvas")&&(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded!==!1)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!=t||this.isPaused===!0&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!=t||this.isPaused===!1&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(t){t&&this.name!=t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!=t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(t,e,r){r&&this.name!=r||(e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(t,e,r){this.goToAndStop(t,e,r),this.play()},AnimationItem.prototype.advanceTime=function(t){if(!(this.isPaused===!0||this.isLoaded===!1)){var e=this.currentRawFrame+t*this.frameModifier,r=!1;e>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(r=!0,e=this.totalFrames-1):e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):e<0?this.checkSegments(e%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(r=!0,e=0)):this.setCurrentRawFrameValue(e),r&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=t[0]-t[1],this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=t[1]-t[0],this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?r=t:this.currentRawFrame+this.firstFrame>e&&(r=e-t)),this.firstFrame=t,this.timeCompleted=this.totalFrames=e-t,r!==-1&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),typeof t[0]=="object"){var r,n=t.length;for(r=0;r<n;r+=1)this.segments.push(t[r])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return this.segments.length?(this.adjustSegment(this.segments.shift(),t),!0):!1},AnimationItem.prototype.destroy=function(t){t&&this.name!=t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var r=t.p;r.indexOf("images/")!==-1&&(r=r.split("/")[1]),e=this.assetsPath+r}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,r=this.assets.length;e<r;){if(t==this.assets[e].id)return this.assets[e];e+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}t==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),t==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),t==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),t==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),t==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var Expressions=function(){var t={};t.initExpressions=e;function e(r){var n=0,s=[];function o(){n+=1}function a(){n-=1,n===0&&c()}function l(h){s.indexOf(h)===-1&&s.push(h)}function c(){var h,f=s.length;for(h=0;h<f;h+=1)s[h].release();s.length=0}r.renderer.compInterface=CompExpressionInterface(r.renderer),r.renderer.globalData.projectInterface.registerComposition(r.renderer),r.renderer.globalData.pushExpression=o,r.renderer.globalData.popExpression=a,r.renderer.globalData.registerExpressionProperty=l}return t}();expressionsPlugin=Expressions;var ExpressionManager=function(){"use strict";var ob={},Math=BMMath,window=null,document=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return t==="number"||t==="boolean"||t==="string"||e instanceof Number}function $bm_neg(t){var e=typeof t;if(e==="number"||e==="boolean"||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){var r,n=t.length,s=[];for(r=0;r<n;r+=1)s[r]=-t[r];return s}if(t.propType)return t.v}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var r=typeof t,n=typeof e;if(r==="string"||n==="string"||isNumerable(r,t)&&isNumerable(n,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return t=t.slice(0),t[0]=t[0]+e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var s=0,o=t.length,a=e.length,l=[];s<o||s<a;)(typeof t[s]=="number"||t[s]instanceof Number)&&(typeof e[s]=="number"||e[s]instanceof Number)?l[s]=t[s]+e[s]:l[s]=e[s]===void 0?t[s]:t[s]||e[s],s+=1;return l}return 0}var add=sum;function sub(t,e){var r=typeof t,n=typeof e;if(isNumerable(r,t)&&isNumerable(n,e))return r==="string"&&(t=parseInt(t)),n==="string"&&(e=parseInt(e)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(n,e))return t=t.slice(0),t[0]=t[0]-e,t;if(isNumerable(r,t)&&$bm_isInstanceOfArray(e))return e=e.slice(0),e[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var s=0,o=t.length,a=e.length,l=[];s<o||s<a;)(typeof t[s]=="number"||t[s]instanceof Number)&&(typeof e[s]=="number"||e[s]instanceof Number)?l[s]=t[s]-e[s]:l[s]=e[s]===void 0?t[s]:t[s]||e[s],s+=1;return l}return 0}function mul(t,e){var r=typeof t,n=typeof e,s;if(isNumerable(r,t)&&isNumerable(n,e))return t*e;var o,a;if($bm_isInstanceOfArray(t)&&isNumerable(n,e)){for(a=t.length,s=createTypedArray("float32",a),o=0;o<a;o+=1)s[o]=t[o]*e;return s}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(a=e.length,s=createTypedArray("float32",a),o=0;o<a;o+=1)s[o]=t*e[o];return s}return 0}function div(t,e){var r=typeof t,n=typeof e,s;if(isNumerable(r,t)&&isNumerable(n,e))return t/e;var o,a;if($bm_isInstanceOfArray(t)&&isNumerable(n,e)){for(a=t.length,s=createTypedArray("float32",a),o=0;o<a;o+=1)s[o]=t[o]/e;return s}if(isNumerable(r,t)&&$bm_isInstanceOfArray(e)){for(a=e.length,s=createTypedArray("float32",a),o=0;o<a;o+=1)s[o]=t/e[o];return s}return 0}function mod(t,e){return typeof t=="string"&&(t=parseInt(t)),typeof e=="string"&&(e=parseInt(e)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,r){if(e>r){var n=r;r=e,e=n}return Math.min(Math.max(t,e),r)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if(typeof t=="number"||t instanceof Number)return e=e||0,Math.abs(t-e);e||(e=helperLengthArray);var r,n=Math.min(t.length,e.length),s=0;for(r=0;r<n;r+=1)s+=Math.pow(e[r]-t[r],2);return Math.sqrt(s)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],r=t[1],n=t[2],s=Math.max(e,r,n),o=Math.min(e,r,n),a,l,c=(s+o)/2;if(s==o)a=l=0;else{var h=s-o;switch(l=c>.5?h/(2-s-o):h/(s+o),s){case e:a=(r-n)/h+(r<n?6:0);break;case r:a=(n-e)/h+2;break;case n:a=(e-r)/h+4;break}a/=6}return[a,l,c,t[3]]}function hue2rgb(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function hslToRgb(t){var e=t[0],r=t[1],n=t[2],s,o,a;if(r===0)s=o=a=n;else{var l=n<.5?n*(1+r):n+r-n*r,c=2*n-l;s=hue2rgb(c,l,e+1/3),o=hue2rgb(c,l,e),a=hue2rgb(c,l,e-1/3)}return[s,o,a,t[3]]}function linear(t,e,r,n,s){if((n===void 0||s===void 0)&&(n=e,s=r,e=0,r=1),r<e){var o=r;r=e,e=o}if(t<=e)return n;if(t>=r)return s;var a=r===e?0:(t-e)/(r-e);if(!n.length)return n+(s-n)*a;var l,c=n.length,h=createTypedArray("float32",c);for(l=0;l<c;l+=1)h[l]=n[l]+(s[l]-n[l])*a;return h}function random(t,e){if(e===void 0&&(t===void 0?(t=0,e=1):(e=t,t=void 0)),e.length){var r,n=e.length;t||(t=createTypedArray("float32",n));var s=createTypedArray("float32",n),o=BMMath.random();for(r=0;r<n;r+=1)s[r]=t[r]+o*(e[r]-t[r]);return s}t===void 0&&(t=0);var a=BMMath.random();return t+a*(e-t)}function createPath(t,e,r,n){var s,o=t.length,a=shape_pool.newElement();a.setPathData(!!n,o);var l=[0,0],c,h;for(s=0;s<o;s+=1)c=e&&e[s]?e[s]:l,h=r&&r[s]?r[s]:l,a.setTripleAt(t[s][0],t[s][1],h[0]+t[s][0],h[1]+t[s][1],c[0]+t[s][0],c[1]+t[s][1],s,!0);return a}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,__expression_functions=[];if(data.xf){var i,len=data.xf.length;for(i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}var scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function(e,r){var n,s,o=this.pv.length?this.pv.length:1,a=createTypedArray("float32",o);e=5;var l=Math.floor(time*e);for(n=0,s=0;n<l;){for(s=0;s<o;s+=1)a[s]+=-r+r*2*BMMath.random();n+=1}var c=time*e,h=c-Math.floor(c),f=createTypedArray("float32",o);if(o>1){for(s=0;s<o;s+=1)f[s]=this.pv[s]+a[s]+(-r+r*2*BMMath.random())*h;return f}else return this.pv+a[0]+(-r+r*2*BMMath.random())*h}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(t,e){var r=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],n=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads,s=-Math.atan2(r[1],r[2])/degToRads;return[s,n,0]}function easeOut(t,e,r,n,s){return applyEase(easeOutBez,t,e,r,n,s)}function easeIn(t,e,r,n,s){return applyEase(easeInBez,t,e,r,n,s)}function ease(t,e,r,n,s){return applyEase(easeInOutBez,t,e,r,n,s)}function applyEase(t,e,r,n,s,o){s===void 0?(s=r,o=n):e=(e-r)/(n-r),e=e>1?1:e<0?0:e;var a=t(e);if($bm_isInstanceOfArray(s)){var l,c=s.length,h=createTypedArray("float32",c);for(l=0;l<c;l+=1)h[l]=(o[l]-s[l])*a+s[l];return h}else return(o-s)*a+s}function nearestKey(t){var e,r=data.k.length,n,s;if(!data.k.length||typeof data.k[0]=="number")n=0,s=0;else if(n=-1,t*=elem.comp.globalData.frameRate,t<data.k[0].t)n=1,s=data.k[0].t;else{for(e=0;e<r-1;e+=1)if(t===data.k[e].t){n=e+1,s=data.k[e].t;break}else if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(n=e+2,s=data.k[e+1].t):(n=e+1,s=data.k[e].t);break}n===-1&&(n=e+1,s=data.k[e].t)}var o={};return o.index=n,o.time=s/elem.comp.globalData.frameRate,o}function key(t){var e,r,n;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var s=data.k[t].hasOwnProperty("s")?data.k[t].s:data.k[t-1].e;for(n=s.length,r=0;r<n;r+=1)e[r]=s[r],e.value[r]=s[r];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return!t&&t!==0&&(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return typeof value=="string"?e===void 0?value.substring(t):value.substring(t,e):""}function substr(t,e){return typeof value=="string"?e===void 0?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=t===0?0:Math.floor(time*t)/t,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(t){return value=t,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt.propType==="shape"&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers=function(){function t(a,l,c){l.x&&(c.k=!0,c.x=!0,c.initiateExpression=ExpressionManager.initiateExpression,c.effectsSequence.push(c.initiateExpression(a,l,c).bind(c)))}function e(a){return a*=this.elem.globalData.frameRate,a-=this.offsetTime,a!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<a?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(a,this._cachingAtTime),this._cachingAtTime.lastFrame=a),this._cachingAtTime.value}function r(a){var l=-.01,c=this.getValueAtTime(a),h=this.getValueAtTime(a+l),f=0;if(c.length){var u;for(u=0;u<c.length;u+=1)f+=Math.pow(h[u]-c[u],2);f=Math.sqrt(f)*100}else f=0;return f}function n(a){if(this.vel!==void 0)return this.vel;var l=-.001,c=this.getValueAtTime(a),h=this.getValueAtTime(a+l),f;if(c.length){f=createTypedArray("float32",c.length);var u;for(u=0;u<c.length;u+=1)f[u]=(h[u]-c[u])/l}else f=(h-c)/l;return f}function s(){return this.pv}function o(a){this.propertyGroup=a}return{searchExpressions:t,getSpeedAtTime:r,getVelocityAtTime:n,getValueAtTime:e,getStaticValueAtTime:s,setGroupProperty:o}}();(function(){function e(v,p,g){if(!this.k||!this.keyframes)return this.pv;v=v?v.toLowerCase():"";var y=this.comp.renderedFrame,_=this.keyframes,b=_[_.length-1].t;if(y<=b)return this.pv;var w,S;g?(p?w=Math.abs(b-elem.comp.globalData.frameRate*p):w=Math.max(0,b-this.elem.data.ip),S=b-w):((!p||p>_.length-1)&&(p=_.length-1),S=_[_.length-1-p].t,w=b-S);var E,x,T;if(v==="pingpong"){var A=Math.floor((y-S)/w);if(A%2!=0)return this.getValueAtTime((w-(y-S)%w+S)/this.comp.globalData.frameRate,0)}else if(v==="offset"){var P=this.getValueAtTime(S/this.comp.globalData.frameRate,0),z=this.getValueAtTime(b/this.comp.globalData.frameRate,0),V=this.getValueAtTime(((y-S)%w+S)/this.comp.globalData.frameRate,0),L=Math.floor((y-S)/w);if(this.pv.length){for(T=new Array(P.length),x=T.length,E=0;E<x;E+=1)T[E]=(z[E]-P[E])*L+V[E];return T}return(z-P)*L+V}else if(v==="continue"){var O=this.getValueAtTime(b/this.comp.globalData.frameRate,0),k=this.getValueAtTime((b-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(T=new Array(O.length),x=T.length,E=0;E<x;E+=1)T[E]=O[E]+(O[E]-k[E])*((y-b)/this.comp.globalData.frameRate)/5e-4;return T}return O+(O-k)*((y-b)/.001)}return this.getValueAtTime(((y-S)%w+S)/this.comp.globalData.frameRate,0)}function r(v,p,g){if(!this.k)return this.pv;v=v?v.toLowerCase():"";var y=this.comp.renderedFrame,_=this.keyframes,b=_[0].t;if(y>=b)return this.pv;var w,S;g?(p?w=Math.abs(elem.comp.globalData.frameRate*p):w=Math.max(0,this.elem.data.op-b),S=b+w):((!p||p>_.length-1)&&(p=_.length-1),S=_[p].t,w=S-b);var E,x,T;if(v==="pingpong"){var A=Math.floor((b-y)/w);if(A%2==0)return this.getValueAtTime(((b-y)%w+b)/this.comp.globalData.frameRate,0)}else if(v==="offset"){var P=this.getValueAtTime(b/this.comp.globalData.frameRate,0),z=this.getValueAtTime(S/this.comp.globalData.frameRate,0),V=this.getValueAtTime((w-(b-y)%w+b)/this.comp.globalData.frameRate,0),L=Math.floor((b-y)/w)+1;if(this.pv.length){for(T=new Array(P.length),x=T.length,E=0;E<x;E+=1)T[E]=V[E]-(z[E]-P[E])*L;return T}return V-(z-P)*L}else if(v==="continue"){var O=this.getValueAtTime(b/this.comp.globalData.frameRate,0),k=this.getValueAtTime((b+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(T=new Array(O.length),x=T.length,E=0;E<x;E+=1)T[E]=O[E]+(O[E]-k[E])*(b-y)/.001;return T}return O+(O-k)*(b-y)/.001}return this.getValueAtTime((w-(b-y)%w+b)/this.comp.globalData.frameRate,0)}function n(v,p){if(!this.k)return this.pv;if(v=(v||.4)*.5,p=Math.floor(p||5),p<=1)return this.pv;var g=this.comp.renderedFrame/this.comp.globalData.frameRate,y=g-v,_=g+v,b=p>1?(_-y)/(p-1):1,w=0,S=0,E;this.pv.length?E=createTypedArray("float32",this.pv.length):E=0;for(var x;w<p;){if(x=this.getValueAtTime(y+w*b),this.pv.length)for(S=0;S<this.pv.length;S+=1)E[S]+=x[S];else E+=x;w+=1}if(this.pv.length)for(S=0;S<this.pv.length;S+=1)E[S]/=p;else E/=p;return E}function s(v){return v*=this.elem.globalData.frameRate,v-=this.offsetTime,v!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<v?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(v,this._cachingAtTime),this._cachingAtTime.lastFrame=v),this._cachingAtTime.value}function o(v){console.warn("Transform at time not supported")}function a(v){}var l=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(v,p,g){var y=l(v,p,g);return y.dynamicProperties.length?y.getValueAtTime=o.bind(y):y.getValueAtTime=a.bind(y),y.setGroupProperty=expressionHelpers.setGroupProperty,y};var c=PropertyFactory.getProp;PropertyFactory.getProp=function(v,p,g,y,_){var b=c(v,p,g,y,_);b.kf?b.getValueAtTime=expressionHelpers.getValueAtTime.bind(b):b.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(b),b.setGroupProperty=expressionHelpers.setGroupProperty,b.loopOut=e,b.loopIn=r,b.smooth=n,b.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(b),b.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(b),b.numKeys=p.a===1?p.k.length:0,b.propertyIndex=p.ix;var w=0;return g!==0&&(w=createTypedArray("float32",p.a===1?p.k[0].s.length:p.k.length)),b._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:w},expressionHelpers.searchExpressions(v,p,b),b.k&&_.addDynamicProperty(b),b};function h(v){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),v*=this.elem.globalData.frameRate,v-=this.offsetTime,v!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<v?this._caching.lastIndex:0,this._cachingAtTime.lastTime=v,this.interpolateShape(v,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var f=ShapePropertyFactory.getConstructorFunction(),u=ShapePropertyFactory.getKeyframedConstructorFunction();function m(){}m.prototype={vertices:function(v,p){this.k&&this.getValue();var g=this.v;p!==void 0&&(g=this.getValueAtTime(p,0));var y,_=g._length,b=g[v],w=g.v,S=createSizedArray(_);for(y=0;y<_;y+=1)v==="i"||v==="o"?S[y]=[b[y][0]-w[y][0],b[y][1]-w[y][1]]:S[y]=[b[y][0],b[y][1]];return S},points:function(v){return this.vertices("v",v)},inTangents:function(v){return this.vertices("i",v)},outTangents:function(v){return this.vertices("o",v)},isClosed:function(){return this.v.c},pointOnPath:function(v,p){var g=this.v;p!==void 0&&(g=this.getValueAtTime(p,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(g));for(var y=this._segmentsLength,_=y.lengths,b=y.totalLength*v,w=0,S=_.length,E=0,x,T=0,A;w<S;){if(T+_[w].addedLength>b){var P=w,z=g.c&&w===S-1?0:w+1,V=(b-T)/_[w].addedLength;A=bez.getPointInSegment(g.v[P],g.v[z],g.o[P],g.i[z],V,_[w]);break}else T+=_[w].addedLength;w+=1}return A||(A=g.c?[g.v[0][0],g.v[0][1]]:[g.v[g._length-1][0],g.v[g._length-1][1]]),A},vectorOnPath:function(v,p,g){v=v==1?this.v.c?0:.999:v;var y=this.pointOnPath(v,p),_=this.pointOnPath(v+.001,p),b=_[0]-y[0],w=_[1]-y[1],S=Math.sqrt(Math.pow(b,2)+Math.pow(w,2));if(S===0)return[0,0];var E=g==="tangent"?[b/S,w/S]:[-w/S,b/S];return E},tangentOnPath:function(v,p){return this.vectorOnPath(v,p,"tangent")},normalOnPath:function(v,p){return this.vectorOnPath(v,p,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([m],f),extendPrototype([m],u),u.prototype.getValueAtTime=h,u.prototype.initiateExpression=ExpressionManager.initiateExpression;var d=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(v,p,g,y,_){var b=d(v,p,g,y,_);return b.propertyIndex=p.ix,b.lock=!1,g===3?expressionHelpers.searchExpressions(v,p.pt,b):g===4&&expressionHelpers.searchExpressions(v,p.ks,b),b.k&&v.addDynamicProperty(b),b}})(),function(){function e(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0}TextProperty.prototype.getExpressionValue=function(r,n){var s=this.calculateExpression(n);if(r.t!==s){var o={};return this.copyData(o,r),o.t=s.toString(),o.__complete=!1,o}return r},TextProperty.prototype.searchProperty=function(){var r=this.searchKeyframes(),n=this.searchExpressions();return this.kf=r||n,this.kf},TextProperty.prototype.searchExpressions=e}();var ShapeExpressionInterface=function(){function t(d,v,p){var g=[],y,_=d?d.length:0;for(y=0;y<_;y+=1)d[y].ty=="gr"?g.push(r(d[y],v[y],p)):d[y].ty=="fl"?g.push(n(d[y],v[y],p)):d[y].ty=="st"?g.push(s(d[y],v[y],p)):d[y].ty=="tm"?g.push(o(d[y],v[y],p)):d[y].ty=="tr"||(d[y].ty=="el"?g.push(l(d[y],v[y],p)):d[y].ty=="sr"?g.push(c(d[y],v[y],p)):d[y].ty=="sh"?g.push(m(d[y],v[y],p)):d[y].ty=="rc"?g.push(h(d[y],v[y],p)):d[y].ty=="rd"?g.push(f(d[y],v[y],p)):d[y].ty=="rp"&&g.push(u(d[y],v[y],p)));return g}function e(d,v,p){var g,y=function(b){for(var w=0,S=g.length;w<S;){if(g[w]._name===b||g[w].mn===b||g[w].propertyIndex===b||g[w].ix===b||g[w].ind===b)return g[w];w+=1}if(typeof b=="number")return g[b-1]};return y.propertyGroup=function(_){return _===1?y:p(_-1)},g=t(d.it,v.it,y.propertyGroup),y.numProperties=g.length,y.propertyIndex=d.cix,y._name=d.nm,y}function r(d,v,p){var g=function(w){switch(w){case"ADBE Vectors Group":case"Contents":case 2:return g.content;default:return g.transform}};g.propertyGroup=function(b){return b===1?g:p(b-1)};var y=e(d,v,g.propertyGroup),_=a(d.it[d.it.length-1],v.it[v.it.length-1],g.propertyGroup);return g.content=y,g.transform=_,Object.defineProperty(g,"_name",{get:function(){return d.nm}}),g.numProperties=d.np,g.propertyIndex=d.ix,g.nm=d.nm,g.mn=d.mn,g}function n(d,v,p){function g(y){if(y==="Color"||y==="color")return g.color;if(y==="Opacity"||y==="opacity")return g.opacity}return Object.defineProperties(g,{color:{get:ExpressionPropertyInterface(v.c)},opacity:{get:ExpressionPropertyInterface(v.o)},_name:{value:d.nm},mn:{value:d.mn}}),v.c.setGroupProperty(p),v.o.setGroupProperty(p),g}function s(d,v,p){function g(x){return x===1?ob:p(x-1)}function y(x){return x===1?S:g(x-1)}function _(x){Object.defineProperty(S,d.d[x].nm,{get:ExpressionPropertyInterface(v.d.dataProps[x].p)})}var b,w=d.d?d.d.length:0,S={};for(b=0;b<w;b+=1)_(b),v.d.dataProps[b].p.setGroupProperty(y);function E(x){if(x==="Color"||x==="color")return E.color;if(x==="Opacity"||x==="opacity")return E.opacity;if(x==="Stroke Width"||x==="stroke width")return E.strokeWidth}return Object.defineProperties(E,{color:{get:ExpressionPropertyInterface(v.c)},opacity:{get:ExpressionPropertyInterface(v.o)},strokeWidth:{get:ExpressionPropertyInterface(v.w)},dash:{get:function(){return S}},_name:{value:d.nm},mn:{value:d.mn}}),v.c.setGroupProperty(g),v.o.setGroupProperty(g),v.w.setGroupProperty(g),E}function o(d,v,p){function g(_){return _==1?y:p(--_)}y.propertyIndex=d.ix,v.s.setGroupProperty(g),v.e.setGroupProperty(g),v.o.setGroupProperty(g);function y(_){if(_===d.e.ix||_==="End"||_==="end")return y.end;if(_===d.s.ix)return y.start;if(_===d.o.ix)return y.offset}return y.propertyIndex=d.ix,y.propertyGroup=p,Object.defineProperties(y,{start:{get:ExpressionPropertyInterface(v.s)},end:{get:ExpressionPropertyInterface(v.e)},offset:{get:ExpressionPropertyInterface(v.o)},_name:{value:d.nm}}),y.mn=d.mn,y}function a(d,v,p){function g(_){return _==1?y:p(--_)}v.transform.mProps.o.setGroupProperty(g),v.transform.mProps.p.setGroupProperty(g),v.transform.mProps.a.setGroupProperty(g),v.transform.mProps.s.setGroupProperty(g),v.transform.mProps.r.setGroupProperty(g),v.transform.mProps.sk&&(v.transform.mProps.sk.setGroupProperty(g),v.transform.mProps.sa.setGroupProperty(g)),v.transform.op.setGroupProperty(g);function y(_){if(d.a.ix===_||_==="Anchor Point")return y.anchorPoint;if(d.o.ix===_||_==="Opacity")return y.opacity;if(d.p.ix===_||_==="Position")return y.position;if(d.r.ix===_||_==="Rotation"||_==="ADBE Vector Rotation")return y.rotation;if(d.s.ix===_||_==="Scale")return y.scale;if(d.sk&&d.sk.ix===_||_==="Skew")return y.skew;if(d.sa&&d.sa.ix===_||_==="Skew Axis")return y.skewAxis}return Object.defineProperties(y,{opacity:{get:ExpressionPropertyInterface(v.transform.mProps.o)},position:{get:ExpressionPropertyInterface(v.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(v.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(v.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(v.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(v.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(v.transform.mProps.sa)},_name:{value:d.nm}}),y.ty="tr",y.mn=d.mn,y.propertyGroup=p,y}function l(d,v,p){function g(b){return b==1?_:p(--b)}_.propertyIndex=d.ix;var y=v.sh.ty==="tm"?v.sh.prop:v.sh;y.s.setGroupProperty(g),y.p.setGroupProperty(g);function _(b){if(d.p.ix===b)return _.position;if(d.s.ix===b)return _.size}return Object.defineProperties(_,{size:{get:ExpressionPropertyInterface(y.s)},position:{get:ExpressionPropertyInterface(y.p)},_name:{value:d.nm}}),_.mn=d.mn,_}function c(d,v,p){function g(b){return b==1?_:p(--b)}var y=v.sh.ty==="tm"?v.sh.prop:v.sh;_.propertyIndex=d.ix,y.or.setGroupProperty(g),y.os.setGroupProperty(g),y.pt.setGroupProperty(g),y.p.setGroupProperty(g),y.r.setGroupProperty(g),d.ir&&(y.ir.setGroupProperty(g),y.is.setGroupProperty(g));function _(b){if(d.p.ix===b)return _.position;if(d.r.ix===b)return _.rotation;if(d.pt.ix===b)return _.points;if(d.or.ix===b||b==="ADBE Vector Star Outer Radius")return _.outerRadius;if(d.os.ix===b)return _.outerRoundness;if(d.ir&&(d.ir.ix===b||b==="ADBE Vector Star Inner Radius"))return _.innerRadius;if(d.is&&d.is.ix===b)return _.innerRoundness}return Object.defineProperties(_,{position:{get:ExpressionPropertyInterface(y.p)},rotation:{get:ExpressionPropertyInterface(y.r)},points:{get:ExpressionPropertyInterface(y.pt)},outerRadius:{get:ExpressionPropertyInterface(y.or)},outerRoundness:{get:ExpressionPropertyInterface(y.os)},innerRadius:{get:ExpressionPropertyInterface(y.ir)},innerRoundness:{get:ExpressionPropertyInterface(y.is)},_name:{value:d.nm}}),_.mn=d.mn,_}function h(d,v,p){function g(b){return b==1?_:p(--b)}var y=v.sh.ty==="tm"?v.sh.prop:v.sh;_.propertyIndex=d.ix,y.p.setGroupProperty(g),y.s.setGroupProperty(g),y.r.setGroupProperty(g);function _(b){if(d.p.ix===b)return _.position;if(d.r.ix===b)return _.roundness;if(d.s.ix===b||b==="Size"||b==="ADBE Vector Rect Size")return _.size}return Object.defineProperties(_,{position:{get:ExpressionPropertyInterface(y.p)},roundness:{get:ExpressionPropertyInterface(y.r)},size:{get:ExpressionPropertyInterface(y.s)},_name:{value:d.nm}}),_.mn=d.mn,_}function f(d,v,p){function g(b){return b==1?_:p(--b)}var y=v;_.propertyIndex=d.ix,y.rd.setGroupProperty(g);function _(b){if(d.r.ix===b||b==="Round Corners 1")return _.radius}return Object.defineProperties(_,{radius:{get:ExpressionPropertyInterface(y.rd)},_name:{value:d.nm}}),_.mn=d.mn,_}function u(d,v,p){function g(b){return b==1?_:p(--b)}var y=v;_.propertyIndex=d.ix,y.c.setGroupProperty(g),y.o.setGroupProperty(g);function _(b){if(d.c.ix===b||b==="Copies")return _.copies;if(d.o.ix===b||b==="Offset")return _.offset}return Object.defineProperties(_,{copies:{get:ExpressionPropertyInterface(y.c)},offset:{get:ExpressionPropertyInterface(y.o)},_name:{value:d.nm}}),_.mn=d.mn,_}function m(d,v,p){var g=v.sh;function y(b){return b==1?_:p(--b)}g.setGroupProperty(y);function _(b){if(b==="Shape"||b==="shape"||b==="Path"||b==="path"||b==="ADBE Vector Shape"||b===2)return _.path}return Object.defineProperties(_,{path:{get:function(){return g.k&&g.getValue(),g}},shape:{get:function(){return g.k&&g.getValue(),g}},_name:{value:d.nm},ix:{value:d.ix},propertyIndex:{value:d.ix},mn:{value:d.mn}}),_}return function(d,v,p){var g;function y(_){if(typeof _=="number")return g[_-1];for(var b=0,w=g.length;b<w;){if(g[b]._name===_)return g[b];b+=1}}return y.propertyGroup=p,g=t(d,v,y),y.numProperties=g.length,y}}(),TextExpressionInterface=function(){return function(t){var e,r;function n(){}return Object.defineProperty(n,"sourceText",{get:function(){t.textProperty.getValue();var s=t.textProperty.currentData.t;return s!==e&&(t.textProperty.currentData.t=e,r=new String(s),r.value=s||new String(s)),r}}),n}}(),LayerExpressionInterface=function(){function t(s,o){var a=new Matrix;a.reset();var l;if(o?l=this._elem.finalTransform.mProp:l=this._elem.finalTransform.mProp,l.applyToMatrix(a),this._elem.hierarchy&&this._elem.hierarchy.length){var c,h=this._elem.hierarchy.length;for(c=0;c<h;c+=1)this._elem.hierarchy[c].finalTransform.mProp.applyToMatrix(a);return a.applyToPointArray(s[0],s[1],s[2]||0)}return a.applyToPointArray(s[0],s[1],s[2]||0)}function e(s,o){var a=new Matrix;a.reset();var l;if(o?l=this._elem.finalTransform.mProp:l=this._elem.finalTransform.mProp,l.applyToMatrix(a),this._elem.hierarchy&&this._elem.hierarchy.length){var c,h=this._elem.hierarchy.length;for(c=0;c<h;c+=1)this._elem.hierarchy[c].finalTransform.mProp.applyToMatrix(a);return a.inversePoint(s)}return a.inversePoint(s)}function r(s){var o=new Matrix;if(o.reset(),this._elem.finalTransform.mProp.applyToMatrix(o),this._elem.hierarchy&&this._elem.hierarchy.length){var a,l=this._elem.hierarchy.length;for(a=0;a<l;a+=1)this._elem.hierarchy[a].finalTransform.mProp.applyToMatrix(o);return o.inversePoint(s)}return o.inversePoint(s)}function n(){return[1,1,1,1]}return function(s){var o;function a(f){c.mask=new MaskManagerInterface(f,s)}function l(f){c.effect=f}function c(f){switch(f){case"ADBE Root Vectors Group":case"Contents":case 2:return c.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return o;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return c.effect}}c.toWorld=t,c.fromWorld=e,c.toComp=t,c.fromComp=r,c.sampleImage=n,c.sourceRectAtTime=s.sourceRectAtTime.bind(s),c._elem=s,o=TransformExpressionInterface(s.finalTransform.mProp);var h=getDescriptor(o,"anchorPoint");return Object.defineProperties(c,{hasParent:{get:function(){return s.hierarchy.length}},parent:{get:function(){return s.hierarchy[0].layerInterface}},rotation:getDescriptor(o,"rotation"),scale:getDescriptor(o,"scale"),position:getDescriptor(o,"position"),opacity:getDescriptor(o,"opacity"),anchorPoint:h,anchor_point:h,transform:{get:function(){return o}},active:{get:function(){return s.isInRange}}}),c.startTime=s.data.st,c.index=s.data.ind,c.source=s.data.refId,c.height=s.data.ty===0?s.data.h:100,c.width=s.data.ty===0?s.data.w:100,c.inPoint=s.data.ip/s.comp.globalData.frameRate,c.outPoint=s.data.op/s.comp.globalData.frameRate,c._name=s.data.nm,c.registerMaskInterface=a,c.registerEffectsInterface=l,c}}(),CompExpressionInterface=function(){return function(t){function e(r){for(var n=0,s=t.layers.length;n<s;){if(t.layers[n].nm===r||t.layers[n].ind===r)return t.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e}}(),TransformExpressionInterface=function(){return function(t){function e(n){switch(n){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity}}if(Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p)var r=ExpressionPropertyInterface(t.p);return Object.defineProperty(e,"position",{get:function(){return t.p?r():[t.px.v,t.py.v,t.pz?t.pz.v:0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e}}(),ProjectInterface=function(){function t(e){this.compositions.push(e)}return function(){function e(r){for(var n=0,s=this.compositions.length;n<s;){if(this.compositions[n].data&&this.compositions[n].data.nm===r)return this.compositions[n].prepareFrame&&this.compositions[n].data.xt&&this.compositions[n].prepareFrame(this.currentFrame),this.compositions[n].compInterface;n+=1}}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),EffectsExpressionInterface=function(){var t={createEffectsInterface:e};function e(s,o){if(s.effectsManager){var a=[],l=s.data.ef,c,h=s.effectsManager.effectElements.length;for(c=0;c<h;c+=1)a.push(r(l[c],s.effectsManager.effectElements[c],o,s));return function(f){for(var u=s.data.ef||[],m=0,d=u.length;m<d;){if(f===u[m].nm||f===u[m].mn||f===u[m].ix)return a[m];m+=1}}}}function r(s,o,a,l){var c=[],h,f=s.ef.length;for(h=0;h<f;h+=1)s.ef[h].ty===5?c.push(r(s.ef[h],o.effectElements[h],o.effectElements[h].propertyGroup,l)):c.push(n(o.effectElements[h],s.ef[h].ty,l,u));function u(d){return d===1?m:a(d-1)}var m=function(d){for(var v=s.ef,p=0,g=v.length;p<g;){if(d===v[p].nm||d===v[p].mn||d===v[p].ix)return v[p].ty===5?c[p]:c[p]();p+=1}return c[0]()};return m.propertyGroup=u,s.mn==="ADBE Color Control"&&Object.defineProperty(m,"color",{get:function(){return c[0]()}}),Object.defineProperty(m,"numProperties",{get:function(){return s.np}}),m.active=m.enabled=s.en!==0,m}function n(s,o,a,l){var c=ExpressionPropertyInterface(s.p);function h(){return o===10?a.comp.compInterface(s.p.v):c()}return s.p.setGroupProperty&&s.p.setGroupProperty(l),h}return t}(),MaskManagerInterface=function(){function t(r,n){this._mask=r,this._data=n}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var e=function(r,n){var s=r,o=n,a=createSizedArray(r.viewData.length),l,c=r.viewData.length;for(l=0;l<c;l+=1)a[l]=new t(r.viewData[l],r.masksProperties[l]);var h=function(f){for(l=0;l<c;){if(r.masksProperties[l].nm===f)return a[l];l+=1}};return h};return e}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function r(a,l,c){Object.defineProperty(a,"velocity",{get:function(){return l.getVelocityAtTime(l.comp.currentFrame)}}),a.numKeys=l.keyframes?l.keyframes.length:0,a.key=function(h){if(a.numKeys){var f="";"s"in l.keyframes[h-1]?f=l.keyframes[h-1].s:"e"in l.keyframes[h-2]?f=l.keyframes[h-2].e:f=l.keyframes[h-2].s;var u=c==="unidimensional"?new Number(f):Object.assign({},f);return u.time=l.keyframes[h-1].t/l.elem.comp.globalData.frameRate,u}else return 0},a.valueAtTime=l.getValueAtTime,a.speedAtTime=l.getSpeedAtTime,a.velocityAtTime=l.getVelocityAtTime,a.propertyGroup=l.propertyGroup}function n(a){(!a||!("pv"in a))&&(a=t);var l=1/a.mult,c=a.pv*l,h=new Number(c);return h.value=c,r(h,a,"unidimensional"),function(){return a.k&&a.getValue(),c=a.v*l,h.value!==c&&(h=new Number(c),h.value=c,r(h,a,"unidimensional")),h}}function s(a){(!a||!("pv"in a))&&(a=e);var l=1/a.mult,c=a.pv.length,h=createTypedArray("float32",c),f=createTypedArray("float32",c);return h.value=f,r(h,a,"multidimensional"),function(){a.k&&a.getValue();for(var u=0;u<c;u+=1)h[u]=f[u]=a.v[u]*l;return h}}function o(){return t}return function(a){return a?a.propType==="unidimensional"?n(a):s(a):o}}();(function(){var t=function(){function r(n,s){return this.textIndex=n+1,this.textTotal=s,this.v=this.getValue()*this.mult,this.v}return function(s,o){this.pv=1,this.comp=s.comp,this.elem=s,this.mult=.01,this.propType="textSelector",this.textTotal=o.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(s,o,this),this.getMult=r,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),e=TextSelectorProp.getTextSelectorProp;TextSelectorProp.getTextSelectorProp=function(r,n,s){return n.t===1?new t(r,n,s):e(r,n,s)}})();function SliderEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function AngleEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function ColorEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function PointEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,1,0,r)}function LayerIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function MaskIndexEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function CheckboxEffect(t,e,r){this.p=PropertyFactory.getProp(e,t.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(t,e){var r=t.ef||[];this.effectElements=[];var n,s=r.length,o;for(n=0;n<s;n++)o=new GroupEffect(r[n],e),this.effectElements.push(o)}function GroupEffect(t,e){this.init(t,e)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var r,n=this.data.ef.length,s,o=this.data.ef;for(r=0;r<n;r+=1){switch(s=null,o[r].ty){case 0:s=new SliderEffect(o[r],e,this);break;case 1:s=new AngleEffect(o[r],e,this);break;case 2:s=new ColorEffect(o[r],e,this);break;case 3:s=new PointEffect(o[r],e,this);break;case 4:case 7:s=new CheckboxEffect(o[r],e,this);break;case 10:s=new LayerIndexEffect(o[r],e,this);break;case 11:s=new MaskIndexEffect(o[r],e,this);break;case 5:s=new EffectsManager(o[r],e,this);break;default:s=new NoValueEffect(o[r],e,this);break}s&&this.effectElements.push(s)}};var lottie={},_isFrozen=!1;function setLocationHref(t){locationHref=t}function searchAnimations(){standalone===!0?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){subframeEnabled=t}function loadAnimation(t){return standalone===!0&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if(typeof t=="string")switch(t){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10;break}else!isNaN(t)&&t>1&&(defaultCurveSegments=t);defaultCurveSegments>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return typeof navigator!="undefined"}function installPlugin(t,e){t==="expressions"&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.__getFactory=getFactory,lottie.version="5.7.0";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),r=0;r<e.length;r++){var n=e[r].split("=");if(decodeURIComponent(n[0])==t)return decodeURIComponent(n[1])}}var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottie})});var Vn=Ze(a_=>{"use strict";Object.defineProperty(a_,"__esModule",{value:!0});var Dl=class{constructor(e,r,n,s){this.x2=e,this.y2=r,this.x3=e,this.y3=s}static getBezierPoint(e,r,n,s,o,a,l,c,h){let f=1-e,u=e*e*e*c+3*e*e*f*a+3*e*f*f*s+f*f*f*r,m=e*e*e*h+3*e*e*f*l+3*e*f*f*o+f*f*f*n;return{x:u,y:m}}static getPoint(e,r,n,s,o){return Dl.getBezierPoint(e,r.x,r.y,n.x,n.y,s.x,s.y,o.x,o.y)}static interpolateProgress(e,r,n,s,o){return Dl.getBezierPoint(e,0,0,r,n,s,o,1,1).y}interpolate(e){return Dl.interpolateProgress(e,this.x2,this.y2,this.x3,this.y3)}easingFunction(){return e=>this.interpolate(e)}static makeEasingFunction(e,r,n,s){return o=>this.interpolateProgress(o,e,r,n,s)}};a_.CubicBezier=Dl});var ZA=Ze(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});var KW=fa(),JW=Iy(),eG=yt(),Kh=vs(),Ii=ui(),XA=Gi(),tG=ua(),rG=Ci(),iG=Td(),Bn=fi(),nG=Vn();da.LottieScrollEvents={INIT:"INIT",PROGRESS_UPDATE:"LOTTIE_SCROLL_EVENT"};var l_=class{constructor(e,r,n){this.lottieObjects=[],this.currentProgress=0,this.element=e[0],this.scrollEl=this.element,this.domWatcher=new eG.DomWatcher,this.domWatcher.add({element:window,on:"scroll",callback:this.onWindowScroll.bind(this),eventOptions:{passive:!0}}),this.domWatcher.add({element:window,on:"resize",callback:this.onWindowResize.bind(this),eventOptions:{passive:!0}}),this.rafProgress=new JW.RafProgress(this.progressUpdate.bind(this)),this.rafProgress.setPrecision(5),this.domWatcher.add({element:document,on:"yano-lottie-scroll-update",callback:this.handleLottieScrollUpdateEvent.bind(this),eventOptions:{passive:!0}}),this.domWatcher.add({element:this.element,on:"yano-lottie-scroll-update",callback:this.handleLottieScrollUpdateEvent.bind(this),eventOptions:{passive:!0}});let s=JSON.parse(this.element.getAttribute("lottie-scroll")),o=s.settings||{};this.lottieScrollSettings=Object.assign({debug:!1,lerp:1,damp:1,top:"0px",bottom:"0px"},o),s.lotties&&(s.lotties.forEach(a=>{let l=Object.assign({debugFrame:!1,json_path:null,json_path_webp:null,image_path:null,image_path_webp:null,container_selector:null,renderer:"canvas",preserveAspectRatio:"xMidYMid slice",startFrame:0,intro:null,introCompleted:!1,fromProgress:null,toProgress:null,classTriggers:null,activeTriggerClasses:[],autoplay:null,endFrame:0,lottieInDom:!1},a);this.lottieObjects.push(l)}),this.createLottieInstances()),r.$on("$destroy",()=>{this.dispose()})}static get $inject(){return["$element","$scope","$attrs"]}getPixelValue(e){let r=tG.cssUnit.parse(e),n=1;return r.unit=="%"?(n=this.element.offsetHeight,n*(r.value/100)):r.unit=="vh"?(n=window.innerHeight,n*(r.value/100)):n*r.value}onWindowResize(){this.calculateProgressOffsets(),this.lottieObjects.map((r,n)=>{let s=this.element.querySelector(r.container_selector);return r.isOnScreen=!Kh.dom.isDisplayNoneWithAncestors(s),r});let e=this.currentProgress;e==0?this.progressUpdate(e+.01,0):this.progressUpdate(Math.max(0,e-.01),0),this.resizeLottie(),this.progressUpdate(e,0)}resizeLottie(){this.lottieObjects.forEach(e=>{e.lottieInDom&&e.lottieInstance.resize()})}calculateProgressOffsets(){this.progressTopOffset=XA.func.setDefault(this.getPixelValue(this.lottieScrollSettings.top),0),this.progressBottomOffset=XA.func.setDefault(this.getPixelValue(this.lottieScrollSettings.bottom),0)}createLottieInstances(){this.lottieObjects.forEach((e,r)=>{Bn.is.supportingWebpAsync().then(n=>{let s=e.json_path_webp&&n?e.json_path_webp:e.json_path,o={container:this.element.querySelector(e.container_selector),loop:!0,autoplay:!1,renderer:e.renderer,rendererSettings:{preserveAspectRatio:e.preserveAspectRatio},path:s};e.image_path&&(n&&e.image_path_webp?o.assetsPath=e.image_path_webp:o.assetsPath=e.image_path);let a=KW.loadAnimation(o);a.setSubframe(!1),this.lottieObjects[r].lottieInstance=a,a.addEventListener("DOMLoaded",()=>{if(this.lottieObjects[r].endFrame==0&&(this.lottieObjects[r].endFrame=a.totalFrames),this.lottieObjects[r].classTriggers){let c=this.lottieObjects[r].startFrame,h=this.lottieObjects[r].endFrame;this.lottieObjects[r].classTriggers.map(f=>{if(Bn.is.defined(f.fromFrame)&&(f.from=Ii.mathf.inverseLerp(c,h,f.fromFrame,!0)),Bn.is.defined(f.toFrame)){let u=f.toFrame;String(u).startsWith("+")&&(u=f.fromFrame+ +String(u).replace("+","")),f.to=Ii.mathf.inverseLerp(c,h,+u,!0)}})}this.lottieObjects[r].interpolations?(this.lottieObjects[r].interpolations.map(c=>{let h=this.lottieObjects[r].startFrame,f=this.lottieObjects[r].endFrame;return c.progress.map(u=>{if(Bn.is.defined(u.fromFrame)&&(u.from=Ii.mathf.inverseLerp(h,f,u.fromFrame,!0)),Bn.is.defined(u.toFrame)){let m=u.toFrame;String(m).startsWith("+")&&(m=u.fromFrame+ +String(m).replace("+","")),u.to=Ii.mathf.inverseLerp(h,f,m,!0)}if(Bn.is.defined(u.cubic_ease)){let m=u.cubic_ease.split(",");u.easingFunction=nG.CubicBezier.makeEasingFunction(m[0],m[1],m[2],m[3])}return u}),c}),this.lottieObjects[r].cssInterpolatorInstance=new rG.CssVarInterpolate(this.element,{interpolations:this.lottieObjects[r].interpolations}),this.lottieObjects[r].cssInterpolatorInstance.useBatchUpdate(!0),this.lottieObjects[r].lottieInDom=!0,this.onWindowResize(),this.lottieObjects[r].intro&&this.playIntro(this.lottieObjects[r]),window.setTimeout(()=>{this.element.classList.add("lottie-scroll-loaded")})):this.onWindowResize();let l={controller:this};Kh.dom.event(this.element,da.LottieScrollEvents.INIT,l),this.updateImmediately()},{once:!0})})})}onWindowScroll(){this.rafProgress.dampTo(this.getPercent(),this.lottieScrollSettings.lerp,this.lottieScrollSettings.damp)}playIntro(e){if(this.getPercent()>0){e.introCompleted=!0;return}let n=new iG.RafTimer(s=>{let o=this.getPercent(),a=Ii.mathf.lerp(e.startFrame,e.endFrame,o);!Bn.is.null(e.fromProgress)&&!Bn.is.null(e.toProgress)&&(s=Ii.mathf.childProgress(s,e.fromProgress,e.toProgress));let l=Ii.mathf.lerp(e.intro.startFrame,a,s);e.lottieInstance.goToAndStop(l,!0);let c=Ii.mathf.inverseLerp(e.startFrame,e.endFrame,l,!0);e.cssInterpolatorInstance&&e.cssInterpolatorInstance.update(c)});n.setDuration(e.intro.duration||300),n.onComplete(()=>{e.introCompleted=!0,n.dispose()}),n.play()}drawOrLoop(e,r){let n=this.rafProgress.getScrollDirection();e.autoplay&&!e.isAutoPlaying&&(e.autoplay.down&&n==1||e.autoplay.up&&n==-1)&&Ii.mathf.isBetween(this.currentProgress,e.fromProgress,e.toProgress,!0)?(e.isAutoPlaying=!0,e.autoplay.loopStartFrame?e.lottieInstance.playSegments([[e.autoplay.fromFrame,e.autoplay.toFrame],[e.autoplay.loopStartFrame,e.autoplay.loopEndFrame]],!0):(e.lottieInstance.loop=!1,e.lottieInstance.goToAndStop(e.autoplay.fromFrame,!0),e.lottieInstance.playSegments([[e.autoplay.fromFrame,e.autoplay.toFrame]],!0))):e.autoplay?Ii.mathf.isBetween(this.currentProgress,e.fromProgress,e.toProgress,!0)||(e.isAutoPlaying=!1,e.lottieInstance.goToAndStop(1e5,!0)):(e.isAutoPlaying=!1,e.lottieInstance.goToAndStop(r,!0))}progressUpdate(e,r){this.lottieScrollSettings.debug&&console.log(this.currentProgress);let n={controller:this,progress:e,direction:r};Kh.dom.event(this.element,da.LottieScrollEvents.PROGRESS_UPDATE,n),this.currentProgress=e,this.lottieObjects.forEach(s=>{let o=e;if(!(s.intro&&!s.introCompleted)){if(!s.isOnScreen){s.debugFrame&&console.log("lottie is not on screen");return}if(s.lottieInstance&&s.lottieInstance.isLoaded){!Bn.is.null(s.fromProgress)&&!Bn.is.null(s.toProgress)&&(o=Ii.mathf.childProgress(o,s.fromProgress,s.toProgress));let l=Ii.mathf.lerp(s.startFrame,s.endFrame,o);s.debugFrame&&console.log("Frame",l,e,window.scrollY),this.drawOrLoop(s,l)}}}),this.lottieObjects.forEach(s=>{s.intro&&!s.introCompleted||!s.isOnScreen||s.cssInterpolatorInstance&&s.cssInterpolatorInstance.update(e)}),this.updateClassTriggers(e)}updateClassTriggers(e){this.lottieObjects.forEach(r=>{if(!r.isOnScreen)return;let n=[],s=[];r.classTriggers&&r.classTriggers.forEach(o=>{Ii.mathf.isBetween(e,+o.from,+o.to,!0)?n.push(o.class):s.push(o.class)}),n.forEach(o=>{r.activeTriggerClasses.includes(o)||this.element.classList.add(o)}),s.forEach(o=>{r.activeTriggerClasses.includes(o)&&this.element.classList.remove(o)}),r.activeTriggerClasses=n})}updateImmediately(){let e=this.getPercent();this.rafProgress.setCurrentProgress(e),this.lottieObjects.forEach(r=>{let n=r.intro&&!r.introCompleted;!r.isOnScreen||n||r.cssInterpolatorInstance&&r.cssInterpolatorInstance.update(e)})}getPercent(){return Kh.dom.getElementScrolledPercent(this.scrollEl,this.progressTopOffset,this.progressBottomOffset)}getScrollYAtPercent(e){return Kh.dom.getScrollYAtPercent(this.scrollEl,this.progressTopOffset,this.progressBottomOffset,e)}getLottieObjects(){return this.lottieObjects}handleLottieScrollUpdateEvent(e){let r=e.detail;r.lerp&&(this.lottieScrollSettings.lerp=+r.lerp),r.damp&&(this.lottieScrollSettings.damp=+r.damp)}dispose(){this.lottieObjects.forEach(e=>{e.lottieInstance.destroy(),e.cssInterpolatorInstance=null}),this.domWatcher.dispose(),this.rafProgress.dispose()}};da.LottieController=l_;da.lottieScrollDirective=function(){return{restrict:"A",controller:l_}}});var KA=Ze(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});var sG=Gi(),$d;(function(t){t.MOUSE="mouse",t.KEYBOARD="keyboard"})($d||($d={}));var QA=class{constructor(e){this.element=e,this.listenerDisposers=[],this.setCurrentInput=sG.func.runOnceOnChange(this.setCurrentInput.bind(this)),this.addEvents("mousemove",this.setMouse.bind(this)),this.addEvents("mousedown",this.setMouse.bind(this)),this.addEvents("mouseup",this.setMouse.bind(this)),this.addEvents("touchmove",this.setMouse.bind(this)),this.addEvents("touchstart",this.setMouse.bind(this)),this.addEvents("touchend",this.setMouse.bind(this)),this.addEvents("keyup",this.setKeyboard.bind(this)),this.addEvents("keydown",this.setKeyboard.bind(this))}setKeyboard(){this.setCurrentInput($d.KEYBOARD)}setMouse(){this.setCurrentInput($d.MOUSE)}addEvents(e,r){document.addEventListener(e,r),this.listenerDisposers.push(()=>{document.removeEventListener(e,r)})}setCurrentInput(e){this.element.setAttribute("data-current-input",e)}dispose(){this.listenerDisposers.forEach(e=>{e()})}};c_.AccessibleOutline=QA});var Fl=Ze((Sse,a1)=>{function aG(){return r1()||n1()}function r1(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)||i1()}function i1(){return navigator.userAgent.toLowerCase().indexOf("macintosh")!==-1&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}function n1(){return/Android/i.test(navigator.userAgent)}function s1(){return navigator.userAgent.indexOf("Chrome")!=-1&&!o1()}function lG(){return!s1()&&navigator.userAgent.indexOf("Safari")!=-1}function cG(){return navigator.userAgent.indexOf("Firefox")!=-1}function hG(){return/MSIE\/\d+/.test(navigator.userAgent)}function o1(){return navigator.userAgent.indexOf("Edge")!=-1}function uG(){return/Edge\/\d+/.test(navigator.userAgent)||/MSIE\/\d+/.test(navigator.userAgent)||/Trident\/\d+/.test(navigator.userAgent)}a1.exports={isAndroid:n1,isChrome:s1,isEdge:o1,isFirefox:cG,isIOS:r1,isIPad:i1,isIE:hG,isIEorEdge:uG,isMobile:aG,isSafari:lG}});var rM=Ze(__=>{"use strict";Object.defineProperty(__,"__esModule",{value:!0});var eM=fi(),BG=Ye(),tM=class{constructor(e){this.imageSources=e,this.images={},this.maxRetries=3,this.decodeAfterFetch=!1,this.onEachImageLoaded=null}setLoadCallback(e){this.onEachImageLoaded=e}getImages(){return this.images}setDecodeAfterFetch(e){this.decodeAfterFetch=eM.is.firefox()?!1:e}load(){return new Promise(e=>{let r=this.imageSources.map(n=>this.fetchImage(n));Promise.all(r).then(()=>{e(this.images)})})}ping(){return new Promise(e=>{let r=this.imageSources.map(n=>this.pingSource(n));Promise.all(r).then(()=>{e(this.imageSources)})})}pingSource(e,r=0){return new Promise(n=>{fetch(e).then(s=>{s.ok?n(e):(r++,r>=this.maxRetries?n():this.pingSource(e,r))})})}fetchImage(e,r=0){return new Promise(n=>{fetch(e).then(s=>(s.ok||(r++,r>=this.maxRetries?n():this.fetchImage(e,r)),s.blob())).then(s=>{let o=s,a=document.createElement("img");this.decodeAfterFetch&&"decode"in a?(a.src=URL.createObjectURL(o),a.decoding="async",a.decode().then(()=>{this.images[e]=a,this.onEachImageLoaded&&this.onEachImageLoaded(e,a),n()}).catch(l=>{a.onload=()=>{this.images[e]=a,this.onEachImageLoaded&&this.onEachImageLoaded(e,a),n()},a.src=URL.createObjectURL(o)})):(a.onload=()=>{this.images[e]=a,this.onEachImageLoaded&&this.onEachImageLoaded(e,a),n()},a.src=URL.createObjectURL(o))})})}loadImageBitmaps(){return new Promise(e=>{let r=this.imageSources.map(n=>this.fetchImageBitmap(n));Promise.all(r).then(()=>{e(this.images)})})}fetchImageBitmap(e,r=0){return new Promise(n=>{fetch(e).then(s=>(s.ok||(r++,r>=this.maxRetries?n():this.fetchImageBitmap(e,r)),s.blob())).then(s=>createImageBitmap(s)).then(s=>{let o=s;this.images[e]=o,this.onEachImageLoaded&&this.onEachImageLoaded(e,o),n()})})}loadBitmapOrImage(){return eM.is.supportingCreateImageBitmap()?this.loadImageBitmaps():this.load()}dispose(){for(var e in this.images){if(!this.images[e])return;this.images[e].close?this.images[e].close():(URL.revokeObjectURL(this.images[e]),BG.dom.deleteImage(this.images[e]),this.images[e]=null)}this.images=null}};__.ImageLoader=tM});var nM=Ze(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});var UG=Ye(),iM=class{constructor(e){this.imageSources=e,this.blobs={},this.images64={},this.maxRetries=3}load(){return new Promise(e=>{this.imageSources||e(this.blobs);let r=this.imageSources.map(n=>this.loadBlob(n));Promise.all(r).then(()=>{e(this.blobs)})})}loadBlob(e,r=0){return new Promise(n=>{fetch(e).then(s=>{if(!s.ok)r++,r>=this.maxRetries?n():this.loadBlob(e,r);else return s.blob()}).then(s=>{this.blobs&&(this.blobs[e]=s),n(s)})})}loadBase64Images(){return new Promise(e=>{let r=this.imageSources.map(n=>this.loadBlobAsBase64Image(n));Promise.all(r).then(()=>{e(this.images64)})})}loadBlobAsBase64Image(e,r=0){return new Promise(n=>{fetch(e).then(s=>{if(!s.ok)r++,r>=this.maxRetries?n():this.loadBlobAsBase64Image(e,r);else return s.blob()}).then(s=>{UG.dom.makeBase64ImageFromBlob(s).then(o=>{this.images64[e]=o,n(s)})})})}dispose(){this.imageSources=null,this.images64=null,this.blobs=null}};b_.BlobLoader=iM});var oM=Ze(S_=>{"use strict";Object.defineProperty(S_,"__esModule",{value:!0});var w_=la(),sM=class{constructor(e){this.fps=e,this.locked=!0}setFps(e){this.fps=e}lock(e){this.locked=e}schedule(e){this.cancelSchedule(),this.scheduleTimeout=window.setTimeout(()=>{this.locked=!1,e(),this.locked=!0},1e3/this.fps+1)}cancelSchedule(){this.scheduleTimeout&&window.clearTimeout(this.scheduleTimeout)}canRun(){if(this.cancelSchedule(),!this.locked)return!0;if(this.lastUpdateTime){let r=w_.time.now()-this.lastUpdateTime,n=this.fps==0?0:1e3/this.fps;return r>n?(this.lastUpdateTime=w_.time.now(),!0):!1}if(!this.lastUpdateTime)return this.lastUpdateTime=w_.time.now(),!0}};S_.Fps=sM});var lM=Ze(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});var aM=class{static createProgram(e,r,n){let s=e.createProgram(),o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,r),e.compileShader(o);let a=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(a,n),e.compileShader(a),e.attachShader(s,o),e.deleteShader(o),e.attachShader(s,a),e.deleteShader(a),e.linkProgram(s),s}static createVbo(e,r){var n=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),n}static createTextureFromImage(e,r){var n=e.createTexture();return e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),n}static deleteTexture(e,r){e.deleteTexture(r)}};E_.webgl=aM});var Bl=Ze(Ri=>{"use strict";var HG=Ri&&Ri.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(s,o){function a(h){try{c(n.next(h))}catch(f){o(f)}}function l(h){try{c(n.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):new r(function(f){f(h.value)}).then(a,l)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Ri,"__esModule",{value:!0});var x_=vs(),Un=fi(),cM=Gi(),T_=Sd(),qG=nM(),po=ui(),zG=yt(),WG=Id(),GG=Td(),$G=oM(),Xd=lM();Ri.fragShader=`
    precision mediump float;
    uniform sampler2D u_image;
    // texCoords passed in from the vertex shader.
    varying vec2 v_texCoord;
    void main() {
      gl_FragColor = texture2D(u_image, v_texCoord);
    }
`;Ri.vertShader=`
    attribute vec2 a_position;
    uniform mat3 u_matrix;
    varying vec2 v_texCoord;
    void main() {
      gl_Position = vec4(u_matrix * vec3(a_position, 1), 1);
      v_texCoord = a_position;
    }
`;Ri.WebGlImageSequenceErrors={NO_ELEMENT:"An element is required for webgl image sequence",NO_IMAGE_SETS:"Image sets are required for webgl image sequence",NO_IMAGES:"There are no images defined in your webgl image sequence image set"};var hM=class{constructor(e,r,n,s){if(this.lerpAmount=1,this.element=e,!e)throw new Error(Ri.WebGlImageSequenceErrors.NO_ELEMENT);if(!r)throw new Error(Ri.WebGlImageSequenceErrors.NO_IMAGE_SETS);this.imageSets=r,this.activeImageSet=null,this.blobCache={},this.options=n,this.isPlaying=!1,this.canvasElement=document.createElement("canvas"),this.options&&this.options.ariaLabel?(this.canvasElement.setAttribute("aria-label",this.options.ariaLabel),this.canvasElement.setAttribute("role","img")):this.canvasElement.setAttribute("aria-hidden","true"),this.gl=this.canvasElement.getContext("webgl",{antialias:!1,depth:!1}),this.program=Xd.webgl.createProgram(this.gl,Ri.vertShader,Ri.fragShader),this.dpr=cM.func.setDefault(s,window.devicePixelRatio||1),this.canvasWidth=0,this.canvasHeight=0,this.imageNaturalHeight=0,this.imageNaturalWidth=0,this.currentFrame=0,this.lastDrawSource=null,this.targetFrame=0,this.containScale=null,this.disposed=!1,this.fps=new $G.Fps(Un.is.safari()?30:60),this.cacheImage=new Image,this.rafTimer=null,this.multiInterpolate=null,this.blobLoader=null,this.progress=null,this.playDefer=null,this.domWatcher=new zG.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:()=>{this.resize(),this.flush(),this.lastDrawSource=null,this.fps.lock(!1),this.lastRenderSource&&this.draw(this.lastRenderSource),this.fps.lock(!0)},id:"resize",eventOptions:{passive:!0}}),this.domWatcher.run("resize"),this.domWatcher.add({element:window,on:"smartResize",callback:()=>{this.getSourceThatShouldLoad(this.imageSets)!==this.activeImageSet&&(this.loadNewSet(this.imageSets),this.load().then(()=>{this.lastDrawSource=null,this.fps.lock(!1),this.renderByProgress(this.progress||0),this.fps.lock(!0)}))},id:"image-set-resize",eventOptions:{passive:!0}}),this.element.appendChild(this.canvasElement),this.readyPromise=new T_.Defer,this.loadNewSet(r),this.lastRenderSource=null,this.lastDrawSource=null,this.draw=cM.func.runOnceOnChange(this.draw.bind(this))}setMultiInterpolation(e){this.multiInterpolate=new WG.MultiInterpolate({interpolations:[{id:"sequence",progress:e}]})}resize(){this.canvasWidth=this.element.offsetWidth,this.canvasHeight=this.element.offsetHeight,this.canvasElement.width=this.element.offsetWidth*this.dpr,this.canvasElement.height=this.element.offsetHeight*this.dpr,this.canvasElement.style.width=this.canvasElement.width/this.dpr+"px",this.canvasElement.style.height=this.canvasElement.height/this.dpr+"px"}load(){return!this.blobLoader||!this.activeImageSet?(window.setTimeout(()=>{this.readyPromise.resolve()}),this.readyPromise.getPromise()):((()=>{this.blobLoader.load().then(r=>{this.blobCache=r,this.setImageDimensions().then(()=>{this.blobLoader.dispose(),this.readyPromise.resolve(r)})})})(),this.readyPromise.getPromise())}loadNewSet(e){if(this.blobLoader&&this.blobLoader.dispose(),this.imageSets=e,this.activeImageSet=this.getSourceThatShouldLoad(this.imageSets),this.activeImageSet&&!Un.is.array(this.activeImageSet.images))throw new Error(Ri.WebGlImageSequenceErrors.NO_IMAGES);this.activeImageSet?this.blobLoader=new qG.BlobLoader(this.activeImageSet.images):this.blobLoader=null,this.blobCache={},this.flush(),this.lastRenderSource=null,this.readyPromise=new T_.Defer}getSourceThatShouldLoad(e){let r=[];return e.forEach(n=>{n.when?n.when()&&r.push(n):r.push(n)}),r[0]}makeImage(e){return new Promise(r=>{if(!e||!this.blobCache[e]){r(null);return}URL.revokeObjectURL(this.cacheImage.src),this.cacheImage.onload=()=>{r(this.cacheImage)},this.cacheImage.src=URL.createObjectURL(this.blobCache[e])})}setImageDimensions(){return new Promise(e=>{let r=this.activeImageSet.images[0],n=this.blobCache[r];x_.dom.makeImageFromBlob(n).then(s=>{let o=!s.naturalWidth;this.imageNaturalHeight=o?s.height:s.naturalHeight,this.imageNaturalWidth=o?s.width:s.naturalWidth,x_.dom.deleteImage(s),s=null,e()})})}getActiveImages(){return this.activeImageSet.images}renderByProgress(e,r=!1){this.progress=po.mathf.clamp01(e),!this.isPlaying&&this.renderProgress(e,r)}renderProgress(e,r=!1){let n=po.mathf.clamp01(e);if(this.multiInterpolate&&!r){let s=this.multiInterpolate.calculate(n);n=po.mathf.clamp01(s.sequence)}if((n>=.95||n<=.05)&&this.flush(),this.activeImageSet){let s=this.activeImageSet.images.length-1,o=Math.ceil(po.mathf.lerp(0,s,n));this.renderFrame(o)}}renderFrame(e){if(!this.readyPromise.complete)return;this.targetFrame=e;let r=Math.abs(this.targetFrame-this.currentFrame);r>1&&!this.isPlaying&&this.lerpAmount<1?(this.currentFrame=po.mathf.lerp(this.currentFrame,this.targetFrame,this.lerpAmount),r=Math.abs(this.targetFrame-this.currentFrame),r>=.001&&window.requestAnimationFrame(()=>{this.renderFrame(this.targetFrame)})):this.currentFrame=this.targetFrame;let n=this.activeImageSet.images[Math.round(this.currentFrame)];this.draw(n)}flush(){this.draw(""),this.draw(null)}draw(e){return HG(this,void 0,void 0,function*(){if(!e||this.disposed||e==this.lastDrawSource||!this.canvasWidth||!this.canvasHeight)return;if(this.lastDrawSource=e,!this.fps.canRun()){this.fps.schedule(()=>{this.lastDrawSource=null,this.draw(e)});return}let r=yield this.makeImage(e);if(!r)return;let n={width:this.imageNaturalWidth,height:this.imageNaturalHeight},s={width:this.canvasWidth,height:this.canvasHeight},o,a,l,c;if(this.options&&this.options.cover){let _=po.mathf.calculateBackgroundCover(s,n);this.options&&Un.is.number(this.options.left)&&(_.xOffset=(s.width-n.width*_.scalar)*-this.options.left),this.options&&Un.is.number(this.options.right)&&(_.xOffset=-(s.width-n.width*_.scalar),_.xOffset+=(s.width-n.width*_.scalar)*this.options.right),this.options&&Un.is.number(this.options.bottom)&&(_.yOffset=-(s.height-n.height*_.scalar),_.yOffset+=(s.height-n.height*_.scalar)*this.options.bottom),this.options&&Un.is.number(this.options.top)&&(_.yOffset=(s.height-n.height*_.scalar)*-this.options.top),o=-_.xOffset>>0,a=-_.yOffset>>0,l=n.width*_.scalar>>0,c=n.height*_.scalar>>0}else{this.containScale=po.mathf.calculateBackgroundContain(s,n);let _=(s.width-n.width*this.containScale)/2,b=(s.height-n.height*this.containScale)/2;this.options&&Un.is.number(this.options.bottom)&&(b=s.height-n.height*this.containScale,this.options.bottomNoClip?b-=(s.height-n.height*this.containScale)*this.options.bottom:b-=s.height*this.options.bottom),this.options&&Un.is.number(this.options.right)&&(_=s.width-n.width*this.containScale,this.options.rightNoClip?_-=(s.width-n.width*this.containScale)*this.options.right:_-=s.width*this.options.right),this.options&&Un.is.number(this.options.top)&&(b=0,this.options.topNoClip?b=(s.height-n.height*this.containScale)*this.options.top:b+=this.options.top*s.height),this.options&&Un.is.number(this.options.left)&&(_=0,this.options.leftNoClip?_=(s.width-n.width*this.containScale)*this.options.left:_+=this.options.left*s.width),o=_>>0,a=b>>0,l=n.width*this.containScale>>0,c=n.height*this.containScale>>0}let h=this.gl,f=this.program;var u=h.getAttribLocation(f,"a_position"),m=h.getUniformLocation(f,"u_matrix");h.useProgram(this.program),h.viewport(0,0,this.canvasWidth*this.dpr,this.canvasHeight*this.dpr),Xd.webgl.createVbo(h,[0,0,1,0,0,1,0,1,1,0,1,1]),h.enableVertexAttribArray(u),h.vertexAttribPointer(u,2,h.FLOAT,!1,0,0);var d=Xd.webgl.createTextureFromImage(h,r),v=o/this.canvasWidth*2-1,p=a/this.canvasHeight*-2+1,g=l/this.canvasWidth*2,y=c/this.canvasHeight*-2;h.uniformMatrix3fv(m,!1,[g,0,0,0,y,0,v,p,1]),h.drawArrays(h.TRIANGLES,0,6),Xd.webgl.deleteTexture(h,d),this.lastRenderSource=e})}setSizingOptions(e){this.options=e}play(e,r,n){return this.stop(),this.rafTimer=new GG.RafTimer(s=>{let o=po.mathf.interpolateRange(s,0,1,e,r);this.renderProgress(o)}),this.rafTimer.setDuration(n),this.playDefer=new T_.Defer,this.rafTimer.onComplete(()=>{this.isPlaying=!1,this.playDefer.resolve(),this.rafTimer.dispose()}),this.rafTimer.play(),this.isPlaying=!0,this.playDefer.getPromise()}stop(){this.rafTimer&&this.rafTimer.pause(),this.rafTimer&&this.rafTimer.dispose(),this.playDefer&&this.playDefer.resolve()}getImageSize(){return{width:this.imageNaturalWidth,height:this.imageNaturalHeight}}dispose(){this.disposed=!0,this.stop(),this.domWatcher.dispose(),this.rafTimer&&this.rafTimer.dispose(),this.blobLoader&&this.blobLoader.dispose(),this.element=null,this.blobCache=null,this.canvasElement=null,x_.dom.deleteImage(this.cacheImage),this.cacheImage=null,this.gl=null}};Ri.WebGlImageSequence=hM});var tu=Ze((lae,fM)=>{var uM=class{constructor(){this.supportsWebp=this.isWebpSupported()}isWebpSupported(){var e=document.createElement("canvas"),r=!1;return e.toDataURL("image/webp")&&(r=e.toDataURL("image/webp").indexOf("data:image/webp")==0),r}appendFifeWebpParam(e){return this.supportsWebp&&!e.endsWith("=rw")&&(e+="=rw"),e}};fM.exports=new uM});var vD=Ze((gD,bS)=>{(function(t){if(typeof gD=="object"&&typeof bS!="undefined")bS.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var e;typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:typeof self!="undefined"?e=self:e=this,e.basicScroll=t()}})(function(){var t,e,r;return function(){function n(s,o,a){function l(f,u){if(!o[f]){if(!s[f]){var m=typeof Gh=="function"&&Gh;if(!u&&m)return m(f,!0);if(c)return c(f,!0);var d=new Error("Cannot find module '"+f+"'");throw d.code="MODULE_NOT_FOUND",d}var v=o[f]={exports:{}};s[f][0].call(v.exports,function(p){var g=s[f][1][p];return l(g||p)},v,v.exports,n,s,o,a)}return o[f].exports}for(var c=typeof Gh=="function"&&Gh,h=0;h<a.length;h++)l(a[h]);return l}return n}()({1:[function(n,s,o){function a(l){var c=1.70158*1.525;return(l*=2)<1?.5*(l*l*((c+1)*l-c)):.5*((l-=2)*l*((c+1)*l+c)+2)}s.exports=a},{}],2:[function(n,s,o){function a(l){var c=1.70158;return l*l*((c+1)*l-c)}s.exports=a},{}],3:[function(n,s,o){function a(l){var c=1.70158;return--l*l*((c+1)*l+c)+1}s.exports=a},{}],4:[function(n,s,o){var a=n("./bounce-out");function l(c){return c<.5?.5*(1-a(1-c*2)):.5*a(c*2-1)+.5}s.exports=l},{"./bounce-out":6}],5:[function(n,s,o){var a=n("./bounce-out");function l(c){return 1-a(1-c)}s.exports=l},{"./bounce-out":6}],6:[function(n,s,o){function a(l){var c=4/11,h=8/11,f=9/10,u=4356/361,m=35442/1805,d=16061/1805,v=l*l;return l<c?7.5625*v:l<h?9.075*v-9.9*l+3.4:l<f?u*v-m*l+d:10.8*l*l-20.52*l+10.72}s.exports=a},{}],7:[function(n,s,o){function a(l){return(l*=2)<1?-.5*(Math.sqrt(1-l*l)-1):.5*(Math.sqrt(1-(l-=2)*l)+1)}s.exports=a},{}],8:[function(n,s,o){function a(l){return 1-Math.sqrt(1-l*l)}s.exports=a},{}],9:[function(n,s,o){function a(l){return Math.sqrt(1- --l*l)}s.exports=a},{}],10:[function(n,s,o){function a(l){return l<.5?4*l*l*l:.5*Math.pow(2*l-2,3)+1}s.exports=a},{}],11:[function(n,s,o){function a(l){return l*l*l}s.exports=a},{}],12:[function(n,s,o){function a(l){var c=l-1;return c*c*c+1}s.exports=a},{}],13:[function(n,s,o){function a(l){return l<.5?.5*Math.sin(13*Math.PI/2*2*l)*Math.pow(2,10*(2*l-1)):.5*Math.sin(-13*Math.PI/2*(2*l-1+1))*Math.pow(2,-10*(2*l-1))+1}s.exports=a},{}],14:[function(n,s,o){function a(l){return Math.sin(13*l*Math.PI/2)*Math.pow(2,10*(l-1))}s.exports=a},{}],15:[function(n,s,o){function a(l){return Math.sin(-13*(l+1)*Math.PI/2)*Math.pow(2,-10*l)+1}s.exports=a},{}],16:[function(n,s,o){function a(l){return l===0||l===1?l:l<.5?.5*Math.pow(2,20*l-10):-.5*Math.pow(2,10-l*20)+1}s.exports=a},{}],17:[function(n,s,o){function a(l){return l===0?l:Math.pow(2,10*(l-1))}s.exports=a},{}],18:[function(n,s,o){function a(l){return l===1?l:1-Math.pow(2,-10*l)}s.exports=a},{}],19:[function(n,s,o){s.exports={backInOut:n("./back-in-out"),backIn:n("./back-in"),backOut:n("./back-out"),bounceInOut:n("./bounce-in-out"),bounceIn:n("./bounce-in"),bounceOut:n("./bounce-out"),circInOut:n("./circ-in-out"),circIn:n("./circ-in"),circOut:n("./circ-out"),cubicInOut:n("./cubic-in-out"),cubicIn:n("./cubic-in"),cubicOut:n("./cubic-out"),elasticInOut:n("./elastic-in-out"),elasticIn:n("./elastic-in"),elasticOut:n("./elastic-out"),expoInOut:n("./expo-in-out"),expoIn:n("./expo-in"),expoOut:n("./expo-out"),linear:n("./linear"),quadInOut:n("./quad-in-out"),quadIn:n("./quad-in"),quadOut:n("./quad-out"),quartInOut:n("./quart-in-out"),quartIn:n("./quart-in"),quartOut:n("./quart-out"),quintInOut:n("./quint-in-out"),quintIn:n("./quint-in"),quintOut:n("./quint-out"),sineInOut:n("./sine-in-out"),sineIn:n("./sine-in"),sineOut:n("./sine-out")}},{"./back-in":2,"./back-in-out":1,"./back-out":3,"./bounce-in":5,"./bounce-in-out":4,"./bounce-out":6,"./circ-in":8,"./circ-in-out":7,"./circ-out":9,"./cubic-in":11,"./cubic-in-out":10,"./cubic-out":12,"./elastic-in":14,"./elastic-in-out":13,"./elastic-out":15,"./expo-in":17,"./expo-in-out":16,"./expo-out":18,"./linear":20,"./quad-in":22,"./quad-in-out":21,"./quad-out":23,"./quart-in":25,"./quart-in-out":24,"./quart-out":26,"./quint-in":28,"./quint-in-out":27,"./quint-out":29,"./sine-in":31,"./sine-in-out":30,"./sine-out":32}],20:[function(n,s,o){function a(l){return l}s.exports=a},{}],21:[function(n,s,o){function a(l){return l/=.5,l<1?.5*l*l:(l--,-.5*(l*(l-2)-1))}s.exports=a},{}],22:[function(n,s,o){function a(l){return l*l}s.exports=a},{}],23:[function(n,s,o){function a(l){return-l*(l-2)}s.exports=a},{}],24:[function(n,s,o){function a(l){return l<.5?8*Math.pow(l,4):-8*Math.pow(l-1,4)+1}s.exports=a},{}],25:[function(n,s,o){function a(l){return Math.pow(l,4)}s.exports=a},{}],26:[function(n,s,o){function a(l){return Math.pow(l-1,3)*(1-l)+1}s.exports=a},{}],27:[function(n,s,o){function a(l){return(l*=2)<1?.5*l*l*l*l*l:.5*((l-=2)*l*l*l*l+2)}s.exports=a},{}],28:[function(n,s,o){function a(l){return l*l*l*l*l}s.exports=a},{}],29:[function(n,s,o){function a(l){return--l*l*l*l*l+1}s.exports=a},{}],30:[function(n,s,o){function a(l){return-.5*(Math.cos(Math.PI*l)-1)}s.exports=a},{}],31:[function(n,s,o){function a(l){var c=Math.cos(l*Math.PI*.5);return Math.abs(c)<1e-14?1:1-c}s.exports=a},{}],32:[function(n,s,o){function a(l){return Math.sin(l*Math.PI/2)}s.exports=a},{}],33:[function(n,s,o){s.exports=function(l,c){c||(c=[0,""]),l=String(l);var h=parseFloat(l,10);return c[0]=h,c[1]=l.match(/[\d.\-\+]*\s*(.*)/)[1]||"",c}},{}],34:[function(n,s,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.create=void 0;var a=c(n("parse-unit")),l=c(n("eases"));function c(T){return T&&T.__esModule?T:{default:T}}function h(T){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h=function(P){return typeof P}:h=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},h(T)}var f=[],u=typeof window!="undefined",m=function(){if(window.BasicScrollTop)return window.BasicScrollTop;var A=(document.scrollingElement||document.documentElement).scrollTop;return window.BasicScrollTop=A,window.addEventListener("scroll",function(){window.BasicScrollTop=null},{passive:!0,once:!0}),window.BasicScrollTop=A,window.BasicScrollTop},d=function(){return window.innerHeight||window.outerHeight},v=function(A){return isNaN((0,a.default)(A)[0])===!1},p=function(A){var P=(0,a.default)(A);return{value:P[0],unit:P[1]}},g=function(A){return String(A).match(/^[a-z]+-[a-z]+$/)!==null},y=function(A,P){return A===!0?P.elem:A instanceof HTMLElement?P.direct:P.global},_=function(A,P){var z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m(),V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:d(),L=P.getBoundingClientRect(),O=A.match(/^[a-z]+/)[0],k=A.match(/[a-z]+$/)[0],X=0;return k==="top"&&(X-=0),k==="middle"&&(X-=V/2),k==="bottom"&&(X-=V),O==="top"&&(X+=L.top+z),O==="middle"&&(X+=L.top+z+L.height/2),O==="bottom"&&(X+=L.top+z+L.height),"".concat(X,"px")},b=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(A=Object.assign({},A),A.inside==null&&(A.inside=function(){}),A.outside==null&&(A.outside=function(){}),A.direct==null&&(A.direct=!1),A.track==null&&(A.track=!0),A.props==null&&(A.props={}),A.from==null)throw new Error("Missing property `from`");if(A.to==null)throw new Error("Missing property `to`");if(typeof A.inside!="function")throw new Error("Property `inside` must be undefined or a function");if(typeof A.outside!="function")throw new Error("Property `outside` must be undefined or a function");if(typeof A.direct!="boolean"&&!(A.direct instanceof HTMLElement))throw new Error("Property `direct` must be undefined, a boolean or a DOM element/node");if(A.direct===!0&&A.elem==null)throw new Error("Property `elem` is required when `direct` is true");if(typeof A.track!="boolean")throw new Error("Property `track` must be undefined or a boolean");if(h(A.props)!=="object")throw new Error("Property `props` must be undefined or an object");if(A.elem==null){if(v(A.from)===!1)throw new Error("Property `from` must be a absolute value when no `elem` has been provided");if(v(A.to)===!1)throw new Error("Property `to` must be a absolute value when no `elem` has been provided")}else g(A.from)===!0&&(A.from=_(A.from,A.elem)),g(A.to)===!0&&(A.to=_(A.to,A.elem));return A.from=p(A.from),A.to=p(A.to),A.props=Object.keys(A.props).reduce(function(P,z){var V=Object.assign({},A.props[z]);if(v(V.from)===!1)throw new Error("Property `from` of prop must be a absolute value");if(v(V.to)===!1)throw new Error("Property `from` of prop must be a absolute value");if(V.from=p(V.from),V.to=p(V.to),V.timing==null&&(V.timing=l.default.linear),typeof V.timing!="string"&&typeof V.timing!="function")throw new Error("Property `timing` of prop must be undefined, a string or a function");if(typeof V.timing=="string"&&l.default[V.timing]==null)throw new Error("Unknown timing for property `timing` of prop");return typeof V.timing=="string"&&(V.timing=l.default[V.timing]),P[z]=V,P},{}),A},w=function(A){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m(),z=A.getData(),V=z.to.value-z.from.value,L=P-z.from.value,O=L/(V/100),k=Math.min(Math.max(O,0),100),X=y(z.direct,{global:document.documentElement,elem:z.elem,direct:z.direct}),R=Object.keys(z.props).reduce(function(Z,oe){var N=z.props[oe],M=N.from.unit||N.to.unit,$=N.from.value-N.to.value,W=N.timing(k/100),H=N.from.value-$*W,ee=Math.round(H*1e4)/1e4;return Z[oe]=ee+M,Z},{}),U=O>=0&&O<=100,q=O<0||O>100;return U===!0&&z.inside(A,O,R),q===!0&&z.outside(A,O,R),{elem:X,props:R}},S=function(A,P){A.style.setProperty(P.key,P.value)},E=function(A,P){Object.keys(P).forEach(function(z){return S(A,{key:z,value:P[z]})})},x=function(A){var P=null,z=function(){return P},V=function(){P=b(A)},L=null,O=function(){var q=m();if(q!==L){var Z=w(X,q),oe=Z.elem,N=Z.props;E(oe,N),L=q}},k=function(){f[R]=void 0},X={getData:z,calculate:V,update:O,destroy:k},R=f.push(X)-1;return X.calculate(),X};o.create=x},{eases:19,"parse-unit":33}]},{},[34])(34)})});var pN=Ze((y0e,dN)=>{var mh=Object.create||VX,CX=Object.keys||BX,PX=Function.prototype.bind||UX;function Xt(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=mh(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}dN.exports=Xt;Xt.EventEmitter=Xt;Xt.prototype._events=void 0;Xt.prototype._maxListeners=void 0;var fE=10,dE;try{pE={},Object.defineProperty&&Object.defineProperty(pE,"x",{value:0}),dE=pE.x===0}catch(t){dE=!1}var pE;dE?Object.defineProperty(Xt,"defaultMaxListeners",{enumerable:!0,get:function(){return fE},set:function(t){if(typeof t!="number"||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');fE=t}}):Xt.defaultMaxListeners=fE;Xt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function lN(t){return t._maxListeners===void 0?Xt.defaultMaxListeners:t._maxListeners}Xt.prototype.getMaxListeners=function(){return lN(this)};function IX(t,e,r){if(e)t.call(r);else for(var n=t.length,s=gh(t,n),o=0;o<n;++o)s[o].call(r)}function RX(t,e,r,n){if(e)t.call(r,n);else for(var s=t.length,o=gh(t,s),a=0;a<s;++a)o[a].call(r,n)}function LX(t,e,r,n,s){if(e)t.call(r,n,s);else for(var o=t.length,a=gh(t,o),l=0;l<o;++l)a[l].call(r,n,s)}function OX(t,e,r,n,s,o){if(e)t.call(r,n,s,o);else for(var a=t.length,l=gh(t,a),c=0;c<a;++c)l[c].call(r,n,s,o)}function DX(t,e,r,n){if(e)t.apply(r,n);else for(var s=t.length,o=gh(t,s),a=0;a<s;++a)o[a].apply(r,n)}Xt.prototype.emit=function(e){var r,n,s,o,a,l,c=e==="error";if(l=this._events,l)c=c&&l.error==null;else if(!c)return!1;if(c){if(arguments.length>1&&(r=arguments[1]),r instanceof Error)throw r;var h=new Error('Unhandled "error" event. ('+r+")");throw h.context=r,h;return!1}if(n=l[e],!n)return!1;var f=typeof n=="function";switch(s=arguments.length,s){case 1:IX(n,f,this);break;case 2:RX(n,f,this,arguments[1]);break;case 3:LX(n,f,this,arguments[1],arguments[2]);break;case 4:OX(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(s-1),a=1;a<s;a++)o[a-1]=arguments[a];DX(n,f,this,o)}return!0};function cN(t,e,r,n){var s,o,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(o=t._events,o?(o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]):(o=t._events=mh(null),t._eventsCount=0),!a)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(s=lN(t),s&&s>0&&a.length>s)){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",l.name,l.message)}return t}Xt.prototype.addListener=function(e,r){return cN(this,e,r,!1)};Xt.prototype.on=Xt.prototype.addListener;Xt.prototype.prependListener=function(e,r){return cN(this,e,r,!0)};function FX(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function hN(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=PX.call(FX,n);return s.listener=r,n.wrapFn=s,s}Xt.prototype.once=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,hN(this,e,r)),this};Xt.prototype.prependOnceListener=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,hN(this,e,r)),this};Xt.prototype.removeListener=function(e,r){var n,s,o,a,l;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(s=this._events,!s)return this;if(n=s[e],!n)return this;if(n===r||n.listener===r)--this._eventsCount==0?this._events=mh(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){l=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():NX(n,o),n.length===1&&(s[e]=n[0]),s.removeListener&&this.emit("removeListener",e,l||r)}return this};Xt.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=mh(null),this._eventsCount=0):n[e]&&(--this._eventsCount==0?this._events=mh(null):delete n[e]),this;if(arguments.length===0){var o=CX(n),a;for(s=0;s<o.length;++s)a=o[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=mh(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function uN(t,e,r){var n=t._events;if(!n)return[];var s=n[e];return s?typeof s=="function"?r?[s.listener||s]:[s]:r?kX(s):gh(s,s.length):[]}Xt.prototype.listeners=function(e){return uN(this,e,!0)};Xt.prototype.rawListeners=function(e){return uN(this,e,!1)};Xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):fN.call(t,e)};Xt.prototype.listenerCount=fN;function fN(t){var e=this._events;if(e){var r=e[t];if(typeof r=="function")return 1;if(r)return r.length}return 0}Xt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function NX(t,e){for(var r=e,n=r+1,s=t.length;n<s;r+=1,n+=1)t[r]=t[n];t.pop()}function gh(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function kX(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function VX(t){var e=function(){};return e.prototype=t,new e}function BX(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r}function UX(t){var e=this;return function(){return e.apply(t,arguments)}}});var rk=Ze((k0e,Qg)=>{var NN,kN,VN,BN,UN,HN,qN,zN,WN,Zg,gE,GN,$N,vh,jN,YN,XN,ZN,QN,KN,JN,ek,tk;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Qg=="object"&&typeof Qg.exports=="object"?t(r(e,r(Qg.exports))):t(r(e));function r(n,s){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(o,a){return n[o]=s?s(o,a):a}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])};NN=function(r,n){e(r,n);function s(){this.constructor=r}r.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)},kN=Object.assign||function(r){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},VN=function(r,n){var s={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&n.indexOf(o)<0&&(s[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(r);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(r,o[a])&&(s[o[a]]=r[o[a]]);return s},BN=function(r,n,s,o){var a=arguments.length,l=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,s):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,s,o);else for(var h=r.length-1;h>=0;h--)(c=r[h])&&(l=(a<3?c(l):a>3?c(n,s,l):c(n,s))||l);return a>3&&l&&Object.defineProperty(n,s,l),l},UN=function(r,n){return function(s,o){n(s,o,r)}},HN=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},qN=function(r,n,s,o){function a(l){return l instanceof s?l:new s(function(c){c(l)})}return new(s||(s=Promise))(function(l,c){function h(m){try{u(o.next(m))}catch(d){c(d)}}function f(m){try{u(o.throw(m))}catch(d){c(d)}}function u(m){m.done?l(m.value):a(m.value).then(h,f)}u((o=o.apply(r,n||[])).next())})},zN=function(r,n){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,a,l,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(u){return function(m){return f([u,m])}}function f(u){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,a&&(l=u[0]&2?a.return:u[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,u[1])).done)return l;switch(a=0,l&&(u=[u[0]&2,l.value]),u[0]){case 0:case 1:l=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,a=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(u[0]===6||u[0]===2)){s=0;continue}if(u[0]===3&&(!l||u[1]>l[0]&&u[1]<l[3])){s.label=u[1];break}if(u[0]===6&&s.label<l[1]){s.label=l[1],l=u;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(u);break}l[2]&&s.ops.pop(),s.trys.pop();continue}u=n.call(r,s)}catch(m){u=[6,m],a=0}finally{o=l=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},tk=function(r,n,s,o){o===void 0&&(o=s),r[o]=n[s]},WN=function(r,n){for(var s in r)s!=="default"&&!n.hasOwnProperty(s)&&(n[s]=r[s])},Zg=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&r[n],o=0;if(s)return s.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},gE=function(r,n){var s=typeof Symbol=="function"&&r[Symbol.iterator];if(!s)return r;var o=s.call(r),a,l=[],c;try{for(;(n===void 0||n-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(c)throw c.error}}return l},GN=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(gE(arguments[n]));return r},$N=function(){for(var r=0,n=0,s=arguments.length;n<s;n++)r+=arguments[n].length;for(var o=Array(r),a=0,n=0;n<s;n++)for(var l=arguments[n],c=0,h=l.length;c<h;c++,a++)o[a]=l[c];return o},vh=function(r){return this instanceof vh?(this.v=r,this):new vh(r)},jN=function(r,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(r,n||[]),a,l=[];return a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a;function c(v){o[v]&&(a[v]=function(p){return new Promise(function(g,y){l.push([v,p,g,y])>1||h(v,p)})})}function h(v,p){try{f(o[v](p))}catch(g){d(l[0][3],g)}}function f(v){v.value instanceof vh?Promise.resolve(v.value.v).then(u,m):d(l[0][2],v)}function u(v){h("next",v)}function m(v){h("throw",v)}function d(v,p){v(p),l.shift(),l.length&&h(l[0][0],l[0][1])}},YN=function(r){var n,s;return n={},o("next"),o("throw",function(a){throw a}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(a,l){n[a]=r[a]?function(c){return(s=!s)?{value:vh(r[a](c)),done:a==="return"}:l?l(c):c}:l}},XN=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],s;return n?n.call(r):(r=typeof Zg=="function"?Zg(r):r[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(l){s[l]=r[l]&&function(c){return new Promise(function(h,f){c=r[l](c),a(h,f,c.done,c.value)})}}function a(l,c,h,f){Promise.resolve(f).then(function(u){l({value:u,done:h})},c)}},ZN=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},QN=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var s in r)Object.hasOwnProperty.call(r,s)&&(n[s]=r[s]);return n.default=r,n},KN=function(r){return r&&r.__esModule?r:{default:r}},JN=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},ek=function(r,n,s){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,s),s},t("__extends",NN),t("__assign",kN),t("__rest",VN),t("__decorate",BN),t("__param",UN),t("__metadata",HN),t("__awaiter",qN),t("__generator",zN),t("__exportStar",WN),t("__createBinding",tk),t("__values",Zg),t("__read",gE),t("__spread",GN),t("__spreadArrays",$N),t("__await",vh),t("__asyncGenerator",jN),t("__asyncDelegator",YN),t("__asyncValues",XN),t("__makeTemplateObject",ZN),t("__importStar",QN),t("__importDefault",KN),t("__classPrivateFieldGet",JN),t("__classPrivateFieldSet",ek)})});var Ax=Ze(Tx=>{"use strict";Object.defineProperty(Tx,"__esModule",{value:!0});var Hh=vs(),xU=class{constructor(e){if(this.config=e,this.convertSpacesToNbsp=this.config.split==" ",this.sups=Array.from(this.config.element.querySelectorAll("sup")),this.sups.forEach(n=>{Hh.dom.removeElement(n)}),this.originalText=this.config.element.textContent,this.convertSpacesToNbsp){var r=new RegExp(String.fromCharCode(160),"g");this.originalText=this.originalText.replace(r," ")}this.splits=this.originalText.trim().split(this.config.split)}split(){this.config.element.innerHTML="",this.splits.forEach((e,r)=>{this.convertSpacesToNbsp&&r!==this.splits.length-1&&(e+="&nbsp;");let n=Hh.dom.createElementFromString(`<span>${e}</span>`);Hh.dom.setCssVariable(n,"--item-index",r+""),this.config.element.appendChild(n)}),this.sups&&this.sups.forEach((e,r)=>{let n=Hh.dom.createElementFromString("<span></span>");Hh.dom.setCssVariable(n,"--item-index",this.splits.length+r+""),n.appendChild(e),this.config.element.appendChild(n)}),Hh.dom.setCssVariable(this.config.element,"--item-total-count",this.splits.length+""),this.config.element.classList.add("text-split-set")}};Tx.TextSplit=xU});var gH=Ze(Ox=>{"use strict";Object.defineProperty(Ox,"__esModule",{value:!0});var kJ=Uy(),qh=class{static areSameHostNames(e,r){var n=new URL(e),s=new URL(r);return n.hostname==s.hostname}static isTrue(e){let r=window.location.search.split(e+"=")[1];return r=r&&r.split("&")[0],r=="true"}static getValue(e){let r=window.location.search.split(e+"=")[1];return r=r&&r.split("&")[0],r||null}static addParamNow(e,r){var n=new URL(window.location.href);console.log(window.location.href),n.searchParams.set(e,r),window.history.replaceState&&window.history.replaceState({},null,n.toString())}static removeParamNow(e){var r=new URL(window.location.href);r.searchParams.delete(e),window.history.replaceState&&window.history.replaceState({},null,r.toString())}static asObject(e){let r=e.substr(1),n={};return r.split("&").forEach(s=>{let o=s.split("=");o[0]!=""&&(n[o[0]]=decodeURIComponent(o[1]))}),n}static appendUrlParamsToLinks(e,r=[],n=[]){if("URLSearchParams"in window){let s=qh.asObject(window.location.search);e.forEach(o=>{if(!o.href)return;let a=new URL(o.href);kJ.objectf.forEach(s,(l,c)=>{let h=new URLSearchParams(a.search.slice(1));a.searchParams.has(l)||(n&&n.length>=1?~n.indexOf(l)&&a.searchParams.append(l,c):r&&r.length>=1&&~r.indexOf(l)||a.searchParams.append(l,c))}),o.href=a.toString()})}}static addHistoryHash(e,r){window.history.pushState({name:r},"","#"+r)}static removeHistoryHash(e){window.history.pushState({name:null},"",window.location.pathname)}static getHostName(e){var r=new URL(e).hostname;return r}static lastPageWasSameHost(){return document.referrer&&qh.getHostName(document.referrer)==qh.getHostName(window.location.href)}};Ox.urlParams=qh});var YH=Ze(qx=>{"use strict";Object.defineProperty(qx,"__esModule",{value:!0});var $H=la(),KJ=ui(),JJ=xl(),eee=ha(),jH=class{constructor(e){this.easerConfig=e,this.startTime_=0,this.endTime_=0,this.duration_=e.duration||0,this.delay_=e.delay||0,this.easeFunction_=e.easeFunction||JJ.EASE.linear,this.started_=!1,this.completeCallback_=null,this.updateCallback_=null,this.completePromiseResolve_=null,this.raf_=new eee.Raf(()=>{this.calculate()}),this.rafDisabled_=e.disableRaf||!1}reset(e){e&&(this.duration_=e.duration||this.duration_,this.delay_=e.delay||this.delay_,this.easeFunction_=e.easeFunction||this.easeFunction_),this.started_=!1,this.startTime_=0,this.endTime_=0,this.raf_&&this.raf_.stop()}getRaf(){return this.raf_}start(){return this.startTime_=$H.time.now()+this.delay_,this.endTime_=this.startTime_+this.duration_,this.started_=!0,this.rafDisabled_||this.raf_&&this.raf_.start(),new Promise(e=>{this.completePromiseResolve_=e})}onComplete(e){this.completeCallback_=e}onUpdate(e){this.updateCallback_=e}calculate(){if(!this.started_)return;let e=$H.time.now();if(e<this.startTime_)return;let n=(e-(this.startTime_||0))/this.duration_,s=this.easeFunction_(KJ.mathf.clamp(0,1,n)),o=!1;n>1?(this.updateCallback_&&this.updateCallback_(1,o),this.completeCallback_&&this.completeCallback_(1,o),this.completePromiseResolve_&&this.completePromiseResolve_(1,o),o=!0,this.started_=!1):this.updateCallback_&&this.updateCallback_(s,o)}dispose(){this.raf_&&this.raf_.stop()}};qx.Easer=jH});var zq={TABLET:768,DESKTOP:1024,DESKTOP_LARGE:1230,IS_DESKTOP_LARGE:()=>window.innerWidth>=1230,IS_DESKTOP:()=>window.innerWidth>=1024,IS_DESKTOP_OR_TABLET:()=>window.innerWidth>=768,IS_MOBILE:()=>window.innerWidth<768,isPortrait:()=>window.innerWidth<=window.innerHeight,isLandscape:()=>window.innerWidth>window.innerHeight,isDesktopLarge:()=>window.innerWidth>=1230,isDesktop:()=>window.innerWidth>=1024,isDesktopOrTablet:()=>window.innerWidth>=768,isTabletPortrait:()=>window.innerWidth>=768&&window.innerWidth<1024&&window.innerHeight>window.innerWidth,isTabletOrMobile:()=>window.innerWidth<1024,isMobile:()=>window.innerWidth<768,isDsTabletLt:()=>window.innerWidth<=1023},Te=zq;var TT=re(Ye()),AT=class{constructor(){this.resizeListeners=[],this.ticking=!1;let e=r=>{this.resize()};this.windowResizeDisposer=TT.bom.smartResize(e,{passive:!0})}addListener(e){this.resizeListeners.push(e)}removeListener(e){this.resizeListeners=this.resizeListeners.filter(r=>r!==e)}update(){this.resizeListeners.forEach(e=>{e()}),this.ticking=!1}resize(){this.ticking||(window.requestAnimationFrame(()=>{this.update()}),this.ticking=!0)}dispose(){this.resizeListeners=[],this.windowResizeDisposer&&this.windowResizeDisposer()}},wz=()=>{window.MQN_RESIZER||(window.MQN_RESIZER=new AT,document.addEventListener("mannequinImpendingNavigation",()=>{window.MQN_RESIZER&&(window.MQN_RESIZER.scrollListeners_=[])}))},MT=wz;var CT=class{static preventDefault(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}static disableScroll(){window.addEventListener("DOMMouseScroll",this.preventDefault,!1),window.onwheel=this.preventDefault,window.onmousewheel=document.onmousewheel=this.preventDefault,window.ontouchmove=this.preventDefault}static enableScroll(){window.removeEventListener("DOMMouseScroll",this.preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null}},Al=CT;var $y=re(Nn());var j={mqnCssName:t=>""+t};var zy=re(RT()),VT=re(OT()),Wy=re(NT()),Gy=re(Dd()),Rz={className:"ak-modal",transitionDuration:300,visibilityDuration:0,onModalOpen:()=>{},onModalClose:()=>{},onModalDispose:()=>{}},Fd=VT.default.createDom,_s=class{static getClassName(e){return e.className}static generateAttributes(e){let r=_s.getClassName(e);return Object.freeze({ACTIVE_ID:`data-${r}-active-id`,BASE:`data-${r}`,CLOSE:`data-${r}-x`,ID:`data-${r}-id`})}static generateCssClasses(e){let r=_s.getClassName(e);return Object.freeze({BASE:`${r}`,CLOSE:`${r}-x`,CONTENT:`${r}-content`,ENTER_MODIFIED:`${r}--enter`,ENABLED_MODIFIED:`${r}--enabled`,EXIT_MODIFIED:`${r}--exit`,MASK:`${r}-mask`,VISIBLE_MODIFIED:`${r}--visible`})}constructor(e){this.config=e,this.timers_=[],this.attributes_=_s.generateAttributes(e),this.cssClasses_=_s.generateCssClasses(e),this.closeEl_=null,this.modalElement_=null,this.init_()}init_(){this.initDom_(),Wy.default.addDelegatedListener(document,"click",this.getDelegateClickHandler_()),this.initStateFromHash_()}delegateClickHandler_(e,r){this.handleClickToOpenModal_(e,r),this.handleClickToCloseModal_(e)}getDelegateClickHandler_(){return this.cachedDelgateClickHandler_||(this.cachedDelgateClickHandler_=(e,r)=>this.delegateClickHandler_(e,r)),this.cachedDelgateClickHandler_}getOnHistoryChangeListener_(){return this.historyChangeListener_||(this.historyChangeListener_=e=>this.onHistoryChange_(e)),this.historyChangeListener_}handleClickToOpenModal_(e,r){let n=this.getElementModalId_(e);!n||(r.preventDefault(),this.setActive(!0,n))}handleClickToCloseModal_(e){this.isElementCloseButton_(e)&&this.setActive(!1)}getActiveId_(){return this.contentContainerEl.getAttribute(this.attributes_.ACTIVE_ID)}isElementCloseButton_(e){return e.classList.contains(this.cssClasses_.CLOSE)||e.hasAttribute(this.attributes_.CLOSE)}getElementModalId_(e){return e.getAttribute(this.attributes_.ID)}initStateFromHash_(){let e=_s.getIdFromHash_();this.isValidModalId_(e)&&this.setActive(!0,e,!1)}isValidModalId_(e){let r=document.querySelectorAll(`[${this.attributes_.BASE}]`);return Array.from(r).some(n=>n.getAttribute(this.attributes_.BASE)==e)}initDom_(){this.modalElement_=this.buildModalElement_(),this.closeEl_=this.buildCloseButton_(),document.documentElement.appendChild(this.closeEl_),this.modalElement_.appendChild(this.buildMaskElement_()),this.contentContainerEl=this.buildContentContainerElement_(),this.modalElement_.appendChild(this.contentContainerEl),document.body.appendChild(this.modalElement_)}buildContentContainerElement_(){return Fd("div",this.cssClasses_.CONTENT)}buildMaskElement_(){return Fd("div",this.cssClasses_.MASK)}buildModalElement_(){return Fd("div",this.cssClasses_.BASE)}buildCloseButton_(){let e=Fd("div",this.cssClasses_.CLOSE);return e.setAttribute("aria-label","Close"),e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e}toggleEnterExitClasses_(e,r){let n=this.cssClasses_.ENTER_MODIFIED,s=this.cssClasses_.EXIT_MODIFIED;window.setTimeout(()=>{r?(e.classList.remove(s),e.classList.add(n)):(e.classList.remove(n),e.classList.add(s))},0)}setVisible(e){var r=o=>{o.keyCode==27&&(this.setActive(!1),document.body.removeEventListener("keydown",r))};e?document.body.addEventListener("keydown",r):document.body.removeEventListener("keydown",r),this.toggleEnterExitClasses_(this.modalElement_,e);let n=window.setTimeout(()=>{zy.default.enable(this.modalElement_,this.cssClasses_.ENABLED_MODIFIED,e)},e?0:this.config.transitionDuration);this.timers_.push(n);let s=window.setTimeout(()=>{zy.default.enable(this.modalElement_,this.cssClasses_.VISIBLE_MODIFIED,e)},e?this.config.visibilityDuration||this.config.transitionDuration:0);this.timers_.push(s)}setActive(e,r,n){e?this.openModal(r,n):this.closeModal(n)}prepForModalStateChange_(){this.clearTimers_()}openModal(e,r){this.prepForModalStateChange_();let n=this.attributes_.ACTIVE_ID;if(this.returnContentToOrigin_(),this.contentContainerEl.firstChild){let a=this.getActiveId_();this.contentContainerEl.removeAttribute(this.attributes_.ACTIVE_ID);let l=document.querySelector(`[${this.attributes_.BASE}="${a}"]`);l&&l.appendChild(this.contentContainerEl.firstChild)}let o=document.querySelector(`[${this.attributes_.BASE}="${e}"]`).querySelector("div");this.contentContainerEl.setAttribute(n,e),o&&this.contentContainerEl.appendChild(o),this.config.onModalOpen(e,this),this.setVisible(!0),r!==!1}closeModal(e){this.prepForModalStateChange_(),this.config.onModalClose(this.getActiveId_(),this),this.setVisible(!1),e!==!1}returnContentToOrigin_(){if(!this.contentContainerEl)return;let e=this.getActiveId_();this.contentContainerEl.removeAttribute(this.attributes_.ACTIVE_ID);let r=document.querySelector(`[${this.attributes_.BASE}="${e}"]`),n=this.contentContainerEl.querySelector("div");r&&n&&r.appendChild(n)}clearTimers_(){this.timers_.forEach(e=>window.clearTimeout(e)),this.timers_=[]}onHistoryChange_(e){let r=_s.getIdFromHash_(),n=e.state&&e.state.akModalId;!n&&this.isValidModalId_(r)&&(n=r),this.setActive(Boolean(n),n,!1)}static getIdFromHash_(){return window.location.hash.substr(1).split("#")[0]}dispose(){Wy.default.removeDelegatedListener(document,"click",this.getDelegateClickHandler_()),this.returnContentToOrigin_(),document.documentElement.removeChild(this.closeEl_),this.modalElement_.classList.remove(this.cssClasses_.ENTER_MODIFIED),this.modalElement_.classList.remove(this.cssClasses_.ENABLED_MODIFIED),this.modalElement_.classList.remove(this.cssClasses_.EXIT_MODIFIED),this.config.onModalDispose(this.getActiveId_(),this),document.body.removeChild(this.modalElement_)}},BT=class{constructor(){this.modalInstance=null}isInitialized_(){return!!this.modalInstance}init(e){if(this.isInitialized_())return;let r=Gy.default.clone(Rz);e&&Gy.default.merge(r,e),this.modalInstance=new _s(r)}openById(e){this.isInitialized_()&&this.modalInstance.setActive(!0,e,!0)}close(){this.isInitialized_()&&this.modalInstance.setActive(!1,null,!0)}dispose(){this.isInitialized_()&&(this.modalInstance.dispose(),this.modalInstance=null)}},UT=new BT;var $T=re(dn());var qT=class{constructor(e,r){this.rootEl=r||window,this.scrollCallback=e,this.scrollListener=null}start(e,r=!0){this.stop(),e&&this.scrollCallback&&this.scrollCallback();let n=s=>{this.scrollCallback(s,()=>{this.stop()})};this.rootEl.addEventListener("scroll",n,{passive:r}),this.scrollListener=()=>{this.rootEl.removeEventListener("scroll",n)}}stop(){this.scrollListener&&this.scrollListener()}dispose(){this.stop()}},zT=qT;var WT=class{constructor(e,r){this.el=e,this.swipeCallback=r,this.disposer=null,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null}start(){this.stop();let e=n=>{this.touchStartY=n.changedTouches[0].screenY};this.el.addEventListener("touchstart",e,{passive:!0});let r=n=>{this.touchEndX=n.changedTouches[0].screenX,this.touchEndY=n.changedTouches[0].screenY;let s=null;this.touchEndX<this.touchStartX&&(s="left"),this.touchEndX>this.touchEndY&&(s="right"),this.touchEndY<this.touchStartY&&(s="down"),this.touchEndY>this.touchStartY&&(s="up"),this.touchEndY==this.touchStartY&&(s="tap"),this.swipeCallback(n,s,()=>{this.stop()})};this.el.addEventListener("touchend",r,{passive:!0}),this.disposer=()=>{this.el.removeEventListener("touchstart",e,{passive:!0}),this.el.removeEventListener("touchend",r,{passive:!0})}}stop(){this.disposer&&this.disposer()}dispose(){this.stop()}},GT=WT;var Cr={OVERFLOW_HIDDEN:"no-overflow",AK_MODAL_OPEN:"ak-modal-open",AK_MODAL_CLOSE:"ak-modal-close",AK_MODAL_HIDE_CONTENT:"ak-modal-hide-content",AK_MODAL_SHOW_CLOSE_BUTTON:"ak-modal-show-close-button",AK_YOUTUBE_MODAL:"ak-youtubemodal"},jy=800,jT=class{constructor(){this.modal_=null,this.modalOpen=!1}createAirkitModal(){let e=window.angular;this.modal_===null&&(this.modal_=UT,this.modal_.init({onModalOpen:(r,n)=>{if(r.startsWith("wombat")){this.wombatCurrentY=document.scrollingElement.scrollTop,n.modalElement_.classList.add(j.mqnCssName("mqn2-ctb")),window.setTimeout(()=>{document.documentElement.classList.add(Cr.OVERFLOW_HIDDEN)}),document.documentElement.classList.add(Cr.AK_MODAL_SHOW_CLOSE_BUTTON),n.modalElement_.scrollTop=0;return}else n.modalElement_.classList.remove(j.mqnCssName("mqn2-ctb")),document.documentElement.classList.remove(Cr.OVERFLOW_HIDDEN);let o=n.contentContainerEl,a=document.documentElement.scrollTop||document.body.scrollTop,l=document.documentElement.clientHeight,c=document.querySelector(".body-part.main-body")||document.querySelector("[mqn2-app]");c.style.transformOrigin=`50% ${a+l/2}px`;let h=o.querySelector("[mqn-modal-root]"),f=e.element(h).scope().$root,u=o.parentElement;h.querySelector(`.${j.mqnCssName("mqn2-aaa")}`).querySelectorAll(`.${j.mqnCssName("mqn2-aan")}`).forEach(p=>{p.classList.add(j.mqnCssName("mqn2-bct")),window.setTimeout(()=>{p.classList.add(j.mqnCssName("mqn2-bcv"))})});let d=h.getAttribute("mqn-modal-document-class");this.modalOpen||(this.currentY=document.scrollingElement.scrollTop),e.element(h).scope().modalCtrl.init(this),f.$broadcast("MQN2_PARALLAX_STOP"),Al.disableScroll(),document.body.style.width=document.body.clientWidth+"px",document.body.style.overflow="hidden",document.body.style.marginTop=-this.currentY+"px",window.scroll(0,0),u.style.marginTop=this.currentY+"px",document.body.classList.add(Cr.AK_MODAL_OPEN),d&&document.documentElement.classList.add(d),this.raf=new $y.default(()=>{f.$broadcast("MQN2_PARALLAX_CALCULATE"),f.$broadcast("MQN2_PARALLAX_UPDATE")}),window.setTimeout(()=>{this.raf.start()}),window.setTimeout(()=>{this.raf.stop(),Al.enableScroll(),document.body.style.marginTop="",document.body.style.width="",u.style.marginTop="",document.body.style.overflow="",document.body.style.height=o.scrollHeight+"px",f.$broadcast("MQN2_PARALLAX_START"),f.$broadcast("MQN2_INVIEW_UPDATE"),document.documentElement.classList.add(Cr.AK_MODAL_SHOW_CLOSE_BUTTON);let p=g=>{window.clearTimeout(this.resizeDebouncer),this.resizeDebouncer=window.setTimeout(()=>{document.body.style.height=o.scrollHeight+"px"},300)};window.MQN_RESIZER.addListener(p),this.windowResizeListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(p)},this.deregisterModalResizeListener_=f.$on("MQN2_MODAL_RESIZED",()=>document.body.style.height=o.scrollHeight+"px"),this.modalOpen=!0,this.setupClickToClose_(n,o)},jy)},onModalClose:(r,n)=>{if(r.startsWith("wombat")){document.documentElement.classList.remove(Cr.AK_MODAL_SHOW_CLOSE_BUTTON),n.modalElement_.classList.remove(j.mqnCssName("mqn2-ctb")),document.documentElement.classList.remove(Cr.OVERFLOW_HIDDEN),window.setTimeout(()=>{window.scrollTo(0,this.wombatCurrentY)});return}this.modalOpen=!1,this.deregisterModalResizeListener_&&this.deregisterModalResizeListener_(),this.scroll&&this.scroll.stop(),this.swiper&&this.swiper.stop();let o=n.contentContainerEl,a=o.querySelector("[mqn-modal-root]");if(!e.element(a).scope())return;let c=e.element(a).scope().modalCtrl,h=o.parentElement,f=e.element(a).scope().$root,u=a.querySelector(`.${j.mqnCssName("mqn2-bcv")}`);u&&u.classList.add(j.mqnCssName("mqn2-bcu")),u&&u.classList.remove(j.mqnCssName("mqn2-bcv"));let m=a.getAttribute("mqn-modal-product"),d=a.getAttribute("mqn-modal-module"),v=a.getAttribute("mqn-autotrack-modal-close-event-label")||(this.closedViaClickToClose?"click to close":"click x"),p=a.getAttribute("mqn-autotrack-modal-close-event-category")||"modal exit",y={event:a.getAttribute("mqn-autotrack-modal-close-event")||"modal overlay",eventCategory:p,eventAction:d,eventLabel:v,pageName:window.location.pathname,pageType:"modal",product:m,moduleName:d,moduleType:"modal",nonInteraction:"0"};$T.default.trackDataLayer(y);let _=document.scrollingElement.scrollTop;window.scrollTo(0,_),Al.disableScroll(),window.setTimeout(()=>{Al.enableScroll()},jy),this.raf=new $y.default(()=>{f.$broadcast("MQN2_PARALLAX_CALCULATE"),f.$broadcast("MQN2_PARALLAX_UPDATE")}),window.setTimeout(()=>{document.documentElement.classList.remove(Cr.AK_MODAL_SHOW_CLOSE_BUTTON),document.body.style.height="",document.body.classList.remove(Cr.AK_MODAL_HIDE_CONTENT),document.body.style.width=document.body.clientWidth+"px",h.style.top=-_+"px",document.body.classList.remove(Cr.AK_MODAL_OPEN),document.body.classList.add(Cr.AK_MODAL_CLOSE),h.style.marginTop=this.currentY+"px",window.scroll(0,this.currentY),c&&c.closeImminent(this),f.$broadcast("MQN2_PARALLAX_CALCULATE"),f.$broadcast("MQN2_PARALLAX_UPDATE"),this.raf.start()}),window.setTimeout(()=>{c.close(this);let b=new Event("MQN2_MODAL_CLOSE");document.dispatchEvent(b);let S=o.querySelector("[mqn-modal-root]").getAttribute("mqn-modal-document-class");S&&document.documentElement.classList.remove(S),document.body.classList.remove(Cr.AK_MODAL_CLOSE),document.body.style.width="",document.body.style.marginTop="",h.style.top="",this.raf.stop(),window.dispatchEvent(new Event("resize")),window.setTimeout(()=>{window.clearTimeout(this.resizeDebouncer)}),this.windowResizeListener&&this.windowResizeListener()},jy+300)},onModalDispose:(r,n)=>{this.deregisterModalResizeListener_&&this.deregisterModalResizeListener_(),document.body.classList.remove(Cr.AK_MODAL_OPEN),document.body.classList.remove(Cr.AK_MODAL_CLOSE),document.body.classList.remove(Cr.AK_MODAL_HIDE_CONTENT),document.documentElement.classList.remove(Cr.OVERFLOW_HIDDEN),document.documentElement.classList.remove(Cr.AK_MODAL_SHOW_CLOSE_BUTTON),document.body.style.height="",document.body.style.width="",document.body.style.marginTop="";let s=n.contentContainerEl,o=s.querySelector("[mqn-modal-root]"),a=s.parentElement;a.style.top="",o&&s.removeChild(o)}}))}destroyAirkitModal(){this.modal_.dispose()}setupClickToClose_(e,r){this.closedViaClickToClose=!1;let n=r.querySelector("[mqn-click-to-close]");n&&n.addEventListener("click",()=>{this.closedViaClickToClose=!0,e.setActive(!1,null,!0)},{once:!0})}setupScrollToClose_(e,r){this.swiper&&this.swiper.stop(),this.swiper=null,this.scroll=new zT((n,s)=>{let o=window.pageYOffset||document.documentElement.scrollTop,a=r.scrollHeight,c=o+window.innerHeight>=a,h=()=>{Al.disableScroll(),this.scroll&&this.scroll.stop(),this.swiper&&this.swiper.stop(),window.jQuery(window).off("DOMMouseScroll mousewheel");let u=document.scrollingElement.scrollTop;window.scrollTo(0,u),window.setTimeout(()=>{e.setActive(!1,null,!0)},10)};this.swiper||(this.swiper=new GT(document.documentElement,(u,m,d)=>{m=="down"&&h()}));let f=u=>{if(u.originalEvent.detail>0||u.originalEvent.wheelDelta<0)return h(),!1};window.jQuery(window).off("DOMMouseScroll mousewheel"),this.swiper.stop(),c&&(window.jQuery(window).on("DOMMouseScroll mousewheel",f),this.swiper.start())}),this.scroll.start()}},XT=jT;(function(){"use strict";if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var t=window.document,e=[];function r(p){this.time=p.time,this.target=p.target,this.rootBounds=p.rootBounds,this.boundingClientRect=p.boundingClientRect,this.intersectionRect=p.intersectionRect||f(),this.isIntersecting=!!p.intersectionRect;var g=this.boundingClientRect,y=g.width*g.height,_=this.intersectionRect,b=_.width*_.height;y?this.intersectionRatio=Number((b/y).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function n(p,g){var y=g||{};if(typeof p!="function")throw new Error("callback must be a function");if(y.root&&y.root.nodeType!=1)throw new Error("root must be an Element");this._checkForIntersections=o(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=p,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(y.rootMargin),this.thresholds=this._initThresholds(y.threshold),this.root=y.root||null,this.rootMargin=this._rootMarginValues.map(function(_){return _.value+_.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.USE_MUTATION_OBSERVER=!0,n.prototype.observe=function(p){var g=this._observationTargets.some(function(y){return y.element==p});if(!g){if(!(p&&p.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:p,entry:null}),this._monitorIntersections(p.ownerDocument),this._checkForIntersections()}},n.prototype.unobserve=function(p){this._observationTargets=this._observationTargets.filter(function(g){return g.element!=p}),this._unmonitorIntersections(p.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var p=this._queuedEntries.slice();return this._queuedEntries=[],p},n.prototype._initThresholds=function(p){var g=p||[0];return Array.isArray(g)||(g=[g]),g.sort().filter(function(y,_,b){if(typeof y!="number"||isNaN(y)||y<0||y>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return y!==b[_-1]})},n.prototype._parseRootMargin=function(p){var g=p||"0px",y=g.split(/\s+/).map(function(_){var b=/^(-?\d*\.?\d+)(px|%)$/.exec(_);if(!b)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(b[1]),unit:b[2]}});return y[1]=y[1]||y[0],y[2]=y[2]||y[0],y[3]=y[3]||y[1],y},n.prototype._monitorIntersections=function(p){var g=p.defaultView;if(!!g&&this._monitoringDocuments.indexOf(p)==-1){var y=this._checkForIntersections,_=null,b=null;if(this.POLL_INTERVAL?_=g.setInterval(y,this.POLL_INTERVAL):(a(g,"resize",y,!0),a(p,"scroll",y,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in g&&(b=new g.MutationObserver(y),b.observe(p,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(p),this._monitoringUnsubscribes.push(function(){var S=p.defaultView;S&&(_&&S.clearInterval(_),l(S,"resize",y,!0)),l(p,"scroll",y,!0),b&&b.disconnect()}),p!=(this.root&&this.root.ownerDocument||t)){var w=v(p);w&&this._monitorIntersections(w.ownerDocument)}}},n.prototype._unmonitorIntersections=function(p){var g=this._monitoringDocuments.indexOf(p);if(g!=-1){var y=this.root&&this.root.ownerDocument||t,_=this._observationTargets.some(function(S){var E=S.element.ownerDocument;if(E==p)return!0;for(;E&&E!=y;){var x=v(E);if(E=x&&x.ownerDocument,E==p)return!0}return!1});if(!_){var b=this._monitoringUnsubscribes[g];if(this._monitoringDocuments.splice(g,1),this._monitoringUnsubscribes.splice(g,1),b(),p!=y){var w=v(p);w&&this._unmonitorIntersections(w.ownerDocument)}}}},n.prototype._unmonitorAllIntersections=function(){var p=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var g=0;g<p.length;g++)p[g]()},n.prototype._checkForIntersections=function(){var p=this._rootIsInDom(),g=p?this._getRootRect():f();this._observationTargets.forEach(function(y){var _=y.element,b=h(_),w=this._rootContainsTarget(_),S=y.entry,E=p&&w&&this._computeTargetAndRootIntersection(_,b,g),x=y.entry=new r({time:s(),target:_,boundingClientRect:b,rootBounds:g,intersectionRect:E});S?p&&w?this._hasCrossedThreshold(S,x)&&this._queuedEntries.push(x):S&&S.isIntersecting&&this._queuedEntries.push(x):this._queuedEntries.push(x)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(p,g,y){if(window.getComputedStyle(p).display!="none"){for(var _=g,b=d(p),w=!1;!w&&b;){var S=null,E=b.nodeType==1?window.getComputedStyle(b):{};if(E.display=="none")return null;if(b==this.root||b.nodeType==9)if(w=!0,b==this.root||b==t)S=y;else{var x=d(b),T=x&&h(x),A=x&&this._computeTargetAndRootIntersection(x,T,y);T&&A?(b=x,S=u(T,A)):(b=null,_=null)}else{var P=b.ownerDocument;b!=P.body&&b!=P.documentElement&&E.overflow!="visible"&&(S=h(b))}if(S&&(_=c(S,_)),!_)break;b=b&&d(b)}return _}},n.prototype._getRootRect=function(){var p;if(this.root)p=h(this.root);else{var g=t.documentElement,y=t.body;p={top:0,left:0,right:g.clientWidth||y.clientWidth,width:g.clientWidth||y.clientWidth,bottom:g.clientHeight||y.clientHeight,height:g.clientHeight||y.clientHeight}}return this._expandRectByRootMargin(p)},n.prototype._expandRectByRootMargin=function(p){var g=this._rootMarginValues.map(function(_,b){return _.unit=="px"?_.value:_.value*(b%2?p.width:p.height)/100}),y={top:p.top-g[0],right:p.right+g[1],bottom:p.bottom+g[2],left:p.left-g[3]};return y.width=y.right-y.left,y.height=y.bottom-y.top,y},n.prototype._hasCrossedThreshold=function(p,g){var y=p&&p.isIntersecting?p.intersectionRatio||0:-1,_=g.isIntersecting?g.intersectionRatio||0:-1;if(y!==_)for(var b=0;b<this.thresholds.length;b++){var w=this.thresholds[b];if(w==y||w==_||w<y!=w<_)return!0}},n.prototype._rootIsInDom=function(){return!this.root||m(t,this.root)},n.prototype._rootContainsTarget=function(p){return m(this.root||t,p)&&(!this.root||this.root.ownerDocument==p.ownerDocument)},n.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},n.prototype._unregisterInstance=function(){var p=e.indexOf(this);p!=-1&&e.splice(p,1)};function s(){return window.performance&&performance.now&&performance.now()}function o(p,g){var y=null;return function(){y||(y=setTimeout(function(){p(),y=null},g))}}function a(p,g,y,_){typeof p.addEventListener=="function"?p.addEventListener(g,y,_||!1):typeof p.attachEvent=="function"&&p.attachEvent("on"+g,y)}function l(p,g,y,_){typeof p.removeEventListener=="function"?p.removeEventListener(g,y,_||!1):typeof p.detatchEvent=="function"&&p.detatchEvent("on"+g,y)}function c(p,g){var y=Math.max(p.top,g.top),_=Math.min(p.bottom,g.bottom),b=Math.max(p.left,g.left),w=Math.min(p.right,g.right),S=w-b,E=_-y;return S>=0&&E>=0&&{top:y,bottom:_,left:b,right:w,width:S,height:E}||null}function h(p){var g;try{g=p.getBoundingClientRect()}catch(y){}return g?(g.width&&g.height||(g={top:g.top,right:g.right,bottom:g.bottom,left:g.left,width:g.right-g.left,height:g.bottom-g.top}),g):f()}function f(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(p,g){var y=g.top-p.top,_=g.left-p.left;return{top:y,left:_,height:g.height,width:g.width,bottom:y+g.height,right:_+g.width}}function m(p,g){for(var y=g;y;){if(y==p)return!0;y=d(y)}return!1}function d(p){var g=p.parentNode;return p.nodeType==9&&p!=t?v(p):g&&g.nodeType==11&&g.host?g.host:g&&g.assignedSlot?g.assignedSlot.parentNode:g}function v(p){try{return p.defaultView&&p.defaultView.frameElement||null}catch(g){return null}}window.IntersectionObserver=n,window.IntersectionObserverEntry=r})();function $i(t){return typeof t!="undefined"}var Cl=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r=Map),this.map=new r,this.populateFromIterable(e)}return t.prototype.populateFromIterable=function(e){var r=this;e.forEach(function(n){var s=n[0],o=n[1];return r.set(s,o)})},t.prototype.replaceInnerMap=function(e){this.map=e},Object.defineProperty(t.prototype,"size",{get:function(){return this.map.size},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t.prototype.delete=function(e){return this.map.delete(e)},t.prototype.entries=function(){return this.map.entries()},t.prototype.forEach=function(e,r){var n=$i(r)?r:this;this.map.forEach(e,n)},t.prototype.get=function(e){return this.map.get(e)},t.prototype.has=function(e){return this.map.has(e)},t.prototype.keys=function(){return this.map.keys()},t.prototype.set=function(e,r){return this.map.set(e,r),this},t.prototype.values=function(){return this.map.values()},t.prototype[Symbol.iterator]=function(){return this.map[Symbol.iterator]()},t}();function Pl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]}var Dz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ae=function(t){Dz(e,t);function e(r,n,s){r===void 0&&(r=[]),n===void 0&&(n=Map),s===void 0&&(s=Pl);var o=t.call(this,[],n)||this;return o.defaultFunction=s,o.populateFromIterable(r),o}return e.prototype.get=function(r){return this.has(r)||this.set(r,this.defaultFunction(r)),t.prototype.get.call(this,r)},e.usingFunction=function(r){return new this([],Map,r)},e}(Cl);var ce=function(){function t(e,r){this.min_=e,this.max_=r}return t.fromUnorderedValues=function(e,r){return new t(Math.min(e,r),Math.max(e,r))},t.clamp=function(e,r,n){return Math.min(n,Math.max(r,e))},t.prototype.clamp=function(e){return Math.min(this.max_,Math.max(this.min_,e))},t.prototype.contains=function(e){return this.min_<=e&&e<=this.max_},t.prototype.adjust=function(e){return new t(this.min_+e,this.max_+e)},t.prototype.add=function(e){return this.adjust(e)},t.prototype.subtract=function(e){return this.adjust(-e)},t.prototype.expand=function(e){return new t(this.min_-e,this.max_+e)},t.prototype.collapse=function(e){return this.expand(-e)},t.prototype.getMin=function(){return this.min_},t.prototype.getMax=function(){return this.max_},t.prototype.getDistance=function(){return this.max_-this.min_},Object.defineProperty(t.prototype,"min",{get:function(){return console.warn("WARNING: Please use getMin() and getMax() in place of getter properties min and max"),this.min_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return console.warn("WARNING: Please use getMin() and getMax() in place of getter properties min and max"),this.max_},enumerable:!1,configurable:!0}),t.prototype.getValueAsPercent=function(e,r){r===void 0&&(r=!0);var n=(e-this.min_)/(this.max_-this.min_);return r?new t(0,1).clamp(n):n},t.prototype.getPercentAsValue=function(e,r){r===void 0&&(r=!0);var n=r?new t(0,1).clamp(e):e;return this.min_+(this.max_-this.min_)*n},t.prototype.getPercentAsInt=function(e){return Math.round(this.getPercentAsValue(e))},t.prototype.getOverlap=function(e){return this.hasOverlap(e)?new t(Math.max(this.min_,e.getMin()),Math.min(this.max_,e.getMax())):null},t.prototype.hasOverlap=function(e){return this.max_>=e.getMin()&&e.getMax()>=this.min_},t.fromRangeInput=function(e){return new t(parseFloat(e.min),parseFloat(e.max))},t.prototype.shiftToZeroMin=function(){return new t(0,this.getMax()-this.getMin())},t}();function Zh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.slice(1).every(function(r){return t[0]===r})}function Il(t){return!!t}function kt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],n=0,s=t.filter(function(o){return o.length>n});s.length;)r[n]=s.map(function(o){return o[n]}),n++,s=s.filter(function(o){return o.length>n});return r}function Nd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!t.every(function(r){return Il(r)})||!Zh.apply(void 0,t.map(function(r){return r.length}))?!1:kt.apply(void 0,t).every(function(r){return Zh.apply(void 0,r)})}function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(r,n){return r+n},0)}var bs=Math.sign?Math.sign:function(t){return(t>0)-(t<0)||+t};var Kr=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},co=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.values=e}return t.add=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.map(function(o){return o.getValues()}),s=kt.apply(void 0,n).map(function(o){return di.apply(void 0,o)});return new(this.bind.apply(this,Kr([void 0],s)))},t.prototype.alignTo=function(e){var r,n=kt(this.getValues(),e.getValues()),s=n.map(function(o){var a=o[0],l=o[1];return Math.abs(a)*bs(l)});return new((r=this.constructor).bind.apply(r,Kr([void 0],s)))},t.prototype.add=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(e=this.constructor).add.apply(e,Kr([this],r))},t.invert=function(e){return e.invert()},t.prototype.invert=function(){var e;return new((e=this.constructor).bind.apply(e,Kr([void 0],this.getValues().map(function(r){return-r}))))},t.clamp=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var s=kt(e.getValues(),r),o=s.map(function(a){var l=a[0],c=a[1];return c?c.clamp(l):l});return new(this.bind.apply(this,Kr([void 0],o)))},t.prototype.clamp=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(e=this.constructor).clamp.apply(e,Kr([this],r))},t.subtract=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return this.add.apply(this,Kr([e],r.map(function(s){return s.invert()})))},t.prototype.subtract=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(e=this.constructor).subtract.apply(e,Kr([this],r))},t.prototype.getValues=function(){return this.values},t.sumDeltas=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.subtract(e[0],e.slice(-1)[0])},t.getDeltas=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=r[0];return r.slice(1).map(function(o){var a=e.subtract(o,s);return s=o,a})},t.fromVector=function(e){return new(this.bind.apply(this,Kr([void 0],e.getValues())))},t.scale=function(e,r){return new(this.bind.apply(this,Kr([void 0],e.getValues().map(function(n){return n*r}))))},t.prototype.scale=function(e){return this.constructor.scale(this,e)},t.areEqual=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Nd.apply(void 0,e.map(function(n){return n.getValues()}))},t.prototype.equals=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(e=this.constructor).areEqual.apply(e,Kr([this],r))},t.prototype.getLength=function(){return Math.sqrt(di.apply(void 0,this.getValues().map(function(e){return Math.pow(e,2)})))},t.prototype.setLength=function(e){var r=this.getLength(),n=e/r;return this.scale(n)},t.prototype.clampLength=function(e){var r=this.getLength();return r>e?this.setLength(e):this},t.prototype.multiply=function(e){var r;return new((r=this.constructor).bind.apply(r,Kr([void 0],kt(this.getValues(),e.getValues()).map(function(n){var s=n[0],o=n[1];return s*o}))))},t.prototype.divide=function(e){var r;return new((r=this.constructor).bind.apply(r,Kr([void 0],kt(this.getValues(),e.getValues()).map(function(n){var s=n[0],o=n[1];return s/o}))))},t.prototype.toExponent=function(e){var r;return new((r=this.constructor).bind.apply(r,Kr([void 0],this.getValues().map(function(n){return Math.pow(n,e)}))))},t.prototype.asRanges=function(){return this.getValues().map(function(e){return new ce(Math.min(0,e),Math.max(0,e))})},t.toNthPower=function(e,r){return new(this.bind.apply(this,Kr([void 0],e.getValues().map(function(n){return Math.pow(n,r)}))))},t.prototype.toNthPower=function(e){return this.constructor.toNthPower(this,e)},t}();var Tt=document.scrollingElement||document.documentElement;var ji=document.children[0];var Fz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nz=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},er=function(t){Fz(e,t);function e(r,n){r===void 0&&(r=0),n===void 0&&(n=0);for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];return t.apply(this,Nz([r,n],s))||this}return Object.defineProperty(e.prototype,"width",{get:function(){return this.getValues()[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getValues()[1]},enumerable:!1,configurable:!0}),e.prototype.sizeElement=function(r){r.style.width=this.width+"px",r.style.height=this.height+"px"},e.fromCanvas=function(r){return r===void 0&&(r=null),new this(r.width,r.height)},e.fromVideo=function(r){return r===void 0&&(r=null),new this(r.videoWidth,r.videoHeight)},e.fromElementOffset=function(r){return r===void 0&&(r=null),r?new this(r.offsetWidth,r.offsetHeight):this.fromInnerWindow()},e.fromRootElement=function(){return new this(ji.clientWidth,ji.clientHeight)},e.fromScrollElementClient=function(){return new this(Tt.clientWidth,Tt.clientHeight)},e.fromInnerWindow=function(){return new this(window.innerWidth,window.innerHeight)},e.prototype.getArea=function(){return this.width*this.height},e.prototype.equals=function(r){return Nd(this.getValues(),r.getValues())},e}(co);function Rl(t,e){return t.indexOf(e)!==-1}var Yi=window.navigator.userAgent;var ZT=function(){function t(e,r){this.iterator=e,this.mapFunction=r}return t.prototype.next=function(){var e=this.iterator.next();return{done:e.done,value:this.mapFunction(e.value)}},t.prototype[Symbol.iterator]=function(){return this},t}();var kz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vz=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},pn=function(t){kz(e,t);function e(r,n){r===void 0&&(r=[]),n===void 0&&(n=Map);var s=t.call(this,[],n)||this;return s.uid_=0,s.valueToUid_=Ae.usingFunction(function(o){return s.uid_++}),s.internalKeyToArray_=new Map,s.populateFromIterable(r),s}return e.prototype.clear=function(){t.prototype.clear.call(this),this.uid_=0,this.valueToUid_.clear()},e.prototype.getInternalKey_=function(r){var n=this,s=r.map(function(o){return n.valueToUid_.get(o)}).join("-");return this.internalKeyToArray_.has(s)||this.internalKeyToArray_.set(s,r.slice()),this.internalKeyToArray_.get(s)},e.prototype.get=function(r){return t.prototype.get.call(this,this.getInternalKey_(r))},e.prototype.delete=function(r){return t.prototype.delete.call(this,this.getInternalKey_(r))},e.prototype.has=function(r){return t.prototype.has.call(this,this.getInternalKey_(r))},e.prototype.keys=function(){return new ZT(t.prototype.keys.call(this),function(r){return r?Vz(r):[]})},e.prototype.set=function(r,n){return t.prototype.set.call(this,this.getInternalKey_(r),n)},e}(Cl);function QT(t,e){for(var r=[],n=t.next();!n.done;)r.push(e(n.value)),n=t.next();return r}function Jr(t,e){for(var r=t.next();!r.done;)e(r.value),r=t.next()}function kd(t){var e=t.constructor,r=t.entries(),n=new e;return Jr(r,function(s){var o=s[0],a=s[1];return n.set(a,o)}),n}var Bz=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},pi=function(){function t(){}return t.getAsCSSModifier=function(){return this.name_.toLowerCase().replace(/\s/,"-")},t.getName=function(){return this.name_},t.getUaids_=function(){return this.uaidsWithOffsets_.map(function(e){var r=e[0],n=e[1];return r})},t.isCurrentBrowser=function(){return this.getUaids_().some(function(e){return Rl(Yi,e)})},t.getVersion=function(){var e=this.uaidsWithOffsets_.find(function(f){var u=f[0],m=f[1];return Rl(Yi,u)}),r=e[0],n=e[1],s=n.find(function(f){return Rl(Yi,f[0])}),o=s[0],a=s[1],l=Yi.indexOf(o)+a,c=Yi.substring(l),h=c.split(";")[0].split(" ")[0].split(")")[0];return parseFloat(h)},t.getMajorVersion=function(){return Math.floor(this.getVersion())},t.getSupportedStyleValue=function(e,r){var n=this.genericStyleValueToSupported_.get([e,r]);return $i(n)?n:r},t.getGenericStyleValue=function(e,r){var n=this.getSupportedStyleValueToGenericMap_().get([e,r]);return $i(n)?n:r},t.getSupportedStyleProperty=function(e){var r=this.genericStylePropertyToSupported_.get(e);return $i(r)?r:e},t.getGenericStyleProperty=function(e){var r=this.getSupportedStylePropertyToGenericMap_().get(e);return $i(r)?r:e},t.getSupportedStyleValueToGenericMap_=function(){return this.supportedStyleValueToGeneric_||(this.supportedStyleValueToGeneric_=new pn(Bz(QT(this.genericStyleValueToSupported_.entries(),function(e){var r=e[0],n=r[0],s=r[1],o=e[1];return[[n,o],s]})))),this.supportedStyleValueToGeneric_},t.getSupportedStylePropertyToGenericMap_=function(){return this.supportedStylePropertyToGeneric_||(this.supportedStylePropertyToGeneric_=kd(this.genericStylePropertyToSupported_)),this.supportedStylePropertyToGeneric_},t.genericStylePropertyToSupported_=new Map,t.genericStyleValueToSupported_=new pn,t}();var Uz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mn=function(t){Uz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getVersion=function(){return parseFloat(Yi.split("Firefox/")[1].split(" ")[0])},e.name_="Firefox",e.uaidsWithOffsets_=[["Firefox",[["Firefox",8]]]],e}(pi);var Hz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kn=function(t){Hz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Safari",e.uaidsWithOffsets_=[["Safari",[["Version",8],["Safari",7]]]],e.genericStyleValueToSupported_=new pn([[["position","sticky"],"-webkit-sticky"]]),e}(pi);var qz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vd=function(t){qz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Chrome",e.uaidsWithOffsets_=[["Chrome",[["Chrome",7]]]],e}(pi);var zz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bd=function(t){zz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="IE",e.uaidsWithOffsets_=[["MSIE",[["MSIE",5]]],["Trident/",[["rv:",3]]]],e}(pi);var Wz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qh=function(t){Wz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Edge",e.uaidsWithOffsets_=[["Edge",[["Edge",5]]]],e}(pi);var Gz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KT=function(t){Gz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Opera",e.uaidsWithOffsets_=[["Opera",[["Version",8],["Opera",6]]],["OPR",[["OPR",4]]]],e}(pi);var rt=function(){function t(){}return t.getAsCSSModifier=function(){return this.name_.toLowerCase().replace(/\s/,"-")},t.isCurrentOS=function(){return this.regex_.test(Yi)},t}();var $z=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JT=function(t){$z(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows 8.1",e.regex_=/(Windows 8.1|Windows NT 6.3)/,e}(rt);var jz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eA=function(t){jz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows Server 2003",e.regex_=/Windows NT 5.2/,e}(rt);var Yz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tA=function(t){Yz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows Vista",e.regex_=/Windows NT 6.0/,e}(rt);var Xz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rA=function(t){Xz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows XP",e.regex_=/(Windows NT 5.1|Windows XP)/,e}(rt);var Zz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iA=function(t){Zz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows ME",e.regex_=/(Win 9x 4.90|Windows ME)/,e}(rt);var Qz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nA=function(t){Qz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows 2000",e.regex_=/(Windows NT 5.0|Windows 2000)/,e}(rt);var Kz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sA=function(t){Kz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows 98",e.regex_=/(Windows 98|Win98)/,e}(rt);var Jz=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oA=function(t){Jz(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows 95",e.regex_=/(Windows 95|Win95|Windows_95)/,e}(rt);var eW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aA=function(t){eW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows 10",e.regex_=/(Windows 10.0|Windows NT 10.0)/,e}(rt);var tW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lA=function(t){tW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows 8",e.regex_=/(Windows 8|Windows NT 6.2)/,e}(rt);var rW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cA=function(t){rW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Windows 7",e.regex_=/(Windows 7|Windows NT 6.1)/,e}(rt);var iW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hA=function(t){iW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="UNIX",e.regex_=/UNIX/,e}(rt);var nW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uA=function(t){nW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Sun UserAgent",e.regex_=/SunOS/,e}(rt);var sW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fA=function(t){sW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="QNX",e.regex_=/QNX/,e}(rt);var oW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dA=function(t){oW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Mac UserAgent X",e.regex_=/Mac OS X/,e}(rt);var aW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pA=function(t){aW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Open BSD",e.regex_=/OpenBSD/,e}(rt);var lW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mA=function(t){lW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Mac UserAgent",e.regex_=/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/,e}(rt);var cW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gA=function(t){cW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Linux",e.regex_=/(Linux|X11)/,e}(rt);var hW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vA=function(t){hW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="iOS",e.regex_=/(iPhone|iPad|iPod)/,e}(rt);var uW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yA=function(t){uW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="BeOS",e.regex_=/BeOS/,e}(rt);var fW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_A=function(t){fW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="Android",e.regex_=/Android/,e}(rt);var dW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bA=function(t){dW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="UnknownBrowser",e.uaidsWithOffsets_=[],e}(pi);var pW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wA=function(t){pW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.name_="UnknownOS",e.regex_=/.*/,e}(rt);var mW=[KT,Qh,Bd,Vd,kn,mn],gW=[_A,yA,vA,gA,mA,pA,dA,fA,uA,hA,cA,lA,JT,aA,oA,sA,nA,iA,eA,tA,rA],Yy=null,Xy=null,Zy=null,Sr=function(){function t(){}return t.getScreenSize=function(){return window.screen?new er(window.screen.width,window.screen.height):null},t.getBrowser=function(){if(Yy===null){var e=mW.find(function(r){return r.isCurrentBrowser()});Yy=$i(e)?e:bA}return Yy},t.isMobile=function(){return Zy===null&&(Zy=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(Yi)),Zy},t.isCookieEnabled=function(){var e=!!window.navigator.cookieEnabled;return typeof navigator.cookieEnabled=="undefined"&&!e?(document.cookie="testcookie",document.cookie.indexOf("testcookie")!==-1):e},t.getOS=function(){if(Xy===null){var e=gW.find(function(r){return r.isCurrentOS()});Xy=$i(e)?e:wA}return Xy},t}();var SA=function(){function t(e){this.step_=e}return Object.defineProperty(t.prototype,"step",{get:function(){return this.step_},enumerable:!1,configurable:!0}),t}();var EA=new Set(["loaded","complete"]);var et=function(){function t(){}return t.CLEANUP=Symbol("Cleanup"),t.FRAME_COUNT=Symbol("Frame Count"),t.MEASURE=Symbol("Measure"),t.PHYSICS=Symbol("Physics"),t.MUTATE=Symbol("Mutate"),t.PRE_MEASURE=Symbol("Pre-measure"),t.SCROLL_PRE_MEASURE=Symbol("Scroll-measure"),t.SCROLL_MEASURE=Symbol("Scroll-measure"),t.SCROLL_MUTATE=Symbol("Scroll-mutate"),t.SCROLL_CLEANUP=Symbol("Scroll-cleanup"),t.ANY_PRE_MEASURE=Symbol("Any-pre-measure"),t.ANY_MEASURE=Symbol("Any-measure"),t.ANY_MUTATE=Symbol("Any-mutate"),t.ANY_CLEANUP=Symbol("Any-cleanup"),t}(),Qy=Sr.getBrowser()===Bd?!1:{passive:!0,capture:!1,once:!0},Ky=[et.FRAME_COUNT,et.PRE_MEASURE,et.SCROLL_PRE_MEASURE,et.ANY_PRE_MEASURE,et.MEASURE,et.SCROLL_MEASURE,et.ANY_MEASURE,et.PHYSICS,et.MUTATE,et.SCROLL_MUTATE,et.ANY_MUTATE,et.CLEANUP,et.SCROLL_CLEANUP,et.ANY_CLEANUP],vW=[et.FRAME_COUNT,et.PRE_MEASURE,et.ANY_PRE_MEASURE,et.MEASURE,et.ANY_MEASURE,et.PHYSICS,et.MUTATE,et.ANY_MUTATE,et.CLEANUP,et.ANY_CLEANUP],yW=[et.SCROLL_PRE_MEASURE,et.ANY_PRE_MEASURE,et.SCROLL_MEASURE,et.ANY_MEASURE,et.SCROLL_MUTATE,et.ANY_MUTATE,et.SCROLL_CLEANUP,et.ANY_CLEANUP],_W=function(){function t(e){this.rl_=e,this.ids_=new Set}return t.prototype.wrapFunction_=function(e,r){var n=this,s=e.bind(this.rl_)(function(){n.ids_.delete(s),r()});return this.ids_.add(s),s},t.prototype.framecount=function(e){return this.wrapFunction_(this.rl_.framecount,e)},t.prototype.premeasure=function(e){return this.wrapFunction_(this.rl_.premeasure,e)},t.prototype.measure=function(e){return this.wrapFunction_(this.rl_.measure,e)},t.prototype.physics=function(e){return this.wrapFunction_(this.rl_.physics,e)},t.prototype.mutate=function(e){return this.wrapFunction_(this.rl_.mutate,e)},t.prototype.cleanup=function(e){return this.wrapFunction_(this.rl_.cleanup,e)},t.prototype.scrollPremeasure=function(e){return this.wrapFunction_(this.rl_.scrollPremeasure,e)},t.prototype.scrollMeasure=function(e){return this.wrapFunction_(this.rl_.scrollMeasure,e)},t.prototype.scrollMutate=function(e){return this.wrapFunction_(this.rl_.scrollMutate,e)},t.prototype.scrollCleanup=function(e){return this.wrapFunction_(this.rl_.scrollCleanup,e)},t.prototype.anyPremeasure=function(e){return this.wrapFunction_(this.rl_.anyPremeasure,e)},t.prototype.anyMeasure=function(e){return this.wrapFunction_(this.rl_.anyMeasure,e)},t.prototype.anyMutate=function(e){return this.wrapFunction_(this.rl_.anyMutate,e)},t.prototype.anyCleanup=function(e){return this.wrapFunction_(this.rl_.anyCleanup,e)},t.prototype.destroy=function(){var e=this;this.ids_.forEach(function(r){return e.rl_.clear(r)}),this.ids_.clear()},t}(),bW=function(){function t(){var e=this;this.scheduledFns_=new Map,this.lastRun_=performance.now(),this.runLoopCallback_=function(r){e.runLoopAndSetupFrameCallback_(r)},this.loaded_=EA.has(document.readyState),this.scrollHandler_=function(){window.removeEventListener("load",e.scrollHandler_),window.removeEventListener("scroll",e.scrollHandler_),window.removeEventListener("resize",e.scrollHandler_),e.runScrollLoopAndSetupListener_()},this.init_()}return t.prototype.init_=function(){var e=this;this.loaded_||window.addEventListener("load",function(){return e.loaded_=!0}),Ky.forEach(function(r){return e.scheduledFns_.set(r,new Map)}),this.runStepsInOrder_(Ky),this.setupListeners_()},t.prototype.setupListeners_=function(){this.setupScrollListener_(),this.setupRequestAnimationFrame_()},t.prototype.setupRequestAnimationFrame_=function(){window.requestAnimationFrame(this.runLoopCallback_)},t.prototype.setupScrollListener_=function(){window.addEventListener("load",this.scrollHandler_,Qy),window.addEventListener("scroll",this.scrollHandler_,Qy),window.addEventListener("resize",this.scrollHandler_,Qy)},t.prototype.framecount=function(e){return this.addFnToStep_(e,et.FRAME_COUNT)},t.prototype.premeasure=function(e){return this.addFnToStep_(e,et.PRE_MEASURE)},t.prototype.measure=function(e){return this.addFnToStep_(e,et.MEASURE)},t.prototype.physics=function(e){return this.addFnToStep_(e,et.PHYSICS)},t.prototype.mutate=function(e){return this.addFnToStep_(e,et.MUTATE)},t.prototype.cleanup=function(e){return this.addFnToStep_(e,et.CLEANUP)},t.prototype.scrollPremeasure=function(e){return this.addFnToStep_(e,et.SCROLL_PRE_MEASURE)},t.prototype.scrollMeasure=function(e){return this.addFnToStep_(e,et.SCROLL_MEASURE)},t.prototype.scrollMutate=function(e){return this.addFnToStep_(e,et.SCROLL_MUTATE)},t.prototype.scrollCleanup=function(e){return this.addFnToStep_(e,et.SCROLL_CLEANUP)},t.prototype.anyPremeasure=function(e){return this.addFnToStep_(e,et.ANY_PRE_MEASURE)},t.prototype.anyMeasure=function(e){return this.addFnToStep_(e,et.ANY_MEASURE)},t.prototype.anyMutate=function(e){return this.addFnToStep_(e,et.ANY_MUTATE)},t.prototype.anyCleanup=function(e){return this.addFnToStep_(e,et.ANY_CLEANUP)},t.prototype.addFnToStep_=function(e,r){var n=new SA(r);return this.scheduledFns_.get(r).set(n,e),n},t.prototype.runLoop=function(e){e===void 0&&(e=null),this.currentRun_=e||performance.now(),this.runStepsInOrder_(this.loaded_?vW:Ky),this.lastRun_=this.currentRun_},t.prototype.runLoopAndSetupFrameCallback_=function(e){this.runLoop(e),this.setupRequestAnimationFrame_()},t.prototype.getElapsedMilliseconds=function(){return this.currentRun_-this.lastRun_},t.prototype.getElapsedSeconds=function(){return this.getElapsedMilliseconds()/1e3},t.prototype.runScrollLoop=function(){this.runStepsInOrder_(yW)},t.prototype.runScrollLoopAndSetupListener_=function(){this.runScrollLoop(),this.setupScrollListener_()},t.prototype.runStepsInOrder_=function(e){var r=this;e.forEach(function(n){return r.runFnsForStep_(n)})},t.prototype.runFnsForStep_=function(e){for(var r=this.scheduledFns_.get(e).values(),n;n=r.next().value;)n();this.scheduledFns_.set(e,new Map)},t.prototype.clear=function(e){this.scheduledFns_.get(e.step).delete(e)},t.getSingleton=function(){return t.singleton_=t.singleton_||new this},t.prototype.getDestroyableInstance=function(){return new _W(this)},t.prototype.getFps=function(){return 60},t.prototype.getTargetFrameLength=function(){return t.msPerFrame_},t.prototype.getMsPerFrame=function(){return t.msPerFrame_},t.prototype.setFps=function(){console.warn("DEPRECATED: RenderLoop support for custom frame-rates has been dropped. Defaulting to maximum FPS per browser. This is to reduce overhead inside the loop.")},t.singleton_=null,t.msPerFrame_=1e3/60,t}(),se=bW.getSingleton();var wW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ho=function(t){wW(e,t);function e(r,n,s){r===void 0&&(r=[]),n===void 0&&(n=Map),s===void 0&&(s=Pl);var o=t.call(this)||this;return o.replaceInnerMap(new Ae(r,n,s)),o}return e.usingFunction=function(r){return new e([],Map,r)},e}(pn);var ot=function(){function t(){this.throwHandler_=t.defaultThrowHandler_}return t.getSingleton=function(){return this.singleton_||(this.singleton_=new this)},t.throw=function(e){this.getSingleton().throw(e)},t.prototype.throw=function(e){this.throwHandler_(e)},t.prototype.overrideThrow=function(e){this.throwHandler_=e},t.prototype.getThrowHandler=function(){return this.throwHandler_},t.defaultThrowHandler_=function(e){throw new Error(e)},t.singleton_=null,t}();var Ud=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},SW=2,Jy=Ae.usingFunction(function(t){return ho.usingFunction(function(e){return new(t.bind.apply(t,Ud([void 0],e)))})}),e_=Ae.usingFunction(function(){return new Set}),Xi=function(){function t(e){e===void 0&&(e=null);for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var s=Jy.get(this.constructor);this.args_=Ud([e],r),s.has(Ud([e],r))&&(e?ot.throw("Please use getForElement instead of new."):ot.throw("Please use getSingleton instead of new.")),this.destroyTimeout_=null,this.destroyed_=!1,this.element=e,this.values=[this.getCurrentVector_()],this.init()}return t.prototype.getVectorClass=function(){return this.constructor.VectorClass},t.prototype.init=function(){var e=this;se.anyPremeasure(function(){return e.measureValues()}),this.render()},t.prototype.getLastValue=function(){return this.values.slice(-1)[0]},t.prototype.getValues=function(){return ot.throw("getValues must be overridden by child class"),[]},t.prototype.getCurrentVector_=function(){var e;return new((e=this.getVectorClass()).bind.apply(e,Ud([void 0],this.getValues())))},t.prototype.getValueLimit_=function(){return this.constructor.VALUE_LIMIT},t.prototype.render=function(){var e=this;this.destroyed_||this.renderLoopPremeasure_(function(){e.renderLoopCleanup_(function(){return e.render()}),e.measureValues()})},t.prototype.renderLoopCleanup_=function(e){se.anyCleanup(e)},t.prototype.renderLoopPremeasure_=function(e){se.anyPremeasure(e)},t.prototype.measureValues=function(){this.values=this.values.slice(-(this.getValueLimit_()-1)).concat([this.getCurrentVector_()])},t.prototype.getCurrentAndLastValue=function(){return this.values.slice(-2)},t.prototype.getDelta=function(){var e=this.getCurrentAndLastValue();return this.getVectorClass().subtract(e[0],e[1])},t.prototype.hasChanged=function(){var e;return!(e=this.getVectorClass()).areEqual.apply(e,this.getCurrentAndLastValue())},t.getForElement=function(e,r){r===void 0&&(r=[null]);var n=Jy.get(this).get(r);return e_.get(n).add(e),n},t.getSingleton=function(e){return this.getForElement(e)},t.prototype.destroy=function(e){var r=this;e_.get(this).delete(e),clearTimeout(this.destroyTimeout_),this.destroyTimeout_=window.setTimeout(function(){e_.size<=0&&(Jy.get(r.constructor).delete(r.args_),r.destroyed_=!0)},1e3)},t.VectorClass=co,t.VALUE_LIMIT=SW,t}();var EW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pi=function(t){EW(e,t);function e(r,n){r===void 0&&(r=[]),n===void 0&&(n=Map);var s=t.call(this,r,n)||this;return s.replaceInnerMap(new Ae(r,n,function(o){return[]})),s}return e}(Cl);var Hd=function(){function t(){this.computedStyle_=Ae.usingFunction(function(e){return window.getComputedStyle(e)}),this.init_()}return t.prototype.init_=function(){this.renderLoop_()},t.prototype.getComputedStyle=function(e){return this.computedStyle_.get(e)},t.prototype.renderLoop_=function(){var e=this;se.anyMutate(function(){se.anyCleanup(function(){e.computedStyle_.clear(),e.renderLoop_()})})},t.getSingleton=function(){return this.singleton_=this.singleton_||new this},t.singleton_=null,t}();function xA(t,e,r){for(var n=r,s=t.next();!s.done;)n=e(n,s.value),s=t.next();return n}var xW=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},qd=new Pi,t_=new Map,TW="matrix(",AW=TW.length,MW=Hd.getSingleton(),Ll=function(){function t(e,r,n,s,o,a){e===void 0&&(e=1),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=0),a===void 0&&(a=0),this.a=parseFloat(e),this.b=parseFloat(r),this.c=parseFloat(n),this.d=parseFloat(s),this.tx=parseFloat(o),this.ty=parseFloat(a)}return Object.defineProperty(t.prototype,"translateX",{get:function(){return this.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"translateY",{get:function(){return this.ty},enumerable:!1,configurable:!0}),t.prototype.getTranslateX=function(){return this.tx},t.prototype.getTranslateY=function(){return this.ty},t.prototype.translate=function(e){var r=this.tx+e.x,n=this.ty+e.y;return new t(this.a,this.b,this.c,this.d,r,n)},t.prototype.setPosition=function(e){return new t(this.a,this.b,this.c,this.d,e.x,e.y)},t.prototype.setTranslateX=function(e){return new t(this.a,this.b,this.c,this.d,e,this.ty)},t.prototype.setTranslateY=function(e){return new t(this.a,this.b,this.c,this.d,this.tx,e)},t.prototype.applyPositionConstraint=function(e){var r=e.constrain(new ke(this.tx,this.ty));return this.setPosition(r)},t.prototype.applyPositionConstraints=function(e){var r=e.reduce(function(n,s){return s.constrain(n)},new ke(this.tx,this.ty));return this.setPosition(r)},t.prototype.applyPositionConstraintsFromIterableIterator=function(e){var r=xA(e,function(n,s){return s.constrain(n)},new ke(this.tx,this.ty));return this.setPosition(r)},t.prototype.set2dTranslation=function(e){return new t(this.a,this.b,this.c,this.d,e.x,e.y)},t.prototype.setScale=function(e){return new t(e,this.b,this.c,e,this.tx,this.ty)},t.parseFromString=function(e){return e==="none"||!e.length?new t:new(t.bind.apply(t,xW([void 0],e.slice(AW,-1).split(","))))},t.fromElementTransform=function(e){return t.parseFromString(MW.getComputedStyle(e).transform)},t.prototype.toCSSString=function(){var e=[this.a,this.b,this.c,this.d,this.tx,this.ty];return"matrix("+e.join(",")+")"},t.prototype.applyToElementTransform=function(e){e.style.transform=this.toCSSString()},t.prototype.applyToElementTransformAsChange=function(e,r){qd.get(e).push(this.getDifference(r)),t_.set(e,r),t.mutateElementWithMatrixChanges(e)},t.mutateElementWithMatrixChanges=function(e){se.mutate(function(){var r=t_.get(e),n=qd.get(e);if(!(n.length<1)){qd.delete(e);var s=n.reduce(function(o,a){return o.applyDifference(a)},r);s.applyToElementTransform(e),se.cleanup(function(){t_.clear(),qd.clear()})}})},t.prototype.applyDifference=function(e){return new t(this.a+e.a,this.b+e.b,this.c+e.c,this.d+e.d,this.tx+e.tx,this.ty+e.ty)},t.prototype.getDifference=function(e){return new t(this.a-e.a,this.b-e.b,this.c-e.c,this.d-e.d,this.tx-e.tx,this.ty-e.ty)},t}();var TA=Symbol("result"),CW=Ae.usingFunction(function(t){t!==TA&&console.error("Browser check function called in unusual way.");var e=document.createElement("div");e.style.display="table";var r=document.createElement("div");r.style.display="table-row",r.style.height="200px";var n=document.createElement("div");n.style.display="table-row",n.style.position="relative";var s=document.createElement("div");s.style.display="table-cell";var o=document.createElement("div");o.style.display="inline-block",o.style.height="100px",o.style.width="100px",e.appendChild(r),e.appendChild(n),n.appendChild(s),s.appendChild(o),document.body.appendChild(e);var a=n.offsetParent===e&&n.offsetTop===200&&s.offsetParent===n&&s.offsetTop===200&&o.offsetParent===n&&o.offsetTop===200;return document.body.removeChild(e),a});function AA(){return CW.get(TA)}var PW=["table","table-cell","table-row"];function MA(t){return Il(PW.find(function(e){return t.style.display===e}))}function r_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,t.map(function(r){return Math.abs(r)}))}var IW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RW=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},ke=function(t){IW(e,t);function e(r,n){r===void 0&&(r=0),n===void 0&&(n=0);for(var s=[],o=2;o<arguments.length;o++)s[o-2]=arguments[o];return t.apply(this,RW([r,n],s))||this}return Object.defineProperty(e.prototype,"x",{get:function(){return this.getValues()[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.getValues()[1]},enumerable:!1,configurable:!0}),e.prototype.getX=function(){return this.getValues()[0]},e.prototype.getY=function(){return this.getValues()[1]},e.prototype.zeroY=function(){return new e(this.getX(),0)},e.prototype.zeroX=function(){return new e(0,this.getY())},e.fromElementOffset=function(r){var n=r.offsetParent;return n&&MA(n)&&AA()?new this(r.offsetLeft-n.offsetLeft,r.offsetTop-n.offsetTop):new this(r.offsetLeft,r.offsetTop)},e.fromMatrix=function(r){return new this(r.translateX,r.translateY)},e.fromElementScroll=function(r){return new this(r.scrollLeft,r.scrollTop)},e.fromElementTransform=function(r){return this.fromMatrix(Ll.fromElementTransform(r))},e.fromWheelEvent=function(r){return new this(r.deltaX,r.deltaY)},e.prototype.positionElement=function(r){r.style.left=this.x+"px",r.style.top=this.y+"px"},e.prototype.positionElementByTranslation=function(r){r.style.transform="translate("+this.x+"px, "+this.y+"px)"},e.prototype.trendsHorizontal=function(){return r_(this.getX(),this.getY())===Math.abs(this.getX())},e.prototype.trendsVertical=function(){return r_(this.getX(),this.getY())===Math.abs(this.getY())},e.prototype.toString=function(){return"X: "+this.getX()+", Y: "+this.getY()},e}(co);function CA(t){return t===void 0&&(t=null),t?er.fromElementOffset(t):er.fromRootElement()}var LW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PA=function(t){LW(e,t);function e(r){return r===void 0&&(r=null),t.call(this,r)||this}return e.prototype.getDimensions=function(){return this.getLastValue()},e.prototype.getValues=function(){return CA(this.element).getValues()},e.getForElement=function(r,n){return n===void 0&&(n=[null]),Xi.getForElement.bind(this)(r,n)},e.getSingleton=function(r){return Xi.getSingleton.bind(this)(r)},e.VectorClass=er,e}(Xi);var OW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IA=function(t){OW(e,t);function e(r){return r===void 0&&(r=null),t.call(this,r)||this}return e.prototype.getValues=function(){return er.fromInnerWindow().getValues()},e.getForElement=function(r,n){return n===void 0&&(n=null),n&&ot.throw("WindowDimensions should not be used with elements"),Xi.getForElement.bind(this)(r)},e.getSingleton=function(r){return Xi.getSingleton.bind(this)(r)},e.VectorClass=er,e}(Xi);var DW=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FW=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},Zi=function(t){DW(e,t);function e(r){r===void 0&&(r=null);var n=t.call(this,r)||this;return n.windowDimensions_=IA.getSingleton(n),n.scrollElementDimensions_=PA.getForElement(n,[Tt]),n}return e.prototype.getPosition=function(){return this.getLastValue()},e.prototype.getValues=function(){return[this.getScrollX_(),this.getScrollY_()]},e.prototype.getScrollX_=function(){return this.element?this.element.scrollLeft:window.pageXOffset||Tt.scrollLeft},e.prototype.getScrollY_=function(){return this.element?this.element.scrollTop:window.pageYOffset||Tt.scrollTop},e.prototype.getScrollPercent=function(){var r=this.scrollElementDimensions_.getLastValue().subtract(this.windowDimensions_.getLastValue()).getValues(),n=this.getValues(),s=kt(n,r);return new(ke.bind.apply(ke,FW([void 0],s.map(function(o){var a=o[0],l=o[1];return a/l}))))},e.prototype.isScrollingDown=function(){return this.getDelta().y<0},e.prototype.isScrollingUp=function(){return this.getDelta().y>0},e.prototype.isScrollingRight=function(){return this.getDelta().x>0},e.prototype.isScrollingLeft=function(){return this.getDelta().x<0},e.getForElement=function(r,n){return n===void 0&&(n=[null]),Xi.getForElement.bind(this)(r,n)},e.getSingleton=function(r){return Xi.getSingleton.bind(this)(r)},e.prototype.renderLoopCleanup_=function(r){se.scrollCleanup(r)},e.prototype.renderLoopPremeasure_=function(r){se.scrollPremeasure(r)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.windowDimensions_.destroy(this),this.scrollElementDimensions_.destroy(this)},e.VectorClass=ke,e}(Xi);var NW=Hd.getSingleton(),RA=Sr.getBrowser();function ut(t,e){var r=RA.getSupportedStyleProperty(e),n=NW.getComputedStyle(t).getPropertyValue(r);return RA.getGenericStyleValue(e,n)}var kW=new Set(["fixed","absolute"]);function LA(t){for(var e=0,r=t.previousElementSibling;r;){var n=ut(r,"position");if(!kW.has(n))if(n==="sticky")e+=r.offsetHeight;else{e+=r.offsetTop+r.offsetHeight;break}r=r.previousElementSibling}return e}function OA(t){var e=ut(t,"position");if(e!=="sticky")return t.offsetTop;for(var r=LA(t),n=t.parentElement,s=0;n!==t.offsetParent;)s+=LA(n),n=n.parentElement;return r+s}var jne=new Set(["fixed","absolute"]);function DA(t){var e=ut(t,"position");if(e!=="sticky")return 0;var r=OA(t),n=t.parentElement,s=ar(n),o=n.offsetHeight-r-t.offsetHeight,a=new ce(0,o),l=-1*(r+s);return a.clamp(l)}function i_(t){return ut(t,"position")==="fixed"}function VW(t){return FA(t)-DA(t)}function FA(t){return t.offsetTop+ke.fromElementTransform(t).y}function BW(t,e){for(var r=t,n=0;r&&r!==document.body;){if(i_(r))return n+r.offsetTop;n+=e(r)-r.scrollTop,r=r.offsetParent}var s=Zi.getSingleton(this),o=s.getPosition().invert();return s.destroy(this),n+o.y}function NA(t,e){return i_(t)?t.offsetTop:e(t)+BW(t.offsetParent,e)}var zd=function(){function t(){this.cache_=Ae.usingFunction(function(e){return NA(e,FA)}),this.cacheIgnoringSticky_=Ae.usingFunction(function(e){return NA(e,VW)}),this.init_()}return t.prototype.init_=function(){this.renderLoop_()},t.prototype.getVisibleDistanceFromRoot=function(e){return this.cache_.get(e)},t.prototype.getVisibleDistanceFromRootIgnoringSticky=function(e){return this.cacheIgnoringSticky_.get(e)},t.prototype.renderLoop_=function(){var e=this;se.anyMutate(function(){se.anyCleanup(function(){e.clearCaches_(),e.renderLoop_()})})},t.prototype.clearCaches_=function(){this.cache_.clear(),this.cacheIgnoringSticky_.clear()},t.getSingleton=function(){return this.singleton_=this.singleton_||new this},t.singleton_=null,t}();var UW=zd.getSingleton();function ar(t){return UW.getVisibleDistanceFromRoot(t)}function kA(t){var e=ar(t);return new ce(e,e+t.offsetHeight)}var St=class{static isProd(){return window.location.hostname==="store.google.com"}static forceIpadHighRes(){let e=window.location.search.split("forceIpadHighRes=")[1];return e=e&&e.split("&")[0],!St.isProd()&&e=="true"}static turnOffLazyImage(){let e=window.location.search.split("lazyImage=")[1];return e=e&&e.split("&")[0],e=="false"}static turnOffLazyInstantiate(){let e=window.location.search.split("lazyInstantiate=")[1];return e=e&&e.split("&")[0],e=="false"}static sequenceCount(){let e=window.location.search.split("sequenceCount=")[1];return!St.isProd()&&e&&e.split("&")[0]}static reduceSequenceCount(){let e=window.location.search.split("reduceSequenceCount=")[1];return e=e&&e.split("&")[0],!St.isProd()&&e=="true"}static evBypassEnabled(){let e=window.location.search.split("evBypass=")[1];return e=e&&e.split("&")[0],e=="true"}static debugLoadedModules(){let e=window.location.search.split("debugLoadedModules=")[1];return e=e&&e.split("&")[0],!St.isProd()&&e=="true"}static debugModules(){let e=window.location.search.split("debugModule=")[1];e=e&&e.split("&")[0];let r=e&&e.split(",");return!St.isProd()&&r}static lazyVideoBustCache(){let e=window.location.search.split("lazyVideoBustCache=")[1];return e=e&&e.split("&")[0],e=="true"}static staticVideos(){let e=window.location.search.split("staticVideos=")[1];return e=e&&e.split("&")[0],!St.isProd()&&e=="true"}};function VA(t,e,r){let n=()=>{o.unobserve(t),o.disconnect(),n=null},s=a=>r(t,a,n),o=new IntersectionObserver(s,e);return o.observe(t),{observer:o,done:n}}var HW={isElementInView:(t,e=0,r=1)=>{let n=t.offsetHeight,s=kA(t),o=window.innerHeight||document.documentElement.clientHeight,a=s.getMin(),l=n*e,c=a+l,h=s.getMax(),f=n*(1-r),u=h-f;return(u>=0||c>=0)&&(c<=o||u<=o)},elementInViewWatcherFirstChangeOnly:(t,e,r)=>{let n=(s,o,a)=>r(s,o[0],a);return St.evBypassEnabled()?(window.setTimeout(()=>{r(t,{isIntersecting:!0,isVisible:!0},()=>{})}),{observer:null,done:()=>{}}):VA(t,e,n)},elementInViewWatcher:(t,e,r)=>VA(t,e,(s,o,a)=>r(s,o.slice(-1)[0],a))},ht=HW;var uo=class{static setupNativeSmoothScroll(){!window.URLSearchParams||window.location.host=="store.google.com"||document.documentElement.classList.add("mqn-ext-native-smooth-scroll")}static disposeNativeSmoothScroll(){document.documentElement.classList.remove("mqn-ext-native-smooth-scroll")}};var wq=re(YA());var Wh=re(Ye()),Sq=re(ZA());var JA=re(KA()),e1=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.accessibleOutline=new JA.AccessibleOutline(e[0]),r.$on("$destroy",()=>this.dispose())}dispose(){this.accessibleOutline.dispose()}},oG=function(){return{restrict:"A",controller:e1}},t1=oG;var fG=Fl(),dG=function(){return{restrict:"A",link:function(t,e,r){let n=r.mqnAddBrowserName,s=e[0];["isAndroid","isChrome","isFirefox","isIOS","isIE","isIEorEdge","isMobile","isSafari"].forEach(function(a){if(fG[a]()&&s.classList.add(n+"--"+a),a==="isIOS"&&/iP(hone|od|ad)/.test(navigator.platform)){let l=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=parseInt(l[1],10);c<=10&&(s.classList.add(`${n}--${a}-legacy`),s.setAttribute(`${n}--${a}-legacy`,"")),c===11&&(s.classList.add(`${n}--${a}-11`),s.setAttribute(`${n}--${a}-11`,""))}})}}},l1=dG;var c1=t=>window.jQuery(t).closest(`.${j.mqnCssName("mqn2-aaa")}`)[0],pG=t=>{let e=c1(t),r=Array.from(document.querySelectorAll(".main-body-content")),n=ht.elementInViewWatcherFirstChangeOnly(t,null,(s,o,a)=>{o.isIntersecting&&(e.style.overflow="visible",document.body.style["overflow-x"]="initial",r.forEach(l=>{l.style.overflow="visible"}))});return{done:()=>{e.style.overflow="",document.body.style["overflow-x"]="",r.forEach(s=>{s.style.overflow=""}),n.done()}}},mt={getClosestMqnFrame:c1,makeSmithCooperateWithNativeSticky:pG};var h_=re(dn());var Pse=re(Et()),Gt={MQN_PRODUCT:"mqn-autotrack-product",MQN_PAGE_TYPE:"mqn-autotrack-page-type",MQN_MODULE_NAME:"mqn-autotrack-module-name",MQN_PARTIAL_TYPE:"mqn-autotrack-partial-type",MQN_EVENT:"mqn-autotrack-event",MQN_CATEGORY:"mqn-autotrack-category",MQN_OUTVIEW_EVENT:"mqn-autotrack-outview-event",MQN_OUTVIEW_CATEGORY:"mqn-autotrack-outview-category",MQN_ACTION:"mqn-autotrack-action",MQN_LABEL:"mqn-autotrack-label",MQN_INTERACTION_TYPE:"mqn-autotrack-interaction-type",MQN_INVIEW:"mqn-autotrack-inview",MQN_INVIEW_THRESHOLD:"mqn-autotrack-inview-threshold",MQN_IMMEDIATE:"mqn-autotrack-immediate",MQN_LISTENER:"mqn-autotrack-event-listener"},pa={INVIEW:"inview",OUTVIEW:"outview",CLICK:"click"};var h1=class{static get $inject(){return["$element","$scope","$attrs","$timeout","$window","$rootScope"]}constructor(e,r,n,s,o,a){if(this.el=e[0],this.$window=o,this.outviewObservers=[],this.outviewTimeTracker=[],this.hasScrolled=!1,this.hasScrolledDisposer=null,this.started=!1,this.elements=Array.prototype.slice.call(this.el.querySelectorAll(`[${Gt.MQN_INVIEW}]`)),this.elements=this.elements.filter(l=>{let c;for(;l;){if(c=l.parentElement,c.getAttribute("mqn-autotrack")=="")return l=null,c==this.el;l=c}}),this.el.hasAttribute(Gt.MQN_INVIEW)&&this.elements.push(this.el),this.el.hasAttribute(Gt.MQN_IMMEDIATE))this.start();else if(window.MQN2_TRACKING_NAVIGATION_READY)this.start();else{let l=()=>{this.start()};this.trackNavigationEventDisposer=()=>{document.removeEventListener("trackingNavigationEvent",l)},document.addEventListener("trackingNavigationEvent",l,{once:!0})}r.$on("$destroy",()=>{this.dispose_()})}start(){if(this.started)return;this.started=!0;let e=100,r=()=>{this.hasScrolled=!0};this.hasScrolledDisposer=()=>{window.removeEventListener("scroll",r,{once:!0,passive:!0})},window.setTimeout(()=>{this.setupInviewMonitoring_(),this.setupClickMonitoring_(),window.addEventListener("scroll",r,{once:!0,passive:!0})},e)}setupClickMonitoring_(){this.listenerRemover=this.addDelegatedListener(this.el,"click",e=>{let r=e.getAttribute(Gt.MQN_EVENT),n=e.getAttribute(Gt.MQN_INVIEW)=="";r&&!n&&this.track(e,pa.CLICK)})}setupInviewMonitoring_(){this.elements.forEach((e,r)=>{let n=.3;e.hasAttribute(Gt.MQN_INVIEW_THRESHOLD)&&(n=+e.getAttribute(Gt.MQN_INVIEW_THRESHOLD)),ht.elementInViewWatcherFirstChangeOnly(e,{threshold:n},(s,o,a)=>{o.isIntersecting&&(this.track(s,pa.INVIEW),this.elements.splice(r,1),a(),this.outviewObservers.push(ht.elementInViewWatcherFirstChangeOnly(s,null,(l,c,h)=>{!c.isIntersecting&&this.hasScrolled&&(this.track(l,pa.OUTVIEW),h())})))})})}track(e,r){let n=e.getAttribute(Gt.MQN_EVENT),s=e.getAttribute(Gt.MQN_PAGE_TYPE),o=e.getAttribute(Gt.MQN_PRODUCT),a=e.getAttribute(Gt.MQN_PARTIAL_TYPE),l=e.getAttribute(Gt.MQN_CATEGORY),c=e.getAttribute(Gt.MQN_ACTION),h=e.getAttribute(Gt.MQN_LABEL),f=e.getAttribute(Gt.MQN_MODULE_NAME),u=e.getAttribute(Gt.MQN_INTERACTION_TYPE);if(r==pa.OUTVIEW&&(n=e.getAttribute(Gt.MQN_OUTVIEW_EVENT),l=e.getAttribute(Gt.MQN_OUTVIEW_CATEGORY)),r=="click"){h=h||window.location.pathname;let d=mt.getClosestMqnFrame(e);s=d.getAttribute(Gt.MQN_PAGE_TYPE),o=d.getAttribute(Gt.MQN_PRODUCT),a=d.getAttribute(Gt.MQN_PARTIAL_TYPE),f=="look_up"&&(f=d.getAttribute(Gt.MQN_MODULE_NAME)||d.getAttribute(Gt.MQN_ACTION)),c||(c=d.getAttribute(Gt.MQN_ACTION))}h||(h="(not set)");let m={event:n,eventCategory:l,eventAction:c,pageName:window.location.pathname,pageType:s,product:o,moduleName:f||c,moduleType:a,eventLabel:h};r==pa.CLICK?m.nonInteraction="0":m.nonInteraction="1",r==pa.INVIEW&&this.outviewTimeTracker.push({element:e,start:new Date}),r==pa.OUTVIEW&&this.outviewTimeTracker.forEach((d,v)=>{if(d.element==e){let p=d.start,y=(new Date().getTime()-p.getTime())/1e3,_=5*60;m.secondsInView=Math.min(_,y),this.outviewTimeTracker.splice(d,1)}}),u&&(m.interactionType=u);for(let d in m)m[d]||delete m[d];h_.default.trackDataLayer(m),m.eventLabel.includes("/config/")&&!("products"in m)&&h_.default.trackDataLayer({products:m.eventLabel.replace("/config/",""),event:"buy_now"})}addDelegatedListener(e,r,n){let s=o=>{o=o||window.event;let a=o.target||o.srcElement;a=a.nodeType===3?a.parentNode:a;do n(a,o),a.parentNode&&(a=a.parentNode);while(a.parentNode)};return e.addEventListener(r,s),()=>{e.removeEventListener(r,s)}}dispose_(){this.listenerRemover&&this.listenerRemover(),this.windowScrollRemover&&this.windowScrollRemover(),this.hasScrolledDisposer&&this.hasScrolledDisposer(),this.trackNavigationEventDisposer&&this.trackNavigationEventDisposer(),this.outviewObservers.forEach(e=>{e.done()})}},mG=function(){return{restrict:"A",controller:h1}},u1=mG;var gG=function(){return{restrict:"A",scope:{mqnAutotrackDecoratorTargets:"&",mqnAutotrackDecoratorTargetsTarget:"&"},link:function(t,e,r){let n=e[0],s=r.mqnAutotrackDecoratorTargetsTarget,o=n.querySelectorAll("a[href]");[].forEach.call(o,function(a){a.href&&!a.hasAttribute("mqn-autotrack-event")&&(a.setAttribute("mqn-autotrack-event","module interaction"),a.setAttribute("mqn-autotrack-category","module click"),a.setAttribute("mqn-autotrack-module-name","look_up"))})}}},f1=gG;var d1=re(Nn()),p1=class{static get $inject(){return["$element","$attrs","$scope","$timeout","$window"]}constructor(e,r,n,s,o){this.canvas=e[0],this.ctx=this.canvas.getContext("2d"),this.video=document.querySelector(`#${r.mqnBlurryVideo} video`),this.raf=new d1.default(()=>{this.ctx.drawImage(this.video,0,0,this.canvas.offsetWidth,this.canvas.offsetHeight)}),n.$watch("mqnBlurryVideoActive",(a,l)=>{a?this.raf.start():this.raf.stop()}),n.$on("$destroy",()=>{this.dispose_()})}dispose_(){this.raf.stop()}},vG=function(){return{restrict:"A",controller:p1,scope:{mqnBlurryVideoActive:"=mqnBlurryVideoActive"}}},m1=vG;var g1=class{static get $inject(){return["$element","$scope","$attrs","$rootScope"]}constructor(e,r,n,s){this.element=e[0],this.windowListener=null,this.activeClass=null,this.conditions={mobile:n.mqnBreakpointClassMobile,tablet:n.mqnBreakpointClassTablet,desktop:n.mqnBreakpointClassDesktop,desktopTablet:n.mqnBreakpointClassDesktopTablet,tabletMobile:n.mqnBreakpointClassTabletMobile},this.refresh_();let o=a=>{this.refresh_()};window.MQN_RESIZER?(window.MQN_RESIZER.addListener(o),this.windowListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(o)}):($window.addEventListener("resize",o),this.windowListener=()=>{$window.removeEventListener("resize",o)}),r.$on("$destroy",()=>{this.dispose_()})}applyClass(e){if(!e)return;e.split(" ").forEach(n=>{this.element.classList.add(n)}),this.activeClass=e}refresh_(){let e=window.innerWidth;this.activeClass&&this.activeClass.split(" ").forEach(n=>{this.element.classList.remove(n)}),e>=Te.TABLET&&this.conditions.desktopTablet?this.applyClass(this.conditions.desktopTablet):(e>=Te.DESKTOP&&this.applyClass(this.conditions.desktop),e>=Te.TABLET&&e<Te.DESKTOP&&(this.conditions.tabletMobile?this.applyClass(this.conditions.tabletMobile):this.applyClass(this.conditions.tablet))),e<Te.TABLET&&(this.conditions.tabletMobile?this.applyClass(this.conditions.tabletMobile):this.applyClass(this.conditions.mobile))}dispose_(){this.windowListener&&this.windowListener()}},yG=function(){return{restrict:"A",controller:g1}},v1=yG;var _G="!important",y1=10,_1=Sr.getBrowser();function de(t,e,r){var n=r.slice(-y1)===_G,s=n?"important":"",o=n?r.slice(0,-y1):r,a=_1.getSupportedStyleProperty(e),l=_1.getSupportedStyleValue(e,o);t.style.setProperty(a,l,s)}function b1(t,e){e===void 0&&(e=[" "]);for(var r=new Set(e),n=0;r.has(t[n]);)n++;return t.slice(n)}function w1(t,e){e===void 0&&(e=[" "]);for(var r=new Set(e),n=t.length;r.has(t[n-1]);)n--;return t.slice(0,n)}function ws(t,e){return e===void 0&&(e=[" "]),b1(w1(t,e),e)}var S1=[" ",`
`,"	"];function Nl(t){return typeof t!="string"?(console.warn('A non-string value "'+t+'" (tyepof '+typeof t+") was provided to styleStringToMap"),new Map):t.split(";").map(function(e){return ws(e,S1)}).filter(function(e){return Rl(e,":")?!0:(e!==""&&console.warn("Invalid property-style pair provided to styleStringToMap "+('"'+e+'"')),!1)}).map(function(e){return e.split(":")}).map(function(e){return[e[0],e.slice(1).join(":")]}).map(function(e){return e.map(function(r){return ws(r,S1)})}).reduce(function(e,r){var n=r[0],s=r[1];return e.set(n,s),e},new Map)}function E1(t,e){t.style.setProperty(e,"")}var x1=class{static get $inject(){return["$element","$scope","$attrs"]}constructor(e,r,n){if(this.appliedStyles_=new Set,this.element=e[0],this.windowListener=null,this.conditions={all:n.mqnBreakpointStyleAll,mobile:n.mqnBreakpointStyleMobile,tablet:n.mqnBreakpointStyleTablet,desktop:n.mqnBreakpointStyleDesktop,desktopLarge:n.mqnBreakpointStyleDesktopLarge,desktopTablet:n.mqnBreakpointStyleDesktopTablet,tabletMobile:n.mqnBreakpointStyleTabletMobile,landscape:n.mqnBreakpointStyleLandscape,portrait:n.mqnBreakpointStylePortrait},this.forceEval=n.mqnBreakpointStyleForceEval,this.forceEval)for(let o in this.conditions)this.conditions[o]=r.$eval(this.conditions[o]);this.refresh_();let s=o=>{this.refresh_()};window.MQN_RESIZER?(window.MQN_RESIZER.addListener(s),this.windowListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(s)}):($window.addEventListener("resize",s),this.windowListener=()=>{$window.removeEventListener("resize",s)}),r.$on("$destroy",()=>{this.dispose_()})}applyStyle(e){let r;if(typeof e!="undefined"){if(typeof e=="string"){if(e==="")return;r=e}else if(e instanceof Array){if(e.length===0)return;r=e.join(";")}else console.warn("Unknown type provided to breakpoint-style",e);Jr(Nl(r).entries(),([n,s])=>{de(this.element,n,s),this.appliedStyles_.add(n)})}}validCondition(e){return e&&!!e[0]&&e[0]&&e[0][0]!==void 0}refresh_(){let e=window.innerWidth;if(this.backgroundImage=this.element.style.backgroundImage,Jr(this.appliedStyles_.values(),r=>E1(this.element,r)),this.appliedStyles_.clear(),this.conditions.all&&this.applyStyle(this.conditions.all),this.validCondition(this.conditions.portrait)&&Te.isPortrait()&&this.applyStyle(this.conditions.portrait),this.validCondition(this.conditions.landscape)&&Te.isLandscape()&&this.applyStyle(this.conditions.landscape),e>=Te.DESKTOP_LARGE&&this.validCondition(this.conditions.desktopLarge)){this.applyStyle(this.conditions.desktopLarge);return}e>=Te.TABLET&&this.validCondition(this.conditions.desktopTablet)?this.applyStyle(this.conditions.desktopTablet):(e>=Te.DESKTOP&&this.applyStyle(this.conditions.desktop),e>=Te.TABLET&&e<Te.DESKTOP&&(this.conditions.tabletMobile?this.applyStyle(this.conditions.tabletMobile):this.applyStyle(this.conditions.tablet))),e<Te.TABLET&&(this.conditions.tabletMobile?this.applyStyle(this.conditions.tabletMobile):this.applyStyle(this.conditions.mobile))}dispose_(){this.windowListener&&this.windowListener()}},bG=function(){return{restrict:"A",controller:x1}},T1=bG;var wG=function(){return{restrict:"A",link:function(t,e,r){var n=e[0];let s=r.mqnClickAnimation,o=()=>{n.classList.remove(s)},a=()=>{n.classList.remove(s),window.setTimeout(()=>{n.classList.add(s)})};n.addEventListener("click",a),n.addEventListener("animationend",o),t.$on("$destroy",()=>{n.removeEventListener("click",a),n.removeEventListener("animationend",o)})}}},A1=wG;var Jh=re(Ye()),M1=re(yt());var C1=class{static get $inject(){return["$scope","$element"]}constructor(e,r){if(this.$scope=e,this.el=r[0],this.el.setAttribute("mqn-dynamic-cta-v2-js",!0),this.el.getAttribute("mqn-dynamic-cta-enabled")!="true"&&this.el.getAttribute("mqn-dynamic-cta-doc-id")===null){this.el.setAttribute("mqn-dynamic-cta-done",!0);return}this.domWatcher=new M1.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",id:"resize",callback:()=>{let n=this.waitlistButton;window.innerWidth<=759?this.waitlistButton=this.waitlistButtonMobile:this.waitlistButton=this.waitlistButtonDesktop,n!==this.waitlistButton&&(this.currentWaitlistButtonLabel="",this.getWaitListButtonLabel())}}),this.getPdpBuyText=this.el.getAttribute("mqn-dynamic-cta-label")!==null,this.getUrl=this.el.getAttribute("mqn-dynamic-cta-url")!==null,this.waitlistButtonDesktop=this.getDesktopWaitlistButton(),this.waitlistButtonMobile=this.getMobileWaitlistButton(),this.currentWaitlistButtonLabel="",this.domWatcher.run("resize"),this.waitlistButton?this.initWaitlistButton():this.init()}getPrimaryCtaButton(){return document.querySelector("#pdb button.transaction")||document.querySelector('button[data-test="cta"]')}getDesktopWaitlistButton(){return document.querySelector("#pdb button.waitlist")}getMobileWaitlistButton(){return document.querySelector("[bottom-pdp-bar] button.waitlist")}init(){let e=this.el,r=e.style.display;Jh.func.waitUntil(()=>{let n=this.getPrimaryCtaButton();if(!n)return!1;let s=n.getAttribute("disabled")==="disabled";return s?e.style.display="none":e.style.display=r,!s},3e4).then(()=>{let n=this.getPrimaryCtaButton(),s=n.getAttribute("disabled")==="disabled";if(n&&!s){if(this.domWatcher.add({element:this.el,on:"click",callback:()=>{n.click()}}),this.getPdpBuyText){let o=n.textContent;o&&this.setLabel(o);let a=n.getAttribute("aria-label");a&&this.el.setAttribute("aria-label",a)}}else e.style.display="none";this.el.setAttribute("mqn-dynamic-cta-done",!0)},()=>{e.style.display="none",this.el.setAttribute("mqn-dynamic-cta-done",!0)})}setLabel(e){let r=this.el.querySelector("[text]");r&&(r.textContent=e)}initWaitlistButton(){this.el.removeAttribute("href"),this.currentWaitlistButtonLabel="",this.pollWaitlistButtonLabel().then(()=>{this.el.setAttribute("mqn-dynamic-cta-done",!0),this.setLabel(this.currentWaitlistButtonLabel)}),this.domWatcher.add({element:this.waitlistButtonDesktop,on:"click",callback:()=>{this.getWaitListButtonLabel()}}),this.domWatcher.add({element:this.waitlistButtonMobile,on:"click",callback:()=>{this.getWaitListButtonLabel()}}),this.domWatcher.add({element:this.el,on:"click",callback:()=>{this.waitlistButton.click(),this.getWaitListButtonLabel()}})}getWaitListButtonLabel(){!this.waitlistButtonDesktop||(this.el.classList.add("disabled"),this.pollWaitlistButtonLabel().then(()=>{this.setLabel(this.currentWaitlistButtonLabel),this.el.classList.remove("disabled")}))}pollWaitlistButtonLabel(){let e=this.currentWaitlistButtonLabel,r=()=>{let n=Array.from(this.waitlistButton.parentNode.querySelectorAll(".waitlist > span")),s="";return n.forEach(o=>{Jh.dom.getComputedStyle(o).display!=="none"&&(s=o.textContent)}),this.currentWaitlistButtonLabel=s,s};return Jh.func.waitUntil(()=>e!==r(),1e6,40)}dispose(){this.domWatcher.dispose()}};function u_(){return{restrict:"A",controller:C1}}var SG=new Promise(t=>{let e=()=>window.mannequinService?t(window.mannequinService):window.requestAnimationFrame(e);window.requestAnimationFrame(e)}),P1=SG;var EG={REPLACE_SPAN:"replace-span"},I1=class{static get $inject(){return["$scope","$element","$sce","$sanitize"]}constructor(e,r,n,s){this.$scope=e,this.el=r[0],this.$sce=n,this.$sanitize=s,window.setTimeout(()=>{this.init()})}init(){let e=this.el.getAttribute("mqn-dynamic-pricing-bundle"),r=this.el.getAttribute("mqn-dynamic-pricing-bundle-footnote-symbol"),n=this.el.getAttribute("mqn-dynamic-pricing-behavior"),s=this.el.getAttribute("mqn-dynamic-pricing-docid"),o=this.el.getAttribute("mqn-dynamic-pricing-display");if(n==EG.REPLACE_SPAN){let a=this.el.querySelector("span");if(!a)return;a.setAttribute("jsname","xBognb"),a.setAttribute("data-docid",s),a.setAttribute("data-display",o),document.dispatchEvent(new CustomEvent("populatePrices"))}else if(e){let a=JSON.parse(e);a&&a.length&&P1.then(l=>{l.getBundlePrice(a,r).then(c=>{c.financingHtml?this.el.innerHTML=this.$sanitize(c.financingHtml):c.html&&(this.el.innerHTML=this.$sanitize(c.html))})})}}};function f_(){return{restrict:"A",controller:I1}}function gn(t,e){se.anyMutate(function(){return t.classList.add(e)})}function vn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];se.anyMutate(function(){var n;return(n=t.classList).remove.apply(n,e)})}var eu=Object.freeze({TOP:"top",CENTER:"center",BOTTOM:"bottom"}),R1=class{constructor(e){this.el=e,this.rl_=se.getDestroyableInstance(),this.attrs=this.el.getAttribute("mqn-elevator-car");let r=!!this.attrs&&JSON.parse(this.attrs)||{};this.cssTriggers=r.cssTriggers||[],this.stickPosition_=r.stickPosition||eu.BOTTOM}fixCssClass_(e){return e.replace(/\./g,"")}getTopPositionToStickTo_(e){switch(this.stickPosition_){case eu.TOP:return 0;case eu.CENTER:return Math.min(0,Math.max((window.innerHeight-this.el.offsetHeight)/2,e.top));case eu.BOTTOM:return Math.min(0,Math.max(window.innerHeight-this.el.offsetHeight,e.top))}}update(e,r){this.updatePosition_(r),this.updateCssTriggers_(e)}updatePosition_(e){this.stickPosition_!==eu.TOP&&this.rl_.mutate(()=>{de(this.el,"top",`${this.getTopPositionToStickTo_(e)}px`)})}updateCssTriggers_(e){!this.cssTriggers||this.cssTriggers.forEach(r=>{let n=new ce(0,100).getOverlap(new ce(r.from,r.to)),s=new ce(0,100).clamp(e);n.contains(s)?gn(this.el,this.fixCssClass_(r.class)):vn(this.el,this.fixCssClass_(r.class))})}destroy(){this.rl_.destroy()}},L1=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.rl_=se.getDestroyableInstance(),this.parentFrame=mt.getClosestMqnFrame(this.el),this.rl_.mutate(()=>{this.parentFrame.setAttribute("mqn-elevator-frame",!0)}),this.gordonFrames=Array.from(document.querySelectorAll(".main-body-content")),this.cars=Array.from(this.el.querySelectorAll("[mqn-elevator-car]")),this.elevatorCarInstances=this.cars.map(n=>new R1(n)),this.observer=ht.elementInViewWatcherFirstChangeOnly(this.el,null,(n,s,o)=>{s.isIntersecting&&this.gordonFrames.forEach(a=>{a.style.overflow="visible",document.body.style["overflow-x"]="initial"})}),window.setTimeout(()=>this.updateOnFrame()),r.$on("$destroy",()=>this.dispose_())}getPercent(e,r){return Math.min(100,Math.max(0,e/r*100))}updateOnFrame(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.updateOnFrame());let e=this.el.getBoundingClientRect(),n=window.innerHeight-e.top,s=this.getPercent(n,e.height);this.elevatorCarInstances.forEach(o=>o.update(s,e))})}dispose_(){document.body.style["overflow-x"]="",this.observer&&this.observer.done(),this.rl_.destroy(),this.elevatorCarInstances.forEach(e=>e.destroy())}},xG=function(){return{restrict:"A",controller:L1}},O1=xG;var N1=re(yt()),k1=re(Gi());function TG(){return window.innerWidth>760?72:55}function AG(){return window.innerWidth>760?0:52}function yn(){let t=document.querySelector("[pdp-bar]");return t||(t=document.querySelector('[data-text="pdp-bar"]')),t?t.offsetHeight:TG()}function D1(){let t=document.querySelector(".navbar");return t?t.offsetHeight:0}function fo(){let t=document.querySelector("[bottom-pdp-bar]");return t?t.offsetHeight:AG()}function F1(){let t=window.innerWidth,e=window.innerHeight,r=yn();return t/(e-r)}function V1(){return{restrict:"A",scope:{mqnGdnHeight:"="},link:function(t,e,r){let n=t.mqnGdnHeight;if(!n||typeof n!="object")return;let s=e[0],o=new N1.DomWatcher,a=(c,h)=>{let f=yn(),u=D1(),m=fo();if(c==="combined-header-nav"||c==="combined-header-nav-no-unit"){let d=f+u;c==="combined-header-nav-no-unit"?s.style.setProperty(h,`${d}`):s.style.setProperty(h,`${d}px`)}else c==="header"||c==="header-no-unit"?c==="header-no-unit"?s.style.setProperty(h,`${f}`):s.style.setProperty(h,`${f}px`):c==="navbar"||c==="navbar-no-unit"?c==="navbar-no-unit"?s.style.setProperty(h,`${u}`):s.style.setProperty(h,`${u}px`):(c==="footer"||c==="footer-no-unit")&&(c==="footer-no-unit"?s.style.setProperty(h,`${m}`):s.style.setProperty(h,`${m}px`))},l=()=>{Object.keys(n).forEach(c=>{let h=n[c];a(c,h)})};o.add({id:"resize",element:window,on:"smartResize",callback:k1.func.debounce(l,300),eventOptions:{passive:!0}}),o.run("resize"),t.$on("$destroy",()=>{o.dispose(),o=null})}}}var d_=re(yt()),p_=re(Gi()),m_=re(Ye());function B1(){return{restrict:"A",scope:{mqnHeightToVar:"="},link:function(t,e,r){let n=t.mqnHeightToVar;if(!n||typeof n!="object")return;let s=e[0],o=new d_.DomWatcher,a=(c,h)=>{let f=s.querySelector(c);if(!f)return;let u=f.offsetHeight||0;m_.dom.setCssVariable(s,h,`${u}px`)},l=()=>{Object.keys(n).forEach(c=>{let h=n[c];a(c,h)})};o.add({id:"resize",element:window,on:"smartResize",callback:p_.func.debounce(l,300),eventOptions:{passive:!0}}),o.run("resize"),t.$on("$destroy",()=>{o.dispose(),o=null})}}}function U1(){return{restrict:"A",scope:{mqnWidthToVar:"="},link:function(t,e,r){let n=t.mqnWidthToVar;if(!n||typeof n!="object")return;let s=e[0],o=new d_.DomWatcher,a=(c,h)=>{let f=s.querySelector(c);if(!f)return;let u=f.offsetWidth||0;m_.dom.setCssVariable(s,h,`${u}px`)},l=()=>{Object.keys(n).forEach(c=>{let h=n[c];a(c,h)})};o.add({id:"resize",element:window,on:"smartResize",callback:p_.func.debounce(l,300),eventOptions:{passive:!0}}),o.run("resize"),t.$on("$destroy",()=>{o.dispose(),o=null})}}}function MG(t){for(var e=t,r=0;e&&e!==document.body;){if(ut(e,"position")==="fixed")return r+e.offsetLeft;var n=ke.fromElementTransform(e);r+=e.offsetLeft+n.x-e.scrollLeft,e=e.offsetParent}var s=Zi.getSingleton(this),o=s.getPosition().invert();return s.destroy(this),r+o.x}function CG(t){return ut(t,"position")==="fixed"?t.offsetLeft:t.offsetLeft+ke.fromElementTransform(t).x+MG(t.offsetParent)}var H1=function(){function t(){this.cache_=Ae.usingFunction(function(e){return CG(e)}),this.init_()}return t.prototype.init_=function(){this.renderLoop_()},t.prototype.getVisibleDistanceFromRoot=function(e){return this.cache_.get(e)},t.prototype.renderLoop_=function(){var e=this;se.anyMutate(function(){se.anyCleanup(function(){e.cache_.clear(),e.renderLoop_()})})},t.getSingleton=function(){return this.singleton_=this.singleton_||new this},t.singleton_=null,t}();var PG=H1.getSingleton();function kl(t){return PG.getVisibleDistanceFromRoot(t)}var q1=class{static get $inject(){return["$element","$attrs","$scope","$timeout","$window"]}constructor(e,r,n,s,o){this.$scope=n,this.jQuery=window.jQuery,this.parent=e[0],this.$parent=this.jQuery(this.parent),this.el=this.parent.getAttribute("mqn-horizontal-scroll-root")==""?this.parent:this.parent.querySelector("[mqn-horizontal-scroll-root]"),this.shouldCenter=this.parent.getAttribute("mqn-horizontal-scroll-center")=="",this.children=this.el.children,this.$scope.$watch(r.mqnHorizontalScroll,a=>{this.slideTo(+a)}),this.setupResizer(),window.setTimeout(()=>{this.resize_()}),n.$on("$destroy",()=>{this.dispose_()})}setupResizer(){let e=r=>{this.resize_()};this.resize_(),window.MQN_RESIZER?(window.MQN_RESIZER.addListener(e),this.windowResizeListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(e)}):($window.addEventListener("resize",e,{passive:!0}),this.windowResizeListener=()=>{$window.removeEventListener("resize",e)})}resize_(){this.isScrollable()?this.el.classList.add("isScrollable"):this.el.classList.remove("isScrollable")}isScrollable(){let e=this.el.scrollWidth,r=this.el.offsetWidth;return e>r}slideTo(e){let r=this.parent.scrollLeft,n=this.children[e];if(!n)return;let o=n.getBoundingClientRect().left+r;if(this.shouldCenter){let a=this.el.offsetWidth/2;a-=n.offsetWidth/2,o-=a}this.$parent.stop().animate({scrollLeft:`${o}px`},500)}dispose_(){this.windowResizeListener&&this.windowResizeListener()}},IG=function(){return{restrict:"A",controller:q1}},z1=IG;var W1=re(Ye());var G1=re(Et()),RG={REGISTER:"mqn-inview-register"},$1=class{static get $inject(){return["$element","$scope","$attrs","$timeout","$window","$rootScope"]}constructor(e,r,n,s,o,a){this.$scope=r,this.$rootScope=a,this.el=e[0],this.percent=-1e3,this.percentTop=-1e3,this.isScrollingDown=null,this.cssClass=n.mqnInviewClass,this.cssDownClass=n.mqnInviewClassDown,this.cssUpClass=n.mqnInviewClassUp,this.restartVideos=n.mqnInviewRestartVideos=="",this.positions=n.mqnInviewPositions&&JSON.parse(n.mqnInviewPositions),this.restartVideosOnPositionInview=n.mqnInviewRestartVideosOnPositionInview=="",this.positionClasses=[],this.destroyed_=!1,this.prevRectTop=null,n.mqnInviewRootElementId&&(this.rootElement=document.getElementById(n.mqnInviewRootElementId)),this.window=this.rootElement||o,this.raf=new W1.Raf(this.loop_.bind(this)),this.raf.setFps(3),this.ev=G1.elementVisibility.inview(this.el,{rootMargin:"200px 0px"},()=>{this.ev.state().ready&&this.ev.state().inview?this.raf.start():this.raf.stop()}),this.ev.readyPromise.then(()=>{this.checkElInView_(!0)}),r.$emit(RG.REGISTER,this.el),r.$on("MQN2_INVIEW_UPDATE",()=>{requestAnimationFrame(()=>this.checkElInView_(!1))}),r.$on("$destroy",()=>{this.dispose_()})}start(){}loop_(){this.checkElInView_(!1)}checkElInView_(e){let r=ar(this.el);this.prevRectTop=r;let n=this.el.offsetHeight,s=r+n/2,o=window.innerHeight,a=this.percent;this.percent=s/o*100,this.percentTop=r/o*100,this.percentBottom=(r+n)/o*100;let l=!!this.inview;this.inview=this.percent>0&&this.percent<100,l!==this.inview&&requestAnimationFrame(()=>{this.inview?(this.cssClass&&this.el.classList.add(this.cssClass),this.restartVideos&&this.restartVideos_()):(this.cssClass&&this.el.classList.remove(this.cssClass),this.cssDownClass&&this.el.classList.remove(this.cssDownClass),this.cssUpClass&&this.el.classList.remove(this.cssUpClass))});let c=this.isScrollingDown;if(this.isScrollingDown=a>this.percent,c>=this.isScrollDown&&this.inview){let h=this.isScrollingDown?this.cssDownClass:this.cssUpClass;requestAnimationFrame(()=>{this.cssDownClass&&this.el.classList.remove(this.cssDownClass),this.cssUpClass&&this.el.classList.remove(this.cssUpClass),h&&this.el.classList.add(h)})}this.positions&&this.positions.forEach(h=>{e&&(h=Object.assign({},h),requestAnimationFrame(()=>{h.bottom=100,h.bottomBase="top"}));let f=h.topBase=="top"?this.percentTop:this.percent;f=h.topBase=="bottom"?this.percentBottom:f;let u=h.bottomBase=="top"?this.percentTop:this.percent;u=h.bottomBase=="bottom"?this.percentBottom:u;let m=100;if((isNaN(h.top)||f>=h.top)&&(isNaN(h.bottom)||u<=h.bottom))this.positionClasses.includes(h.class)||(h.event&&(e?window.setTimeout(()=>{this.firePositionEvent(h.event,this.el,!0)},m):this.firePositionEvent(h.event,this.el,!0)),requestAnimationFrame(()=>this.el.classList.add(h.class)),this.restartVideosOnPositionInview&&this.restartVideos_(),h.once||this.positionClasses.push(h.class));else if(this.positionClasses.includes(h.class)){h.event&&(e?window.setTimeout(()=>{this.firePositionEvent(h.event,this.el,!1)},m):this.firePositionEvent(h.event,this.el,!1));let d=this.positionClasses.indexOf(h.class);requestAnimationFrame(()=>this.el.classList.remove(h.class)),this.positionClasses.splice(d,1)}})}restartVideos_(){[...this.el.querySelectorAll("video")].forEach(r=>{r.currentTime=0,r.play().then(()=>{}).catch(s=>{})})}firePositionEvent(e,r,n){this.$scope.$emit(e,{element:r,inview:n})}dispose_(){this.destroyed_=!0,this.raf&&this.raf.dispose(),this.ev&&this.ev.dispose()}},LG=function(){return{restrict:"A",controller:$1}},j1=LG;function _t(t,e){return e===void 0&&(e=!1),e?_t(t)&&(!t.parentElement||_t(t.parentElement,!0)):ut(t,"display")!=="none"}var OG=Sr.getBrowser()===mn,DG=Sr.getBrowser()===Qh,g_=null;function FG(){return g_===null&&(g_=NG()),g_}function NG(){return OG&&mn.getMajorVersion()>=65||DG&&Qh.getMajorVersion()>=18?!0:document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0}var Vl=FG;var v_=re(Et()),Y1=re(yt());var Zt=class{static getFifeBaseUrl(e){return e.split("=")[0]}static getFifeParamsFromUrl(e){return e.split("=")[1]}static isFifeUrl(e){return e&&e.includes("googleusercontent.com")&&!e.endsWith(".svg")}static addUrlFifeParams_(e){let r=window.location.search.split("fifeParams=")[1];return r&&(r=r.split("&")[0],r.split(",").forEach(s=>{e?e+="-"+s:e=s})),e}static addFifeUrlParams(e){let r=Zt.getFifeBaseUrl(e),n=Zt.getFifeParamsFromUrl(e);return n=Zt.addUrlFifeParams_(n),n?r+"="+n:r}static addFifeUrlParamsToUrls(e){return e=e.map(r=>Zt.addFifeUrlParams(r)),e}};var jd=Fl();function kG(){}var X1=class{static get $inject(){return["$element","$scope","$attrs","$timeout","$window"]}constructor(e,r,n,s,o){if(this.$scope=r,this.rl_=se.getDestroyableInstance(),this.el=e[0],this.$timeout=s,this.$window=o,this.destroyed_=!1,this.el.closest("[mqn-lazyimage-no-load]"))return;this.isAutoWidthElementCache_=Ae.usingFunction(h=>h.getAttribute(this.namespace.AUTOWIDTH)==""),this.backgroundImageSrcCache_=Ae.usingFunction(h=>h.getAttribute(`${this.namespace.BACKGROUND}`)),this.breakpointsCache_=Ae.usingFunction(h=>h.getAttribute(this.namespace.BREAKPOINTS)),this.assetSrcCache_=Ae.usingFunction(h=>{let f=h.getAttribute(`${this.namespace.NAMESPACE}-src`);return f=this.processBackgroundImageSrc_(h,f),f=this.processFifeUrl_(h,f),f}),this.namespace={NAMESPACE:"mqn-lazyimage",STARTED:"mqn-lazyimage-started",MOBILE_FALLBACK:"mqn-lazyimage-mobilefallback",MOBILE_FALLBACK_CONDITION:"mqn-lazyimage-mobilefallback-condition",MOBILE_FALLBACK_CLASS:"mqn-lazyimage-mobilefallback-class",WEBP:"mqn-lazyimage-google-image-webp-fallback",AUTOWIDTH:"mqn-lazyimage-google-image-autowidth",BREAKPOINTS:"mqn-lazyimage-google-image-breakpoints",BACKGROUND:"mqn-lazyimage-background-src",WIDTHMULTIPLIER:"mqn-lazyimage-image-multiplier",HEIGHTORWIDTH:"mqn-lazyimage-height-or-width",RESOLVE_IMMEDIATE:"mqn-lazyimage-resolve-immediate",PRELOAD:"mqn-lazyimage-preload",PRELOAD_ON_FIRST_SCROLL:"mqn-lazyimage-preload-on-first-scroll",BACKGROUND_VIDEO_SLIDE:"mqn-background-video-slie-index",NO_PLAY:"mqn-lazyimage-video-no-play",VIDEO_AUTOWIDTH:"mqn-lazyimage-video-autowidth",VIDEO_AUTOWIDTH_MAX:"mqn-lazyimage-video-autowidth-max",VIDEO_AUTOWIDTH_POSTER:"mqn-lazyimage-video-autowidth-poster",MASK:"mqn-lazyimage-mask"},this.domWatcher=new Y1.DomWatcher,this.elements=null,this.videoElementCache={},this.videoQueue=new Set,this.webpSupported=Vl(),this.webmSupported=this.isWebmSupported_(),this.optimized=!!n.mqnLazyimageOptimized,this.inView=!1,this.imageLoadingStarted=!1,this.loadingComplete=!1,this.topOffset=n.mqnLazyimageTopOffset,this.loadTopOffset=n.mqnLazyimageLoadTopOffset,this.loadedCssClass=n.mqnLazyimageLoadedClass,this.inviewCssClass=n.mqnLazyimageInviewClass,this.inviewImminentCssClass=n.mqnLazyimageInviewImminentClass,this.inviewAndLoadedCssClass=n.mqnLazyimageInviewAndLoadedClass,this.waitForFirstScroll=n.mqnLazyimageWaitForFirstScroll!==void 0,this.autowidthRounding=+n.mqnLazyimageAutowidth||10,this.autowidthMax=16383,this.lazyLoadVideos=n.mqnLazyimageVideo!==void 0,this.videoImageCache={},this.mediaQueryRemovers=[],this.windowScrollRemover=null,this.windowResizeListener=null,this.autowidthElements=[],this.videoAutoWidthElements=[],this.breakpointElements=[],this.hasScrolled=!1,this.IMAGE_LOAD_CLASS=j.mqnCssName("mqn-image-loaded"),this.backgroundImageQueue=new Set,this.imageQueue=new Set,this.windowSize=window.innerWidth,this.collectElements_(),this.preloadImages_();let l,c=h=>{o.clearTimeout(l),this.windowSize!==window.innerWidth&&(l=o.setTimeout(()=>{this.windowSize=window.innerWidth,this.loadQueuedVideos_(),this.loadQueuedBackgroundImages_(),this.loadQueuedInlineImages_(),this.recalculateAutoWidthElements_(),this.recalculateVideoAutoWidthElements_(),this.recalculateBreakpointElements_()},500))};if(window.MQN_RESIZER?(window.MQN_RESIZER.addListener(c),this.windowResizeListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(c)}):(o.addEventListener("resize",c,{passive:!0}),this.windowResizeListener=()=>o.removeEventListener("resize",c)),r.mqnLazyimageLoadOn!==void 0)r.$watch("mqnLazyimageLoadOn",h=>{!this.imageLoadingStarted&&h&&this.loadImages_()});else{if(St.turnOffLazyImage()){this.loadImages_();return}let h=window.innerHeight*2;this.evScroll=v_.elementVisibility.inview(this.el,{rootMargin:`${h}px`}),this.evScroll.readyPromise.then(()=>{this.checkElInView_()}),this.domWatcher.add({element:window,on:"one-time-scroll",callback:()=>{this.hasScrolled||this.preloadOnFirstScroll_(),this.hasScrolled=!0,this.domWatcher.remove("one-time-scroll"),this.checkElInView_()},eventOptions:{passive:!0}}),this.domWatcher.add({element:window,on:"scroll",callback:()=>{window.setTimeout(()=>{this.checkElInView_()})},runWhen:()=>this.evScroll.state().ready&&this.evScroll.state().inview,eventOptions:{passive:!0}})}if(this.el.setAttribute(this.namespace.STARTED,""),this.optimized){let h=window.innerHeight*2;this.ev=v_.elementVisibility.inview(this.el,{rootMargin:`${h}px 0px`},(f,u,m)=>{u.isIntersecting&&(this.optimizedLoad(),m())}),this.windowScrollRemover&&this.windowScrollRemover()}r.$on("$destroy",()=>this.dispose_())}checkOnQueuedAssets_(){(this.videoQueue.size||this.backgroundImageQueue.size||this.imageQueue.size)&&this.rl_.measure(()=>{this.rl_.cleanup(()=>this.checkOnQueuedAssets_()),this.loadQueuedVideos_(),this.loadQueuedBackgroundImages_(),this.loadQueuedInlineImages_()})}collectElements_(){this.elements=Array.prototype.slice.call(this.el.querySelectorAll(`[${this.namespace.NAMESPACE}-src],
             img[${this.namespace.NAMESPACE}-srcset],
             source[${this.namespace.NAMESPACE}-srcset],
             [${this.namespace.BACKGROUND}]`)),this.elements=this.elements.filter(e=>{let r;for(;e;){if(r=e.parentElement,r.getAttribute(`${this.namespace.NAMESPACE}`)=="")return e=null,r==this.el;e=r}}),this.elements.forEach(e=>{if(e.nodeName=="SOURCE"){let r=e.parentElement;if(r.hasAttribute(this.namespace.VIDEO_AUTOWIDTH)){if(!_t(e,!0))return;let n=e.getAttribute(`${this.namespace.NAMESPACE}-src`),s=r.offsetWidth,o=Math.ceil(s/50)*50,a=+r.getAttribute(this.namespace.VIDEO_AUTOWIDTH_MAX)||1900;a=Math.ceil(a/50)*50,o=Math.min(a,o),o==0?n=n.replace(".mp4",".jpg"):n=n.replace(".mp4","-"+o+".jpg"),r.setAttribute("poster",n)}}})}addInviewAndLoadingClass_(){this.inView&&this.loadingComplete&&this.inviewAndLoadedCssClass&&this.rl_.anyMutate(()=>{this.el.classList.add(this.inviewAndLoadedCssClass),this.$timeout(()=>{this.$scope.$apply(this.$scope.mqnLazyimageLoadedAndInview)})})}preloadImages_(){this.preloadAttributedImages(this.namespace.PRELOAD)}preloadOnFirstScroll_(){this.preloadAttributedImages(this.namespace.PRELOAD_ON_FIRST_SCROLL)}preloadAttributedImages(e){if(this.imageLoadingStarted||!this.elements)return;let r=[];this.elements.forEach(n=>{n.getAttribute(`${e}`)==""?this.loadImage_(n):r.push(n)}),this.elements=r}checkElInView_(){if(!this.optimized){if(this.inviewImminentCssClass&&ht.isElementInView(this.el,-.5)&&(this.rl_.anyMutate(()=>{this.el.classList.add(this.inviewImminentCssClass)}),this.inviewImminentCssClass=!1),ht.isElementInView(this.el,this.loadTopOffset)&&!this.imageLoadingStarted)if(this.waitForFirstScroll&&!this.hasScrolled)if(ht.isElementInView(this.el,0)&&!this.imageLoadingStarted)this.addInviewAndLoadingClass_(),this.loadImages_();else return;else this.addInviewAndLoadingClass_(),this.loadImages_();ht.isElementInView(this.el,this.topOffset)&&!this.inView&&(this.inView=!0,this.inviewCssClass&&this.rl_.anyMutate(()=>this.el.classList.add(this.inviewCssClass)),this.addInviewAndLoadingClass_()),this.inView&&this.imageLoadingStarted&&this.windowScrollRemover&&this.windowScrollRemover()}}optimizedLoad(){this.inviewAndLoadedCssClass&&this.el.classList.add(this.inviewAndLoadedCssClass),this.loadImages_()}loadComplete_(){this.loadingComplete=!0,this.addInviewAndLoadingClass_(),this.loadedCssClass&&this.rl_.anyMutate(()=>this.el.classList.add(this.loadedCssClass)),this.$timeout(()=>{this.$scope.$apply(this.$scope.mqnLazyimageLoaded)})}loadImages_(){if(!this.elements)return;this.imageLoadingStarted=!0;let e=[];this.elements.forEach(r=>{e.push(this.loadImage_(r))}),Promise.all(e).then(()=>{this.loadComplete_()}),this.checkOnQueuedAssets_()}loadVideoElement_(e,r){if(!_t(e,!0)){this.videoQueue.add(e);return}let n=e.getAttribute(this.namespace.MOBILE_FALLBACK),s=e.getAttribute(this.namespace.MOBILE_FALLBACK_CONDITION);if(n&&s){let o=c=>{if(c.matches)if(this.videoImageCache[n])this.videoImageCache[n].image.style.display="inline-block",this.videoImageCache[n].video.style.display="none";else{let f=new Image,u=()=>{let m=e.getAttribute(this.namespace.MOBILE_FALLBACK_CLASS);this.rl_.anyMutate(()=>{f.classList.add(this.IMAGE_LOAD_CLASS),f.classList.add(m),e.parentNode.insertBefore(f,e),e.style.display="none",r&&r()})};f.addEventListener("load",u,{once:!0}),f.src=n,this.videoImageCache[n]={},this.videoImageCache[n].image=f,this.videoImageCache[n].video=e}else{this.rl_.anyMutate(()=>{e.style.display="block",this.videoImageCache[n]&&(this.videoImageCache[n].image.style.display="none")});let f=e.getElementsByTagName("SOURCE")[0],u=f.getAttribute(`${this.namespace.NAMESPACE}-src`);u&&this.rl_.anyMutate(()=>f.setAttribute("src",u)),this.rewriteSourcesWithTranscodedVideos(e,u),e.load(),e.addEventListener("canplaythrough",()=>{!e.hasAttribute(this.namespace.BACKGROUND_VIDEO_SLIDE)&&!e.hasAttribute(this.namespace.NO_PLAY)&&e.play(),r&&r()},{once:!0})}},a=this.$window.matchMedia(s);a.addListener(o);let l=()=>{a.removeListener(o)};this.mediaQueryRemovers.push(l),o(this.$window.matchMedia(s))}else this.loadVideoElementWithNoFallback_(e,r),e.hasAttribute(this.namespace.VIDEO_AUTOWIDTH)&&this.videoAutoWidthElements.push(e)}rewriteSourcesWithTranscodedVideos(e){if(!(jd.isIOS()||jd.isAndroid()&&window.innerWidth<=1e3))return;let n=e.querySelector("source"),s=n.getAttribute("src");if(!s||!s.startsWith("https://storage.googleapis.com/mannequin/2018/exports/"))return;let o=s.split("/").reverse()[0]+".transcoded.mp4",a="https://storage.googleapis.com/mannequin/2018/transcoded-videos/max-1000-width/"+o,l=n.cloneNode();l.setAttribute("src",a),this.rl_.anyMutate(()=>{e.insertBefore(l,e.firstChild)})}loadVideoElementWithNoFallback_(e,r,n){this.rl_.measure(()=>{if(!_t(e,!0)){r&&r();return}Array.from(e.querySelectorAll("source")).forEach(o=>{let a=o.getAttribute(`${this.namespace.NAMESPACE}-src`);if(St.lazyVideoBustCache()&&(a+="?"+Date.now()),e.hasAttribute(this.namespace.VIDEO_AUTOWIDTH)){let l=e.offsetWidth,c=Math.ceil(l/50)*50,h=+e.getAttribute(this.namespace.VIDEO_AUTOWIDTH_MAX)||1900;h=Math.ceil(h/50)*50,c=Math.min(h,c),a=a.replace(".mp4","-"+c+".mp4")}a&&this.rl_.anyMutate(()=>o.setAttribute("src",a)),this.rewriteSourcesWithTranscodedVideos(e,a),e.load(),e.addEventListener("canplaythrough",()=>{let l=e.hasAttribute(this.namespace.NO_PLAY);(!e.hasAttribute(this.namespace.BACKGROUND_VIDEO_SLIDE)&&!l||n)&&e.play(),r&&r()},{once:!0})})})}recalculateVideoAutoWidthElements_(){this.videoAutoWidthElements&&this.videoAutoWidthElements.forEach(e=>{this.loadVideoElementWithNoFallback_(e,null,!0)})}isWebmSupported_(){return document.createElement("video").canPlayType('video/webm; codecs="vp8, vorbis"')!==""}getFifeParams_(e){let n=e.split("=")[1];return n?n.split("-"):[]}replaceFifeParams_(e,r){let s=e.split("=")[0],o;r.forEach(h=>{h.charAt(0)=="w"&&(o=h)});let a=r.filter(h=>h.charAt(0)!=="w");a.push(o);let l=a.join("-"),c=s+"="+l;return!St.isProd()&&!c.includes("?")&&(c+="?staging"),c}processWebp_(e,r,n){if(this.webpSupported&&!n||!r)return e;let s=this.getFifeParams_(e),o=["rw","rwu","rwa"],a=s.filter(h=>o.indexOf(h)<=-1),l=r.split(","),c=a.concat(l);return this.replaceFifeParams_(e,c)}processWebPFallBackForBackground_(e,r){if(jd.isChrome())return r;let n=e.getAttribute(this.namespace.WEBP);return r=this.processWebp_(r,n,!0),r}processAutoWidth(e,r){if(!Zt.isFifeUrl(r)||r.includes("=s0"))return r;let n=e.offsetWidth;n==0&&(n=window.innerWidth),e.getAttribute(this.namespace.HEIGHTORWIDTH)==""&&(n=Math.max(n,e.offsetHeight)),this.$window.devicePixelRatio&&(n*=Math.min(2,this.$window.devicePixelRatio));let o=e.getAttribute(this.namespace.WIDTHMULTIPLIER);o&&(n*=+o),n=parseInt(n),n=Math.ceil(n/this.autowidthRounding)*this.autowidthRounding,n=Math.min(n,this.autowidthMax);let l=this.getFifeParams_(r).concat([`w${n}`]);return this.replaceFifeParams_(r,l)}loadQueuedInlineImages_(){this.imageQueue.forEach(e=>{_t(e,!0)&&this.loadInlineImage_(e)})}loadQueuedBackgroundImages_(){this.backgroundImageQueue.forEach(e=>{if(_t(e,!0)){let r=e.getAttribute(this.namespace.BACKGROUND);this.rl_.anyMutate(()=>{e.style.backgroundImage=`url(${r})`,e.classList.add(this.IMAGE_LOAD_CLASS)}),this.backgroundImageQueue.delete(e)}})}loadQueuedVideos_(){this.videoQueue.forEach(e=>{_t(e,!0)&&(this.loadVideoElement_(e),this.videoQueue.delete(e))})}processBreakpointWidth(e,r){let n=window.innerWidth,o=this.getBreakpoints_(e).split(","),a=+o[0].split("|")[1];o.forEach(h=>{let f=h.split("|"),u=+f[0],m=+f[1];n>=u&&(a=m)});let c=this.getFifeParams_(r).concat([`w${a}`]);return this.replaceFifeParams_(r,c)}recalculateAutoWidthElements_(){this.autowidthElements&&this.autowidthElements.forEach(e=>{if(!e)return;let r=this.getBackgroundImageSrc_(e);if(r){let n=this.processAutoWidth(e,r);if(r==n&&Zt.isFifeUrl(n))return;window.setTimeout(()=>{n=this.processWebPFallBackForBackground_(e,n),_t(e,!0)&&this.rl_.anyMutate(()=>{e.style.backgroundImage=`url(${n})`})})}else{let n=e.src;if(n=this.processAutoWidth(e,n),r==n)return;this.rl_.anyMutate(()=>e.src=n)}})}recalculateBreakpointElements_(){this.breakpointElements&&this.breakpointElements.forEach(e=>{if(!e)return;let r=this.getBackgroundImageSrc_(e);if(r){let n=this.processBreakpointWidth(e,r);if(r==n)return;window.setTimeout(()=>{n=this.processWebPFallBackForBackground_(e,n),_t(e,!0)&&this.rl_.anyMutate(()=>{e.style.backgroundImage=`url(${n})`})})}else{let n=e.src;if(n=this.processBreakpointWidth(e,n),r==n)return;this.rl_.anyMutate(()=>e.src=n)}})}loadIframeImage_(e,r){let n=e.getAttribute(`${this.namespace.NAMESPACE}-src`);n&&this.rl_.anyMutate(()=>{e.setAttribute("src",n),r()})}loadSourceAsset_(e,r){let n=e.parentElement;if(this.lazyLoadVideos&&n.nodeName=="VIDEO")return this.loadVideoElement_(n,r);let s=e.getAttribute(`${this.namespace.NAMESPACE}-srcset`),o=e.getAttribute(`${this.namespace.NAMESPACE}-src`);this.rl_.anyMutate(()=>{s&&e.setAttribute("srcset",s),o&&e.setAttribute("src",o),r()})}getAssetSrc_(e){return this.assetSrcCache_.get(e)}processBackgroundImageSrc_(e,r){let n=this.getBackgroundImageSrc_(e);return n||r}processFifeUrl_(e,r){if(!Zt.isFifeUrl(r))return r;let n=r,s=e.getAttribute(this.namespace.WEBP);return s&&(n=this.processWebp_(n,s)),this.isAutoWidthElement_(e)&&(n=this.processAutoWidth(e,n)),this.getBreakpoints_(e)&&(n=this.processBreakpointWidth(e,n)),n=Zt.addFifeUrlParams(n),n}isAutoWidthElement_(e){return this.isAutoWidthElementCache_.get(e)}getBackgroundImageSrc_(e){return this.backgroundImageSrcCache_.get(e)}getBreakpoints_(e){return this.breakpointsCache_.get(e)}loadBackgroundImage_(e,r){let n=this.getAssetSrc_(e);if(this.isAutoWidthElement_(e)&&this.autowidthElements.push(e),this.getBreakpoints_(e)&&this.breakpointElements.push(e),!_t(e,!0))this.rl_.anyMutate(()=>{e.setAttribute(this.namespace.BACKGROUND,n),r()}),this.backgroundImageQueue.add(e);else{this.rl_.anyMutate(()=>e.style.backgroundImage=`url(${n})`);let s=new Image,o=()=>{this.rl_.anyMutate(()=>{e.classList.add(this.IMAGE_LOAD_CLASS),r()})};s.addEventListener("load",o,{once:!0});let a=()=>r();s.addEventListener("error",a,{once:!0}),this.rl_.anyMutate(()=>s.src=n)}}loadInlineImage_(e,r=kG){let n=new Image,s=()=>{this.destroyed_||(this.isAutoWidthElement_(e)&&this.autowidthElements.push(n),this.getBreakpoints_(e)&&this.breakpointElements.push(n),this.rl_.anyMutate(()=>{n.classList.add(this.IMAGE_LOAD_CLASS),e.parentNode&&e.parentNode.replaceChild(n,e),this.imageQueue.delete(e),r()}))};n.addEventListener("load",s,{once:!0});let o=()=>r();n.addEventListener("error",o,{once:!0}),Array.prototype.slice.call(e.attributes).concat().forEach(c=>{let h=c.name.replace(`${this.namespace.NAMESPACE}-`,"");if(c.name===this.namespace.MASK&&c.value.startsWith("http")){let m=this.processAutoWidth(e,c.value);jd.isFirefox()||(n.style.webkitMaskImage=`url(${m})`),n.style.maskImage=`url(${m})`}if(["src","width","height","mask"].indexOf(h)>=0)return;["google-image-breakpoints","google-image-autowidth","alt","aria-label","google-image-webp-fallback"].indexOf(h)>=0&&(h=c.name),n.setAttribute(h,c.value)});let l=this.getAssetSrc_(e);this.rl_.anyMutate(()=>n.src=l)}loadImage_(e){return new Promise((r,n)=>{if(e.getAttribute(this.namespace.RESOLVE_IMMEDIATE)==""&&r(),e.nodeName=="IFRAME"){this.loadIframeImage_(e,r);return}if(e.nodeName=="SOURCE")return this.loadSourceAsset_(e,r);if(this.getBackgroundImageSrc_(e)){this.loadBackgroundImage_(e,r);return}if(e.src){let a=this.getAssetSrc_(e);this.rl_.anyMutate(()=>e.src=a);return}if(!_t(e,!0)){this.imageQueue.add(e),r();return}this.loadInlineImage_(e,r)})}dispose_(){this.destroyed_=!0,this.rl_.destroy(),this.isAutoWidthElementCache_.clear(),this.isAutoWidthElementCache_=null,this.backgroundImageSrcCache_.clear(),this.backgroundImageSrcCache_=null,this.breakpointsCache_.clear(),this.breakpointsCache_=null,this.assetSrcCache_.clear(),this.assetSrcCache_=null,this.elements=null,this.videoElementCache=null,this.autowidthElements=null,this.videoAutoWidthElements=null,this.breakpointElements=null,this.windowScrollRemover&&this.windowScrollRemover(),this.windowResizeListener&&this.windowResizeListener(),this.ev&&this.ev.dispose(),this.evScroll&&this.evScroll.dispose(),this.domWatcher&&this.domWatcher.dispose(),this.mediaQueryRemovers&&this.mediaQueryRemovers.forEach(e=>{e()})}},VG=function(){return{restrict:"A",scope:{mqnLazyimageLoadOn:"=mqnLazyimageLoadOn",mqnLazyimageLoaded:"&mqnLazyimageLoaded",mqnLazyimageLoadedAndInview:"&mqnLazyimageLoadedAndInview"},controller:X1}},Z1=VG;var Q1=re(fa()),K1=re(yt());var J1=class{static get $inject(){return["$scope","$element"]}constructor(e,r){this.$scope=e,this.el=r[0],this.rl_=se.getDestroyableInstance(),this.url=this.el.getAttribute("mqn-lottie-url"),this.imagePath=this.el.getAttribute("mqn-lottie-image-path"),this.loop=this.el.getAttribute("mqn-lottie-loop")!==null,this.pauseAtFrame=this.el.getAttribute("mqn-lottie-pause-at-frame"),this.autoplay=!Boolean(this.pauseAtFrame),this.progressVar_=this.el.getAttribute("mqn-lottie-progress-var")||null,this.playTrigger_=this.el.getAttribute("mqn-lottie-play-trigger")||null,this.canvasMode=!!this.el.getAttribute("mqn-lottie-canvas-mode")||null,this.loaded=!1,this.lottie,this.domWatcher=new K1.DomWatcher,this.init(),e.$on("$destroy",()=>this.dispose_())}init(){fetch(this.url).then(e=>e.json()).then(e=>{this.loaded=!0;let r={container:this.el,loop:this.loop,autoplay:this.autoplay,animationData:e,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};this.canvasMode&&(r.renderer="canvas"),this.imagePath&&(r.assetsPath=this.imagePath),this.lottie=Q1.default.loadAnimation(r),this.el.setAttribute("mqn-lottie-loaded",""),this.pauseAtFrame&&this.lottie.addEventListener("DOMLoaded",function(){this.lottie.playSegments([0,this.pauseAtFrame],!0)}.bind(this)),this.domWatcher.add({element:window,on:"smartResize",eventOptions:{passive:!0},callback:this.onResize.bind(this),id:"resize"}),this.progressVar_!==null?this.progressVarLoop_():this.playTrigger_!==null&&this.playTriggerLoop_()}).catch(e=>{console.error("Failed to load Lottie",e),this.lottie=!1})}progressVarLoop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.progressVarLoop_());let e=ut(this.el,this.progressVar_),n=new ce(0,this.lottie.getDuration()*1e3).getPercentAsValue(e);this.rl_.mutate(()=>this.lottie.goToAndStop(n))})}playTriggerLoop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.playTriggerLoop_());let e=ut(this.el,this.playTrigger_);this.rl_.mutate(()=>{parseInt(e)>0?this.lottie.playSegments([0,this.pauseAtFrame],!0):this.loop?this.lottie.stop():this.lottie.goToAndStop(0)})})}onResize(){this.lottie.resize()}dispose_(){this.domWatcher&&this.domWatcher.dispose(),this.rl_.destroy()}},Yd=J1;function y_(){return{restrict:"A",controller:Yd}}var fae=re(rM()),A_=re(Et()),_n=re(Ye()),mM=re(yt()),gM=re(Bl());var dM=re(tu());function jG(t){return t.startsWith("https://lh3.googleusercontent.com")}var Ul=jG;var pM=class{constructor({multiplier:e}){this.multiplier=e||1}appendFifeParams(e,r){let n;return this.isNonUrl(e)||this.isNonFife(e)?e:(r?e.match(/\=rw/g)?n=e:/\=.+$/i.test(e)?n=e+"-rw":n=e+"=rw":e.match(/\=rw/)||e.match(/\=.+-rw/)?n=e.replace("=rw","").replace("-rw",""):n=e,n)}appendFifeWidth(e,r){if(r||(r=window.document.body.clientWidth),this.isNonFife(e)||this.isNonUrl(e))return e;let n=[1440,1144,760,480],s=window.devicePixelRatio,o=1440;return n.forEach(a=>{r<=a&&(o=a)}),e.match(/\=/)?e+="-w":e+="=w",e+=parseInt(o*s*this.multiplier),e}isNonFife(e){return/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(e)}isNonUrl(e){return e==""||!e}cleanFifeParams(e){return this.isNonFife(e)||this.isNonUrl(e)?e:e.replace(/\=.*/,"")}processImage(e){if(typeof e=="string"&&Ul(e)){let r=dM.default.isWebpSupported();e=this.cleanFifeParams(e),e=this.appendFifeParams(e,r),e=this.appendFifeWidth(e)}return e}},mi=pM;var vM=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.$window=s,this.$scope=n,this.$rootScope=e,this.$element=r,this.el=r[0],this.ev=A_.elementVisibility.inview(this.el,{rootMargin:"100px"}),this.cssVar_=this.el.getAttribute("data-css-progress-var")||null,this.delayImageLoad=!St.evBypassEnabled()&&!!this.el.getAttribute("data-delay-image-load")||null,this.ariaLabel=this.el.getAttribute("data-sequence-aria-label")||null,this.wombatImage=new mi(1),this.domWatcher=new mM.DomWatcher,this.domWatcher.add({element:window,on:"scroll",callback:_n.func.throttle(()=>this.onScroll(),48),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0},id:"scroll"}),this.sequenceCanvas=new gM.WebGlImageSequence(this.el,[{images:this.getProcessedSrcs_()}],{ariaLabel:this.ariaLabel}),this.onFirstLoadEv=A_.elementVisibility.inview(this.el,{rootMargin:window.innerHeight*2+"px"},(a,l,c)=>{if(l.isIntersecting){let h=()=>{let f=[];f.push(this.sequenceCanvas.load()),Promise.all(f).then(()=>{this.el.classList.add("loaded"),this.sequenceCanvas.renderByProgress(this.rafProgress.currentProgress)})};this.delayImageLoad?_n.dom.runAfterNotTopOfScreen(()=>{h()}):h(),c()}}),this.rafProgress=new _n.RafProgress(a=>this.onProgressUpdate(a));let o=this.getProgress();this.rafProgress.setCurrentProgress(o),this.domWatcher.run("scroll"),this.domWatcher.run("resize"),n.$on("$destroy",()=>this.dispose())}getProcessedSrcs_(){let e=_n.is.supportingWebp();return JSON.parse(this.el.getAttribute("data-sequence")).map(n=>this.wombatImage.appendFifeParams(n,e))}onScroll(){let e=this.getProgress();this.rafProgress.easeTo(e,.16,_n.EASE.linear)}getProgress(){return this.cssVar_!==null?parseFloat(ut(this.el,this.cssVar_)):_n.dom.getElementScrolledPercent(this.el)}onProgressUpdate(e){this.sequenceCanvas.renderByProgress(e)}dispose(){this.ev.dispose(),this.onFirstLoadEv.dispose(),this.domWatcher.dispose(),this.sequenceCanvas.dispose()}},YG=()=>({restrict:"A",controller:vM}),yM=YG;var _M=class{static get $inject(){return["$element","$scope","$attrs","$window"]}constructor(e,r,n,s){this.$scope=r,this.el=e[0],this.$window=s,this.rl_=se.getDestroyableInstance(),this.completeClass=n.mqnMinHeightScanComplete,this.items=Array.from(this.el.querySelectorAll("[mqn-min-height-item]")),this.variables=Array.from(this.el.querySelectorAll("[mqn-min-height-variable]")),this.windowSize=window.innerWidth,this.calculate_(),this.resizeDebouncer=null;let o=a=>{this.windowSize!==window.innerWidth&&(window.clearTimeout(this.resizeDebouncer),this.resizeDebouncer=window.setTimeout(()=>{this.windowSize=window.innerWidth,this.calculate_()},300))};window.MQN_RESIZER?(window.MQN_RESIZER.addListener(o),this.windowListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(o)}):(s.addEventListener("resize",o),this.windowListener=()=>{s.removeEventListener("resize",o)}),r.$on("$destroy",()=>{this.dispose_()})}calculate_(){let e=0;this.el.classList.remove(this.completeClass),this.el.style.opacity=0,this.items.forEach(r=>{let n=r.querySelector("[mqn-min-height-variable]");n.style.maxHeight="",n.style.opacity="0"}),window.setTimeout(()=>{this.rl_.measure(()=>{let r=0;this.items.forEach(n=>{let s=window.getComputedStyle(n),o=n.offsetHeight+parseInt(s.getPropertyValue("margin-top"))+parseInt(s.getPropertyValue("margin-bottom")),a=n.querySelector("[mqn-min-height-variable]");a.style.maxHeight=a.offsetHeight+"px",a.style.opacity="";let l=window.getComputedStyle(a),c=a.offsetHeight+parseInt(l.getPropertyValue("margin-top"))+parseInt(l.getPropertyValue("margin-bottom"));r=Math.max(r,c),e+=o-c}),e+=r}),this.rl_.mutate(()=>{this.el.classList.add(this.completeClass),this.el.style.minHeight=e+"px",this.el.style.maxHeight="",this.el.style.opacity=1})})}dispose_(){this.windowListener&&this.windowListener(),this.rl_.destroy()}},XG=function(){return{restrict:"A",controller:_M}},bM=XG;var wM=re(yt()),SM=re(Gi()),ZG="\u2026",mo=null,M_=0;function QG(){return M_+=1,mo||(mo=new wM.DomWatcher),mo}function KG(){M_-=1,mo&&M_<=0&&(mo.dispose(),mo=null)}function EM(){mo&&mo.run("resize")}function xM(){return{restrict:"A",scope:{mqnMultilineEllipsis:"="},link:(t,e)=>{let r=t.mqnMultilineEllipsis;if(!r||typeof r!="object")return;let n=e[0],s=n.textContent.trim();n.setAttribute("title",s);let o=QG(),a=()=>{JG(n,s,r)};o.add({id:"resize",element:window,on:"smartResize",callback:SM.func.debounce(a,300),eventOptions:{passive:!0}}),o.run("resize"),t.$on("$destroy",()=>{KG()})}}}function JG(t,e,r){let n=r.maxLines,s=r.wordBreak;t.textContent="";let o=e$(t,"line-height"),a=0;o&&o.endsWith("px")&&(a=window.parseInt(o)),t.style.maxHeight=a*n+"px";let l=e.split(" "),c=document.createElement("span");t.appendChild(c);let h=1;for(let f=0;f<l.length;f++){let u=l[f];if(c.textContent+=" "+u,c.offsetHeight>a){if(h>=n){if(c.style.display="inline-block",c.style.maxWidth="100%",c.style.whiteSpace="nowrap",s==="break-word"){let p=l.slice(f+1).join(" ");c.textContent+=" "+p,c.style.overflow="hidden",c.style.textOverflow="ellipsis"}else{let p=c.textContent.split(" "),g=p.slice(0,p.length-1).join(" ");c.textContent=g+ZG}break}let m=c.textContent.split(" "),d=m.slice(0,m.length-1).join(" ");c.textContent=d;let v=document.createElement("span");v.textContent=u,t.appendChild(document.createTextNode(" ")),t.appendChild(v),c=v,h+=1}}}function e$(t,e){return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var C_=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0;var ma=(t,e,r=null)=>{for(;e!==r;){let n=e.nextSibling;t.removeChild(e),e=n}};var Qi=`{{lit-${String(Math.random()).slice(2)}}}`,P_=`<!--${Qi}-->`,TM=new RegExp(`${Qi}|${P_}`),Hl="$lit$",ql=class{constructor(e,r){this.parts=[],this.element=r;let n=[],s=[],o=document.createTreeWalker(r.content,133,null,!1),a=0,l=-1,c=0,{strings:h,values:{length:f}}=e;for(;c<f;){let u=o.nextNode();if(u===null){o.currentNode=s.pop();continue}if(l++,u.nodeType===1){if(u.hasAttributes()){let m=u.attributes,{length:d}=m,v=0;for(let p=0;p<d;p++)AM(m[p].name,Hl)&&v++;for(;v-- >0;){let p=h[c],g=Zd.exec(p)[2],y=g.toLowerCase()+Hl,_=u.getAttribute(y);u.removeAttribute(y);let b=_.split(TM);this.parts.push({type:"attribute",index:l,name:g,strings:b}),c+=b.length-1}}u.tagName==="TEMPLATE"&&(s.push(u),o.currentNode=u.content)}else if(u.nodeType===3){let m=u.data;if(m.indexOf(Qi)>=0){let d=u.parentNode,v=m.split(TM),p=v.length-1;for(let g=0;g<p;g++){let y,_=v[g];if(_==="")y=Hn();else{let b=Zd.exec(_);b!==null&&AM(b[2],Hl)&&(_=_.slice(0,b.index)+b[1]+b[2].slice(0,-Hl.length)+b[3]),y=document.createTextNode(_)}d.insertBefore(y,u),this.parts.push({type:"node",index:++l})}v[p]===""?(d.insertBefore(Hn(),u),n.push(u)):u.data=v[p],c+=p}}else if(u.nodeType===8)if(u.data===Qi){let m=u.parentNode;(u.previousSibling===null||l===a)&&(l++,m.insertBefore(Hn(),u)),a=l,this.parts.push({type:"node",index:l}),u.nextSibling===null?u.data="":(n.push(u),l--),c++}else{let m=-1;for(;(m=u.data.indexOf(Qi,m+1))!==-1;)this.parts.push({type:"node",index:-1}),c++}}for(let u of n)u.parentNode.removeChild(u)}},AM=(t,e)=>{let r=t.length-e.length;return r>=0&&t.slice(r)===e},ru=t=>t.index!==-1,Hn=()=>document.createComment(""),Zd=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;var I_=133;function R_(t,e){let{element:{content:r},parts:n}=t,s=document.createTreeWalker(r,I_,null,!1),o=iu(n),a=n[o],l=-1,c=0,h=[],f=null;for(;s.nextNode();){l++;let u=s.currentNode;for(u.previousSibling===f&&(f=null),e.has(u)&&(h.push(u),f===null&&(f=u)),f!==null&&c++;a!==void 0&&a.index===l;)a.index=f!==null?-1:a.index-c,o=iu(n,o),a=n[o]}h.forEach(u=>u.parentNode.removeChild(u))}var t$=t=>{let e=t.nodeType===11?0:1,r=document.createTreeWalker(t,I_,null,!1);for(;r.nextNode();)e++;return e},iu=(t,e=-1)=>{for(let r=e+1;r<t.length;r++){let n=t[r];if(ru(n))return r}return-1};function MM(t,e,r=null){let{element:{content:n},parts:s}=t;if(r==null){n.appendChild(e);return}let o=document.createTreeWalker(n,I_,null,!1),a=iu(s),l=0,c=-1;for(;o.nextNode();)for(c++,o.currentNode===r&&(l=t$(e),r.parentNode.insertBefore(e,r));a!==-1&&s[a].index===c;){if(l>0){for(;a!==-1;)s[a].index+=l,a=iu(s,a);return}a=iu(s,a)}}var r$=new WeakMap;var ga=t=>typeof t=="function"&&r$.has(t);var Li={},Qd={};var va=class{constructor(e,r,n){this.__parts=[],this.template=e,this.processor=r,this.options=n}update(e){let r=0;for(let n of this.__parts)n!==void 0&&n.setValue(e[r]),r++;for(let n of this.__parts)n!==void 0&&n.commit()}_clone(){let e=C_?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),r=[],n=this.template.parts,s=document.createTreeWalker(e,133,null,!1),o=0,a=0,l,c=s.nextNode();for(;o<n.length;){if(l=n[o],!ru(l)){this.__parts.push(void 0),o++;continue}for(;a<l.index;)a++,c.nodeName==="TEMPLATE"&&(r.push(c),s.currentNode=c.content),(c=s.nextNode())===null&&(s.currentNode=r.pop(),c=s.nextNode());if(l.type==="node"){let h=this.processor.handleTextExpression(this.options);h.insertAfterNode(c.previousSibling),this.__parts.push(h)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,l.name,l.strings,this.options));o++}return C_&&(document.adoptNode(e),customElements.upgrade(e)),e}};var CM=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),n$=` ${Qi} `,ya=class{constructor(e,r,n,s){this.strings=e,this.values=r,this.type=n,this.processor=s}getHTML(){let e=this.strings.length-1,r="",n=!1;for(let s=0;s<e;s++){let o=this.strings[s],a=o.lastIndexOf("<!--");n=(a>-1||n)&&o.indexOf("-->",a+1)===-1;let l=Zd.exec(o);l===null?r+=o+(n?n$:P_):r+=o.substr(0,l.index)+l[1]+l[2]+Hl+l[3]+Qi}return r+=this.strings[e],r}getTemplateElement(){let e=document.createElement("template"),r=this.getHTML();return CM!==void 0&&(r=CM.createHTML(r)),e.innerHTML=r,e}};var Kd=t=>t===null||!(typeof t=="object"||typeof t=="function"),Jd=t=>Array.isArray(t)||!!(t&&t[Symbol.iterator]),nu=class{constructor(e,r,n){this.dirty=!0,this.element=e,this.name=r,this.strings=n,this.parts=[];for(let s=0;s<n.length-1;s++)this.parts[s]=this._createPart()}_createPart(){return new ep(this)}_getValue(){let e=this.strings,r=e.length-1,n=this.parts;if(r===1&&e[0]===""&&e[1]===""){let o=n[0].value;if(typeof o=="symbol")return String(o);if(typeof o=="string"||!Jd(o))return o}let s="";for(let o=0;o<r;o++){s+=e[o];let a=n[o];if(a!==void 0){let l=a.value;if(Kd(l)||!Jd(l))s+=typeof l=="string"?l:String(l);else for(let c of l)s+=typeof c=="string"?c:String(c)}}return s+=e[r],s}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}},ep=class{constructor(e){this.value=void 0,this.committer=e}setValue(e){e!==Li&&(!Kd(e)||e!==this.value)&&(this.value=e,ga(e)||(this.committer.dirty=!0))}commit(){for(;ga(this.value);){let e=this.value;this.value=Li,e(this)}this.value!==Li&&this.committer.commit()}},go=class{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(Hn()),this.endNode=e.appendChild(Hn())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=Hn()),e.__insert(this.endNode=Hn())}insertAfterPart(e){e.__insert(this.startNode=Hn()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(this.startNode.parentNode===null)return;for(;ga(this.__pendingValue);){let r=this.__pendingValue;this.__pendingValue=Li,r(this)}let e=this.__pendingValue;e!==Li&&(Kd(e)?e!==this.value&&this.__commitText(e):e instanceof ya?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):Jd(e)?this.__commitIterable(e):e===Qd?(this.value=Qd,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){let r=this.startNode.nextSibling;e=e??"";let n=typeof e=="string"?e:String(e);r===this.endNode.previousSibling&&r.nodeType===3?r.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){let r=this.options.templateFactory(e);if(this.value instanceof va&&this.value.template===r)this.value.update(e.values);else{let n=new va(r,e.processor,this.options),s=n._clone();n.update(e.values),this.__commitNode(s),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());let r=this.value,n=0,s;for(let o of e)s=r[n],s===void 0&&(s=new go(this.options),r.push(s),n===0?s.appendIntoPart(this):s.insertAfterPart(r[n-1])),s.setValue(o),s.commit(),n++;n<r.length&&(r.length=n,this.clear(s&&s.endNode))}clear(e=this.startNode){ma(this.startNode.parentNode,e.nextSibling,this.endNode)}},tp=class{constructor(e,r,n){if(this.value=void 0,this.__pendingValue=void 0,n.length!==2||n[0]!==""||n[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=r,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;ga(this.__pendingValue);){let r=this.__pendingValue;this.__pendingValue=Li,r(this)}if(this.__pendingValue===Li)return;let e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=Li}},rp=class extends nu{constructor(e,r,n){super(e,r,n);this.single=n.length===2&&n[0]===""&&n[1]===""}_createPart(){return new L_(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}},L_=class extends ep{},PM=!1;(()=>{try{let t={get capture(){return PM=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();var ip=class{constructor(e,r,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=r,this.eventContext=n,this.__boundHandleEvent=s=>this.handleEvent(s)}setValue(e){this.__pendingValue=e}commit(){for(;ga(this.__pendingValue);){let o=this.__pendingValue;this.__pendingValue=Li,o(this)}if(this.__pendingValue===Li)return;let e=this.__pendingValue,r=this.value,n=e==null||r!=null&&(e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive),s=e!=null&&(r==null||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),s&&(this.__options=s$(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=Li}handleEvent(e){typeof this.value=="function"?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}},s$=t=>t&&(PM?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);function O_(t){let e=_a.get(t.type);e===void 0&&(e={stringsArray:new WeakMap,keyString:new Map},_a.set(t.type,e));let r=e.stringsArray.get(t.strings);if(r!==void 0)return r;let n=t.strings.join(Qi);return r=e.keyString.get(n),r===void 0&&(r=new ql(t,t.getTemplateElement()),e.keyString.set(n,r)),e.stringsArray.set(t.strings,r),r}var _a=new Map;var vo=new WeakMap,D_=(t,e,r)=>{let n=vo.get(e);n===void 0&&(ma(e,e.firstChild),vo.set(e,n=new go(Object.assign({templateFactory:O_},r))),n.appendInto(e)),n.setValue(t),n.commit()};var F_=class{handleAttributeExpressions(e,r,n,s){let o=r[0];return o==="."?new rp(e,r.slice(1),n).parts:o==="@"?[new ip(e,r.slice(1),s.eventContext)]:o==="?"?[new tp(e,r.slice(1),n)]:new nu(e,r,n).parts}handleTextExpression(e){return new go(e)}},IM=new F_;typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");var LM=(t,e)=>`${t}--${e}`,np=!0;typeof window.ShadyCSS=="undefined"?np=!1:typeof window.ShadyCSS.prepareTemplateDom=="undefined"&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),np=!1);var l$=t=>e=>{let r=LM(e.type,t),n=_a.get(r);n===void 0&&(n={stringsArray:new WeakMap,keyString:new Map},_a.set(r,n));let s=n.stringsArray.get(e.strings);if(s!==void 0)return s;let o=e.strings.join(Qi);if(s=n.keyString.get(o),s===void 0){let a=e.getTemplateElement();np&&window.ShadyCSS.prepareTemplateDom(a,t),s=new ql(e,a),n.keyString.set(o,s)}return n.stringsArray.set(e.strings,s),s},c$=["html","svg"],h$=t=>{c$.forEach(e=>{let r=_a.get(LM(e,t));r!==void 0&&r.keyString.forEach(n=>{let{element:{content:s}}=n,o=new Set;Array.from(s.querySelectorAll("style")).forEach(a=>{o.add(a)}),R_(n,o)})})},OM=new Set,u$=(t,e,r)=>{OM.add(t);let n=r?r.element:document.createElement("template"),s=e.querySelectorAll("style"),{length:o}=s;if(o===0){window.ShadyCSS.prepareTemplateStyles(n,t);return}let a=document.createElement("style");for(let h=0;h<o;h++){let f=s[h];f.parentNode.removeChild(f),a.textContent+=f.textContent}h$(t);let l=n.content;r?MM(r,a,l.firstChild):l.insertBefore(a,l.firstChild),window.ShadyCSS.prepareTemplateStyles(n,t);let c=l.querySelector("style");if(window.ShadyCSS.nativeShadow&&c!==null)e.insertBefore(c.cloneNode(!0),e.firstChild);else if(r){l.insertBefore(a,l.firstChild);let h=new Set;h.add(a),R_(r,h)}},DM=(t,e,r)=>{if(!r||typeof r!="object"||!r.scopeName)throw new Error("The `scopeName` option is required.");let n=r.scopeName,s=vo.has(e),o=np&&e.nodeType===11&&!!e.host,a=o&&!OM.has(n),l=a?document.createDocumentFragment():e;if(D_(t,l,Object.assign({templateFactory:l$(n)},r)),a){let c=vo.get(l);vo.delete(l);let h=c.value instanceof va?c.value.template:void 0;u$(n,l,h),ma(e,e.firstChild),e.appendChild(l),vo.set(e,c)}!s&&o&&window.ShadyCSS.styleElement(e.host)};var FM;window.JSCompiler_renameProperty=(t,e)=>t;var N_={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return t!==null;case Number:return t===null?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},NM=(t,e)=>e!==t&&(e===e||t===t),k_={attribute:!0,type:String,converter:N_,reflect:!1,hasChanged:NM},V_=1,B_=1<<2,U_=1<<3,H_=1<<4,q_="finalized",ba=class extends HTMLElement{constructor(){super();this.initialize()}static get observedAttributes(){this.finalize();let e=[];return this._classProperties.forEach((r,n)=>{let s=this._attributeNameForProperty(n,r);s!==void 0&&(this._attributeToPropertyMap.set(s,n),e.push(s))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;let e=Object.getPrototypeOf(this)._classProperties;e!==void 0&&e.forEach((r,n)=>this._classProperties.set(n,r))}}static createProperty(e,r=k_){if(this._ensureClassProperties(),this._classProperties.set(e,r),r.noAccessor||this.prototype.hasOwnProperty(e))return;let n=typeof e=="symbol"?Symbol():`__${e}`,s=this.getPropertyDescriptor(e,n,r);s!==void 0&&Object.defineProperty(this.prototype,e,s)}static getPropertyDescriptor(e,r,n){return{get(){return this[r]},set(s){let o=this[e];this[r]=s,this.requestUpdateInternal(e,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||k_}static finalize(){let e=Object.getPrototypeOf(this);if(e.hasOwnProperty(q_)||e.finalize(),this[q_]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){let r=this.properties,n=[...Object.getOwnPropertyNames(r),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(r):[]];for(let s of n)this.createProperty(s,r[s])}}static _attributeNameForProperty(e,r){let n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}static _valueHasChanged(e,r,n=NM){return n(e,r)}static _propertyValueFromAttribute(e,r){let n=r.type,s=r.converter||N_,o=typeof s=="function"?s:s.fromAttribute;return o?o(e,n):e}static _propertyValueToAttribute(e,r){if(r.reflect===void 0)return;let n=r.type,s=r.converter;return(s&&s.toAttribute||N_.toAttribute)(e,n)}initialize(){this._updateState=0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,r)=>{if(this.hasOwnProperty(r)){let n=this[r];delete this[r],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(r,n)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,r)=>this[r]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,r,n){r!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,r,n=k_){let s=this.constructor,o=s._attributeNameForProperty(e,n);if(o!==void 0){let a=s._propertyValueToAttribute(r,n);if(a===void 0)return;this._updateState=this._updateState|U_,a==null?this.removeAttribute(o):this.setAttribute(o,a),this._updateState=this._updateState&~U_}}_attributeToProperty(e,r){if(this._updateState&U_)return;let n=this.constructor,s=n._attributeToPropertyMap.get(e);if(s!==void 0){let o=n.getPropertyOptions(s);this._updateState=this._updateState|H_,this[s]=n._propertyValueFromAttribute(r,o),this._updateState=this._updateState&~H_}}requestUpdateInternal(e,r,n){let s=!0;if(e!==void 0){let o=this.constructor;n=n||o.getPropertyOptions(e),o._valueHasChanged(this[e],r,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,r),n.reflect===!0&&!(this._updateState&H_)&&(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):s=!1}!this._hasRequestedUpdate&&s&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,r){return this.requestUpdateInternal(e,r),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|B_;try{await this._updatePromise}catch(r){}let e=this.performUpdate();return e!=null&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&B_}get hasUpdated(){return this._updateState&V_}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1,r=this._changedProperties;try{e=this.shouldUpdate(r),e?this.update(r):this._markUpdated()}catch(n){throw e=!1,this._markUpdated(),n}e&&(this._updateState&V_||(this._updateState=this._updateState|V_,this.firstUpdated(r)),this.updated(r))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~B_}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((r,n)=>this._propertyToAttribute(n,this[n],r)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}};FM=q_;ba[FM]=!0;var f$=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?Object.assign(Object.assign({},e),{finisher(r){r.createProperty(e.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},d$=(t,e,r)=>{e.constructor.createProperty(r,t)};function st(t){return(e,r)=>r!==void 0?d$(t,e,r):f$(t,e)}var kM=Element.prototype,yle=kM.msMatchesSelector||kM.webkitMatchesSelector;var sp=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,VM=Symbol(),BM=class{constructor(e,r){if(r!==VM)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return this._styleSheet===void 0&&(sp?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}},UM=t=>new BM(String(t),VM);(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");var HM={},op=class extends ba{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;let e=this.getStyles();if(Array.isArray(e)){let r=(o,a)=>o.reduceRight((l,c)=>Array.isArray(c)?r(c,l):(l.add(c),l),a),n=r(e,new Set),s=[];n.forEach(o=>s.unshift(o)),this._styles=s}else this._styles=e===void 0?[]:[e];this._styles=this._styles.map(r=>{if(r instanceof CSSStyleSheet&&!sp){let n=Array.prototype.slice.call(r.cssRules).reduce((s,o)=>s+o.cssText,"");return UM(n)}return r})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){let e=this.constructor._styles;e.length!==0&&(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(r=>r.cssText),this.localName):sp?this.renderRoot.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):this._needsShimAdoptedStyleSheets=!0)}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(e){let r=this.render();super.update(e),r!==HM&&this.constructor.render(r,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(n=>{let s=document.createElement("style");s.textContent=n.cssText,this.renderRoot.appendChild(s)}))}render(){return HM}};op.finalized=!0;op.render=DM;op.shadowRootOptions={mode:"open"};var z_=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,W_=z_&&self.XRSession.prototype.requestHitTestSource,ap=self.ResizeObserver!=null,lp=self.IntersectionObserver!=null,zl=W_,Ile=(()=>{let t=navigator.userAgent||navigator.vendor||self.opera,e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e})(),qM=Boolean(self.OffscreenCanvas),zM=Boolean(self.OffscreenCanvas)&&Boolean(self.OffscreenCanvas.prototype.transferToImageBitmap),WM=/android/i.test(navigator.userAgent),cp=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,GM=(()=>{let t=document.createElement("a");return Boolean(t.relList&&t.relList.supports&&t.relList.supports("ar"))})(),$M=cp&&/CriOS\//.test(navigator.userAgent),jM=cp&&/Safari\//.test(navigator.userAgent),Rle=!window.ActiveXObject&&"ActiveXObject"in window;var YM=`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;var XM=`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;var ZM=`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;var QM=document.createElement("template");QM.innerHTML=`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This ruleset is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
}

.annotation-container {
  position: absolute;
  pointer-events: none;
  top: 0;
}

canvas {
  width: 100%;
  height: 100%;
  display: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/GoogleWebComponents/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

canvas.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  opacity: 0;
  transition: opacity 0.3s 0.3s;
  background-color: inherit;
}

.slot.poster.show {
  opacity: 1;
  transition: none;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: var(--poster-color, inherit);
  background-image: var(--poster-image, none);
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .mask {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--progress-mask, #fff);
  transition: opacity 0.3s;
  opacity: 0.2;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar:before {
  content: '';
  display: block;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));

  transition: none;
  transform-origin: top left;
  transform: translateY(0);
}

#default-progress-bar > .bar.hide:before {
  transition: transform 0.3s 1s;
  transform: translateY(-100%);
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  align-items: center;
  justify-content: center;

  opacity: 0;
  will-change: opacity;
  overflow: hidden;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.slot.interaction-prompt > .animated-container {
  will-change: transform, opacity;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled),
.fullscreen .slot.ar-button {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
}

:not(.fullscreen) .slot.exit-fullscreen-button {
  display: none;
}

#default-exit-fullscreen-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 16px;
  left: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-fullscreen-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <canvas tabindex="1"
    aria-label="A depiction of a 3D model"
    aria-live="polite">
  </canvas>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Activate to view in 3D!"></button>
    </slot>
  </div>

  <div class="slot progress-bar">
    <slot name="progress-bar">
      <div id="default-progress-bar" aria-hidden="true">
        <div class="mask"></div>
        <div class="bar"></div>
      </div>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View this 3D model up close">
        ${ZM}
      </a>
    </slot>
  </div>

  <div class="slot exit-fullscreen-button">
    <slot name="exit-fullscreen-button">
      <a id="default-exit-fullscreen-button"
          tabindex="3"
          aria-label="Exit fullscreen"
          aria-hidden="true">
        ${YM}
      </a>
    </slot>
  </div>

  <div class="slot interaction-prompt">
    <div class="animated-container" part="interaction-prompt">
      <slot name="interaction-prompt" aria-hidden="true">
        ${XM}
      </slot>
    </div>
  </div>

  <div class="slot default">
    <slot></slot>
  </div>
</div>`;var KM=t=>{let e=document.createElement("template");return e.innerHTML=QM.innerHTML,window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,t),e};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(n!=null)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e});var p$="113";var m$=0,JM=1,g$=2;var eC=1,G_=2,su=3,bn=0,tr=1,yo=2,tC=1;var rC=0,v$=1,wa=2,qn=0,ou=1,iC=2,nC=3,sC=4,y$=5,Wl=100,_$=101,b$=102,oC=103,aC=104,w$=200,S$=201,E$=202,x$=203,lC=204,cC=205,T$=206,A$=207,M$=208,C$=209,P$=210,I$=0,R$=1,L$=2,$_=3,O$=4,D$=5,F$=6,N$=7,hp=0,k$=1,V$=2,up=0,j_=1,B$=2,U$=3,H$=4,Y_=5,X_=300,Z_=301,Q_=302,hC=303,K_=304,uC=305,au=306,J_=307,_o=1e3,kr=1001,Gl=1002,It=1003,lu=1004;var cu=1005;var Vt=1006,fp=1007;var Sa=1008,fC=1008,Ss=1009,q$=1010,z$=1011,dp=1012,W$=1013,dC=1014,Es=1015,Ea=1016,G$=1017,$$=1018,j$=1019,pp=1020,Y$=1021,Oi=1022,Ki=1023,X$=1024,Z$=1025,e0=Ki,$l=1026,hu=1027,Q$=1028,K$=1029,J$=1030,e5=1031,t5=1032,r5=1033,pC=33776,mC=33777,gC=33778,vC=33779,yC=35840,_C=35841,bC=35842,wC=35843,i5=36196,n5=37808,s5=37809,o5=37810,a5=37811,l5=37812,c5=37813,h5=37814,u5=37815,f5=37816,d5=37817,p5=37818,m5=37819,g5=37820,v5=37821,y5=2200,_5=2201,b5=2202,jl=2300,xa=2301,t0=2302,Yl=2400,Xl=2401,mp=2402,w5=0,SC=1,r0=2,Vr=3e3,Zl=3001,Ql=3007,Ta=3002,S5=3003,EC=3004,xC=3005,TC=3006,E5=3200,x5=3201,bo=0,T5=1;var i0=7680;var A5=519,gp=35044,uu=35048;function yr(){}Object.assign(yr.prototype,{addEventListener:function(t,e){this._listeners===void 0&&(this._listeners={});var r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(e)===-1&&r[t].push(e)},hasEventListener:function(t,e){if(this._listeners===void 0)return!1;var r=this._listeners;return r[t]!==void 0&&r[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(this._listeners!==void 0){var r=this._listeners,n=r[t];if(n!==void 0){var s=n.indexOf(e);s!==-1&&n.splice(s,1)}}},dispatchEvent:function(t){if(this._listeners!==void 0){var e=this._listeners,r=e[t.type];if(r!==void 0){t.target=this;for(var n=r.slice(0),s=0,o=n.length;s<o;s++)n[s].call(this,t)}}}});var Pr=[];for(Kl=0;Kl<256;Kl++)Pr[Kl]=(Kl<16?"0":"")+Kl.toString(16);var Kl,Qe={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Pr[t&255]+Pr[t>>8&255]+Pr[t>>16&255]+Pr[t>>24&255]+"-"+Pr[e&255]+Pr[e>>8&255]+"-"+Pr[e>>16&15|64]+Pr[e>>24&255]+"-"+Pr[r&63|128]+Pr[r>>8&255]+"-"+Pr[r>>16&255]+Pr[r>>24&255]+Pr[n&255]+Pr[n>>8&255]+Pr[n>>16&255]+Pr[n>>24&255];return s.toUpperCase()},clamp:function(t,e,r){return Math.max(e,Math.min(r,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,r,n,s){return n+(t-e)*(s-n)/(r-e)},lerp:function(t,e,r){return(1-r)*t+r*e},smoothstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*(3-2*t))},smootherstep:function(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*t*(t*(t*6-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Qe.DEG2RAD},radToDeg:function(t){return t*Qe.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)==0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,r,n,s){var o=Math.cos,a=Math.sin,l=o(r/2),c=a(r/2),h=o((e+n)/2),f=a((e+n)/2),u=o((e-n)/2),m=a((e-n)/2),d=o((n-e)/2),v=a((n-e)/2);s==="XYX"?t.set(l*f,c*u,c*m,l*h):s==="YZY"?t.set(c*m,l*f,c*u,l*h):s==="ZXZ"?t.set(c*u,c*m,l*f,l*h):s==="XZX"?t.set(l*f,c*v,c*d,l*h):s==="YXY"?t.set(c*d,l*f,c*v,l*h):s==="ZYZ"?t.set(c*v,c*d,l*f,l*h):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function he(t,e){this.x=t||0,this.y=e||0}Object.defineProperties(he.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}});Object.assign(he.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return e!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return e!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,r=this.y,n=t.elements;return this.x=n[0]*e+n[3]*r+n[6],this.y=n[1]*e+n[4]*r+n[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return e===void 0&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var r=Math.cos(e),n=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*r-o*n+t.x,this.y=s*n+o*r+t.y,this}});function Br(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Br.prototype,{isMatrix3:!0,set:function(t,e,r,n,s,o,a,l,c){var h=this.elements;return h[0]=t,h[1]=n,h[2]=a,h[3]=e,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],h=r[4],f=r[7],u=r[2],m=r[5],d=r[8],v=n[0],p=n[3],g=n[6],y=n[1],_=n[4],b=n[7],w=n[2],S=n[5],E=n[8];return s[0]=o*v+a*y+l*w,s[3]=o*p+a*_+l*S,s[6]=o*g+a*b+l*E,s[1]=c*v+h*y+f*w,s[4]=c*p+h*_+f*S,s[7]=c*g+h*b+f*E,s[2]=u*v+m*y+d*w,s[5]=u*p+m*_+d*S,s[8]=u*g+m*b+d*E,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e*o*h-e*a*c-r*s*h+r*a*l+n*s*c-n*o*l},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=t.elements,n=this.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],f=r[6],u=r[7],m=r[8],d=m*c-h*u,v=h*f-m*l,p=u*l-c*f,g=s*d+o*v+a*p;if(g===0){var y="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(e===!0)throw new Error(y);return console.warn(y),this.identity()}var _=1/g;return n[0]=d*_,n[1]=(a*u-m*o)*_,n[2]=(h*o-a*c)*_,n[3]=v*_,n[4]=(m*s-a*f)*_,n[5]=(a*l-h*s)*_,n[6]=p*_,n[7]=(o*f-u*s)*_,n[8]=(c*s-o*l)*_,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,r,n,s,o,a){var l=Math.cos(s),c=Math.sin(s);this.set(r*l,r*c,-r*(l*o+c*a)+o+t,-n*c,n*l,-n*(-c*o+l*a)+a+e,0,0,1)},scale:function(t,e){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=e,r[4]*=e,r[7]*=e,this},rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],h=n[7];return n[0]=e*s+r*l,n[3]=e*o+r*c,n[6]=e*a+r*h,n[1]=-r*s+e*l,n[4]=-r*o+e*c,n[7]=-r*a+e*h,this},translate:function(t,e){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=e*r[2],r[4]+=e*r[5],r[7]+=e*r[8],this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<9;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){e===void 0&&(e=0);for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){t===void 0&&(t=[]),e===void 0&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}});var Jl,Aa={getDataURL:function(t){var e;if(typeof HTMLCanvasElement=="undefined")return t.src;if(t instanceof HTMLCanvasElement)e=t;else{Jl===void 0&&(Jl=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Jl.width=t.width,Jl.height=t.height;var r=Jl.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=Jl}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},M5=0;function Mt(t,e,r,n,s,o,a,l,c,h){Object.defineProperty(this,"id",{value:M5++}),this.uuid=Qe.generateUUID(),this.name="",this.image=t!==void 0?t:Mt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=e!==void 0?e:Mt.DEFAULT_MAPPING,this.wrapS=r!==void 0?r:kr,this.wrapT=n!==void 0?n:kr,this.magFilter=s!==void 0?s:Vt,this.minFilter=o!==void 0?o:Sa,this.anisotropy=c!==void 0?c:1,this.format=a!==void 0?a:Ki,this.internalFormat=null,this.type=l!==void 0?l:Ss,this.offset=new he(0,0),this.repeat=new he(1,1),this.center=new he(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Br,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h!==void 0?h:Vr,this.version=0,this.onUpdate=null}Mt.DEFAULT_IMAGE=void 0;Mt.DEFAULT_MAPPING=X_;Mt.prototype=Object.assign(Object.create(yr.prototype),{constructor:Mt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var n=this.image;if(n.uuid===void 0&&(n.uuid=Qe.generateUUID()),!e&&t.images[n.uuid]===void 0){var s;if(Array.isArray(n)){s=[];for(var o=0,a=n.length;o<a;o++)s.push(Aa.getDataURL(n[o]))}else s=Aa.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:s}}r.image=n.uuid}return e||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==X_)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case _o:t.x=t.x-Math.floor(t.x);break;case kr:t.x=t.x<0?0:1;break;case Gl:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case _o:t.y=t.y-Math.floor(t.y);break;case kr:t.y=t.y<0?0:1;break;case Gl:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}});Object.defineProperty(Mt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function Ot(t,e,r,n){this.x=t||0,this.y=e||0,this.z=r||0,this.w=n!==void 0?n:1}Object.defineProperties(Ot.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}});Object.assign(Ot.prototype,{isVector4:!0,set:function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this},add:function(t,e){return e!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return e!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*r+o[8]*n+o[12]*s,this.y=o[1]*e+o[5]*r+o[9]*n+o[13]*s,this.z=o[2]*e+o[6]*r+o[10]*n+o[14]*s,this.w=o[3]*e+o[7]*r+o[11]*n+o[15]*s,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,r,n,s,o=.01,a=.1,l=t.elements,c=l[0],h=l[4],f=l[8],u=l[1],m=l[5],d=l[9],v=l[2],p=l[6],g=l[10];if(Math.abs(h-u)<o&&Math.abs(f-v)<o&&Math.abs(d-p)<o){if(Math.abs(h+u)<a&&Math.abs(f+v)<a&&Math.abs(d+p)<a&&Math.abs(c+m+g-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var y=(c+1)/2,_=(m+1)/2,b=(g+1)/2,w=(h+u)/4,S=(f+v)/4,E=(d+p)/4;return y>_&&y>b?y<o?(r=0,n=.707106781,s=.707106781):(r=Math.sqrt(y),n=w/r,s=S/r):_>b?_<o?(r=.707106781,n=0,s=.707106781):(n=Math.sqrt(_),r=w/n,s=E/n):b<o?(r=.707106781,n=.707106781,s=0):(s=Math.sqrt(b),r=S/s,n=E/s),this.set(r,n,s,e),this}var x=Math.sqrt((p-d)*(p-d)+(f-v)*(f-v)+(u-h)*(u-h));return Math.abs(x)<.001&&(x=1),this.x=(p-d)/x,this.y=(f-v)/x,this.z=(u-h)/x,this.w=Math.acos((c+m+g-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return e===void 0&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}});function ur(t,e,r){this.width=t,this.height=e,this.scissor=new Ot(0,0,t,e),this.scissorTest=!1,this.viewport=new Ot(0,0,t,e),r=r||{},this.texture=new Mt(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Vt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!0,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}ur.prototype=Object.assign(Object.create(yr.prototype),{constructor:ur,isWebGLRenderTarget:!0,setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function AC(t,e,r){ur.call(this,t,e,r),this.samples=4}AC.prototype=Object.assign(Object.create(ur.prototype),{constructor:AC,isWebGLMultisampleRenderTarget:!0,copy:function(t){return ur.prototype.copy.call(this,t),this.samples=t.samples,this}});function Ur(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._w=n!==void 0?n:1}Object.assign(Ur,{slerp:function(t,e,r,n){return r.copy(t).slerp(e,n)},slerpFlat:function(t,e,r,n,s,o,a){var l=r[n+0],c=r[n+1],h=r[n+2],f=r[n+3],u=s[o+0],m=s[o+1],d=s[o+2],v=s[o+3];if(f!==v||l!==u||c!==m||h!==d){var p=1-a,g=l*u+c*m+h*d+f*v,y=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){var b=Math.sqrt(_),w=Math.atan2(b,g*y);p=Math.sin(p*w)/b,a=Math.sin(a*w)/b}var S=a*y;if(l=l*p+u*S,c=c*p+m*S,h=h*p+d*S,f=f*p+v*S,p===1-a){var E=1/Math.sqrt(l*l+c*c+h*h+f*f);l*=E,c*=E,h*=E,f*=E}}t[e]=l,t[e+1]=c,t[e+2]=h,t[e+3]=f}});Object.defineProperties(Ur.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}});Object.assign(Ur.prototype,{isQuaternion:!0,set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._w=n,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=t._x,n=t._y,s=t._z,o=t.order,a=Math.cos,l=Math.sin,c=a(r/2),h=a(n/2),f=a(s/2),u=l(r/2),m=l(n/2),d=l(s/2);return o==="XYZ"?(this._x=u*h*f+c*m*d,this._y=c*m*f-u*h*d,this._z=c*h*d+u*m*f,this._w=c*h*f-u*m*d):o==="YXZ"?(this._x=u*h*f+c*m*d,this._y=c*m*f-u*h*d,this._z=c*h*d-u*m*f,this._w=c*h*f+u*m*d):o==="ZXY"?(this._x=u*h*f-c*m*d,this._y=c*m*f+u*h*d,this._z=c*h*d+u*m*f,this._w=c*h*f-u*m*d):o==="ZYX"?(this._x=u*h*f-c*m*d,this._y=c*m*f+u*h*d,this._z=c*h*d-u*m*f,this._w=c*h*f+u*m*d):o==="YZX"?(this._x=u*h*f+c*m*d,this._y=c*m*f+u*h*d,this._z=c*h*d-u*m*f,this._w=c*h*f-u*m*d):o==="XZY"&&(this._x=u*h*f-c*m*d,this._y=c*m*f-u*h*d,this._z=c*h*d+u*m*f,this._w=c*h*f+u*m*d),e!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,r=e[0],n=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],h=e[6],f=e[10],u=r+a+f,m;return u>0?(m=.5/Math.sqrt(u+1),this._w=.25/m,this._x=(h-l)*m,this._y=(s-c)*m,this._z=(o-n)*m):r>a&&r>f?(m=2*Math.sqrt(1+r-a-f),this._w=(h-l)/m,this._x=.25*m,this._y=(n+o)/m,this._z=(s+c)/m):a>f?(m=2*Math.sqrt(1+a-r-f),this._w=(s-c)/m,this._x=(n+o)/m,this._y=.25*m,this._z=(l+h)/m):(m=2*Math.sqrt(1+f-r-a),this._w=(o-n)/m,this._x=(s+c)/m,this._y=(l+h)/m,this._z=.25*m),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var r=1e-6,n=t.dot(e)+1;return n<r?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Qe.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var r=this.angleTo(t);if(r===0)return this;var n=Math.min(1,e/r);return this.slerp(t,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return e!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var r=t._x,n=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,h=e._w;return this._x=r*h+o*a+n*c-s*l,this._y=n*h+o*l+s*a-r*c,this._z=s*h+o*c+r*l-n*a,this._w=o*h-r*a-n*l-s*c,this._onChangeCallback(),this},slerp:function(t,e){if(e===0)return this;if(e===1)return this.copy(t);var r=this._x,n=this._y,s=this._z,o=this._w,a=o*t._w+r*t._x+n*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=r,this._y=n,this._z=s,this;var l=1-a*a;if(l<=Number.EPSILON){var c=1-e;return this._w=c*o+e*this._w,this._x=c*r+e*this._x,this._y=c*n+e*this._y,this._z=c*s+e*this._z,this.normalize(),this._onChangeCallback(),this}var h=Math.sqrt(l),f=Math.atan2(h,a),u=Math.sin((1-e)*f)/h,m=Math.sin(e*f)/h;return this._w=o*u+this._w*m,this._x=r*u+this._x*m,this._y=n*u+this._y*m,this._z=s*u+this._z*m,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return e===void 0&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var n0=new F,MC=new Ur;function F(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}Object.assign(F.prototype,{isVector3:!0,set:function(t,e,r){return this.x=t,this.y=e,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return e!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return e!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return e!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(MC.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(MC.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,r=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[3]*r+s[6]*n,this.y=s[1]*e+s[4]*r+s[7]*n,this.z=s[2]*e+s[5]*r+s[8]*n,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,s=t.elements,o=1/(s[3]*e+s[7]*r+s[11]*n+s[15]);return this.x=(s[0]*e+s[4]*r+s[8]*n+s[12])*o,this.y=(s[1]*e+s[5]*r+s[9]*n+s[13])*o,this.z=(s[2]*e+s[6]*r+s[10]*n+s[14])*o,this},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=l*e+o*n-a*r,h=l*r+a*e-s*n,f=l*n+s*r-o*e,u=-s*e-o*r-a*n;return this.x=c*l+u*-s+h*-a-f*-o,this.y=h*l+u*-o+f*-s-c*-a,this.z=f*l+u*-a+c*-o-h*-s,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,r=this.y,n=this.z,s=t.elements;return this.x=s[0]*e+s[4]*r+s[8]*n,this.y=s[1]*e+s[5]*r+s[9]*n,this.z=s[2]*e+s[6]*r+s[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},cross:function(t,e){return e!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var r=t.x,n=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=n*l-s*a,this.y=s*o-r*l,this.z=r*a-n*o,this},projectOnVector:function(t){var e=t.lengthSq();if(e===0)return this.set(0,0,0);var r=t.dot(this)/e;return this.copy(t).multiplyScalar(r)},projectOnPlane:function(t){return n0.copy(this).projectOnVector(t),this.sub(n0)},reflect:function(t){return this.sub(n0.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;var r=this.dot(t)/e;return Math.acos(Qe.clamp(r,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return e*e+r*r+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,r){var n=Math.sin(e)*t;return this.x=n*Math.sin(r),this.y=Math.cos(e)*t,this.z=n*Math.cos(r),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=n,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,e*4)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,e*3)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return e===void 0&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var ec=new F,wn=new Ue,C5=new F(0,0,0),P5=new F(1,1,1),wo=new F,vp=new F,Di=new F;function Ue(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ue.prototype,{isMatrix4:!0,set:function(t,e,r,n,s,o,a,l,c,h,f,u,m,d,v,p){var g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=n,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=h,g[10]=f,g[14]=u,g[3]=m,g[7]=d,g[11]=v,g[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Ue().fromArray(this.elements)},copy:function(t){var e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this},copyPosition:function(t){var e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this},extractBasis:function(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,r=t.elements,n=1/ec.setFromMatrixColumn(t,0).length(),s=1/ec.setFromMatrixColumn(t,1).length(),o=1/ec.setFromMatrixColumn(t,2).length();return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=0,e[4]=r[4]*s,e[5]=r[5]*s,e[6]=r[6]*s,e[7]=0,e[8]=r[8]*o,e[9]=r[9]*o,e[10]=r[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,r=t.x,n=t.y,s=t.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(n),c=Math.sin(n),h=Math.cos(s),f=Math.sin(s);if(t.order==="XYZ"){var u=o*h,m=o*f,d=a*h,v=a*f;e[0]=l*h,e[4]=-l*f,e[8]=c,e[1]=m+d*c,e[5]=u-v*c,e[9]=-a*l,e[2]=v-u*c,e[6]=d+m*c,e[10]=o*l}else if(t.order==="YXZ"){var p=l*h,g=l*f,y=c*h,_=c*f;e[0]=p+_*a,e[4]=y*a-g,e[8]=o*c,e[1]=o*f,e[5]=o*h,e[9]=-a,e[2]=g*a-y,e[6]=_+p*a,e[10]=o*l}else if(t.order==="ZXY"){var p=l*h,g=l*f,y=c*h,_=c*f;e[0]=p-_*a,e[4]=-o*f,e[8]=y+g*a,e[1]=g+y*a,e[5]=o*h,e[9]=_-p*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if(t.order==="ZYX"){var u=o*h,m=o*f,d=a*h,v=a*f;e[0]=l*h,e[4]=d*c-m,e[8]=u*c+v,e[1]=l*f,e[5]=v*c+u,e[9]=m*c-d,e[2]=-c,e[6]=a*l,e[10]=o*l}else if(t.order==="YZX"){var b=o*l,w=o*c,S=a*l,E=a*c;e[0]=l*h,e[4]=E-b*f,e[8]=S*f+w,e[1]=f,e[5]=o*h,e[9]=-a*h,e[2]=-c*h,e[6]=w*f+S,e[10]=b-E*f}else if(t.order==="XZY"){var b=o*l,w=o*c,S=a*l,E=a*c;e[0]=l*h,e[4]=-f,e[8]=c*h,e[1]=b*f+E,e[5]=o*h,e[9]=w*f-S,e[2]=S*f-w,e[6]=a*h,e[10]=E*f+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(C5,t,P5)},lookAt:function(t,e,r){var n=this.elements;return Di.subVectors(t,e),Di.lengthSq()===0&&(Di.z=1),Di.normalize(),wo.crossVectors(r,Di),wo.lengthSq()===0&&(Math.abs(r.z)===1?Di.x+=1e-4:Di.z+=1e-4,Di.normalize(),wo.crossVectors(r,Di)),wo.normalize(),vp.crossVectors(Di,wo),n[0]=wo.x,n[4]=vp.x,n[8]=Di.x,n[1]=wo.y,n[5]=vp.y,n[9]=Di.y,n[2]=wo.z,n[6]=vp.z,n[10]=Di.z,this},multiply:function(t,e){return e!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements,n=e.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],h=r[1],f=r[5],u=r[9],m=r[13],d=r[2],v=r[6],p=r[10],g=r[14],y=r[3],_=r[7],b=r[11],w=r[15],S=n[0],E=n[4],x=n[8],T=n[12],A=n[1],P=n[5],z=n[9],V=n[13],L=n[2],O=n[6],k=n[10],X=n[14],R=n[3],U=n[7],q=n[11],Z=n[15];return s[0]=o*S+a*A+l*L+c*R,s[4]=o*E+a*P+l*O+c*U,s[8]=o*x+a*z+l*k+c*q,s[12]=o*T+a*V+l*X+c*Z,s[1]=h*S+f*A+u*L+m*R,s[5]=h*E+f*P+u*O+m*U,s[9]=h*x+f*z+u*k+m*q,s[13]=h*T+f*V+u*X+m*Z,s[2]=d*S+v*A+p*L+g*R,s[6]=d*E+v*P+p*O+g*U,s[10]=d*x+v*z+p*k+g*q,s[14]=d*T+v*V+p*X+g*Z,s[3]=y*S+_*A+b*L+w*R,s[7]=y*E+_*P+b*O+w*U,s[11]=y*x+_*z+b*k+w*q,s[15]=y*T+_*V+b*X+w*Z,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],r=t[4],n=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],h=t[2],f=t[6],u=t[10],m=t[14],d=t[3],v=t[7],p=t[11],g=t[15];return d*(+s*l*f-n*c*f-s*a*u+r*c*u+n*a*m-r*l*m)+v*(+e*l*m-e*c*u+s*o*u-n*o*m+n*c*h-s*l*h)+p*(+e*c*f-e*a*m-s*o*f+r*o*m+s*a*h-r*c*h)+g*(-n*a*h-e*l*f+e*a*u+n*o*f-r*o*u+r*l*h)},transpose:function(){var t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(t,e,r){var n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=r),this},getInverse:function(t,e){var r=this.elements,n=t.elements,s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],h=n[5],f=n[6],u=n[7],m=n[8],d=n[9],v=n[10],p=n[11],g=n[12],y=n[13],_=n[14],b=n[15],w=d*_*u-y*v*u+y*f*p-h*_*p-d*f*b+h*v*b,S=g*v*u-m*_*u-g*f*p+c*_*p+m*f*b-c*v*b,E=m*y*u-g*d*u+g*h*p-c*y*p-m*h*b+c*d*b,x=g*d*f-m*y*f-g*h*v+c*y*v+m*h*_-c*d*_,T=s*w+o*S+a*E+l*x;if(T===0){var A="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(e===!0)throw new Error(A);return console.warn(A),this.identity()}var P=1/T;return r[0]=w*P,r[1]=(y*v*l-d*_*l-y*a*p+o*_*p+d*a*b-o*v*b)*P,r[2]=(h*_*l-y*f*l+y*a*u-o*_*u-h*a*b+o*f*b)*P,r[3]=(d*f*l-h*v*l-d*a*u+o*v*u+h*a*p-o*f*p)*P,r[4]=S*P,r[5]=(m*_*l-g*v*l+g*a*p-s*_*p-m*a*b+s*v*b)*P,r[6]=(g*f*l-c*_*l-g*a*u+s*_*u+c*a*b-s*f*b)*P,r[7]=(c*v*l-m*f*l+m*a*u-s*v*u-c*a*p+s*f*p)*P,r[8]=E*P,r[9]=(g*d*l-m*y*l-g*o*p+s*y*p+m*o*b-s*d*b)*P,r[10]=(c*y*l-g*h*l+g*o*u-s*y*u-c*o*b+s*h*b)*P,r[11]=(m*h*l-c*d*l-m*o*u+s*d*u+c*o*p-s*h*p)*P,r[12]=x*P,r[13]=(m*y*a-g*d*a+g*o*v-s*y*v-m*o*_+s*d*_)*P,r[14]=(g*h*a-c*y*a-g*o*f+s*y*f+c*o*_-s*h*_)*P,r[15]=(c*d*a-m*h*a+m*o*f-s*d*f-c*o*v+s*h*v)*P,this},scale:function(t){var e=this.elements,r=t.x,n=t.y,s=t.z;return e[0]*=r,e[4]*=n,e[8]*=s,e[1]*=r,e[5]*=n,e[9]*=s,e[2]*=r,e[6]*=n,e[10]*=s,e[3]*=r,e[7]*=n,e[11]*=s,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,n))},makeTranslation:function(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var r=Math.cos(e),n=Math.sin(e),s=1-r,o=t.x,a=t.y,l=t.z,c=s*o,h=s*a;return this.set(c*o+r,c*a-n*l,c*l+n*a,0,c*a+n*l,h*a+r,h*l-n*o,0,c*l-n*a,h*l+n*o,s*l*l+r,0,0,0,0,1),this},makeScale:function(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,e,r){return this.set(1,e,r,0,t,1,r,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,r){var n=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,h=o+o,f=a+a,u=s*c,m=s*h,d=s*f,v=o*h,p=o*f,g=a*f,y=l*c,_=l*h,b=l*f,w=r.x,S=r.y,E=r.z;return n[0]=(1-(v+g))*w,n[1]=(m+b)*w,n[2]=(d-_)*w,n[3]=0,n[4]=(m-b)*S,n[5]=(1-(u+g))*S,n[6]=(p+y)*S,n[7]=0,n[8]=(d+_)*E,n[9]=(p-y)*E,n[10]=(1-(u+v))*E,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this},decompose:function(t,e,r){var n=this.elements,s=ec.set(n[0],n[1],n[2]).length(),o=ec.set(n[4],n[5],n[6]).length(),a=ec.set(n[8],n[9],n[10]).length(),l=this.determinant();l<0&&(s=-s),t.x=n[12],t.y=n[13],t.z=n[14],wn.copy(this);var c=1/s,h=1/o,f=1/a;return wn.elements[0]*=c,wn.elements[1]*=c,wn.elements[2]*=c,wn.elements[4]*=h,wn.elements[5]*=h,wn.elements[6]*=h,wn.elements[8]*=f,wn.elements[9]*=f,wn.elements[10]*=f,e.setFromRotationMatrix(wn),r.x=s,r.y=o,r.z=a,this},makePerspective:function(t,e,r,n,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,l=2*s/(e-t),c=2*s/(r-n),h=(e+t)/(e-t),f=(r+n)/(r-n),u=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,r,n,s,o){var a=this.elements,l=1/(e-t),c=1/(r-n),h=1/(o-s),f=(e+t)*l,u=(r+n)*c,m=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,r=t.elements,n=0;n<16;n++)if(e[n]!==r[n])return!1;return!0},fromArray:function(t,e){e===void 0&&(e=0);for(var r=0;r<16;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){t===void 0&&(t=[]),e===void 0&&(e=0);var r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}});var CC=new Ue,PC=new Ur;function zn(t,e,r,n){this._x=t||0,this._y=e||0,this._z=r||0,this._order=n||zn.DefaultOrder}zn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];zn.DefaultOrder="XYZ";Object.defineProperties(zn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}});Object.assign(zn.prototype,{isEuler:!0,set:function(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._order=n||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,r){var n=Qe.clamp,s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],f=s[9],u=s[2],m=s[6],d=s[10];return e=e||this._order,e==="XYZ"?(this._y=Math.asin(n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,h),this._z=0)):e==="YXZ"?(this._x=Math.asin(-n(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,d),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-u,o),this._z=0)):e==="ZXY"?(this._x=Math.asin(n(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(c,o))):e==="ZYX"?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(m,d),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,h))):e==="YZX"?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(l,d))):e==="XZY"?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-f,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,r!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,r){return CC.makeRotationFromQuaternion(t),this.setFromRotationMatrix(CC,e,r)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return PC.setFromEuler(this),this.setFromQuaternion(PC,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new F(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});function IC(){this.mask=1|0}Object.assign(IC.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=4294967295|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return(this.mask&t.mask)!=0}});var I5=0,RC=new F,tc=new Ur,xs=new Ue,yp=new F,fu=new F,R5=new F,L5=new Ur,LC=new F(1,0,0),OC=new F(0,1,0),DC=new F(0,0,1),O5={type:"added"},D5={type:"removed"};function ve(){Object.defineProperty(this,"id",{value:I5++}),this.uuid=Qe.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ve.DefaultUp.clone();var t=new F,e=new zn,r=new Ur,n=new F(1,1,1);function s(){r.setFromEuler(e,!1)}function o(){e.setFromQuaternion(r,void 0,!1)}e._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Ue},normalMatrix:{value:new Br}}),this.matrix=new Ue,this.matrixWorld=new Ue,this.matrixAutoUpdate=ve.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new IC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}ve.DefaultUp=new F(0,1,0);ve.DefaultMatrixAutoUpdate=!0;ve.prototype=Object.assign(Object.create(yr.prototype),{constructor:ve,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return tc.setFromAxisAngle(t,e),this.quaternion.multiply(tc),this},rotateOnWorldAxis:function(t,e){return tc.setFromAxisAngle(t,e),this.quaternion.premultiply(tc),this},rotateX:function(t){return this.rotateOnAxis(LC,t)},rotateY:function(t){return this.rotateOnAxis(OC,t)},rotateZ:function(t){return this.rotateOnAxis(DC,t)},translateOnAxis:function(t,e){return RC.copy(t).applyQuaternion(this.quaternion),this.position.add(RC.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(LC,t)},translateY:function(t){return this.translateOnAxis(OC,t)},translateZ:function(t){return this.translateOnAxis(DC,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(xs.getInverse(this.matrixWorld))},lookAt:function(t,e,r){t.isVector3?yp.copy(t):yp.set(t,e,r);var n=this.parent;this.updateWorldMatrix(!0,!1),fu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xs.lookAt(fu,yp,this.up):xs.lookAt(yp,fu,this.up),this.quaternion.setFromRotationMatrix(xs),n&&(xs.extractRotation(n.matrixWorld),tc.setFromRotationMatrix(xs),this.quaternion.premultiply(tc.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(O5)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(D5)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),xs.getInverse(this.matrixWorld),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),xs.multiply(t.parent.matrixWorld)),t.applyMatrix4(xs),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,n=this.children.length;r<n;r++){var s=this.children[r],o=s.getObjectByProperty(t,e);if(o!==void 0)return o}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new F),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Ur),this.updateMatrixWorld(!0),this.matrixWorld.decompose(fu,t,R5),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new F),this.updateMatrixWorld(!0),this.matrixWorld.decompose(fu,L5,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new F),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,r=0,n=e.length;r<n;r++)e[r].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0)for(var n=this.children,s=0,o=n.length;s<o;s++)n[s].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=t===void 0||typeof t=="string",r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON());function s(g,y){return g[y.uuid]===void 0&&(g[y.uuid]=y.toJSON(t)),y.uuid}if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(t.geometries,this.geometry);var o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){var a=o.shapes;if(Array.isArray(a))for(var l=0,c=a.length;l<c;l++){var h=a[l];s(t.shapes,h)}else s(t.shapes,a)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var f=[],l=0,c=this.material.length;l<c;l++)f.push(s(t.materials,this.material[l]));n.material=f}else n.material=s(t.materials,this.material);if(this.children.length>0){n.children=[];for(var l=0;l<this.children.length;l++)n.children.push(this.children[l].toJSON(t).object)}if(e){var u=p(t.geometries),m=p(t.materials),d=p(t.textures),v=p(t.images),a=p(t.shapes);u.length>0&&(r.geometries=u),m.length>0&&(r.materials=m),d.length>0&&(r.textures=d),v.length>0&&(r.images=v),a.length>0&&(r.shapes=a)}return r.object=n,r;function p(g){var y=[];for(var _ in g){var b=g[_];delete b.metadata,y.push(b)}return y}},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,e){if(e===void 0&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var r=0;r<t.children.length;r++){var n=t.children[r];this.add(n.clone())}return this}});function fr(){ve.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}fr.prototype=Object.assign(Object.create(ve.prototype),{constructor:fr,isScene:!0,copy:function(t,e){return ve.prototype.copy.call(this,t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=ve.prototype.toJSON.call(this,t);return this.background!==null&&(e.object.background=this.background.toJSON(t)),this.environment!==null&&(e.object.environment=this.environment.toJSON(t)),this.fog!==null&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ts=[new F,new F,new F,new F,new F,new F,new F,new F],du=new F,_p=new Hr,rc=new F,ic=new F,nc=new F,So=new F,Eo=new F,Ma=new F,pu=new F,bp=new F,wp=new F,Ca=new F;function Hr(t,e){this.min=t!==void 0?t:new F(1/0,1/0,1/0),this.max=e!==void 0?e:new F(-1/0,-1/0,-1/0)}Object.assign(Hr.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,r=1/0,n=1/0,s=-1/0,o=-1/0,a=-1/0,l=0,c=t.length;l<c;l+=3){var h=t[l],f=t[l+1],u=t[l+2];h<e&&(e=h),f<r&&(r=f),u<n&&(n=u),h>s&&(s=h),f>o&&(o=f),u>a&&(a=u)}return this.min.set(e,r,n),this.max.set(s,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,r=1/0,n=1/0,s=-1/0,o=-1/0,a=-1/0,l=0,c=t.count;l<c;l++){var h=t.getX(l),f=t.getY(l),u=t.getZ(l);h<e&&(e=h),f<r&&(r=f),u<n&&(n=u),h>s&&(s=h),f>o&&(o=f),u>a&&(a=u)}return this.min.set(e,r,n),this.max.set(s,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var r=du.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new F),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new F),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;e!==void 0&&(e.boundingBox===null&&e.computeBoundingBox(),_p.copy(e.boundingBox),_p.applyMatrix4(t.matrixWorld),this.expandByPoint(_p.min),this.expandByPoint(_p.max));for(var r=t.children,n=0,s=r.length;n<s;n++)this.expandByObject(r[n]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return e===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new F),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,du),du.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(pu),bp.subVectors(this.max,pu),rc.subVectors(t.a,pu),ic.subVectors(t.b,pu),nc.subVectors(t.c,pu),So.subVectors(ic,rc),Eo.subVectors(nc,ic),Ma.subVectors(rc,nc);var e=[0,-So.z,So.y,0,-Eo.z,Eo.y,0,-Ma.z,Ma.y,So.z,0,-So.x,Eo.z,0,-Eo.x,Ma.z,0,-Ma.x,-So.y,So.x,0,-Eo.y,Eo.x,0,-Ma.y,Ma.x,0];return!s0(e,rc,ic,nc,bp)||(e=[1,0,0,0,1,0,0,0,1],!s0(e,rc,ic,nc,bp))?!1:(wp.crossVectors(So,Eo),e=[wp.x,wp.y,wp.z],s0(e,rc,ic,nc,bp))},clampPoint:function(t,e){return e===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new F),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=du.copy(t).clamp(this.min,this.max);return e.sub(t).length()},getBoundingSphere:function(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=this.getSize(du).length()*.5,t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(Ts[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ts[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ts[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ts[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ts[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ts[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ts[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ts[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ts),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});function s0(t,e,r,n,s){var o,a;for(o=0,a=t.length-3;o<=a;o+=3){Ca.fromArray(t,o);var l=s.x*Math.abs(Ca.x)+s.y*Math.abs(Ca.y)+s.z*Math.abs(Ca.z),c=e.dot(Ca),h=r.dot(Ca),f=n.dot(Ca);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>l)return!1}return!0}var F5=new Hr;function Wn(t,e){this.center=t!==void 0?t:new F,this.radius=e!==void 0?e:0}Object.assign(Wn.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var r=this.center;e!==void 0?r.copy(e):F5.setFromPoints(t).getCenter(r);for(var n=0,s=0,o=t.length;s<o;s++)n=Math.max(n,r.distanceToSquared(t[s]));return this.radius=Math.sqrt(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var r=this.center.distanceToSquared(t);return e===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new F),e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Hr),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var As=new F,o0=new F,Sp=new F,xo=new F,a0=new F,Ep=new F,l0=new F;function sc(t,e){this.origin=t!==void 0?t:new F,this.direction=e!==void 0?e:new F(0,0,-1)}Object.assign(sc.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return e===void 0&&(console.warn("THREE.Ray: .at() target is now required"),e=new F),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,As)),this},closestPointToPoint:function(t,e){e===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new F),e.subVectors(t,this.origin);var r=e.dot(this.direction);return r<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=As.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(As.copy(this.direction).multiplyScalar(e).add(this.origin),As.distanceToSquared(t))},distanceSqToSegment:function(t,e,r,n){o0.copy(t).add(e).multiplyScalar(.5),Sp.copy(e).sub(t).normalize(),xo.copy(this.origin).sub(o0);var s=t.distanceTo(e)*.5,o=-this.direction.dot(Sp),a=xo.dot(this.direction),l=-xo.dot(Sp),c=xo.lengthSq(),h=Math.abs(1-o*o),f,u,m,d;if(h>0)if(f=o*l-a,u=o*a-l,d=s*h,f>=0)if(u>=-d)if(u<=d){var v=1/h;f*=v,u*=v,m=f*(f+o*u+2*a)+u*(o*f+u+2*l)+c}else u=s,f=Math.max(0,-(o*u+a)),m=-f*f+u*(u+2*l)+c;else u=-s,f=Math.max(0,-(o*u+a)),m=-f*f+u*(u+2*l)+c;else u<=-d?(f=Math.max(0,-(-o*s+a)),u=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+u*(u+2*l)+c):u<=d?(f=0,u=Math.min(Math.max(-s,-l),s),m=u*(u+2*l)+c):(f=Math.max(0,-(o*s+a)),u=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+u*(u+2*l)+c);else u=o>0?-s:s,f=Math.max(0,-(o*u+a)),m=-f*f+u*(u+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(f).add(this.origin),n&&n.copy(Sp).multiplyScalar(u).add(o0),m},intersectSphere:function(t,e){As.subVectors(t.center,this.origin);var r=As.dot(this.direction),n=As.dot(As)-r*r,s=t.radius*t.radius;if(n>s)return null;var o=Math.sqrt(s-n),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,e):this.at(a,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;var r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null},intersectPlane:function(t,e){var r=this.distanceToPlane(t);return r===null?null:this.at(r,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(e===0)return!0;var r=t.normal.dot(this.direction);return r*e<0},intersectBox:function(t,e){var r,n,s,o,a,l,c=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,u=this.origin;return c>=0?(r=(t.min.x-u.x)*c,n=(t.max.x-u.x)*c):(r=(t.max.x-u.x)*c,n=(t.min.x-u.x)*c),h>=0?(s=(t.min.y-u.y)*h,o=(t.max.y-u.y)*h):(s=(t.max.y-u.y)*h,o=(t.min.y-u.y)*h),r>o||s>n||((s>r||r!==r)&&(r=s),(o<n||n!==n)&&(n=o),f>=0?(a=(t.min.z-u.z)*f,l=(t.max.z-u.z)*f):(a=(t.max.z-u.z)*f,l=(t.min.z-u.z)*f),r>l||a>n)||((a>r||r!==r)&&(r=a),(l<n||n!==n)&&(n=l),n<0)?null:this.at(r>=0?r:n,e)},intersectsBox:function(t){return this.intersectBox(t,As)!==null},intersectTriangle:function(t,e,r,n,s){a0.subVectors(e,t),Ep.subVectors(r,t),l0.crossVectors(a0,Ep);var o=this.direction.dot(l0),a;if(o>0){if(n)return null;a=1}else if(o<0)a=-1,o=-o;else return null;xo.subVectors(this.origin,t);var l=a*this.direction.dot(Ep.crossVectors(xo,Ep));if(l<0)return null;var c=a*this.direction.dot(a0.cross(xo));if(c<0||l+c>o)return null;var h=-a*xo.dot(l0);return h<0?null:this.at(h/o,s)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var c0=new F,N5=new F,k5=new Br;function Gn(t,e){this.normal=t!==void 0?t:new F(1,0,0),this.constant=e!==void 0?e:0}Object.assign(Gn.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,r,n){return this.normal.set(t,e,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,r){var n=c0.subVectors(r,e).cross(N5.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return e===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new F),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){e===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new F);var r=t.delta(c0),n=this.normal.dot(r);if(n===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):void 0;var s=-(t.start.dot(this.normal)+this.constant)/n;if(!(s<0||s>1))return e.copy(r).multiplyScalar(s).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new F),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var r=e||k5.getNormalMatrix(t),n=this.coplanarPoint(c0).applyMatrix4(t),s=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(s),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Sn=new F,Ms=new F,h0=new F,Cs=new F,oc=new F,ac=new F,FC=new F,u0=new F,f0=new F,d0=new F;function Ir(t,e,r){this.a=t!==void 0?t:new F,this.b=e!==void 0?e:new F,this.c=r!==void 0?r:new F}Object.assign(Ir,{getNormal:function(t,e,r,n){n===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new F),n.subVectors(r,e),Sn.subVectors(t,e),n.cross(Sn);var s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)},getBarycoord:function(t,e,r,n,s){Sn.subVectors(n,e),Ms.subVectors(r,e),h0.subVectors(t,e);var o=Sn.dot(Sn),a=Sn.dot(Ms),l=Sn.dot(h0),c=Ms.dot(Ms),h=Ms.dot(h0),f=o*c-a*a;if(s===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new F),f===0)return s.set(-2,-1,-1);var u=1/f,m=(c*l-a*h)*u,d=(o*h-a*l)*u;return s.set(1-m-d,d,m)},containsPoint:function(t,e,r,n){return Ir.getBarycoord(t,e,r,n,Cs),Cs.x>=0&&Cs.y>=0&&Cs.x+Cs.y<=1},getUV:function(t,e,r,n,s,o,a,l){return this.getBarycoord(t,e,r,n,Cs),l.set(0,0),l.addScaledVector(s,Cs.x),l.addScaledVector(o,Cs.y),l.addScaledVector(a,Cs.z),l},isFrontFacing:function(t,e,r,n){return Sn.subVectors(r,e),Ms.subVectors(t,e),Sn.cross(Ms).dot(n)<0}});Object.assign(Ir.prototype,{set:function(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this},setFromPointsAndIndices:function(t,e,r,n){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[n]),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Sn.subVectors(this.c,this.b),Ms.subVectors(this.a,this.b),Sn.cross(Ms).length()*.5},getMidpoint:function(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new F),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Ir.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Gn),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Ir.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,r,n,s){return Ir.getUV(t,this.a,this.b,this.c,e,r,n,s)},containsPoint:function(t){return Ir.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Ir.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){e===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new F);var r=this.a,n=this.b,s=this.c,o,a;oc.subVectors(n,r),ac.subVectors(s,r),u0.subVectors(t,r);var l=oc.dot(u0),c=ac.dot(u0);if(l<=0&&c<=0)return e.copy(r);f0.subVectors(t,n);var h=oc.dot(f0),f=ac.dot(f0);if(h>=0&&f<=h)return e.copy(n);var u=l*f-h*c;if(u<=0&&l>=0&&h<=0)return o=l/(l-h),e.copy(r).addScaledVector(oc,o);d0.subVectors(t,s);var m=oc.dot(d0),d=ac.dot(d0);if(d>=0&&m<=d)return e.copy(s);var v=m*c-l*d;if(v<=0&&c>=0&&d<=0)return a=c/(c-d),e.copy(r).addScaledVector(ac,a);var p=h*d-m*f;if(p<=0&&f-h>=0&&m-d>=0)return FC.subVectors(s,n),a=(f-h)/(f-h+(m-d)),e.copy(n).addScaledVector(FC,a);var g=1/(p+v+u);return o=v*g,a=u*g,e.copy(r).addScaledVector(oc,o).addScaledVector(ac,a)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var NC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},En={h:0,s:0,l:0},xp={h:0,s:0,l:0};function Se(t,e,r){return e===void 0&&r===void 0?this.set(t):this.setRGB(t,e,r)}function p0(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*6*(2/3-r):t}function m0(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function g0(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}Object.assign(Se.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this},setRGB:function(t,e,r){return this.r=t,this.g=e,this.b=r,this},setHSL:function(t,e,r){if(t=Qe.euclideanModulo(t,1),e=Qe.clamp(e,0,1),r=Qe.clamp(r,0,1),e===0)this.r=this.g=this.b=r;else{var n=r<=.5?r*(1+e):r+e-r*e,s=2*r-n;this.r=p0(s,n,t+1/3),this.g=p0(s,n,t),this.b=p0(s,n,t-1/3)}return this},setStyle:function(t){function e(u){u!==void 0&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,l=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(a,l,c)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var h=r[1],f=h.length;if(f===3)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(f===6)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=NC[t];return e!==void 0?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return e===void 0&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){e===void 0&&(e=2);var r=e>0?1/e:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=m0(t.r),this.g=m0(t.g),this.b=m0(t.b),this},copyLinearToSRGB:function(t){return this.r=g0(t.r),this.g=g0(t.g),this.b=g0(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e=this.r,r=this.g,n=this.b,s=Math.max(e,r,n),o=Math.min(e,r,n),a,l,c=(o+s)/2;if(o===s)a=0,l=0;else{var h=s-o;switch(l=c<=.5?h/(s+o):h/(2-s-o),s){case e:a=(r-n)/h+(r<n?6:0);break;case r:a=(n-e)/h+2;break;case n:a=(e-r)/h+4;break}a/=6}return t.h=a,t.s=l,t.l=c,t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(t,e,r){return this.getHSL(En),En.h+=t,En.s+=e,En.l+=r,this.setHSL(En.h,En.s,En.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(En),t.getHSL(xp);var r=Qe.lerp(En.h,xp.h,e),n=Qe.lerp(En.s,xp.s,e),s=Qe.lerp(En.l,xp.l,e);return this.setHSL(r,n,s),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return e===void 0&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});Se.NAMES=NC;function Tp(t,e,r,n,s,o){this.a=t,this.b=e,this.c=r,this.normal=n&&n.isVector3?n:new F,this.vertexNormals=Array.isArray(n)?n:[],this.color=s&&s.isColor?s:new Se,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=o!==void 0?o:0}Object.assign(Tp.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,r=t.vertexNormals.length;e<r;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,r=t.vertexColors.length;e<r;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var V5=0;function Ge(){Object.defineProperty(this,"id",{value:V5++}),this.uuid=Qe.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=ou,this.side=bn,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=rC,this.opacity=1,this.transparent=!1,this.blendSrc=lC,this.blendDst=cC,this.blendEquation=Wl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=$_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=A5,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=i0,this.stencilZFail=i0,this.stencilZPass=i0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Ge.prototype=Object.assign(Object.create(yr.prototype),{constructor:Ge,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(t!==void 0)for(var e in t){var r=t[e];if(r===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===tC;continue}var n=this[e];if(n===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[e]=r}},toJSON:function(t){var e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,this.combine!==void 0&&(r.combine=this.combine),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(r.size=this.size),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==ou&&(r.blending=this.blending),this.flatShading===!0&&(r.flatShading=this.flatShading),this.side!==bn&&(r.side=this.side),this.vertexColors!==rC&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(r.morphTargets=!0),this.morphNormals===!0&&(r.morphNormals=!0),this.skinning===!0&&(r.skinning=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function n(a){var l=[];for(var c in a){var h=a[c];delete h.metadata,l.push(h)}return l}if(e){var s=n(t.textures),o=n(t.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,r=null;if(e!==null){var n=e.length;r=new Array(n);for(var s=0;s!==n;++s)r[s]=e[s].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Ge.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function lr(t){Ge.call(this),this.type="MeshBasicMaterial",this.color=new Se(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}lr.prototype=Object.create(Ge.prototype);lr.prototype.constructor=lr;lr.prototype.isMeshBasicMaterial=!0;lr.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Rt=new F;function ze(t,e,r){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=r===!0,this.usage=gp,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(ze.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(ze.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,r){t*=this.itemSize,r*=e.itemSize;for(var n=0,s=this.itemSize;n<s;n++)this.array[t+n]=e.array[r+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,r=0,n=0,s=t.length;n<s;n++){var o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new Se),e[r++]=o.r,e[r++]=o.g,e[r++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,r=0,n=0,s=t.length;n<s;n++){var o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new he),e[r++]=o.x,e[r++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,r=0,n=0,s=t.length;n<s;n++){var o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new F),e[r++]=o.x,e[r++]=o.y,e[r++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,r=0,n=0,s=t.length;n<s;n++){var o=t[n];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Ot),e[r++]=o.x,e[r++]=o.y,e[r++]=o.z,e[r++]=o.w}return this},applyMatrix3:function(t){for(var e=0,r=this.count;e<r;e++)Rt.x=this.getX(e),Rt.y=this.getY(e),Rt.z=this.getZ(e),Rt.applyMatrix3(t),this.setXYZ(e,Rt.x,Rt.y,Rt.z);return this},applyMatrix4:function(t){for(var e=0,r=this.count;e<r;e++)Rt.x=this.getX(e),Rt.y=this.getY(e),Rt.z=this.getZ(e),Rt.applyMatrix4(t),this.setXYZ(e,Rt.x,Rt.y,Rt.z);return this},applyNormalMatrix:function(t){for(var e=0,r=this.count;e<r;e++)Rt.x=this.getX(e),Rt.y=this.getY(e),Rt.z=this.getZ(e),Rt.applyNormalMatrix(t),this.setXYZ(e,Rt.x,Rt.y,Rt.z);return this},transformDirection:function(t){for(var e=0,r=this.count;e<r;e++)Rt.x=this.getX(e),Rt.y=this.getY(e),Rt.z=this.getZ(e),Rt.transformDirection(t),this.setXYZ(e,Rt.x,Rt.y,Rt.z);return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this},setXYZ:function(t,e,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this},setXYZW:function(t,e,r,n,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=s,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function v0(t,e,r){ze.call(this,new Int8Array(t),e,r)}v0.prototype=Object.create(ze.prototype);v0.prototype.constructor=v0;function y0(t,e,r){ze.call(this,new Uint8Array(t),e,r)}y0.prototype=Object.create(ze.prototype);y0.prototype.constructor=y0;function _0(t,e,r){ze.call(this,new Uint8ClampedArray(t),e,r)}_0.prototype=Object.create(ze.prototype);_0.prototype.constructor=_0;function b0(t,e,r){ze.call(this,new Int16Array(t),e,r)}b0.prototype=Object.create(ze.prototype);b0.prototype.constructor=b0;function mu(t,e,r){ze.call(this,new Uint16Array(t),e,r)}mu.prototype=Object.create(ze.prototype);mu.prototype.constructor=mu;function w0(t,e,r){ze.call(this,new Int32Array(t),e,r)}w0.prototype=Object.create(ze.prototype);w0.prototype.constructor=w0;function gu(t,e,r){ze.call(this,new Uint32Array(t),e,r)}gu.prototype=Object.create(ze.prototype);gu.prototype.constructor=gu;function Pe(t,e,r){ze.call(this,new Float32Array(t),e,r)}Pe.prototype=Object.create(ze.prototype);Pe.prototype.constructor=Pe;function S0(t,e,r){ze.call(this,new Float64Array(t),e,r)}S0.prototype=Object.create(ze.prototype);S0.prototype.constructor=S0;function kC(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(kC.prototype,{computeGroups:function(t){for(var e,r=[],n=void 0,s=t.faces,o=0;o<s.length;o++){var a=s[o];a.materialIndex!==n&&(n=a.materialIndex,e!==void 0&&(e.count=o*3-e.start,r.push(e)),e={start:o*3,materialIndex:n})}e!==void 0&&(e.count=o*3-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e=t.faces,r=t.vertices,n=t.faceVertexUvs,s=n[0]&&n[0].length>0,o=n[1]&&n[1].length>0,a=t.morphTargets,l=a.length,c;if(l>0){c=[];for(var h=0;h<l;h++)c[h]={name:a[h].name,data:[]};this.morphTargets.position=c}var f=t.morphNormals,u=f.length,m;if(u>0){m=[];for(var h=0;h<u;h++)m[h]={name:f[h].name,data:[]};this.morphTargets.normal=m}var d=t.skinIndices,v=t.skinWeights,p=d.length===r.length,g=v.length===r.length;r.length>0&&e.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var h=0;h<e.length;h++){var y=e[h];this.vertices.push(r[y.a],r[y.b],r[y.c]);var _=y.vertexNormals;if(_.length===3)this.normals.push(_[0],_[1],_[2]);else{var b=y.normal;this.normals.push(b,b,b)}var w=y.vertexColors;if(w.length===3)this.colors.push(w[0],w[1],w[2]);else{var S=y.color;this.colors.push(S,S,S)}if(s===!0){var E=n[0][h];E!==void 0?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new he,new he,new he))}if(o===!0){var E=n[1][h];E!==void 0?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new he,new he,new he))}for(var x=0;x<l;x++){var T=a[x].vertices;c[x].data.push(T[y.a],T[y.b],T[y.c])}for(var x=0;x<u;x++){var A=f[x].vertexNormals[h];m[x].data.push(A.a,A.b,A.c)}p&&this.skinIndices.push(d[y.a],d[y.b],d[y.c]),g&&this.skinWeights.push(v[y.a],v[y.b],v[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}});function VC(t){if(t.length===0)return-1/0;for(var e=t[0],r=1,n=t.length;r<n;++r)t[r]>e&&(e=t[r]);return e}var B5=1,$n=new Ue,E0=new ve,lc=new F,Fi=new Hr,vu=new Hr,dr=new F;function Ie(){Object.defineProperty(this,"id",{value:B5+=2}),this.uuid=Qe.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ie.prototype=Object.assign(Object.create(yr.prototype),{constructor:Ie,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(VC(t)>65535?gu:mu)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:r!==void 0?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);var r=this.attributes.normal;if(r!==void 0){var n=new Br().getNormalMatrix(t);r.applyNormalMatrix(n),r.needsUpdate=!0}var s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return $n.makeRotationX(t),this.applyMatrix4($n),this},rotateY:function(t){return $n.makeRotationY(t),this.applyMatrix4($n),this},rotateZ:function(t){return $n.makeRotationZ(t),this.applyMatrix4($n),this},translate:function(t,e,r){return $n.makeTranslation(t,e,r),this.applyMatrix4($n),this},scale:function(t,e,r){return $n.makeScale(t,e,r),this.applyMatrix4($n),this},lookAt:function(t){return E0.lookAt(t),E0.updateMatrix(),this.applyMatrix4(E0.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(lc).negate(),this.translate(lc.x,lc.y,lc.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var r=new Pe(e.vertices.length*3,3),n=new Pe(e.colors.length*3,3);if(this.setAttribute("position",r.copyVector3sArray(e.vertices)),this.setAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var s=new Pe(e.lineDistances.length,1);this.setAttribute("lineDistance",s.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],r=0,n=t.length;r<n;r++){var s=t[r];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Pe(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var r=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(r=void 0,e.elementsNeedUpdate=!1),r===void 0)return this.fromGeometry(e);r.verticesNeedUpdate=e.verticesNeedUpdate,r.normalsNeedUpdate=e.normalsNeedUpdate,r.colorsNeedUpdate=e.colorsNeedUpdate,r.uvsNeedUpdate=e.uvsNeedUpdate,r.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=r}var n;return e.verticesNeedUpdate===!0&&(n=this.attributes.position,n!==void 0&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(n=this.attributes.normal,n!==void 0&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(n=this.attributes.color,n!==void 0&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,n!==void 0&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,n!==void 0&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new kC().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(t.vertices.length*3);if(this.setAttribute("position",new ze(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var r=new Float32Array(t.normals.length*3);this.setAttribute("normal",new ze(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(t.colors.length*3);this.setAttribute("color",new ze(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var s=new Float32Array(t.uvs.length*2);this.setAttribute("uv",new ze(s,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(t.uvs2.length*2);this.setAttribute("uv2",new ze(o,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(var a in t.morphTargets){for(var l=[],c=t.morphTargets[a],h=0,f=c.length;h<f;h++){var u=c[h],m=new Pe(u.data.length*3,3);m.name=u.name,l.push(m.copyVector3sArray(u.data))}this.morphAttributes[a]=l}if(t.skinIndices.length>0){var d=new Pe(t.skinIndices.length*4,4);this.setAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var v=new Pe(t.skinWeights.length*4,4);this.setAttribute("skinWeight",v.copyVector4sArray(t.skinWeights))}return t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Hr);var t=this.attributes.position,e=this.morphAttributes.position;if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(var r=0,n=e.length;r<n;r++){var s=e[r];Fi.setFromBufferAttribute(s),this.morphTargetsRelative?(dr.addVectors(this.boundingBox.min,Fi.min),this.boundingBox.expandByPoint(dr),dr.addVectors(this.boundingBox.max,Fi.max),this.boundingBox.expandByPoint(dr)):(this.boundingBox.expandByPoint(Fi.min),this.boundingBox.expandByPoint(Fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Wn);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var r=this.boundingSphere.center;if(Fi.setFromBufferAttribute(t),e)for(var n=0,s=e.length;n<s;n++){var o=e[n];vu.setFromBufferAttribute(o),this.morphTargetsRelative?(dr.addVectors(Fi.min,vu.min),Fi.expandByPoint(dr),dr.addVectors(Fi.max,vu.max),Fi.expandByPoint(dr)):(Fi.expandByPoint(vu.min),Fi.expandByPoint(vu.max))}Fi.getCenter(r);for(var a=0,n=0,s=t.count;n<s;n++)dr.fromBufferAttribute(t,n),a=Math.max(a,r.distanceToSquared(dr));if(e)for(var n=0,s=e.length;n<s;n++)for(var o=e[n],l=this.morphTargetsRelative,c=0,h=o.count;c<h;c++)dr.fromBufferAttribute(o,c),l&&(lc.fromBufferAttribute(t,c),dr.add(lc)),a=Math.max(a,r.distanceToSquared(dr));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var r=e.position.array;if(e.normal===void 0)this.setAttribute("normal",new ze(new Float32Array(r.length),3));else for(var n=e.normal.array,s=0,o=n.length;s<o;s++)n[s]=0;var a=e.normal.array,l,c,h,f=new F,u=new F,m=new F,d=new F,v=new F;if(t)for(var p=t.array,s=0,o=t.count;s<o;s+=3)l=p[s+0]*3,c=p[s+1]*3,h=p[s+2]*3,f.fromArray(r,l),u.fromArray(r,c),m.fromArray(r,h),d.subVectors(m,u),v.subVectors(f,u),d.cross(v),a[l]+=d.x,a[l+1]+=d.y,a[l+2]+=d.z,a[c]+=d.x,a[c+1]+=d.y,a[c+2]+=d.z,a[h]+=d.x,a[h+1]+=d.y,a[h+2]+=d.z;else for(var s=0,o=r.length;s<o;s+=9)f.fromArray(r,s),u.fromArray(r,s+3),m.fromArray(r,s+6),d.subVectors(m,u),v.subVectors(f,u),d.cross(v),a[s]=d.x,a[s+1]=d.y,a[s+2]=d.z,a[s+3]=d.x,a[s+4]=d.y,a[s+5]=d.z,a[s+6]=d.x,a[s+7]=d.y,a[s+8]=d.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(t.attributes[n]!==void 0)for(var s=r[n],o=s.array,a=t.attributes[n],l=a.array,c=a.itemSize*e,h=Math.min(l.length,o.length-c),f=0,u=c;f<h;f++,u++)o[u]=l[f];return this},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,r=t.count;e<r;e++)dr.x=t.getX(e),dr.y=t.getY(e),dr.z=t.getZ(e),dr.normalize(),t.setXYZ(e,dr.x,dr.y,dr.z)},toNonIndexed:function(){function t(p,g){for(var y=p.array,_=p.itemSize,b=new y.constructor(g.length*_),w=0,S=0,E=0,x=g.length;E<x;E++){w=g[E]*_;for(var T=0;T<_;T++)b[S++]=y[w++]}return new ze(b,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ie,r=this.index.array,n=this.attributes;for(var s in n){var o=n[s],a=t(o,r);e.setAttribute(s,a)}var l=this.morphAttributes;for(s in l){for(var c=[],h=l[s],f=0,u=h.length;f<u;f++){var o=h[f],a=t(o,r);c.push(a)}e.morphAttributes[s]=c}e.morphTargetsRelative=this.morphTargetsRelative;for(var m=this.groups,f=0,d=m.length;f<d;f++){var v=m[f];e.addGroup(v.start,v.count,v.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){var e=this.parameters;for(var r in e)e[r]!==void 0&&(t[r]=e[r]);return t}t.data={attributes:{}};var n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var s=this.attributes;for(var r in s){var o=s[r],a=o.toJSON();o.name!==""&&(a.name=o.name),t.data.attributes[r]=a}var l={},c=!1;for(var r in this.morphAttributes){for(var h=this.morphAttributes[r],f=[],u=0,m=h.length;u<m;u++){var o=h[u],a=o.toJSON();o.name!==""&&(a.name=o.name),f.push(a)}f.length>0&&(l[r]=f,c=!0)}c&&(t.data.morphAttributes=l,t.data.morphTargetsRelative=this.morphTargetsRelative);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var v=this.boundingSphere;return v!==null&&(t.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),t},clone:function(){return new Ie().copy(this)},copy:function(t){var e,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.index;s!==null&&this.setIndex(s.clone());var o=t.attributes;for(e in o){var a=o[e];this.setAttribute(e,a.clone())}var l=t.morphAttributes;for(e in l){var c=[],h=l[e];for(r=0,n=h.length;r<n;r++)c.push(h[r].clone());this.morphAttributes[e]=c}this.morphTargetsRelative=t.morphTargetsRelative;var f=t.groups;for(r=0,n=f.length;r<n;r++){var u=f[r];this.addGroup(u.start,u.count,u.materialIndex)}var m=t.boundingBox;m!==null&&(this.boundingBox=m.clone());var d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var BC=new Ue,Pa=new sc,x0=new Wn,Ia=new F,Ra=new F,La=new F,T0=new F,A0=new F,M0=new F,Ap=new F,Mp=new F,Cp=new F,cc=new he,hc=new he,uc=new he,yu=new F,Pp=new F;function Xe(t,e){ve.call(this),this.type="Mesh",this.geometry=t!==void 0?t:new Ie,this.material=e!==void 0?e:new lr,this.updateMorphTargets()}Xe.prototype=Object.assign(Object.create(ve.prototype),{constructor:Xe,isMesh:!0,copy:function(t){return ve.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t=this.geometry,e,r,n;if(t.isBufferGeometry){var s=t.morphAttributes,o=Object.keys(s);if(o.length>0){var a=s[o[0]];if(a!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,r=a.length;e<r;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var l=t.morphTargets;l!==void 0&&l.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var r=this.geometry,n=this.material,s=this.matrixWorld;if(n!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),x0.copy(r.boundingSphere),x0.applyMatrix4(s),t.ray.intersectsSphere(x0)!==!1&&(BC.getInverse(s),Pa.copy(t.ray).applyMatrix4(BC),!(r.boundingBox!==null&&Pa.intersectsBox(r.boundingBox)===!1)))){var o;if(r.isBufferGeometry){var a,l,c,h=r.index,f=r.attributes.position,u=r.morphAttributes.position,m=r.morphTargetsRelative,d=r.attributes.uv,v=r.attributes.uv2,p=r.groups,g=r.drawRange,y,_,b,w,S,E,x,T;if(h!==null)if(Array.isArray(n))for(y=0,b=p.length;y<b;y++)for(S=p[y],E=n[S.materialIndex],x=Math.max(S.start,g.start),T=Math.min(S.start+S.count,g.start+g.count),_=x,w=T;_<w;_+=3)a=h.getX(_),l=h.getX(_+1),c=h.getX(_+2),o=Ip(this,E,t,Pa,f,u,m,d,v,a,l,c),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=S.materialIndex,e.push(o));else for(x=Math.max(0,g.start),T=Math.min(h.count,g.start+g.count),y=x,b=T;y<b;y+=3)a=h.getX(y),l=h.getX(y+1),c=h.getX(y+2),o=Ip(this,n,t,Pa,f,u,m,d,v,a,l,c),o&&(o.faceIndex=Math.floor(y/3),e.push(o));else if(f!==void 0)if(Array.isArray(n))for(y=0,b=p.length;y<b;y++)for(S=p[y],E=n[S.materialIndex],x=Math.max(S.start,g.start),T=Math.min(S.start+S.count,g.start+g.count),_=x,w=T;_<w;_+=3)a=_,l=_+1,c=_+2,o=Ip(this,E,t,Pa,f,u,m,d,v,a,l,c),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=S.materialIndex,e.push(o));else for(x=Math.max(0,g.start),T=Math.min(f.count,g.start+g.count),y=x,b=T;y<b;y+=3)a=y,l=y+1,c=y+2,o=Ip(this,n,t,Pa,f,u,m,d,v,a,l,c),o&&(o.faceIndex=Math.floor(y/3),e.push(o))}else if(r.isGeometry){var A,P,z,V=Array.isArray(n),L=r.vertices,O=r.faces,k,X=r.faceVertexUvs[0];X.length>0&&(k=X);for(var R=0,U=O.length;R<U;R++){var q=O[R],Z=V?n[q.materialIndex]:n;if(Z!==void 0&&(A=L[q.a],P=L[q.b],z=L[q.c],o=UC(this,Z,t,Pa,A,P,z,yu),o)){if(k&&k[R]){var oe=k[R];cc.copy(oe[0]),hc.copy(oe[1]),uc.copy(oe[2]),o.uv=Ir.getUV(yu,A,P,z,cc,hc,uc,new he)}o.face=q,o.faceIndex=R,e.push(o)}}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function UC(t,e,r,n,s,o,a,l){var c;if(e.side===tr?c=n.intersectTriangle(a,o,s,!0,l):c=n.intersectTriangle(s,o,a,e.side!==yo,l),c===null)return null;Pp.copy(l),Pp.applyMatrix4(t.matrixWorld);var h=r.ray.origin.distanceTo(Pp);return h<r.near||h>r.far?null:{distance:h,point:Pp.clone(),object:t}}function Ip(t,e,r,n,s,o,a,l,c,h,f,u){Ia.fromBufferAttribute(s,h),Ra.fromBufferAttribute(s,f),La.fromBufferAttribute(s,u);var m=t.morphTargetInfluences;if(e.morphTargets&&o&&m){Ap.set(0,0,0),Mp.set(0,0,0),Cp.set(0,0,0);for(var d=0,v=o.length;d<v;d++){var p=m[d],g=o[d];p!==0&&(T0.fromBufferAttribute(g,h),A0.fromBufferAttribute(g,f),M0.fromBufferAttribute(g,u),a?(Ap.addScaledVector(T0,p),Mp.addScaledVector(A0,p),Cp.addScaledVector(M0,p)):(Ap.addScaledVector(T0.sub(Ia),p),Mp.addScaledVector(A0.sub(Ra),p),Cp.addScaledVector(M0.sub(La),p)))}Ia.add(Ap),Ra.add(Mp),La.add(Cp)}var y=UC(t,e,r,n,Ia,Ra,La,yu);if(y){l&&(cc.fromBufferAttribute(l,h),hc.fromBufferAttribute(l,f),uc.fromBufferAttribute(l,u),y.uv=Ir.getUV(yu,Ia,Ra,La,cc,hc,uc,new he)),c&&(cc.fromBufferAttribute(c,h),hc.fromBufferAttribute(c,f),uc.fromBufferAttribute(c,u),y.uv2=Ir.getUV(yu,Ia,Ra,La,cc,hc,uc,new he));var _=new Tp(h,f,u);Ir.getNormal(Ia,Ra,La,_.normal),y.face=_}return y}var U5=0,jn=new Ue,C0=new ve,Rp=new F;function Ke(){Object.defineProperty(this,"id",{value:U5+=2}),this.uuid=Qe.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Ke.prototype=Object.assign(Object.create(yr.prototype),{constructor:Ke,isGeometry:!0,applyMatrix4:function(t){for(var e=new Br().getNormalMatrix(t),r=0,n=this.vertices.length;r<n;r++){var s=this.vertices[r];s.applyMatrix4(t)}for(var r=0,n=this.faces.length;r<n;r++){var o=this.faces[r];o.normal.applyMatrix3(e).normalize();for(var a=0,l=o.vertexNormals.length;a<l;a++)o.vertexNormals[a].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return jn.makeRotationX(t),this.applyMatrix4(jn),this},rotateY:function(t){return jn.makeRotationY(t),this.applyMatrix4(jn),this},rotateZ:function(t){return jn.makeRotationZ(t),this.applyMatrix4(jn),this},translate:function(t,e,r){return jn.makeTranslation(t,e,r),this.applyMatrix4(jn),this},scale:function(t,e,r){return jn.makeScale(t,e,r),this.applyMatrix4(jn),this},lookAt:function(t){return C0.lookAt(t),C0.updateMatrix(),this.applyMatrix4(C0.matrix),this},fromBufferGeometry:function(t){var e=this,r=t.index!==null?t.index.array:void 0,n=t.attributes;if(n.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var s=n.position.array,o=n.normal!==void 0?n.normal.array:void 0,a=n.color!==void 0?n.color.array:void 0,l=n.uv!==void 0?n.uv.array:void 0,c=n.uv2!==void 0?n.uv2.array:void 0;c!==void 0&&(this.faceVertexUvs[1]=[]);for(var h=0;h<s.length;h+=3)e.vertices.push(new F().fromArray(s,h)),a!==void 0&&e.colors.push(new Se().fromArray(a,h));function f(y,_,b,w){var S=a===void 0?[]:[e.colors[y].clone(),e.colors[_].clone(),e.colors[b].clone()],E=o===void 0?[]:[new F().fromArray(o,y*3),new F().fromArray(o,_*3),new F().fromArray(o,b*3)],x=new Tp(y,_,b,E,S,w);e.faces.push(x),l!==void 0&&e.faceVertexUvs[0].push([new he().fromArray(l,y*2),new he().fromArray(l,_*2),new he().fromArray(l,b*2)]),c!==void 0&&e.faceVertexUvs[1].push([new he().fromArray(c,y*2),new he().fromArray(c,_*2),new he().fromArray(c,b*2)])}var u=t.groups;if(u.length>0)for(var h=0;h<u.length;h++)for(var m=u[h],d=m.start,v=m.count,p=d,g=d+v;p<g;p+=3)r!==void 0?f(r[p],r[p+1],r[p+2],m.materialIndex):f(p,p+1,p+2,m.materialIndex);else if(r!==void 0)for(var h=0;h<r.length;h+=3)f(r[h],r[h+1],r[h+2]);else for(var h=0;h<s.length/3;h+=3)f(h,h+1,h+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rp).negate(),this.translate(Rp.x,Rp.y,Rp.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,r=e===0?1:1/e,n=new Ue;return n.set(r,0,0,-r*t.x,0,r,0,-r*t.y,0,0,r,-r*t.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var t=new F,e=new F,r=0,n=this.faces.length;r<n;r++){var s=this.faces[r],o=this.vertices[s.a],a=this.vertices[s.b],l=this.vertices[s.c];t.subVectors(l,a),e.subVectors(o,a),t.cross(e),t.normalize(),s.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);var e,r,n,s,o,a;for(a=new Array(this.vertices.length),e=0,r=this.vertices.length;e<r;e++)a[e]=new F;if(t){var l,c,h,f=new F,u=new F;for(n=0,s=this.faces.length;n<s;n++)o=this.faces[n],l=this.vertices[o.a],c=this.vertices[o.b],h=this.vertices[o.c],f.subVectors(h,c),u.subVectors(l,c),f.cross(u),a[o.a].add(f),a[o.b].add(f),a[o.c].add(f)}else for(this.computeFaceNormals(),n=0,s=this.faces.length;n<s;n++)o=this.faces[n],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,r=this.vertices.length;e<r;e++)a[e].normalize();for(n=0,s=this.faces.length;n<s;n++){o=this.faces[n];var m=o.vertexNormals;m.length===3?(m[0].copy(a[o.a]),m[1].copy(a[o.b]),m[2].copy(a[o.c])):(m[0]=a[o.a].clone(),m[1]=a[o.b].clone(),m[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,r;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){r=this.faces[t];var n=r.vertexNormals;n.length===3?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,r,n,s;for(r=0,n=this.faces.length;r<n;r++)for(s=this.faces[r],s.__originalFaceNormal?s.__originalFaceNormal.copy(s.normal):s.__originalFaceNormal=s.normal.clone(),s.__originalVertexNormals||(s.__originalVertexNormals=[]),t=0,e=s.vertexNormals.length;t<e;t++)s.__originalVertexNormals[t]?s.__originalVertexNormals[t].copy(s.vertexNormals[t]):s.__originalVertexNormals[t]=s.vertexNormals[t].clone();var o=new Ke;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals,h,f;for(r=0,n=this.faces.length;r<n;r++)h=new F,f={a:new F,b:new F,c:new F},a.push(h),l.push(f)}var c=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var h,f;for(r=0,n=this.faces.length;r<n;r++)s=this.faces[r],h=c.faceNormals[r],f=c.vertexNormals[r],h.copy(s.normal),f.a.copy(s.vertexNormals[0]),f.b.copy(s.vertexNormals[1]),f.c.copy(s.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)s=this.faces[r],s.normal=s.__originalFaceNormal,s.vertexNormals=s.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Hr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Wn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,r){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}var n,s=this.vertices.length,o=this.vertices,a=t.vertices,l=this.faces,c=t.faces,h=this.colors,f=t.colors;r===void 0&&(r=0),e!==void 0&&(n=new Br().getNormalMatrix(e));for(var u=0,m=a.length;u<m;u++){var d=a[u],v=d.clone();e!==void 0&&v.applyMatrix4(e),o.push(v)}for(var u=0,m=f.length;u<m;u++)h.push(f[u].clone());for(u=0,m=c.length;u<m;u++){var p=c[u],g,y,_,b=p.vertexNormals,w=p.vertexColors;g=new Tp(p.a+s,p.b+s,p.c+s),g.normal.copy(p.normal),n!==void 0&&g.normal.applyMatrix3(n).normalize();for(var S=0,E=b.length;S<E;S++)y=b[S].clone(),n!==void 0&&y.applyMatrix3(n).normalize(),g.vertexNormals.push(y);g.color.copy(p.color);for(var S=0,E=w.length;S<E;S++)_=w[S],g.vertexColors.push(_.clone());g.materialIndex=p.materialIndex+r,l.push(g)}for(var u=0,m=t.faceVertexUvs.length;u<m;u++){var x=t.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(var S=0,E=x.length;S<E;S++){for(var T=x[S],A=[],P=0,z=T.length;P<z;P++)A.push(T[P].clone());this.faceVertexUvs[u].push(A)}}},mergeMesh:function(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){var t={},e=[],r=[],n,s,o=4,a=Math.pow(10,o),l,c,h,f,u,m;for(l=0,c=this.vertices.length;l<c;l++)n=this.vertices[l],s=Math.round(n.x*a)+"_"+Math.round(n.y*a)+"_"+Math.round(n.z*a),t[s]===void 0?(t[s]=l,e.push(this.vertices[l]),r[l]=e.length-1):r[l]=r[t[s]];var d=[];for(l=0,c=this.faces.length;l<c;l++){h=this.faces[l],h.a=r[h.a],h.b=r[h.b],h.c=r[h.c],f=[h.a,h.b,h.c];for(var v=0;v<3;v++)if(f[v]===f[(v+1)%3]){d.push(l);break}}for(l=d.length-1;l>=0;l--){var p=d[l];for(this.faces.splice(p,1),u=0,m=this.faceVertexUvs.length;u<m;u++)this.faceVertexUvs[u].splice(p,1)}var g=this.vertices.length-e.length;return this.vertices=e,g},setFromPoints:function(t){this.vertices=[];for(var e=0,r=t.length;e<r;e++){var n=t[e];this.vertices.push(new F(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,r=0;r<e;r++)t[r]._id=r;function n(h,f){return h.materialIndex-f.materialIndex}t.sort(n);var s=this.faceVertexUvs[0],o=this.faceVertexUvs[1],a,l;s&&s.length===e&&(a=[]),o&&o.length===e&&(l=[]);for(var r=0;r<e;r++){var c=t[r]._id;a&&a.push(s[c]),l&&l.push(o[c])}a&&(this.faceVertexUvs[0]=a),l&&(this.faceVertexUvs[1]=l)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){var e=this.parameters;for(var r in e)e[r]!==void 0&&(t[r]=e[r]);return t}for(var n=[],s=0;s<this.vertices.length;s++){var o=this.vertices[s];n.push(o.x,o.y,o.z)}for(var a=[],l=[],c={},h=[],f={},u=[],m={},s=0;s<this.faces.length;s++){var d=this.faces[s],v=!0,p=!1,g=this.faceVertexUvs[0][s]!==void 0,y=d.normal.length()>0,_=d.vertexNormals.length>0,b=d.color.r!==1||d.color.g!==1||d.color.b!==1,w=d.vertexColors.length>0,S=0;if(S=A(S,0,0),S=A(S,1,v),S=A(S,2,p),S=A(S,3,g),S=A(S,4,y),S=A(S,5,_),S=A(S,6,b),S=A(S,7,w),a.push(S),a.push(d.a,d.b,d.c),a.push(d.materialIndex),g){var E=this.faceVertexUvs[0][s];a.push(V(E[0]),V(E[1]),V(E[2]))}if(y&&a.push(P(d.normal)),_){var x=d.vertexNormals;a.push(P(x[0]),P(x[1]),P(x[2]))}if(b&&a.push(z(d.color)),w){var T=d.vertexColors;a.push(z(T[0]),z(T[1]),z(T[2]))}}function A(L,O,k){return k?L|1<<O:L&~(1<<O)}function P(L){var O=L.x.toString()+L.y.toString()+L.z.toString();return c[O]!==void 0||(c[O]=l.length/3,l.push(L.x,L.y,L.z)),c[O]}function z(L){var O=L.r.toString()+L.g.toString()+L.b.toString();return f[O]!==void 0||(f[O]=h.length,h.push(L.getHex())),f[O]}function V(L){var O=L.x.toString()+L.y.toString();return m[O]!==void 0||(m[O]=u.length/2,u.push(L.x,L.y)),m[O]}return t.data={},t.data.vertices=n,t.data.normals=l,h.length>0&&(t.data.colors=h),u.length>0&&(t.data.uvs=[u]),t.data.faces=a,t},clone:function(){return new Ke().copy(this)},copy:function(t){var e,r,n,s,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var l=t.vertices;for(e=0,r=l.length;e<r;e++)this.vertices.push(l[e].clone());var c=t.colors;for(e=0,r=c.length;e<r;e++)this.colors.push(c[e].clone());var h=t.faces;for(e=0,r=h.length;e<r;e++)this.faces.push(h[e].clone());for(e=0,r=t.faceVertexUvs.length;e<r;e++){var f=t.faceVertexUvs[e];for(this.faceVertexUvs[e]===void 0&&(this.faceVertexUvs[e]=[]),n=0,s=f.length;n<s;n++){var u=f[n],m=[];for(o=0,a=u.length;o<a;o++){var d=u[o];m.push(d.clone())}this.faceVertexUvs[e].push(m)}}var v=t.morphTargets;for(e=0,r=v.length;e<r;e++){var p={};if(p.name=v[e].name,v[e].vertices!==void 0)for(p.vertices=[],n=0,s=v[e].vertices.length;n<s;n++)p.vertices.push(v[e].vertices[n].clone());if(v[e].normals!==void 0)for(p.normals=[],n=0,s=v[e].normals.length;n<s;n++)p.normals.push(v[e].normals[n].clone());this.morphTargets.push(p)}var g=t.morphNormals;for(e=0,r=g.length;e<r;e++){var y={};if(g[e].vertexNormals!==void 0)for(y.vertexNormals=[],n=0,s=g[e].vertexNormals.length;n<s;n++){var _=g[e].vertexNormals[n],b={};b.a=_.a.clone(),b.b=_.b.clone(),b.c=_.c.clone(),y.vertexNormals.push(b)}if(g[e].faceNormals!==void 0)for(y.faceNormals=[],n=0,s=g[e].faceNormals.length;n<s;n++)y.faceNormals.push(g[e].faceNormals[n].clone());this.morphNormals.push(y)}var w=t.skinWeights;for(e=0,r=w.length;e<r;e++)this.skinWeights.push(w[e].clone());var S=t.skinIndices;for(e=0,r=S.length;e<r;e++)this.skinIndices.push(S[e].clone());var E=t.lineDistances;for(e=0,r=E.length;e<r;e++)this.lineDistances.push(E[e]);var x=t.boundingBox;x!==null&&(this.boundingBox=x.clone());var T=t.boundingSphere;return T!==null&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var HC=class extends Ke{constructor(e,r,n,s,o,a){super();this.type="BoxGeometry",this.parameters={width:e,height:r,depth:n,widthSegments:s,heightSegments:o,depthSegments:a},this.fromBufferGeometry(new Oa(e,r,n,s,o,a)),this.mergeVertices()}},Oa=class extends Ie{constructor(e,r,n,s,o,a){super();this.type="BoxBufferGeometry",this.parameters={width:e,height:r,depth:n,widthSegments:s,heightSegments:o,depthSegments:a};var l=this;e=e||1,r=r||1,n=n||1,s=Math.floor(s)||1,o=Math.floor(o)||1,a=Math.floor(a)||1;var c=[],h=[],f=[],u=[],m=0,d=0;v("z","y","x",-1,-1,n,r,e,a,o,0),v("z","y","x",1,-1,n,r,-e,a,o,1),v("x","z","y",1,1,e,n,r,s,a,2),v("x","z","y",1,-1,e,n,-r,s,a,3),v("x","y","z",1,-1,e,r,n,s,o,4),v("x","y","z",-1,-1,e,r,-n,s,o,5),this.setIndex(c),this.setAttribute("position",new Pe(h,3)),this.setAttribute("normal",new Pe(f,3)),this.setAttribute("uv",new Pe(u,2));function v(p,g,y,_,b,w,S,E,x,T,A){var P=w/x,z=S/T,V=w/2,L=S/2,O=E/2,k=x+1,X=T+1,R=0,U=0,q,Z,oe=new F;for(Z=0;Z<X;Z++){var N=Z*z-L;for(q=0;q<k;q++){var M=q*P-V;oe[p]=M*_,oe[g]=N*b,oe[y]=O,h.push(oe.x,oe.y,oe.z),oe[p]=0,oe[g]=0,oe[y]=E>0?1:-1,f.push(oe.x,oe.y,oe.z),u.push(q/x),u.push(1-Z/T),R+=1}}for(Z=0;Z<T;Z++)for(q=0;q<x;q++){var $=m+q+k*Z,W=m+q+k*(Z+1),H=m+(q+1)+k*(Z+1),ee=m+(q+1)+k*Z;c.push($,W,ee),c.push(W,H,ee),U+=6}l.addGroup(d,U,A),d+=U,m+=R}}};function fc(t){var e={};for(var r in t){e[r]={};for(var n in t[r]){var s=t[r][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture)?e[r][n]=s.clone():Array.isArray(s)?e[r][n]=s.slice():e[r][n]=s}}return e}function qr(t){for(var e={},r=0;r<t.length;r++){var n=fc(t[r]);for(var s in n)e[s]=n[s]}return e}var H5={clone:fc,merge:qr},q5=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,z5=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function zr(t){Ge.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=q5,this.fragmentShader=z5,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}zr.prototype=Object.create(Ge.prototype);zr.prototype.constructor=zr;zr.prototype.isShaderMaterial=!0;zr.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=fc(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this};zr.prototype.toJSON=function(t){var e=Ge.prototype.toJSON.call(this,t);e.uniforms={};for(var r in this.uniforms){var n=this.uniforms[r],s=n.value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)this.extensions[a]===!0&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e};function Ps(){ve.call(this),this.type="Camera",this.matrixWorldInverse=new Ue,this.projectionMatrix=new Ue,this.projectionMatrixInverse=new Ue}Ps.prototype=Object.assign(Object.create(ve.prototype),{constructor:Ps,isCamera:!0,copy:function(t,e){return ve.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new F),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){ve.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){ve.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function Bt(t,e,r,n){Ps.call(this),this.type="PerspectiveCamera",this.fov=t!==void 0?t:50,this.zoom=1,this.near=r!==void 0?r:.1,this.far=n!==void 0?n:2e3,this.focus=10,this.aspect=e!==void 0?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Bt.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Bt,isPerspectiveCamera:!0,copy:function(t,e){return Ps.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=Qe.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(Qe.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return Qe.RAD2DEG*2*Math.atan(Math.tan(Qe.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,r,n,s,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(Qe.DEG2RAD*.5*this.fov)/this.zoom,r=2*e,n=this.aspect*r,s=-.5*n,o=this.view;if(this.view!==null&&this.view.enabled){var a=o.fullWidth,l=o.fullHeight;s+=o.offsetX*n/a,e-=o.offsetY*r/l,n*=o.width/a,r*=o.height/l}var c=this.filmOffset;c!==0&&(s+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,e,e-r,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=ve.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var dc=90,pc=1;function _u(t,e,r,n){ve.call(this),this.type="CubeCamera";var s=new Bt(dc,pc,t,e);s.up.set(0,-1,0),s.lookAt(new F(1,0,0)),this.add(s);var o=new Bt(dc,pc,t,e);o.up.set(0,-1,0),o.lookAt(new F(-1,0,0)),this.add(o);var a=new Bt(dc,pc,t,e);a.up.set(0,0,1),a.lookAt(new F(0,1,0)),this.add(a);var l=new Bt(dc,pc,t,e);l.up.set(0,0,-1),l.lookAt(new F(0,-1,0)),this.add(l);var c=new Bt(dc,pc,t,e);c.up.set(0,-1,0),c.lookAt(new F(0,0,1)),this.add(c);var h=new Bt(dc,pc,t,e);h.up.set(0,-1,0),h.lookAt(new F(0,0,-1)),this.add(h),n=n||{format:Oi,magFilter:Vt,minFilter:Vt},this.renderTarget=new mc(r,n),this.renderTarget.texture.name="CubeCamera",this.update=function(f,u){this.parent===null&&this.updateMatrixWorld();var m=f.getRenderTarget(),d=this.renderTarget,v=d.texture.generateMipmaps;d.texture.generateMipmaps=!1,f.setRenderTarget(d,0),f.render(u,s),f.setRenderTarget(d,1),f.render(u,o),f.setRenderTarget(d,2),f.render(u,a),f.setRenderTarget(d,3),f.render(u,l),f.setRenderTarget(d,4),f.render(u,c),d.texture.generateMipmaps=v,f.setRenderTarget(d,5),f.render(u,h),f.setRenderTarget(m)},this.clear=function(f,u,m,d){for(var v=f.getRenderTarget(),p=this.renderTarget,g=0;g<6;g++)f.setRenderTarget(p,g),f.clear(u,m,d);f.setRenderTarget(v)}}_u.prototype=Object.create(ve.prototype);_u.prototype.constructor=_u;function mc(t,e,r){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=r),ur.call(this,t,t,e)}mc.prototype=Object.create(ur.prototype);mc.prototype.constructor=mc;mc.prototype.isWebGLCubeRenderTarget=!0;mc.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var r=new fr,n={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV;","	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},s=new zr({type:"CubemapFromEquirect",uniforms:fc(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:tr,blending:qn});s.uniforms.tEquirect.value=e;var o=new Xe(new Oa(5,5,5),s);r.add(o);var a=new _u(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(t,r),o.geometry.dispose(),o.material.dispose(),this};function gc(t,e,r,n,s,o,a,l,c,h,f,u){Mt.call(this,null,o,a,l,c,h,n,s,f,u),this.image={data:t||null,width:e||1,height:r||1},this.magFilter=c!==void 0?c:It,this.minFilter=h!==void 0?h:It,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}gc.prototype=Object.create(Mt.prototype);gc.prototype.constructor=gc;gc.prototype.isDataTexture=!0;var vc=new Wn,Lp=new F;function bu(t,e,r,n,s,o){this.planes=[t!==void 0?t:new Gn,e!==void 0?e:new Gn,r!==void 0?r:new Gn,n!==void 0?n:new Gn,s!==void 0?s:new Gn,o!==void 0?o:new Gn]}Object.assign(bu.prototype,{set:function(t,e,r,n,s,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(r),a[3].copy(n),a[4].copy(s),a[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){for(var e=this.planes,r=0;r<6;r++)e[r].copy(t.planes[r]);return this},setFromProjectionMatrix:function(t){var e=this.planes,r=t.elements,n=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],h=r[6],f=r[7],u=r[8],m=r[9],d=r[10],v=r[11],p=r[12],g=r[13],y=r[14],_=r[15];return e[0].setComponents(a-n,f-l,v-u,_-p).normalize(),e[1].setComponents(a+n,f+l,v+u,_+p).normalize(),e[2].setComponents(a+s,f+c,v+m,_+g).normalize(),e[3].setComponents(a-s,f-c,v-m,_-g).normalize(),e[4].setComponents(a-o,f-h,v-d,_-y).normalize(),e[5].setComponents(a+o,f+h,v+d,_+y).normalize(),this},intersectsObject:function(t){var e=t.geometry;return e.boundingSphere===null&&e.computeBoundingSphere(),vc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(vc)},intersectsSprite:function(t){return vc.center.set(0,0,0),vc.radius=.7071067811865476,vc.applyMatrix4(t.matrixWorld),this.intersectsSphere(vc)},intersectsSphere:function(t){for(var e=this.planes,r=t.center,n=-t.radius,s=0;s<6;s++){var o=e[s].distanceToPoint(r);if(o<n)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,r=0;r<6;r++){var n=e[r];if(Lp.x=n.normal.x>0?t.max.x:t.min.x,Lp.y=n.normal.y>0?t.max.y:t.min.y,Lp.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Lp)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,r=0;r<6;r++)if(e[r].distanceToPoint(t)<0)return!1;return!0}});var Me={common:{diffuse:{value:new Se(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Br},uv2Transform:{value:new Br},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new he(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Se(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Se(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Br}},sprite:{diffuse:{value:new Se(15658734)},opacity:{value:1},center:{value:new he(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Br}}};function qC(){var t=null,e=!1,r=null;function n(s,o){e!==!1&&(r(s,o),t.requestAnimationFrame(n))}return{start:function(){e!==!0&&r!==null&&(t.requestAnimationFrame(n),e=!0)},stop:function(){e=!1},setAnimationLoop:function(s){r=s},setContext:function(s){t=s}}}function W5(t,e){var r=e.isWebGL2,n=new WeakMap;function s(h,f){var u=h.array,m=h.usage,d=t.createBuffer();t.bindBuffer(f,d),t.bufferData(f,u,m),h.onUploadCallback();var v=5126;return u instanceof Float32Array?v=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?v=5123:u instanceof Int16Array?v=5122:u instanceof Uint32Array?v=5125:u instanceof Int32Array?v=5124:u instanceof Int8Array?v=5120:u instanceof Uint8Array&&(v=5121),{buffer:d,type:v,bytesPerElement:u.BYTES_PER_ELEMENT,version:h.version}}function o(h,f,u){var m=f.array,d=f.updateRange;t.bindBuffer(u,h),d.count===-1?t.bufferSubData(u,0,m):(r?t.bufferSubData(u,d.offset*m.BYTES_PER_ELEMENT,m,d.offset,d.count):t.bufferSubData(u,d.offset*m.BYTES_PER_ELEMENT,m.subarray(d.offset,d.offset+d.count)),d.count=-1)}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);var f=n.get(h);f&&(t.deleteBuffer(f.buffer),n.delete(h))}function c(h,f){h.isInterleavedBufferAttribute&&(h=h.data);var u=n.get(h);u===void 0?n.set(h,s(h,f)):u.version<h.version&&(o(u.buffer,h,f),u.version=h.version)}return{get:a,remove:l,update:c}}function Op(t,e,r,n){Ke.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new Ji(t,e,r,n)),this.mergeVertices()}Op.prototype=Object.create(Ke.prototype);Op.prototype.constructor=Op;function Ji(t,e,r,n){Ie.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:n},t=t||1,e=e||1;var s=t/2,o=e/2,a=Math.floor(r)||1,l=Math.floor(n)||1,c=a+1,h=l+1,f=t/a,u=e/l,m,d,v=[],p=[],g=[],y=[];for(d=0;d<h;d++){var _=d*u-o;for(m=0;m<c;m++){var b=m*f-s;p.push(b,-_,0),g.push(0,0,1),y.push(m/a),y.push(1-d/l)}}for(d=0;d<l;d++)for(m=0;m<a;m++){var w=m+c*d,S=m+c*(d+1),E=m+1+c*(d+1),x=m+1+c*d;v.push(w,S,x),v.push(S,E,x)}this.setIndex(v),this.setAttribute("position",new Pe(p,3)),this.setAttribute("normal",new Pe(g,3)),this.setAttribute("uv",new Pe(y,2))}Ji.prototype=Object.create(Ie.prototype);Ji.prototype.constructor=Ji;var G5=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,$5=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,j5=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,Y5=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,X5=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Z5="vec3 transformed = vec3( position );",Q5=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,K5=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,J5=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,e4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	#endif
#endif`,t4=`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,r4=`#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
	varying vec3 vViewPosition;
#endif`,i4=`#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
	vViewPosition = - mvPosition.xyz;
#endif`,n4=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,s4=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,o4=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,a4=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,l4=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}`,c4=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);
    } else if (face == 1.0) {
      uv = vec2(direction.x, -direction.z) / abs(direction.y);
    } else if (face == 2.0) {
      uv = direction.xy / abs(direction.z);
    } else if (face == 3.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);
    } else if (face == 4.0) {
      uv = direction.xz / abs(direction.y);
    } else {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);
    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,h4=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	transformedNormal = mat3( instanceMatrix ) * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,u4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,f4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,d4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,p4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,m4="gl_FragColor = linearToOutputTexel( gl_FragColor );",g4=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,v4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,y4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,b4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,w4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,S4=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,E4=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,x4=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,T4=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,A4=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,M4=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,C4=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,P4=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif`,I4=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,R4=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,L4=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,O4=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,D4=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,F4=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,N4=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = saturate( clearcoat );	material.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,k4=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,V4=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		directLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		directLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,B4=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,U4=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,H4=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,q4=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,z4=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,W4=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,G4=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,$4=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,j4=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Y4=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,X4=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Z4=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Q4=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,K4=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,J4=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,e6=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,t6=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,r6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,i6=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,n6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,s6=`#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,o6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,a6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,l6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,c6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,h6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,u6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,f6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,d6=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,p6=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,m6=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif`,g6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}`,v6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,y6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,_6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,b6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,w6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,S6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,E6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,x6=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,T6=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,A6=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,M6=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,C6=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,P6=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,I6=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,R6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,L6=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,O6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,D6=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,F6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,N6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}`,k6=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}`,V6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,B6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,U6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,H6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,q6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,z6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,W6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,G6=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$6=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j6=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Y6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,X6=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Z6=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q6=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J6=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ej=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tj=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,ij=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,nj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,sj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,oj=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,aj=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,cj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ft={alphamap_fragment:G5,alphamap_pars_fragment:$5,alphatest_fragment:j5,aomap_fragment:Y5,aomap_pars_fragment:X5,begin_vertex:Z5,beginnormal_vertex:Q5,bsdfs:K5,bumpmap_pars_fragment:J5,clipping_planes_fragment:e4,clipping_planes_pars_fragment:t4,clipping_planes_pars_vertex:r4,clipping_planes_vertex:i4,color_fragment:n4,color_pars_fragment:s4,color_pars_vertex:o4,color_vertex:a4,common:l4,cube_uv_reflection_fragment:c4,defaultnormal_vertex:h4,displacementmap_pars_vertex:u4,displacementmap_vertex:f4,emissivemap_fragment:d4,emissivemap_pars_fragment:p4,encodings_fragment:m4,encodings_pars_fragment:g4,envmap_fragment:v4,envmap_common_pars_fragment:y4,envmap_pars_fragment:_4,envmap_pars_vertex:b4,envmap_physical_pars_fragment:R4,envmap_vertex:w4,fog_vertex:S4,fog_pars_vertex:E4,fog_fragment:x4,fog_pars_fragment:T4,gradientmap_pars_fragment:A4,lightmap_fragment:M4,lightmap_pars_fragment:C4,lights_lambert_vertex:P4,lights_pars_begin:I4,lights_toon_fragment:L4,lights_toon_pars_fragment:O4,lights_phong_fragment:D4,lights_phong_pars_fragment:F4,lights_physical_fragment:N4,lights_physical_pars_fragment:k4,lights_fragment_begin:V4,lights_fragment_maps:B4,lights_fragment_end:U4,logdepthbuf_fragment:H4,logdepthbuf_pars_fragment:q4,logdepthbuf_pars_vertex:z4,logdepthbuf_vertex:W4,map_fragment:G4,map_pars_fragment:$4,map_particle_fragment:j4,map_particle_pars_fragment:Y4,metalnessmap_fragment:X4,metalnessmap_pars_fragment:Z4,morphnormal_vertex:Q4,morphtarget_pars_vertex:K4,morphtarget_vertex:J4,normal_fragment_begin:e6,normal_fragment_maps:t6,normalmap_pars_fragment:r6,clearcoat_normal_fragment_begin:i6,clearcoat_normal_fragment_maps:n6,clearcoat_normalmap_pars_fragment:s6,packing:o6,premultiplied_alpha_fragment:a6,project_vertex:l6,dithering_fragment:c6,dithering_pars_fragment:h6,roughnessmap_fragment:u6,roughnessmap_pars_fragment:f6,shadowmap_pars_fragment:d6,shadowmap_pars_vertex:p6,shadowmap_vertex:m6,shadowmask_pars_fragment:g6,skinbase_vertex:v6,skinning_pars_vertex:y6,skinning_vertex:_6,skinnormal_vertex:b6,specularmap_fragment:w6,specularmap_pars_fragment:S6,tonemapping_fragment:E6,tonemapping_pars_fragment:x6,uv_pars_fragment:T6,uv_pars_vertex:A6,uv_vertex:M6,uv2_pars_fragment:C6,uv2_pars_vertex:P6,uv2_vertex:I6,worldpos_vertex:R6,background_frag:L6,background_vert:O6,cube_frag:D6,cube_vert:F6,depth_frag:N6,depth_vert:k6,distanceRGBA_frag:V6,distanceRGBA_vert:B6,equirect_frag:U6,equirect_vert:H6,linedashed_frag:q6,linedashed_vert:z6,meshbasic_frag:W6,meshbasic_vert:G6,meshlambert_frag:$6,meshlambert_vert:j6,meshmatcap_frag:Y6,meshmatcap_vert:X6,meshtoon_frag:Z6,meshtoon_vert:Q6,meshphong_frag:K6,meshphong_vert:J6,meshphysical_frag:ej,meshphysical_vert:tj,normal_frag:rj,normal_vert:ij,points_frag:nj,points_vert:sj,shadow_frag:oj,shadow_vert:aj,sprite_frag:lj,sprite_vert:cj},Is={basic:{uniforms:qr([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.fog]),vertexShader:ft.meshbasic_vert,fragmentShader:ft.meshbasic_frag},lambert:{uniforms:qr([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.fog,Me.lights,{emissive:{value:new Se(0)}}]),vertexShader:ft.meshlambert_vert,fragmentShader:ft.meshlambert_frag},phong:{uniforms:qr([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,Me.lights,{emissive:{value:new Se(0)},specular:{value:new Se(1118481)},shininess:{value:30}}]),vertexShader:ft.meshphong_vert,fragmentShader:ft.meshphong_frag},standard:{uniforms:qr([Me.common,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.roughnessmap,Me.metalnessmap,Me.fog,Me.lights,{emissive:{value:new Se(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag},toon:{uniforms:qr([Me.common,Me.specularmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.gradientmap,Me.fog,Me.lights,{emissive:{value:new Se(0)},specular:{value:new Se(1118481)},shininess:{value:30}}]),vertexShader:ft.meshtoon_vert,fragmentShader:ft.meshtoon_frag},matcap:{uniforms:qr([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,{matcap:{value:null}}]),vertexShader:ft.meshmatcap_vert,fragmentShader:ft.meshmatcap_frag},points:{uniforms:qr([Me.points,Me.fog]),vertexShader:ft.points_vert,fragmentShader:ft.points_frag},dashed:{uniforms:qr([Me.common,Me.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ft.linedashed_vert,fragmentShader:ft.linedashed_frag},depth:{uniforms:qr([Me.common,Me.displacementmap]),vertexShader:ft.depth_vert,fragmentShader:ft.depth_frag},normal:{uniforms:qr([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,{opacity:{value:1}}]),vertexShader:ft.normal_vert,fragmentShader:ft.normal_frag},sprite:{uniforms:qr([Me.sprite,Me.fog]),vertexShader:ft.sprite_vert,fragmentShader:ft.sprite_frag},background:{uniforms:{uvTransform:{value:new Br},t2D:{value:null}},vertexShader:ft.background_vert,fragmentShader:ft.background_frag},cube:{uniforms:qr([Me.envmap,{opacity:{value:1}}]),vertexShader:ft.cube_vert,fragmentShader:ft.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ft.equirect_vert,fragmentShader:ft.equirect_frag},distanceRGBA:{uniforms:qr([Me.common,Me.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ft.distanceRGBA_vert,fragmentShader:ft.distanceRGBA_frag},shadow:{uniforms:qr([Me.lights,Me.fog,{color:{value:new Se(0)},opacity:{value:1}}]),vertexShader:ft.shadow_vert,fragmentShader:ft.shadow_frag}};Is.physical={uniforms:qr([Is.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Se(0)},clearcoatNormalScale:{value:new he(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag};function hj(t,e,r,n){var s=new Se(0),o=0,a,l,c=null,h=0,f=null;function u(d,v,p,g){var y=v.background,_=t.xr,b=_.getSession&&_.getSession();if(b&&b.environmentBlendMode==="additive"&&(y=null),y===null?m(s,o):y&&y.isColor&&(m(y,1),g=!0),(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLCubeRenderTarget||y.mapping===au)){l===void 0&&(l=new Xe(new Oa(1,1,1),new zr({type:"BackgroundCubeMaterial",uniforms:fc(Is.cube.uniforms),vertexShader:Is.cube.vertexShader,fragmentShader:Is.cube.fragmentShader,side:tr,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(S,E,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l));var w=y.isWebGLCubeRenderTarget?y.texture:y;l.material.uniforms.envMap.value=w,l.material.uniforms.flipEnvMap.value=w.isCubeTexture?-1:1,(c!==y||h!==w.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,c=y,h=w.version,f=t.toneMapping),d.unshift(l,l.geometry,l.material,0,0,null)}else y&&y.isTexture&&(a===void 0&&(a=new Xe(new Ji(2,2),new zr({type:"BackgroundMaterial",uniforms:fc(Is.background.uniforms),vertexShader:Is.background.vertexShader,fragmentShader:Is.background.fragmentShader,side:bn,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||h!==y.version||f!==t.toneMapping)&&(a.material.needsUpdate=!0,c=y,h=y.version,f=t.toneMapping),d.unshift(a,a.geometry,a.material,0,0,null))}function m(d,v){e.buffers.color.setClear(d.r,d.g,d.b,v,n)}return{getClearColor:function(){return s},setClearColor:function(d,v){s.set(d),o=v!==void 0?v:1,m(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(d){o=d,m(s,o)},render:u}}function uj(t,e,r,n){var s=n.isWebGL2,o;function a(h){o=h}function l(h,f){t.drawArrays(o,h,f),r.update(f,o)}function c(h,f,u,m){if(m!==0){var d,v;if(s)d=t,v="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[v](o,f,u,m),r.update(u,o,m)}}this.setMode=a,this.render=l,this.renderInstances=c}function fj(t,e,r){var n;function s(){if(n!==void 0)return n;var E=e.get("EXT_texture_filter_anisotropic");return E!==null?n=t.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT):n=0,n}function o(E){if(E==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a=typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&t instanceof WebGL2ComputeRenderingContext,l=r.precision!==void 0?r.precision:"highp",c=o(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);var h=r.logarithmicDepthBuffer===!0,f=t.getParameter(34930),u=t.getParameter(35660),m=t.getParameter(3379),d=t.getParameter(34076),v=t.getParameter(34921),p=t.getParameter(36347),g=t.getParameter(36348),y=t.getParameter(36349),_=u>0,b=a||!!e.get("OES_texture_float"),w=_&&b,S=a?t.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:s,getMaxPrecision:o,precision:l,logarithmicDepthBuffer:h,maxTextures:f,maxVertexTextures:u,maxTextureSize:m,maxCubemapSize:d,maxAttributes:v,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:w,maxSamples:S}}function dj(){var t=this,e=null,r=0,n=!1,s=!1,o=new Gn,a=new Br,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,u,m){var d=f.length!==0||u||r!==0||n;return n=u,e=h(f,m,0),r=f.length,d},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(f,u,m,d,v,p){if(!n||f===null||f.length===0||s&&!m)s?h(null):c();else{var g=s?0:r,y=g*4,_=v.clippingState||null;l.value=_,_=h(f,d,y,p);for(var b=0;b!==y;++b)_[b]=e[b];v.clippingState=_,this.numIntersection=u?this.numPlanes:0,this.numPlanes+=g}};function c(){l.value!==e&&(l.value=e,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function h(f,u,m,d){var v=f!==null?f.length:0,p=null;if(v!==0){if(p=l.value,d!==!0||p===null){var g=m+v*4,y=u.matrixWorldInverse;a.getNormalMatrix(y),(p===null||p.length<g)&&(p=new Float32Array(g));for(var _=0,b=m;_!==v;++_,b+=4)o.copy(f[_]).applyMatrix4(y,a),o.normal.toArray(p,b),p[b+3]=o.constant}l.value=p,l.needsUpdate=!0}return t.numPlanes=v,p}}function pj(t){var e={};return{get:function(r){if(e[r]!==void 0)return e[r];var n;switch(r){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(r)}return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),e[r]=n,n}}}function mj(t,e,r){var n=new WeakMap,s=new WeakMap;function o(f){var u=f.target,m=n.get(u);m.index!==null&&e.remove(m.index);for(var d in m.attributes)e.remove(m.attributes[d]);u.removeEventListener("dispose",o),n.delete(u);var v=s.get(m);v&&(e.remove(v),s.delete(m)),r.memory.geometries--}function a(f,u){var m=n.get(u);return m||(u.addEventListener("dispose",o),u.isBufferGeometry?m=u:u.isGeometry&&(u._bufferGeometry===void 0&&(u._bufferGeometry=new Ie().setFromObject(f)),m=u._bufferGeometry),n.set(u,m),r.memory.geometries++,m)}function l(f){var u=f.index,m=f.attributes;u!==null&&e.update(u,34963);for(var d in m)e.update(m[d],34962);var v=f.morphAttributes;for(var d in v)for(var p=v[d],g=0,y=p.length;g<y;g++)e.update(p[g],34962)}function c(f){var u=[],m=f.index,d=f.attributes.position,v=0;if(m!==null){var p=m.array;v=m.version;for(var g=0,y=p.length;g<y;g+=3){var _=p[g+0],b=p[g+1],w=p[g+2];u.push(_,b,b,w,w,_)}}else{var p=d.array;v=d.version;for(var g=0,y=p.length/3-1;g<y;g+=3){var _=g+0,b=g+1,w=g+2;u.push(_,b,b,w,w,_)}}var S=new(VC(u)>65535?gu:mu)(u,1);S.version=v,e.update(S,34963);var E=s.get(f);E&&e.remove(E),s.set(f,S)}function h(f){var u=s.get(f);if(u){var m=f.index;m!==null&&u.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:h}}function gj(t,e,r,n){var s=n.isWebGL2,o;function a(m){o=m}var l,c;function h(m){l=m.type,c=m.bytesPerElement}function f(m,d){t.drawElements(o,d,l,m*c),r.update(d,o)}function u(m,d,v,p){if(p!==0){var g,y;if(s)g=t,y="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[y](o,v,l,d*c,p),r.update(v,o,p)}}this.setMode=a,this.setIndex=h,this.render=f,this.renderInstances=u}function vj(t){var e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,a,l){switch(l=l||1,r.calls++,a){case 4:r.triangles+=l*(o/3);break;case 1:r.lines+=l*(o/2);break;case 3:r.lines+=l*(o-1);break;case 2:r.lines+=l*o;break;case 0:r.points+=l*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function s(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:s,update:n}}function yj(t,e){return Math.abs(e[1])-Math.abs(t[1])}function _j(t){var e={},r=new Float32Array(8);function n(s,o,a,l){var c=s.morphTargetInfluences,h=c===void 0?0:c.length,f=e[o.id];if(f===void 0){f=[];for(var u=0;u<h;u++)f[u]=[u,0];e[o.id]=f}for(var m=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal,u=0;u<h;u++){var v=f[u];v[1]!==0&&(m&&o.deleteAttribute("morphTarget"+u),d&&o.deleteAttribute("morphNormal"+u))}for(var u=0;u<h;u++){var v=f[u];v[0]=u,v[1]=c[u]}f.sort(yj);for(var p=0,u=0;u<8;u++){var v=f[u];if(v){var g=v[0],y=v[1];if(y){m&&o.setAttribute("morphTarget"+u,m[g]),d&&o.setAttribute("morphNormal"+u,d[g]),r[u]=y,p+=y;continue}}r[u]=0}var _=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",_),l.getUniforms().setValue(t,"morphTargetInfluences",r)}return{update:n}}function bj(t,e,r,n){var s={};function o(l){var c=n.render.frame,h=l.geometry,f=e.get(l,h);return s[f.id]!==c&&(h.isGeometry&&f.updateFromObject(l),e.update(f),s[f.id]=c),l.isInstancedMesh&&r.update(l.instanceMatrix,34962),f}function a(){s={}}return{update:o,dispose:a}}function To(t,e,r,n,s,o,a,l,c,h){t=t!==void 0?t:[],e=e!==void 0?e:Z_,a=a!==void 0?a:Oi,Mt.call(this,t,e,r,n,s,o,a,l,c,h),this.flipY=!1}To.prototype=Object.create(Mt.prototype);To.prototype.constructor=To;To.prototype.isCubeTexture=!0;Object.defineProperty(To.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});function wu(t,e,r,n){Mt.call(this,null),this.image={data:t||null,width:e||1,height:r||1,depth:n||1},this.magFilter=It,this.minFilter=It,this.wrapR=kr,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}wu.prototype=Object.create(Mt.prototype);wu.prototype.constructor=wu;wu.prototype.isDataTexture2DArray=!0;function Su(t,e,r,n){Mt.call(this,null),this.image={data:t||null,width:e||1,height:r||1,depth:n||1},this.magFilter=It,this.minFilter=It,this.wrapR=kr,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Su.prototype=Object.create(Mt.prototype);Su.prototype.constructor=Su;Su.prototype.isDataTexture3D=!0;var zC=new Mt,wj=new wu,Sj=new Su,WC=new To,GC=[],$C=[],jC=new Float32Array(16),YC=new Float32Array(9),XC=new Float32Array(4);function yc(t,e,r){var n=t[0];if(n<=0||n>0)return t;var s=e*r,o=GC[s];if(o===void 0&&(o=new Float32Array(s),GC[s]=o),e!==0){n.toArray(o,0);for(var a=1,l=0;a!==e;++a)l+=r,t[a].toArray(o,l)}return o}function en(t,e){if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Ni(t,e){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]}function ZC(t,e){var r=$C[e];r===void 0&&(r=new Int32Array(e),$C[e]=r);for(var n=0;n!==e;++n)r[n]=t.allocateTextureUnit();return r}function Ej(t,e){var r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function xj(t,e){var r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(en(r,e))return;t.uniform2fv(this.addr,e),Ni(r,e)}}function Tj(t,e){var r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(en(r,e))return;t.uniform3fv(this.addr,e),Ni(r,e)}}function Aj(t,e){var r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(en(r,e))return;t.uniform4fv(this.addr,e),Ni(r,e)}}function Mj(t,e){var r=this.cache,n=e.elements;if(n===void 0){if(en(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ni(r,e)}else{if(en(r,n))return;XC.set(n),t.uniformMatrix2fv(this.addr,!1,XC),Ni(r,n)}}function Cj(t,e){var r=this.cache,n=e.elements;if(n===void 0){if(en(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ni(r,e)}else{if(en(r,n))return;YC.set(n),t.uniformMatrix3fv(this.addr,!1,YC),Ni(r,n)}}function Pj(t,e){var r=this.cache,n=e.elements;if(n===void 0){if(en(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ni(r,e)}else{if(en(r,n))return;jC.set(n),t.uniformMatrix4fv(this.addr,!1,jC),Ni(r,n)}}function Ij(t,e,r){var n=this.cache,s=r.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),r.safeSetTexture2D(e||zC,s)}function Rj(t,e,r){var n=this.cache,s=r.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),r.setTexture2DArray(e||wj,s)}function Lj(t,e,r){var n=this.cache,s=r.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),r.setTexture3D(e||Sj,s)}function Oj(t,e,r){var n=this.cache,s=r.allocateTextureUnit();n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),r.safeSetTextureCube(e||WC,s)}function Dj(t,e){var r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function Fj(t,e){var r=this.cache;en(r,e)||(t.uniform2iv(this.addr,e),Ni(r,e))}function Nj(t,e){var r=this.cache;en(r,e)||(t.uniform3iv(this.addr,e),Ni(r,e))}function kj(t,e){var r=this.cache;en(r,e)||(t.uniform4iv(this.addr,e),Ni(r,e))}function Vj(t,e){var r=this.cache;r[0]!==e&&(t.uniform1ui(this.addr,e),r[0]=e)}function Bj(t){switch(t){case 5126:return Ej;case 35664:return xj;case 35665:return Tj;case 35666:return Aj;case 35674:return Mj;case 35675:return Cj;case 35676:return Pj;case 5124:case 35670:return Dj;case 35667:case 35671:return Fj;case 35668:case 35672:return Nj;case 35669:case 35673:return kj;case 5125:return Vj;case 35678:case 36198:case 36298:case 36306:case 35682:return Ij;case 35679:case 36299:case 36307:return Lj;case 35680:case 36300:case 36308:case 36293:return Oj;case 36289:case 36303:case 36311:case 36292:return Rj}}function Uj(t,e){t.uniform1fv(this.addr,e)}function Hj(t,e){t.uniform1iv(this.addr,e)}function qj(t,e){t.uniform2iv(this.addr,e)}function zj(t,e){t.uniform3iv(this.addr,e)}function Wj(t,e){t.uniform4iv(this.addr,e)}function Gj(t,e){var r=yc(e,this.size,2);t.uniform2fv(this.addr,r)}function $j(t,e){var r=yc(e,this.size,3);t.uniform3fv(this.addr,r)}function jj(t,e){var r=yc(e,this.size,4);t.uniform4fv(this.addr,r)}function Yj(t,e){var r=yc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function Xj(t,e){var r=yc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function Zj(t,e){var r=yc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function Qj(t,e,r){var n=e.length,s=ZC(r,n);t.uniform1iv(this.addr,s);for(var o=0;o!==n;++o)r.safeSetTexture2D(e[o]||zC,s[o])}function Kj(t,e,r){var n=e.length,s=ZC(r,n);t.uniform1iv(this.addr,s);for(var o=0;o!==n;++o)r.safeSetTextureCube(e[o]||WC,s[o])}function Jj(t){switch(t){case 5126:return Uj;case 35664:return Gj;case 35665:return $j;case 35666:return jj;case 35674:return Yj;case 35675:return Xj;case 35676:return Zj;case 5124:case 35670:return Hj;case 35667:case 35671:return qj;case 35668:case 35672:return zj;case 35669:case 35673:return Wj;case 35678:case 36198:case 36298:case 36306:case 35682:return Qj;case 35680:case 36300:case 36308:case 36293:return Kj}}function e8(t,e,r){this.id=t,this.addr=r,this.cache=[],this.setValue=Bj(e.type)}function QC(t,e,r){this.id=t,this.addr=r,this.cache=[],this.size=e.size,this.setValue=Jj(e.type)}QC.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Ni(e,t)};function KC(t){this.id=t,this.seq=[],this.map={}}KC.prototype.setValue=function(t,e,r){for(var n=this.seq,s=0,o=n.length;s!==o;++s){var a=n[s];a.setValue(t,e[a.id],r)}};var P0=/([\w\d_]+)(\])?(\[|\.)?/g;function JC(t,e){t.seq.push(e),t.map[e.id]=e}function t8(t,e,r){var n=t.name,s=n.length;for(P0.lastIndex=0;;){var o=P0.exec(n),a=P0.lastIndex,l=o[1],c=o[2]==="]",h=o[3];if(c&&(l=l|0),h===void 0||h==="["&&a+2===s){JC(r,h===void 0?new e8(l,t,e):new QC(l,t,e));break}else{var f=r.map,u=f[l];u===void 0&&(u=new KC(l),JC(r,u)),r=u}}}function Ao(t,e){this.seq=[],this.map={};for(var r=t.getProgramParameter(e,35718),n=0;n<r;++n){var s=t.getActiveUniform(e,n),o=t.getUniformLocation(e,s.name);t8(s,o,this)}}Ao.prototype.setValue=function(t,e,r,n){var s=this.map[e];s!==void 0&&s.setValue(t,r,n)};Ao.prototype.setOptional=function(t,e,r){var n=e[r];n!==void 0&&this.setValue(t,r,n)};Ao.upload=function(t,e,r,n){for(var s=0,o=e.length;s!==o;++s){var a=e[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(t,l.value,n)}};Ao.seqWithValue=function(t,e){for(var r=[],n=0,s=t.length;n!==s;++n){var o=t[n];o.id in e&&r.push(o)}return r};function eP(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}var r8=0;function i8(t){for(var e=t.split(`
`),r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join(`
`)}function tP(t){switch(t){case Vr:return["Linear","( value )"];case Zl:return["sRGB","( value )"];case Ta:return["RGBE","( value )"];case EC:return["RGBM","( value, 7.0 )"];case xC:return["RGBM","( value, 16.0 )"];case TC:return["RGBD","( value, 256.0 )"];case Ql:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case S5:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function rP(t,e,r){var n=t.getShaderParameter(e,35713),s=t.getShaderInfoLog(e).trim();if(n&&s==="")return"";var o=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+r+`
`+s+i8(o)}function Eu(t,e){var r=tP(e);return"vec4 "+t+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function n8(t,e){var r=tP(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function s8(t,e){var r;switch(e){case j_:r="Linear";break;case B$:r="Reinhard";break;case U$:r="Uncharted2";break;case H$:r="OptimizedCineon";break;case Y_:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function o8(t){var e=[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(xu).join(`
`)}function a8(t){var e=[];for(var r in t){var n=t[r];n!==!1&&e.push("#define "+r+" "+n)}return e.join(`
`)}function l8(t,e){for(var r={},n=t.getProgramParameter(e,35721),s=0;s<n;s++){var o=t.getActiveAttrib(e,s),a=o.name;r[a]=t.getAttribLocation(e,a)}return r}function xu(t){return t!==""}function iP(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function nP(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var c8=/^[ \t]*#include +<([\w\d./]+)>/gm;function I0(t){return t.replace(c8,h8)}function h8(t,e){var r=ft[e];if(r===void 0)throw new Error("Can not resolve #include <"+e+">");return I0(r)}var u8=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function sP(t){return t.replace(u8,f8)}function f8(t,e,r,n){for(var s="",o=parseInt(e);o<parseInt(r);o++)s+=n.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function oP(t){var e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function d8(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===eC?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===G_?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===su&&(e="SHADOWMAP_TYPE_VSM"),e}function p8(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Z_:case Q_:e="ENVMAP_TYPE_CUBE";break;case au:case J_:e="ENVMAP_TYPE_CUBE_UV";break;case hC:case K_:e="ENVMAP_TYPE_EQUIREC";break;case uC:e="ENVMAP_TYPE_SPHERE";break}return e}function m8(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Q_:case K_:e="ENVMAP_MODE_REFRACTION";break}return e}function g8(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case hp:e="ENVMAP_BLENDING_MULTIPLY";break;case k$:e="ENVMAP_BLENDING_MIX";break;case V$:e="ENVMAP_BLENDING_ADD";break}return e}function v8(t,e,r){var n=t.getContext(),s=r.defines,o=r.vertexShader,a=r.fragmentShader,l=d8(r),c=p8(r),h=m8(r),f=g8(r),u=t.gammaFactor>0?t.gammaFactor:1,m=r.isWebGL2?"":o8(r),d=a8(s),v=n.createProgram(),p,g,y=r.numMultiviewViews;if(r.isRawShaderMaterial?(p=[d].filter(xu).join(`
`),p.length>0&&(p+=`
`),g=[m,d].filter(xu).join(`
`),g.length>0&&(g+=`
`)):(p=[oP(r),"#define SHADER_NAME "+r.shaderName,d,r.instancing?"#define USE_INSTANCING":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+u,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(xu).join(`
`),g=[m,oP(r),"#define SHADER_NAME "+r.shaderName,d,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+u,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.envMap?"#define "+h:"",r.envMap?"#define "+f:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==up?"#define TONE_MAPPING":"",r.toneMapping!==up?ft.tonemapping_pars_fragment:"",r.toneMapping!==up?s8("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.matcapEncoding||r.envMapEncoding||r.emissiveMapEncoding||r.lightMapEncoding?ft.encodings_pars_fragment:"",r.mapEncoding?Eu("mapTexelToLinear",r.mapEncoding):"",r.matcapEncoding?Eu("matcapTexelToLinear",r.matcapEncoding):"",r.envMapEncoding?Eu("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Eu("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.lightMapEncoding?Eu("lightMapTexelToLinear",r.lightMapEncoding):"",r.outputEncoding?n8("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(xu).join(`
`)),o=I0(o),o=iP(o,r),o=nP(o,r),a=I0(a),a=iP(a,r),a=nP(a,r),o=sP(o),a=sP(a),r.isWebGL2&&!r.isRawShaderMaterial){var _=!1,b=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&o.match(b)!==null&&a.match(b)!==null&&(_=!0,o=o.replace(b,""),a=a.replace(b,"")),p=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,g=[`#version 300 es
`,"#define varying in",_?"":"out highp vec4 pc_fragColor;",_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g,y>0&&(p=p.replace(`#version 300 es
`,[`#version 300 es
`,"#extension GL_OVR_multiview2 : require","layout(num_views = "+y+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)),p=p.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+y+"];","uniform mat4 projectionMatrices["+y+"];","uniform mat4 viewMatrices["+y+"];","uniform mat3 normalMatrices["+y+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),g=g.replace(`#version 300 es
`,[`#version 300 es
`,"#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)),g=g.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+y+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`)))}var w=p+o,S=g+a,E=eP(n,35633,w),x=eP(n,35632,S);if(n.attachShader(v,E),n.attachShader(v,x),r.index0AttributeName!==void 0?n.bindAttribLocation(v,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),t.debug.checkShaderErrors){var T=n.getProgramInfoLog(v).trim(),A=n.getShaderInfoLog(E).trim(),P=n.getShaderInfoLog(x).trim(),z=!0,V=!0;if(n.getProgramParameter(v,35714)===!1){z=!1;var L=rP(n,E,"vertex"),O=rP(n,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",n.getError(),"35715",n.getProgramParameter(v,35715),"gl.getProgramInfoLog",T,L,O)}else T!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):(A===""||P==="")&&(V=!1);V&&(this.diagnostics={runnable:z,programLog:T,vertexShader:{log:A,prefix:p},fragmentShader:{log:P,prefix:g}})}n.deleteShader(E),n.deleteShader(x);var k;this.getUniforms=function(){return k===void 0&&(k=new Ao(n,v)),k};var X;return this.getAttributes=function(){return X===void 0&&(X=l8(n,v)),X},this.destroy=function(){n.deleteProgram(v),this.program=void 0},this.name=r.shaderName,this.id=r8++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=x,this.numMultiviewViews=y,this}function y8(t,e,r){var n=[],s=r.isWebGL2,o=r.logarithmicDepthBuffer,a=r.floatVertexTextures,l=r.precision,c=r.maxVertexUniforms,h=r.vertexTextures,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},u=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function m(p,g){var y;if(g){var _=Is[g];y={name:p.type,uniforms:H5.clone(_.uniforms),vertexShader:_.vertexShader,fragmentShader:_.fragmentShader}}else y={name:p.type,uniforms:p.uniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader};return y}function d(p){var g=p.skeleton,y=g.bones;if(a)return 1024;var _=c,b=Math.floor((_-20)/4),w=Math.min(b,y.length);return w<y.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+y.length+" bones. This GPU supports "+w+"."),0):w}function v(p){var g;return p?p.isTexture?g=p.encoding:p.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),g=p.texture.encoding):g=Vr,g}this.getParameters=function(p,g,y,_,b,w,S){var E=_.fog,x=p.isMeshStandardMaterial?_.environment:null,T=p.envMap||x,A=f[p.type],P=S.isSkinnedMesh?d(S):0;p.precision!==null&&(l=r.getMaxPrecision(p.precision),l!==p.precision&&console.warn("THREE.WebGLProgram.getParameters:",p.precision,"not supported, using",l,"instead."));var z=m(p,A);p.onBeforeCompile(z,t);var V=t.getRenderTarget(),L=V&&V.isWebGLMultiviewRenderTarget?V.numViews:0,O={isWebGL2:s,shaderID:A,shaderName:z.name,uniforms:z.uniforms,vertexShader:z.vertexShader,fragmentShader:z.fragmentShader,defines:p.defines,isRawShaderMaterial:p.isRawShaderMaterial,isShaderMaterial:p.isShaderMaterial,precision:l,instancing:S.isInstancedMesh===!0,supportsVertexTextures:h,numMultiviewViews:L,outputEncoding:V!==null?v(V.texture):t.outputEncoding,map:!!p.map,mapEncoding:v(p.map),matcap:!!p.matcap,matcapEncoding:v(p.matcap),envMap:!!T,envMapMode:T&&T.mapping,envMapEncoding:v(T),envMapCubeUV:!!T&&(T.mapping===au||T.mapping===J_),lightMap:!!p.lightMap,lightMapEncoding:v(p.lightMap),aoMap:!!p.aoMap,emissiveMap:!!p.emissiveMap,emissiveMapEncoding:v(p.emissiveMap),bumpMap:!!p.bumpMap,normalMap:!!p.normalMap,objectSpaceNormalMap:p.normalMapType===T5,tangentSpaceNormalMap:p.normalMapType===bo,clearcoatNormalMap:!!p.clearcoatNormalMap,displacementMap:!!p.displacementMap,roughnessMap:!!p.roughnessMap,metalnessMap:!!p.metalnessMap,specularMap:!!p.specularMap,alphaMap:!!p.alphaMap,gradientMap:!!p.gradientMap,sheen:!!p.sheen,combine:p.combine,vertexTangents:p.normalMap&&p.vertexTangents,vertexColors:p.vertexColors,vertexUvs:!!p.map||!!p.bumpMap||!!p.normalMap||!!p.specularMap||!!p.alphaMap||!!p.emissiveMap||!!p.roughnessMap||!!p.metalnessMap||!!p.clearcoatNormalMap||!!p.displacementMap,uvsVertexOnly:!(!!p.map||!!p.bumpMap||!!p.normalMap||!!p.specularMap||!!p.alphaMap||!!p.emissiveMap||!!p.roughnessMap||!!p.metalnessMap||!!p.clearcoatNormalMap)&&!!p.displacementMap,fog:!!E,useFog:p.fog,fogExp2:E&&E.isFogExp2,flatShading:p.flatShading,sizeAttenuation:p.sizeAttenuation,logarithmicDepthBuffer:o,skinning:p.skinning&&P>0,maxBones:P,useVertexTexture:a,morphTargets:p.morphTargets,morphNormals:p.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:g.directional.length,numPointLights:g.point.length,numSpotLights:g.spot.length,numRectAreaLights:g.rectArea.length,numHemiLights:g.hemi.length,numDirLightShadows:g.directionalShadowMap.length,numPointLightShadows:g.pointShadowMap.length,numSpotLightShadows:g.spotShadowMap.length,numClippingPlanes:b,numClipIntersection:w,dithering:p.dithering,shadowMapEnabled:t.shadowMap.enabled&&y.length>0,shadowMapType:t.shadowMap.type,toneMapping:p.toneMapped?t.toneMapping:up,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:p.premultipliedAlpha,alphaTest:p.alphaTest,doubleSided:p.side===yo,flipSided:p.side===tr,depthPacking:p.depthPacking!==void 0?p.depthPacking:!1,index0AttributeName:p.index0AttributeName,extensionDerivatives:p.extensions&&p.extensions.derivatives,extensionFragDepth:p.extensions&&p.extensions.frawbuffers,extensionDrawbuffers:p.extensions&&p.extensions.drawbuffers,extensionShaderTextureLOD:p.extensions&&p.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||e.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:s||e.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:s||e.get("EXT_shader_texture_lod")!==null,onBeforeCompile:p.onBeforeCompile};return O},this.getProgramCacheKey=function(p){var g=[];if(p.shaderID?g.push(p.shaderID):(g.push(p.fragmentShader),g.push(p.vertexShader)),p.defines!==void 0)for(var y in p.defines)g.push(y),g.push(p.defines[y]);if(p.isRawShaderMaterial===void 0){for(var _=0;_<u.length;_++)g.push(p[u[_]]);g.push(t.outputEncoding),g.push(t.gammaFactor)}return g.push(p.onBeforeCompile.toString()),g.join()},this.acquireProgram=function(p,g){for(var y,_=0,b=n.length;_<b;_++){var w=n[_];if(w.cacheKey===g){y=w,++y.usedTimes;break}}return y===void 0&&(y=new v8(t,g,p),n.push(y)),y},this.releaseProgram=function(p){if(--p.usedTimes==0){var g=n.indexOf(p);n[g]=n[n.length-1],n.pop(),p.destroy()}},this.programs=n}function _8(){var t=new WeakMap;function e(o){var a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function n(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{get:e,remove:r,update:n,dispose:s}}function b8(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function w8(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function aP(){var t=[],e=0,r=[],n=[],s={id:-1};function o(){e=0,r.length=0,n.length=0}function a(f,u,m,d,v,p){var g=t[e];return g===void 0?(g={id:f.id,object:f,geometry:u,material:m,program:m.program||s,groupOrder:d,renderOrder:f.renderOrder,z:v,group:p},t[e]=g):(g.id=f.id,g.object=f,g.geometry=u,g.material=m,g.program=m.program||s,g.groupOrder=d,g.renderOrder=f.renderOrder,g.z=v,g.group=p),e++,g}function l(f,u,m,d,v,p){var g=a(f,u,m,d,v,p);(m.transparent===!0?n:r).push(g)}function c(f,u,m,d,v,p){var g=a(f,u,m,d,v,p);(m.transparent===!0?n:r).unshift(g)}function h(f,u){r.length>1&&r.sort(f||b8),n.length>1&&n.sort(u||w8)}return{opaque:r,transparent:n,init:o,push:l,unshift:c,sort:h}}function S8(){var t=new WeakMap;function e(s){var o=s.target;o.removeEventListener("dispose",e),t.delete(o)}function r(s,o){var a=t.get(s),l;return a===void 0?(l=new aP,t.set(s,new WeakMap),t.get(s).set(o,l),s.addEventListener("dispose",e)):(l=a.get(o),l===void 0&&(l=new aP,a.set(o,l))),l}function n(){t=new WeakMap}return{get:r,dispose:n}}function E8(){var t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new F,color:new Se,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new he};break;case"SpotLight":r={position:new F,direction:new F,color:new Se,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new he};break;case"PointLight":r={position:new F,color:new Se,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new he,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new F,skyColor:new Se,groundColor:new Se};break;case"RectAreaLight":r={color:new Se,position:new F,halfWidth:new F,halfHeight:new F};break}return t[e.id]=r,r}}}var x8=0;function T8(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function A8(){for(var t=new E8,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},r=0;r<9;r++)e.probe.push(new F);var n=new F,s=new Ue,o=new Ue;function a(l,c,h){for(var f=0,u=0,m=0,d=0;d<9;d++)e.probe[d].set(0,0,0);var v=0,p=0,g=0,y=0,_=0,b=0,w=0,S=0,E=h.matrixWorldInverse;l.sort(T8);for(var d=0,x=l.length;d<x;d++){var T=l[d],A=T.color,P=T.intensity,z=T.distance,V=T.shadow&&T.shadow.map?T.shadow.map.texture:null;if(T.isAmbientLight)f+=A.r*P,u+=A.g*P,m+=A.b*P;else if(T.isLightProbe)for(var L=0;L<9;L++)e.probe[L].addScaledVector(T.sh.coefficients[L],P);else if(T.isDirectionalLight){var O=t.get(T);if(O.color.copy(T.color).multiplyScalar(T.intensity),O.direction.setFromMatrixPosition(T.matrixWorld),n.setFromMatrixPosition(T.target.matrixWorld),O.direction.sub(n),O.direction.transformDirection(E),O.shadow=T.castShadow,T.castShadow){var k=T.shadow;O.shadowBias=k.bias,O.shadowRadius=k.radius,O.shadowMapSize=k.mapSize,e.directionalShadowMap[v]=V,e.directionalShadowMatrix[v]=T.shadow.matrix,b++}e.directional[v]=O,v++}else if(T.isSpotLight){var O=t.get(T);if(O.position.setFromMatrixPosition(T.matrixWorld),O.position.applyMatrix4(E),O.color.copy(A).multiplyScalar(P),O.distance=z,O.direction.setFromMatrixPosition(T.matrixWorld),n.setFromMatrixPosition(T.target.matrixWorld),O.direction.sub(n),O.direction.transformDirection(E),O.coneCos=Math.cos(T.angle),O.penumbraCos=Math.cos(T.angle*(1-T.penumbra)),O.decay=T.decay,O.shadow=T.castShadow,T.castShadow){var k=T.shadow;O.shadowBias=k.bias,O.shadowRadius=k.radius,O.shadowMapSize=k.mapSize,e.spotShadowMap[g]=V,e.spotShadowMatrix[g]=T.shadow.matrix,S++}e.spot[g]=O,g++}else if(T.isRectAreaLight){var O=t.get(T);O.color.copy(A).multiplyScalar(P),O.position.setFromMatrixPosition(T.matrixWorld),O.position.applyMatrix4(E),o.identity(),s.copy(T.matrixWorld),s.premultiply(E),o.extractRotation(s),O.halfWidth.set(T.width*.5,0,0),O.halfHeight.set(0,T.height*.5,0),O.halfWidth.applyMatrix4(o),O.halfHeight.applyMatrix4(o),e.rectArea[y]=O,y++}else if(T.isPointLight){var O=t.get(T);if(O.position.setFromMatrixPosition(T.matrixWorld),O.position.applyMatrix4(E),O.color.copy(T.color).multiplyScalar(T.intensity),O.distance=T.distance,O.decay=T.decay,O.shadow=T.castShadow,T.castShadow){var k=T.shadow;O.shadowBias=k.bias,O.shadowRadius=k.radius,O.shadowMapSize=k.mapSize,O.shadowCameraNear=k.camera.near,O.shadowCameraFar=k.camera.far,e.pointShadowMap[p]=V,e.pointShadowMatrix[p]=T.shadow.matrix,w++}e.point[p]=O,p++}else if(T.isHemisphereLight){var O=t.get(T);O.direction.setFromMatrixPosition(T.matrixWorld),O.direction.transformDirection(E),O.direction.normalize(),O.skyColor.copy(T.color).multiplyScalar(P),O.groundColor.copy(T.groundColor).multiplyScalar(P),e.hemi[_]=O,_++}}e.ambient[0]=f,e.ambient[1]=u,e.ambient[2]=m;var X=e.hash;(X.directionalLength!==v||X.pointLength!==p||X.spotLength!==g||X.rectAreaLength!==y||X.hemiLength!==_||X.numDirectionalShadows!==b||X.numPointShadows!==w||X.numSpotShadows!==S)&&(e.directional.length=v,e.spot.length=g,e.rectArea.length=y,e.point.length=p,e.hemi.length=_,e.directionalShadowMap.length=b,e.pointShadowMap.length=w,e.spotShadowMap.length=S,e.directionalShadowMatrix.length=b,e.pointShadowMatrix.length=w,e.spotShadowMatrix.length=S,X.directionalLength=v,X.pointLength=p,X.spotLength=g,X.rectAreaLength=y,X.hemiLength=_,X.numDirectionalShadows=b,X.numPointShadows=w,X.numSpotShadows=S,e.version=x8++)}return{setup:a,state:e}}function lP(){var t=new A8,e=[],r=[];function n(){e.length=0,r.length=0}function s(c){e.push(c)}function o(c){r.push(c)}function a(c){t.setup(e,r,c)}var l={lightsArray:e,shadowsArray:r,lights:t};return{init:n,state:l,setupLights:a,pushLight:s,pushShadow:o}}function M8(){var t=new WeakMap;function e(s){var o=s.target;o.removeEventListener("dispose",e),t.delete(o)}function r(s,o){var a;return t.has(s)===!1?(a=new lP,t.set(s,new WeakMap),t.get(s).set(o,a),s.addEventListener("dispose",e)):t.get(s).has(o)===!1?(a=new lP,t.get(s).set(o,a)):a=t.get(s).get(o),a}function n(){t=new WeakMap}return{get:r,dispose:n}}function Da(t){Ge.call(this),this.type="MeshDepthMaterial",this.depthPacking=E5,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}Da.prototype=Object.create(Ge.prototype);Da.prototype.constructor=Da;Da.prototype.isMeshDepthMaterial=!0;Da.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this};function Fa(t){Ge.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new F,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Fa.prototype=Object.create(Ge.prototype);Fa.prototype.constructor=Fa;Fa.prototype.isMeshDistanceMaterial=!0;Fa.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var C8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,P8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function cP(t,e,r){var n=new bu,s=new he,o=new he,a=new Ot,l=[],c=[],h={},f={0:tr,1:bn,2:yo},u=new zr({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new he},radius:{value:4}},vertexShader:P8,fragmentShader:C8}),m=u.clone();m.defines.HORIZONAL_PASS=1;var d=new Ie;d.setAttribute("position",new ze(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Xe(d,u),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=eC,this.render=function(S,E,x){if(p.enabled!==!1&&!(p.autoUpdate===!1&&p.needsUpdate===!1)&&S.length!==0){var T=t.getRenderTarget(),A=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),z=t.state;z.setBlending(qn),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);for(var V=0,L=S.length;V<L;V++){var O=S[V],k=O.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}s.copy(k.mapSize);var X=k.getFrameExtents();if(s.multiply(X),o.copy(k.mapSize),(s.x>r||s.y>r)&&(console.warn("THREE.WebGLShadowMap:",O,"has shadow exceeding max texture size, reducing"),s.x>r&&(o.x=Math.floor(r/X.x),s.x=o.x*X.x,k.mapSize.x=o.x),s.y>r&&(o.y=Math.floor(r/X.y),s.y=o.y*X.y,k.mapSize.y=o.y)),k.map===null&&!k.isPointLightShadow&&this.type===su){var R={minFilter:Vt,magFilter:Vt,format:Ki};k.map=new ur(s.x,s.y,R),k.map.texture.name=O.name+".shadowMap",k.mapPass=new ur(s.x,s.y,R),k.camera.updateProjectionMatrix()}if(k.map===null){var R={minFilter:It,magFilter:It,format:Ki};k.map=new ur(s.x,s.y,R),k.map.texture.name=O.name+".shadowMap",k.camera.updateProjectionMatrix()}t.setRenderTarget(k.map),t.clear();for(var U=k.getViewportCount(),q=0;q<U;q++){var Z=k.getViewport(q);a.set(o.x*Z.x,o.y*Z.y,o.x*Z.z,o.y*Z.w),z.viewport(a),k.updateMatrices(O,q),n=k.getFrustum(),w(E,x,k.camera,O,this.type)}!k.isPointLightShadow&&this.type===su&&g(k,x)}p.needsUpdate=!1,t.setRenderTarget(T,A,P)}};function g(S,E){var x=e.update(v);u.uniforms.shadow_pass.value=S.map.texture,u.uniforms.resolution.value=S.mapSize,u.uniforms.radius.value=S.radius,t.setRenderTarget(S.mapPass),t.clear(),t.renderBufferDirect(E,null,x,u,v,null),m.uniforms.shadow_pass.value=S.mapPass.texture,m.uniforms.resolution.value=S.mapSize,m.uniforms.radius.value=S.radius,t.setRenderTarget(S.map),t.clear(),t.renderBufferDirect(E,null,x,m,v,null)}function y(S,E,x){var T=S<<0|E<<1|x<<2,A=l[T];return A===void 0&&(A=new Da({depthPacking:x5,morphTargets:S,skinning:E}),l[T]=A),A}function _(S,E,x){var T=S<<0|E<<1|x<<2,A=c[T];return A===void 0&&(A=new Fa({morphTargets:S,skinning:E}),c[T]=A),A}function b(S,E,x,T,A,P){var z=S.geometry,V=null,L=y,O=S.customDepthMaterial;if(x.isPointLight===!0&&(L=_,O=S.customDistanceMaterial),O===void 0){var k=!1;E.morphTargets===!0&&(z.isBufferGeometry===!0?k=z.morphAttributes&&z.morphAttributes.position&&z.morphAttributes.position.length>0:z.isGeometry===!0&&(k=z.morphTargets&&z.morphTargets.length>0));var X=!1;S.isSkinnedMesh===!0&&(E.skinning===!0?X=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",S));var R=S.isInstancedMesh===!0;V=L(k,X,R)}else V=O;if(t.localClippingEnabled&&E.clipShadows===!0&&E.clippingPlanes.length!==0){var U=V.uuid,q=E.uuid,Z=h[U];Z===void 0&&(Z={},h[U]=Z);var oe=Z[q];oe===void 0&&(oe=V.clone(),Z[q]=oe),V=oe}return V.visible=E.visible,V.wireframe=E.wireframe,P===su?V.side=E.shadowSide!==null?E.shadowSide:E.side:V.side=E.shadowSide!==null?E.shadowSide:f[E.side],V.clipShadows=E.clipShadows,V.clippingPlanes=E.clippingPlanes,V.clipIntersection=E.clipIntersection,V.wireframeLinewidth=E.wireframeLinewidth,V.linewidth=E.linewidth,x.isPointLight===!0&&V.isMeshDistanceMaterial===!0&&(V.referencePosition.setFromMatrixPosition(x.matrixWorld),V.nearDistance=T,V.farDistance=A),V}function w(S,E,x,T,A){if(S.visible!==!1){var P=S.layers.test(E.layers);if(P&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&A===su)&&(!S.frustumCulled||n.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,S.matrixWorld);var z=e.update(S),V=S.material;if(Array.isArray(V))for(var L=z.groups,O=0,k=L.length;O<k;O++){var X=L[O],R=V[X.materialIndex];if(R&&R.visible){var U=b(S,R,T,x.near,x.far,A);t.renderBufferDirect(x,null,z,U,S,X)}}else if(V.visible){var U=b(S,V,T,x.near,x.far,A);t.renderBufferDirect(x,null,z,U,S,null)}}for(var q=S.children,Z=0,oe=q.length;Z<oe;Z++)w(q[Z],E,x,T,A)}}}function I8(t,e,r){var n=r.isWebGL2;function s(){var Q=!1,ye=new Ot,De=null,tt=new Ot(0,0,0,0);return{setMask:function(Fe){De!==Fe&&!Q&&(t.colorMask(Fe,Fe,Fe,Fe),De=Fe)},setLocked:function(Fe){Q=Fe},setClear:function(Fe,ct,gt,At,hi){hi===!0&&(Fe*=At,ct*=At,gt*=At),ye.set(Fe,ct,gt,At),tt.equals(ye)===!1&&(t.clearColor(Fe,ct,gt,At),tt.copy(ye))},reset:function(){Q=!1,De=null,tt.set(-1,0,0,0)}}}function o(){var Q=!1,ye=null,De=null,tt=null;return{setTest:function(Fe){Fe?Y(2929):K(2929)},setMask:function(Fe){ye!==Fe&&!Q&&(t.depthMask(Fe),ye=Fe)},setFunc:function(Fe){if(De!==Fe){if(Fe)switch(Fe){case I$:t.depthFunc(512);break;case R$:t.depthFunc(519);break;case L$:t.depthFunc(513);break;case $_:t.depthFunc(515);break;case O$:t.depthFunc(514);break;case D$:t.depthFunc(518);break;case F$:t.depthFunc(516);break;case N$:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);De=Fe}},setLocked:function(Fe){Q=Fe},setClear:function(Fe){tt!==Fe&&(t.clearDepth(Fe),tt=Fe)},reset:function(){Q=!1,ye=null,De=null,tt=null}}}function a(){var Q=!1,ye=null,De=null,tt=null,Fe=null,ct=null,gt=null,At=null,hi=null;return{setTest:function(dt){Q||(dt?Y(2960):K(2960))},setMask:function(dt){ye!==dt&&!Q&&(t.stencilMask(dt),ye=dt)},setFunc:function(dt,Ar,gr){(De!==dt||tt!==Ar||Fe!==gr)&&(t.stencilFunc(dt,Ar,gr),De=dt,tt=Ar,Fe=gr)},setOp:function(dt,Ar,gr){(ct!==dt||gt!==Ar||At!==gr)&&(t.stencilOp(dt,Ar,gr),ct=dt,gt=Ar,At=gr)},setLocked:function(dt){Q=dt},setClear:function(dt){hi!==dt&&(t.clearStencil(dt),hi=dt)},reset:function(){Q=!1,ye=null,De=null,tt=null,Fe=null,ct=null,gt=null,At=null,hi=null}}}var l=new s,c=new o,h=new a,f=t.getParameter(34921),u=new Uint8Array(f),m=new Uint8Array(f),d=new Uint8Array(f),v={},p=null,g=null,y=null,_=null,b=null,w=null,S=null,E=null,x=null,T=!1,A=null,P=null,z=null,V=null,L=null,O=t.getParameter(35661),k=!1,X=0,R=t.getParameter(7938);R.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL\ ([0-9])/.exec(R)[1]),k=X>=1):R.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(R)[1]),k=X>=2);var U=null,q={},Z=new Ot,oe=new Ot;function N(Q,ye,De){var tt=new Uint8Array(4),Fe=t.createTexture();t.bindTexture(Q,Fe),t.texParameteri(Q,10241,9728),t.texParameteri(Q,10240,9728);for(var ct=0;ct<De;ct++)t.texImage2D(ye+ct,0,6408,1,1,0,6408,5121,tt);return Fe}var M={};M[3553]=N(3553,3553,1),M[34067]=N(34067,34069,6),l.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Y(2929),c.setFunc($_),_e(!1),B(JM),Y(2884),pe(qn);function $(){for(var Q=0,ye=u.length;Q<ye;Q++)u[Q]=0}function W(Q){H(Q,0)}function H(Q,ye){if(u[Q]=1,m[Q]===0&&(t.enableVertexAttribArray(Q),m[Q]=1),d[Q]!==ye){var De=n?t:e.get("ANGLE_instanced_arrays");De[n?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,ye),d[Q]=ye}}function ee(){for(var Q=0,ye=m.length;Q!==ye;++Q)m[Q]!==u[Q]&&(t.disableVertexAttribArray(Q),m[Q]=0)}function Y(Q){v[Q]!==!0&&(t.enable(Q),v[Q]=!0)}function K(Q){v[Q]!==!1&&(t.disable(Q),v[Q]=!1)}function ne(Q){return p!==Q?(t.useProgram(Q),p=Q,!0):!1}var te={[Wl]:32774,[_$]:32778,[b$]:32779};if(n)te[oC]=32775,te[aC]=32776;else{var ae=e.get("EXT_blend_minmax");ae!==null&&(te[oC]=ae.MIN_EXT,te[aC]=ae.MAX_EXT)}var ie={[w$]:0,[S$]:1,[E$]:768,[lC]:770,[P$]:776,[M$]:774,[T$]:772,[x$]:769,[cC]:771,[C$]:775,[A$]:773};function pe(Q,ye,De,tt,Fe,ct,gt,At){if(Q===qn){g&&(K(3042),g=!1);return}if(g||(Y(3042),g=!0),Q!==y$){if(Q!==y||At!==T){if((_!==Wl||S!==Wl)&&(t.blendEquation(32774),_=Wl,S=Wl),At)switch(Q){case ou:t.blendFuncSeparate(1,771,1,771);break;case iC:t.blendFunc(1,1);break;case nC:t.blendFuncSeparate(0,0,769,771);break;case sC:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case ou:t.blendFuncSeparate(770,771,1,771);break;case iC:t.blendFunc(770,1);break;case nC:t.blendFunc(0,769);break;case sC:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}b=null,w=null,E=null,x=null,y=Q,T=At}return}Fe=Fe||ye,ct=ct||De,gt=gt||tt,(ye!==_||Fe!==S)&&(t.blendEquationSeparate(te[ye],te[Fe]),_=ye,S=Fe),(De!==b||tt!==w||ct!==E||gt!==x)&&(t.blendFuncSeparate(ie[De],ie[tt],ie[ct],ie[gt]),b=De,w=tt,E=ct,x=gt),y=Q,T=null}function me(Q,ye){Q.side===yo?K(2884):Y(2884);var De=Q.side===tr;ye&&(De=!De),_e(De),Q.blending===ou&&Q.transparent===!1?pe(qn):pe(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.premultipliedAlpha),c.setFunc(Q.depthFunc),c.setTest(Q.depthTest),c.setMask(Q.depthWrite),l.setMask(Q.colorWrite);var tt=Q.stencilWrite;h.setTest(tt),tt&&(h.setMask(Q.stencilWriteMask),h.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),h.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),fe(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits)}function _e(Q){A!==Q&&(Q?t.frontFace(2304):t.frontFace(2305),A=Q)}function B(Q){Q!==m$?(Y(2884),Q!==P&&(Q===JM?t.cullFace(1029):Q===g$?t.cullFace(1028):t.cullFace(1032))):K(2884),P=Q}function G(Q){Q!==z&&(k&&t.lineWidth(Q),z=Q)}function fe(Q,ye,De){Q?(Y(32823),(V!==ye||L!==De)&&(t.polygonOffset(ye,De),V=ye,L=De)):K(32823)}function ue(Q){Q?Y(3089):K(3089)}function Ne(Q){Q===void 0&&(Q=33984+O-1),U!==Q&&(t.activeTexture(Q),U=Q)}function Re(Q,ye){U===null&&Ne();var De=q[U];De===void 0&&(De={type:void 0,texture:void 0},q[U]=De),(De.type!==Q||De.texture!==ye)&&(t.bindTexture(Q,ye||M[Q]),De.type=Q,De.texture=ye)}function xe(){var Q=q[U];Q!==void 0&&Q.type!==void 0&&(t.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function Ce(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ve(){try{t.texImage2D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Oe(){try{t.texImage3D.apply(t,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ge(Q){Z.equals(Q)===!1&&(t.scissor(Q.x,Q.y,Q.z,Q.w),Z.copy(Q))}function Le(Q){oe.equals(Q)===!1&&(t.viewport(Q.x,Q.y,Q.z,Q.w),oe.copy(Q))}function we(){for(var Q=0;Q<m.length;Q++)m[Q]===1&&(t.disableVertexAttribArray(Q),m[Q]=0);v={},U=null,q={},p=null,y=null,A=null,P=null,l.reset(),c.reset(),h.reset()}return{buffers:{color:l,depth:c,stencil:h},initAttributes:$,enableAttribute:W,enableAttributeAndDivisor:H,disableUnusedAttributes:ee,enable:Y,disable:K,useProgram:ne,setBlending:pe,setMaterial:me,setFlipSided:_e,setCullFace:B,setLineWidth:G,setPolygonOffset:fe,setScissorTest:ue,activeTexture:Ne,bindTexture:Re,unbindTexture:xe,compressedTexImage2D:Ce,texImage2D:Ve,texImage3D:Oe,scissor:ge,viewport:Le,reset:we}}function R8(t,e,r,n,s,o,a){var l=s.isWebGL2,c=s.maxTextures,h=s.maxCubemapSize,f=s.maxTextureSize,u=s.maxSamples,m=new WeakMap,d,v=!1;try{v=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(B){}function p(B,G){return v?new OffscreenCanvas(B,G):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(B,G,fe,ue){var Ne=1;if((B.width>ue||B.height>ue)&&(Ne=ue/Math.max(B.width,B.height)),Ne<1||G===!0)if(typeof HTMLImageElement!="undefined"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&B instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&B instanceof ImageBitmap){var Re=G?Qe.floorPowerOfTwo:Math.floor,xe=Re(Ne*B.width),Ce=Re(Ne*B.height);d===void 0&&(d=p(xe,Ce));var Ve=fe?p(xe,Ce):d;Ve.width=xe,Ve.height=Ce;var Oe=Ve.getContext("2d");return Oe.drawImage(B,0,0,xe,Ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+B.width+"x"+B.height+") to ("+xe+"x"+Ce+")."),Ve}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+B.width+"x"+B.height+")."),B;return B}function y(B){return Qe.isPowerOfTwo(B.width)&&Qe.isPowerOfTwo(B.height)}function _(B){return l?!1:B.wrapS!==kr||B.wrapT!==kr||B.minFilter!==It&&B.minFilter!==Vt}function b(B,G){return B.generateMipmaps&&G&&B.minFilter!==It&&B.minFilter!==Vt}function w(B,G,fe,ue){t.generateMipmap(B);var Ne=n.get(G);Ne.__maxMipLevel=Math.log(Math.max(fe,ue))*Math.LOG2E}function S(B,G,fe){if(l===!1)return G;if(B!==null){if(t[B]!==void 0)return t[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}var ue=G;return G===6403&&(fe===5126&&(ue=33326),fe===5131&&(ue=33325),fe===5121&&(ue=33321)),G===6407&&(fe===5126&&(ue=34837),fe===5131&&(ue=34843),fe===5121&&(ue=32849)),G===6408&&(fe===5126&&(ue=34836),fe===5131&&(ue=34842),fe===5121&&(ue=32856)),ue===33325||ue===33326||ue===34842||ue===34836?e.get("EXT_color_buffer_float"):(ue===34843||ue===34837)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),ue}function E(B){return B===It||B===lu||B===cu?9728:9729}function x(B){var G=B.target;G.removeEventListener("dispose",x),A(G),G.isVideoTexture&&m.delete(G),a.memory.textures--}function T(B){var G=B.target;G.removeEventListener("dispose",T),P(G),a.memory.textures--}function A(B){var G=n.get(B);G.__webglInit!==void 0&&(t.deleteTexture(G.__webglTexture),n.remove(B))}function P(B){var G=n.get(B),fe=n.get(B.texture);if(!!B){if(fe.__webglTexture!==void 0&&t.deleteTexture(fe.__webglTexture),B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(var ue=0;ue<6;ue++)t.deleteFramebuffer(G.__webglFramebuffer[ue]),G.__webglDepthbuffer&&t.deleteRenderbuffer(G.__webglDepthbuffer[ue]);else t.deleteFramebuffer(G.__webglFramebuffer),G.__webglDepthbuffer&&t.deleteRenderbuffer(G.__webglDepthbuffer);if(B.isWebGLMultiviewRenderTarget){t.deleteTexture(G.__webglColorTexture),t.deleteTexture(G.__webglDepthStencilTexture),a.memory.textures-=2;for(var ue=0,Ne=G.__webglViewFramebuffers.length;ue<Ne;ue++)t.deleteFramebuffer(G.__webglViewFramebuffers[ue])}n.remove(B.texture),n.remove(B)}}var z=0;function V(){z=0}function L(){var B=z;return B>=c&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+c),z+=1,B}function O(B,G){var fe=n.get(B);if(B.isVideoTexture&&ae(B),B.version>0&&fe.__version!==B.version){var ue=B.image;if(ue===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{M(fe,B,G);return}}r.activeTexture(33984+G),r.bindTexture(3553,fe.__webglTexture)}function k(B,G){var fe=n.get(B);if(B.version>0&&fe.__version!==B.version){M(fe,B,G);return}r.activeTexture(33984+G),r.bindTexture(35866,fe.__webglTexture)}function X(B,G){var fe=n.get(B);if(B.version>0&&fe.__version!==B.version){M(fe,B,G);return}r.activeTexture(33984+G),r.bindTexture(32879,fe.__webglTexture)}function R(B,G){if(B.image.length===6){var fe=n.get(B);if(B.version>0&&fe.__version!==B.version){N(fe,B),r.activeTexture(33984+G),r.bindTexture(34067,fe.__webglTexture),t.pixelStorei(37440,B.flipY);for(var ue=B&&(B.isCompressedTexture||B.image[0].isCompressedTexture),Ne=B.image[0]&&B.image[0].isDataTexture,Re=[],xe=0;xe<6;xe++)!ue&&!Ne?Re[xe]=g(B.image[xe],!1,!0,h):Re[xe]=Ne?B.image[xe].image:B.image[xe];var Ce=Re[0],Ve=y(Ce)||l,Oe=o.convert(B.format),ge=o.convert(B.type),Le=S(B.internalFormat,Oe,ge);oe(34067,B,Ve);var we;if(ue){for(var xe=0;xe<6;xe++){we=Re[xe].mipmaps;for(var Q=0;Q<we.length;Q++){var ye=we[Q];B.format!==Ki&&B.format!==Oi?Oe!==null?r.compressedTexImage2D(34069+xe,Q,Le,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+xe,Q,Le,ye.width,ye.height,0,Oe,ge,ye.data)}}fe.__maxMipLevel=we.length-1}else{we=B.mipmaps;for(var xe=0;xe<6;xe++)if(Ne){r.texImage2D(34069+xe,0,Le,Re[xe].width,Re[xe].height,0,Oe,ge,Re[xe].data);for(var Q=0;Q<we.length;Q++){var ye=we[Q],De=ye.image[xe].image;r.texImage2D(34069+xe,Q+1,Le,De.width,De.height,0,Oe,ge,De.data)}}else{r.texImage2D(34069+xe,0,Le,Oe,ge,Re[xe]);for(var Q=0;Q<we.length;Q++){var ye=we[Q];r.texImage2D(34069+xe,Q+1,Le,Oe,ge,ye.image[xe])}}fe.__maxMipLevel=we.length}b(B,Ve)&&w(34067,B,Ce.width,Ce.height),fe.__version=B.version,B.onUpdate&&B.onUpdate(B)}else r.activeTexture(33984+G),r.bindTexture(34067,fe.__webglTexture)}}function U(B,G){r.activeTexture(33984+G),r.bindTexture(34067,n.get(B).__webglTexture)}var q={[_o]:10497,[kr]:33071,[Gl]:33648},Z={[It]:9728,[lu]:9984,[cu]:9986,[Vt]:9729,[fp]:9985,[Sa]:9987};function oe(B,G,fe){fe?(t.texParameteri(B,10242,q[G.wrapS]),t.texParameteri(B,10243,q[G.wrapT]),(B===32879||B===35866)&&t.texParameteri(B,32882,q[G.wrapR]),t.texParameteri(B,10240,Z[G.magFilter]),t.texParameteri(B,10241,Z[G.minFilter])):(t.texParameteri(B,10242,33071),t.texParameteri(B,10243,33071),(B===32879||B===35866)&&t.texParameteri(B,32882,33071),(G.wrapS!==kr||G.wrapT!==kr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(B,10240,E(G.magFilter)),t.texParameteri(B,10241,E(G.minFilter)),G.minFilter!==It&&G.minFilter!==Vt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var ue=e.get("EXT_texture_filter_anisotropic");if(ue){if(G.type===Es&&e.get("OES_texture_float_linear")===null||G.type===Ea&&(l||e.get("OES_texture_half_float_linear"))===null)return;(G.anisotropy>1||n.get(G).__currentAnisotropy)&&(t.texParameterf(B,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,s.getMaxAnisotropy())),n.get(G).__currentAnisotropy=G.anisotropy)}}function N(B,G){B.__webglInit===void 0&&(B.__webglInit=!0,G.addEventListener("dispose",x),B.__webglTexture=t.createTexture(),a.memory.textures++)}function M(B,G,fe){var ue=3553;G.isDataTexture2DArray&&(ue=35866),G.isDataTexture3D&&(ue=32879),N(B,G),r.activeTexture(33984+fe),r.bindTexture(ue,B.__webglTexture),t.pixelStorei(37440,G.flipY),t.pixelStorei(37441,G.premultiplyAlpha),t.pixelStorei(3317,G.unpackAlignment);var Ne=_(G)&&y(G.image)===!1,Re=g(G.image,Ne,!1,f),xe=y(Re)||l,Ce=o.convert(G.format),Ve=o.convert(G.type),Oe=S(G.internalFormat,Ce,Ve);oe(ue,G,xe);var ge,Le=G.mipmaps;if(G.isDepthTexture){if(Oe=6402,G.type===Es){if(l===!1)throw new Error("Float Depth Texture only supported in WebGL2.0");Oe=36012}else l&&(Oe=33189);G.format===$l&&Oe===6402&&G.type!==dp&&G.type!==dC&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=dp,Ve=o.convert(G.type)),G.format===hu&&(Oe=34041,G.type!==pp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=pp,Ve=o.convert(G.type))),r.texImage2D(3553,0,Oe,Re.width,Re.height,0,Ce,Ve,null)}else if(G.isDataTexture)if(Le.length>0&&xe){for(var we=0,Q=Le.length;we<Q;we++)ge=Le[we],r.texImage2D(3553,we,Oe,ge.width,ge.height,0,Ce,Ve,ge.data);G.generateMipmaps=!1,B.__maxMipLevel=Le.length-1}else r.texImage2D(3553,0,Oe,Re.width,Re.height,0,Ce,Ve,Re.data),B.__maxMipLevel=0;else if(G.isCompressedTexture){for(var we=0,Q=Le.length;we<Q;we++)ge=Le[we],G.format!==Ki&&G.format!==Oi?Ce!==null?r.compressedTexImage2D(3553,we,Oe,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,we,Oe,ge.width,ge.height,0,Ce,Ve,ge.data);B.__maxMipLevel=Le.length-1}else if(G.isDataTexture2DArray)r.texImage3D(35866,0,Oe,Re.width,Re.height,Re.depth,0,Ce,Ve,Re.data),B.__maxMipLevel=0;else if(G.isDataTexture3D)r.texImage3D(32879,0,Oe,Re.width,Re.height,Re.depth,0,Ce,Ve,Re.data),B.__maxMipLevel=0;else if(Le.length>0&&xe){for(var we=0,Q=Le.length;we<Q;we++)ge=Le[we],r.texImage2D(3553,we,Oe,Ce,Ve,ge);G.generateMipmaps=!1,B.__maxMipLevel=Le.length-1}else r.texImage2D(3553,0,Oe,Ce,Ve,Re),B.__maxMipLevel=0;b(G,xe)&&w(ue,G,Re.width,Re.height),B.__version=G.version,G.onUpdate&&G.onUpdate(G)}function $(B,G,fe,ue){var Ne=o.convert(G.texture.format),Re=o.convert(G.texture.type),xe=S(G.texture.internalFormat,Ne,Re);r.texImage2D(ue,0,xe,G.width,G.height,0,Ne,Re,null),t.bindFramebuffer(36160,B),t.framebufferTexture2D(36160,fe,ue,n.get(G.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function W(B,G,fe){if(t.bindRenderbuffer(36161,B),G.depthBuffer&&!G.stencilBuffer){if(fe){var ue=te(G);t.renderbufferStorageMultisample(36161,ue,33189,G.width,G.height)}else t.renderbufferStorage(36161,33189,G.width,G.height);t.framebufferRenderbuffer(36160,36096,36161,B)}else if(G.depthBuffer&&G.stencilBuffer){if(fe){var ue=te(G);t.renderbufferStorageMultisample(36161,ue,35056,G.width,G.height)}else t.renderbufferStorage(36161,34041,G.width,G.height);t.framebufferRenderbuffer(36160,33306,36161,B)}else{var Ne=o.convert(G.texture.format),Re=o.convert(G.texture.type),xe=S(G.texture.internalFormat,Ne,Re);if(fe){var ue=te(G);t.renderbufferStorageMultisample(36161,ue,xe,G.width,G.height)}else t.renderbufferStorage(36161,xe,G.width,G.height)}t.bindRenderbuffer(36161,null)}function H(B,G){var fe=G&&G.isWebGLCubeRenderTarget;if(fe)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,B),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),O(G.depthTexture,0);var ue=n.get(G.depthTexture).__webglTexture;if(G.depthTexture.format===$l)t.framebufferTexture2D(36160,36096,3553,ue,0);else if(G.depthTexture.format===hu)t.framebufferTexture2D(36160,33306,3553,ue,0);else throw new Error("Unknown depthTexture format")}function ee(B){var G=n.get(B),fe=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture){if(fe)throw new Error("target.depthTexture not supported in Cube render targets");H(G.__webglFramebuffer,B)}else if(fe){G.__webglDepthbuffer=[];for(var ue=0;ue<6;ue++)t.bindFramebuffer(36160,G.__webglFramebuffer[ue]),G.__webglDepthbuffer[ue]=t.createRenderbuffer(),W(G.__webglDepthbuffer[ue],B)}else t.bindFramebuffer(36160,G.__webglFramebuffer),G.__webglDepthbuffer=t.createRenderbuffer(),W(G.__webglDepthbuffer,B);t.bindFramebuffer(36160,null)}function Y(B){var G=n.get(B),fe=n.get(B.texture);B.addEventListener("dispose",T),fe.__webglTexture=t.createTexture(),a.memory.textures++;var ue=B.isWebGLCubeRenderTarget===!0,Ne=B.isWebGLMultisampleRenderTarget===!0,Re=B.isWebGLMultiviewRenderTarget===!0,xe=y(B)||l;if(ue){G.__webglFramebuffer=[];for(var Ce=0;Ce<6;Ce++)G.__webglFramebuffer[Ce]=t.createFramebuffer()}else if(G.__webglFramebuffer=t.createFramebuffer(),Ne)if(l){G.__webglMultisampledFramebuffer=t.createFramebuffer(),G.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,G.__webglColorRenderbuffer);var Ve=o.convert(B.texture.format),Oe=o.convert(B.texture.type),ge=S(B.texture.internalFormat,Ve,Oe),Le=te(B);t.renderbufferStorageMultisample(36161,Le,ge,B.width,B.height),t.bindFramebuffer(36160,G.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,G.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),B.depthBuffer&&(G.__webglDepthRenderbuffer=t.createRenderbuffer(),W(G.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(Re){var we=B.width,Q=B.height,ye=B.numViews;t.bindFramebuffer(36160,G.__webglFramebuffer);var De=e.get("OVR_multiview2");a.memory.textures+=2;var tt=t.createTexture();t.bindTexture(35866,tt),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,32856,we,Q,ye,0,6408,5121,null),De.framebufferTextureMultiviewOVR(36160,36064,tt,0,0,ye);var Fe=t.createTexture();t.bindTexture(35866,Fe),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,35056,we,Q,ye,0,34041,34042,null),De.framebufferTextureMultiviewOVR(36160,33306,Fe,0,0,ye);for(var ct=new Array(ye),Ce=0;Ce<ye;++Ce)ct[Ce]=t.createFramebuffer(),t.bindFramebuffer(36160,ct[Ce]),t.framebufferTextureLayer(36160,36064,tt,0,Ce);G.__webglColorTexture=tt,G.__webglDepthStencilTexture=Fe,G.__webglViewFramebuffers=ct,t.bindFramebuffer(36160,null),t.bindTexture(35866,null)}if(ue){r.bindTexture(34067,fe.__webglTexture),oe(34067,B.texture,xe);for(var Ce=0;Ce<6;Ce++)$(G.__webglFramebuffer[Ce],B,36064,34069+Ce);b(B.texture,xe)&&w(34067,B.texture,B.width,B.height),r.bindTexture(34067,null)}else Re||(r.bindTexture(3553,fe.__webglTexture),oe(3553,B.texture,xe),$(G.__webglFramebuffer,B,36064,3553),b(B.texture,xe)&&w(3553,B.texture,B.width,B.height),r.bindTexture(3553,null));B.depthBuffer&&ee(B)}function K(B){var G=B.texture,fe=y(B)||l;if(b(G,fe)){var ue=B.isWebGLCubeRenderTarget?34067:3553,Ne=n.get(G).__webglTexture;r.bindTexture(ue,Ne),w(ue,G,B.width,B.height),r.bindTexture(ue,null)}}function ne(B){if(B.isWebGLMultisampleRenderTarget)if(l){var G=n.get(B);t.bindFramebuffer(36008,G.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,G.__webglFramebuffer);var fe=B.width,ue=B.height,Ne=16384;B.depthBuffer&&(Ne|=256),B.stencilBuffer&&(Ne|=1024),t.blitFramebuffer(0,0,fe,ue,0,0,fe,ue,Ne,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function te(B){return l&&B.isWebGLMultisampleRenderTarget?Math.min(u,B.samples):0}function ae(B){var G=a.render.frame;m.get(B)!==G&&(m.set(B,G),B.update())}var ie=!1,pe=!1;function me(B,G){B&&B.isWebGLRenderTarget&&(ie===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ie=!0),B=B.texture),O(B,G)}function _e(B,G){B&&B.isWebGLCubeRenderTarget&&(pe===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),pe=!0),B=B.texture),B&&B.isCubeTexture||Array.isArray(B.image)&&B.image.length===6?R(B,G):U(B,G)}this.allocateTextureUnit=L,this.resetTextureUnits=V,this.setTexture2D=O,this.setTexture2DArray=k,this.setTexture3D=X,this.setTextureCube=R,this.setTextureCubeDynamic=U,this.setupRenderTarget=Y,this.updateRenderTargetMipmap=K,this.updateMultisampleRenderTarget=ne,this.safeSetTexture2D=me,this.safeSetTextureCube=_e}function L8(t,e,r){var n=r.isWebGL2;function s(o){var a;if(o===Ss)return 5121;if(o===G$)return 32819;if(o===$$)return 32820;if(o===j$)return 33635;if(o===q$)return 5120;if(o===z$)return 5122;if(o===dp)return 5123;if(o===W$)return 5124;if(o===dC)return 5125;if(o===Es)return 5126;if(o===Ea)return n?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===Y$)return 6406;if(o===Oi)return 6407;if(o===Ki)return 6408;if(o===X$)return 6409;if(o===Z$)return 6410;if(o===$l)return 6402;if(o===hu)return 34041;if(o===Q$)return 6403;if(o===K$)return 36244;if(o===J$)return 33319;if(o===e5)return 33320;if(o===t5)return 36248;if(o===r5)return 36249;if(o===pC||o===mC||o===gC||o===vC)if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===pC)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===mC)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===gC)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===vC)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===yC||o===_C||o===bC||o===wC)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===yC)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===_C)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===bC)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===wC)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===i5)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===n5||o===s5||o===o5||o===a5||o===l5||o===c5||o===h5||o===u5||o===f5||o===d5||o===p5||o===m5||o===g5||o===v5)return a=e.get("WEBGL_compressed_texture_astc"),a!==null?o:null;if(o===pp)return n?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:s}}function R0(t,e,r,n){ur.call(this,t,e,n),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=r}R0.prototype=Object.assign(Object.create(ur.prototype),{constructor:R0,isWebGLMultiviewRenderTarget:!0,copy:function(t){return ur.prototype.copy.call(this,t),this.numViews=t.numViews,this},setNumViews:function(t){return this.numViews!==t&&(this.numViews=t,this.dispose()),this}});function O8(t,e){var r=2,n=t.extensions,s=t.properties,o,a,l,c,h,f,u,m=0;function d(){if(u===void 0){var x=n.get("OVR_multiview2");if(u=x!==null&&e.getContextAttributes().antialias===!1,u){m=e.getParameter(x.MAX_VIEWS_OVR),o=new R0(0,0,r),f=new he,c=[],l=[],h=[];for(var T=0;T<m;T++)c[T]=new Ue,l[T]=new Br}}return u}function v(x){return x.isArrayCamera?x.cameras:(h[0]=x,h)}function p(x,T){for(var A=v(x),P=0;P<A.length;P++)c[P].copy(A[P].projectionMatrix);T.setValue(e,"projectionMatrices",c)}function g(x,T){for(var A=v(x),P=0;P<A.length;P++)c[P].copy(A[P].matrixWorldInverse);T.setValue(e,"viewMatrices",c)}function y(x,T,A){for(var P=v(T),z=0;z<P.length;z++)c[z].multiplyMatrices(P[z].matrixWorldInverse,x.matrixWorld),l[z].getNormalMatrix(c[z]);A.setValue(e,"modelViewMatrices",c),A.setValue(e,"normalMatrices",l)}function _(x){if(x.isArrayCamera===void 0)return!0;var T=x.cameras;if(T.length>m)return!1;for(var A=1,P=T.length;A<P;A++)if(T[0].viewport.z!==T[A].viewport.z||T[0].viewport.w!==T[A].viewport.w)return!1;return!0}function b(x){if(a?f.set(a.width,a.height):t.getDrawingBufferSize(f),x.isArrayCamera){var T=x.cameras[0].viewport;o.setSize(T.z,T.w),o.setNumViews(x.cameras.length)}else o.setSize(f.x,f.y),o.setNumViews(r)}function w(x){_(x)!==!1&&(a=t.getRenderTarget(),b(x),t.setRenderTarget(o))}function S(x){o===t.getRenderTarget()&&(t.setRenderTarget(a),E(x))}function E(x){var T=o,A=T.numViews,P=s.get(T).__webglViewFramebuffers,z=T.width,V=T.height;if(x.isArrayCamera)for(var L=0;L<A;L++){var O=x.cameras[L].viewport,k=O.x,X=O.y,R=k+O.z,U=X+O.w;e.bindFramebuffer(36008,P[L]),e.blitFramebuffer(0,0,z,V,k,X,R,U,16384,9728)}else e.bindFramebuffer(36008,P[0]),e.blitFramebuffer(0,0,z,V,0,0,f.x,f.y,16384,9728)}this.isAvailable=d,this.attachCamera=w,this.detachCamera=S,this.updateCameraProjectionMatricesUniform=p,this.updateCameraViewMatricesUniform=g,this.updateObjectMatricesUniforms=y}function L0(t){Bt.call(this),this.cameras=t||[]}L0.prototype=Object.assign(Object.create(Bt.prototype),{constructor:L0,isArrayCamera:!0});function Mo(){ve.call(this),this.type="Group"}Mo.prototype=Object.assign(Object.create(ve.prototype),{constructor:Mo,isGroup:!0});function hP(t,e){var r=this,n=null,s=null,o="local-floor",a=null,l=[],c=new Map,h=new Bt;h.layers.enable(1),h.viewport=new Ot;var f=new Bt;f.layers.enable(2),f.viewport=new Ot;var u=new L0([h,f]);u.layers.enable(1),u.layers.enable(2);var m=null,d=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(A){var P=l[A];return P===void 0&&(P={},l[A]=P),P.targetRay===void 0&&(P.targetRay=new Mo,P.targetRay.matrixAutoUpdate=!1,P.targetRay.visible=!1),P.targetRay},this.getControllerGrip=function(A){var P=l[A];return P===void 0&&(P={},l[A]=P),P.grip===void 0&&(P.grip=new Mo,P.grip.matrixAutoUpdate=!1,P.grip.visible=!1),P.grip};function v(A){var P=c.get(A.inputSource);P&&(P.targetRay&&P.targetRay.dispatchEvent({type:A.type}),P.grip&&P.grip.dispatchEvent({type:A.type}))}function p(){c.forEach(function(A,P){A.targetRay&&(A.targetRay.dispatchEvent({type:"disconnected",data:P}),A.targetRay.visible=!1),A.grip&&(A.grip.dispatchEvent({type:"disconnected",data:P}),A.grip.visible=!1)}),c.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),T.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function g(A){s=A,T.setContext(n),T.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(A){o=A},this.getReferenceSpace=function(){return s},this.getSession=function(){return n},this.setSession=function(A){if(n=A,n!==null){n.addEventListener("select",v),n.addEventListener("selectstart",v),n.addEventListener("selectend",v),n.addEventListener("squeeze",v),n.addEventListener("squeezestart",v),n.addEventListener("squeezeend",v),n.addEventListener("end",p);var P=e.getContextAttributes(),z={antialias:P.antialias,alpha:P.alpha,depth:P.depth,stencil:P.stencil},V=new XRWebGLLayer(n,e,z);n.updateRenderState({baseLayer:V}),n.requestReferenceSpace(o).then(g),n.addEventListener("inputsourceschange",y)}};function y(A){for(var P=n.inputSources,z=0;z<l.length;z++)c.set(P[z],l[z]);for(var z=0;z<A.removed.length;z++){var V=A.removed[z],L=c.get(V);L&&(L.targetRay&&L.targetRay.dispatchEvent({type:"disconnected",data:V}),L.grip&&L.grip.dispatchEvent({type:"disconnected",data:V}),c.delete(V))}for(var z=0;z<A.added.length;z++){var V=A.added[z],L=c.get(V);L&&(L.targetRay&&L.targetRay.dispatchEvent({type:"connected",data:V}),L.grip&&L.grip.dispatchEvent({type:"connected",data:V}))}}var _=new F,b=new F;function w(A,P,z){_.setFromMatrixPosition(P.matrixWorld),b.setFromMatrixPosition(z.matrixWorld);var V=_.distanceTo(b),L=P.projectionMatrix.elements,O=z.projectionMatrix.elements,k=L[14]/(L[10]-1),X=L[14]/(L[10]+1),R=(L[9]+1)/L[5],U=(L[9]-1)/L[5],q=(L[8]-1)/L[0],Z=(O[8]+1)/O[0],oe=k*q,N=k*Z,M=V/(-q+Z),$=M*-q;P.matrixWorld.decompose(A.position,A.quaternion,A.scale),A.translateX($),A.translateZ(M),A.matrixWorld.compose(A.position,A.quaternion,A.scale),A.matrixWorldInverse.getInverse(A.matrixWorld);var W=k+M,H=X+M,ee=oe-$,Y=N+(V-$),K=R*X/H*W,ne=U*X/H*W;A.projectionMatrix.makePerspective(ee,Y,K,ne,W,H)}function S(A,P){P===null?A.matrixWorld.copy(A.matrix):A.matrixWorld.multiplyMatrices(P.matrixWorld,A.matrix),A.matrixWorldInverse.getInverse(A.matrixWorld)}this.getCamera=function(A){u.near=f.near=h.near=A.near,u.far=f.far=h.far=A.far,(m!==u.near||d!==u.far)&&(n.updateRenderState({depthNear:u.near,depthFar:u.far}),m=u.near,d=u.far);var P=A.parent,z=u.cameras;S(u,P);for(var V=0;V<z.length;V++)S(z[V],P);A.matrixWorld.copy(u.matrixWorld);for(var L=A.children,V=0,O=L.length;V<O;V++)L[V].updateMatrixWorld(!0);return w(u,h,f),u};var E=null;function x(A,P){if(a=P.getViewerPose(s),a!==null){var z=a.views,V=n.renderState.baseLayer;t.setFramebuffer(V.framebuffer);for(var L=0;L<z.length;L++){var O=z[L],k=V.getViewport(O),X=u.cameras[L];X.matrix.fromArray(O.transform.matrix),X.projectionMatrix.fromArray(O.projectionMatrix),X.viewport.set(k.x,k.y,k.width,k.height),L===0&&u.matrix.copy(X.matrix)}}for(var R=n.inputSources,L=0;L<l.length;L++){var U=l[L],q=R[L],Z=null,oe=null;q&&(U.targetRay&&(Z=P.getPose(q.targetRaySpace,s),Z!==null&&(U.targetRay.matrix.fromArray(Z.transform.matrix),U.targetRay.matrix.decompose(U.targetRay.position,U.targetRay.rotation,U.targetRay.scale))),U.grip&&q.gripSpace&&(oe=P.getPose(q.gripSpace,s),oe!==null&&(U.grip.matrix.fromArray(oe.transform.matrix),U.grip.matrix.decompose(U.grip.position,U.grip.rotation,U.grip.scale)))),U.targetRay&&(U.targetRay.visible=Z!==null),U.grip&&(U.grip.visible=oe!==null)}E&&E(A,P)}var T=new qC;T.setAnimationLoop(x),this.setAnimationLoop=function(A){E=A},this.dispose=function(){}}Object.assign(hP.prototype,yr.prototype);function Dp(t){t=t||{};var e=t.canvas!==void 0?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=t.context!==void 0?t.context:null,n=t.alpha!==void 0?t.alpha:!1,s=t.depth!==void 0?t.depth:!0,o=t.stencil!==void 0?t.stencil:!0,a=t.antialias!==void 0?t.antialias:!1,l=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,c=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,h=t.powerPreference!==void 0?t.powerPreference:"default",f=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1,u=null,m=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Vr,this.physicallyCorrectLights=!1,this.toneMapping=j_,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d=this,v=!1,p=null,g=0,y=0,_=null,b=null,w=-1,S={geometry:null,program:null,wireframe:!1},E=null,x=null,T=new Ot,A=new Ot,P=null,z=e.width,V=e.height,L=1,O=null,k=null,X=new Ot(0,0,z,V),R=new Ot(0,0,z,V),U=!1,q=new bu,Z=new dj,oe=!1,N=!1,M=new Ue,$=new F;function W(){return _===null?L:1}var H;try{var ee={alpha:n,depth:s,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:f,xrCompatible:!0};if(e.addEventListener("webglcontextlost",we,!1),e.addEventListener("webglcontextrestored",Q,!1),H=r||e.getContext("webgl",ee)||e.getContext("experimental-webgl",ee),H===null)throw e.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(C){throw console.error("THREE.WebGLRenderer: "+C.message),C}var Y,K,ne,te,ae,ie,pe,me,_e,B,G,fe,ue,Ne,Re,xe,Ce;function Ve(){Y=new pj(H),K=new fj(H,Y,t),K.isWebGL2===!1&&(Y.get("WEBGL_depth_texture"),Y.get("OES_texture_float"),Y.get("OES_texture_half_float"),Y.get("OES_texture_half_float_linear"),Y.get("OES_standard_derivatives"),Y.get("OES_element_index_uint"),Y.get("ANGLE_instanced_arrays")),Y.get("OES_texture_float_linear"),Ce=new L8(H,Y,K),ne=new I8(H,Y,K),ne.scissor(A.copy(R).multiplyScalar(L).floor()),ne.viewport(T.copy(X).multiplyScalar(L).floor()),te=new vj(H),ae=new _8,ie=new R8(H,Y,ne,ae,K,Ce,te),pe=new W5(H,K),me=new mj(H,pe,te),_e=new bj(H,me,pe,te),Ne=new _j(H),B=new y8(d,Y,K),G=new S8,fe=new M8,ue=new hj(d,ne,_e,l),Re=new uj(H,Y,te,K),xe=new gj(H,Y,te,K),te.programs=B.programs,d.capabilities=K,d.extensions=Y,d.properties=ae,d.renderLists=G,d.state=ne,d.info=te}Ve();var Oe=new hP(d,H);this.xr=Oe;var ge=new O8(d,H),Le=new cP(d,_e,K.maxTextureSize);this.shadowMap=Le,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){var C=Y.get("WEBGL_lose_context");C&&C.loseContext()},this.forceContextRestore=function(){var C=Y.get("WEBGL_lose_context");C&&C.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(C){C!==void 0&&(L=C,this.setSize(z,V,!1))},this.getSize=function(C){return C===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),C=new he),C.set(z,V)},this.setSize=function(C,D,J){if(Oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=C,V=D,e.width=Math.floor(C*L),e.height=Math.floor(D*L),J!==!1&&(e.style.width=C+"px",e.style.height=D+"px"),this.setViewport(0,0,C,D)},this.getDrawingBufferSize=function(C){return C===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),C=new he),C.set(z*L,V*L).floor()},this.setDrawingBufferSize=function(C,D,J){z=C,V=D,L=J,e.width=Math.floor(C*J),e.height=Math.floor(D*J),this.setViewport(0,0,C,D)},this.getCurrentViewport=function(C){return C===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),C=new Ot),C.copy(T)},this.getViewport=function(C){return C.copy(X)},this.setViewport=function(C,D,J,le){C.isVector4?X.set(C.x,C.y,C.z,C.w):X.set(C,D,J,le),ne.viewport(T.copy(X).multiplyScalar(L).floor())},this.getScissor=function(C){return C.copy(R)},this.setScissor=function(C,D,J,le){C.isVector4?R.set(C.x,C.y,C.z,C.w):R.set(C,D,J,le),ne.scissor(A.copy(R).multiplyScalar(L).floor())},this.getScissorTest=function(){return U},this.setScissorTest=function(C){ne.setScissorTest(U=C)},this.setOpaqueSort=function(C){O=C},this.setTransparentSort=function(C){k=C},this.getClearColor=function(){return ue.getClearColor()},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(C,D,J){var le=0;(C===void 0||C)&&(le|=16384),(D===void 0||D)&&(le|=256),(J===void 0||J)&&(le|=1024),H.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",we,!1),e.removeEventListener("webglcontextrestored",Q,!1),G.dispose(),fe.dispose(),ae.dispose(),_e.dispose(),Oe.dispose(),dt.stop()};function we(C){C.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1,Ve()}function ye(C){var D=C.target;D.removeEventListener("dispose",ye),De(D)}function De(C){tt(C),ae.remove(C)}function tt(C){var D=ae.get(C).program;C.program=void 0,D!==void 0&&B.releaseProgram(D)}function Fe(C,D){C.render(function(J){d.renderBufferImmediate(J,D)})}this.renderBufferImmediate=function(C,D){ne.initAttributes();var J=ae.get(C);C.hasPositions&&!J.position&&(J.position=H.createBuffer()),C.hasNormals&&!J.normal&&(J.normal=H.createBuffer()),C.hasUvs&&!J.uv&&(J.uv=H.createBuffer()),C.hasColors&&!J.color&&(J.color=H.createBuffer());var le=D.getAttributes();C.hasPositions&&(H.bindBuffer(34962,J.position),H.bufferData(34962,C.positionArray,35048),ne.enableAttribute(le.position),H.vertexAttribPointer(le.position,3,5126,!1,0,0)),C.hasNormals&&(H.bindBuffer(34962,J.normal),H.bufferData(34962,C.normalArray,35048),ne.enableAttribute(le.normal),H.vertexAttribPointer(le.normal,3,5126,!1,0,0)),C.hasUvs&&(H.bindBuffer(34962,J.uv),H.bufferData(34962,C.uvArray,35048),ne.enableAttribute(le.uv),H.vertexAttribPointer(le.uv,2,5126,!1,0,0)),C.hasColors&&(H.bindBuffer(34962,J.color),H.bufferData(34962,C.colorArray,35048),ne.enableAttribute(le.color),H.vertexAttribPointer(le.color,3,5126,!1,0,0)),ne.disableUnusedAttributes(),H.drawArrays(4,0,C.count),C.count=0};var ct=new fr;this.renderBufferDirect=function(C,D,J,le,be,$e){D===null&&(D=ct);var Be=be.isMesh&&be.matrixWorld.determinant()<0,pt=_d(C,D,le,be);ne.setMaterial(le,Be);var nt=!1;(S.geometry!==J.id||S.program!==pt.id||S.wireframe!==(le.wireframe===!0))&&(S.geometry=J.id,S.program=pt.id,S.wireframe=le.wireframe===!0,nt=!0),(le.morphTargets||le.morphNormals)&&(Ne.update(be,J,le,pt),nt=!0);var lt=J.index,Lt=J.attributes.position;if(lt===null){if(Lt===void 0||Lt.count===0)return}else if(lt.count===0)return;var Pt=1;le.wireframe===!0&&(lt=me.getWireframeAttribute(J),Pt=2);var wt,qe=Re;lt!==null&&(wt=pe.get(lt),qe=xe,qe.setIndex(wt)),nt&&(gt(be,J,le,pt),lt!==null&&H.bindBuffer(34963,wt.buffer));var je=lt!==null?lt.count:Lt.count,Fn=J.drawRange.start*Pt,vr=J.drawRange.count*Pt,Sl=$e!==null?$e.start*Pt:0,Ai=$e!==null?$e.count*Pt:1/0,Qr=Math.max(Fn,Sl),my=Math.min(je,Fn+vr,Sl+Ai)-1,bd=Math.max(0,my-Qr+1);if(bd!==0){if(be.isMesh)le.wireframe===!0?(ne.setLineWidth(le.wireframeLinewidth*W()),qe.setMode(1)):qe.setMode(4);else if(be.isLine){var gy=le.linewidth;gy===void 0&&(gy=1),ne.setLineWidth(gy*W()),be.isLineSegments?qe.setMode(1):be.isLineLoop?qe.setMode(2):qe.setMode(3)}else be.isPoints?qe.setMode(0):be.isSprite&&qe.setMode(4);be.isInstancedMesh?qe.renderInstances(J,Qr,bd,be.count):J.isInstancedBufferGeometry?qe.renderInstances(J,Qr,bd,J.maxInstancedCount):qe.render(Qr,bd)}};function gt(C,D,J,le){if(!(K.isWebGL2===!1&&(C.isInstancedMesh||D.isInstancedBufferGeometry)&&Y.get("ANGLE_instanced_arrays")===null)){ne.initAttributes();var be=D.attributes,$e=le.getAttributes(),Be=J.defaultAttributeValues;for(var pt in $e){var nt=$e[pt];if(nt>=0){var lt=be[pt];if(lt!==void 0){var Lt=lt.normalized,Pt=lt.itemSize,wt=pe.get(lt);if(wt===void 0)continue;var qe=wt.buffer,je=wt.type,Fn=wt.bytesPerElement;if(lt.isInterleavedBufferAttribute){var vr=lt.data,Sl=vr.stride,Ai=lt.offset;vr&&vr.isInstancedInterleavedBuffer?(ne.enableAttributeAndDivisor(nt,vr.meshPerAttribute),D.maxInstancedCount===void 0&&(D.maxInstancedCount=vr.meshPerAttribute*vr.count)):ne.enableAttribute(nt),H.bindBuffer(34962,qe),H.vertexAttribPointer(nt,Pt,je,Lt,Sl*Fn,Ai*Fn)}else lt.isInstancedBufferAttribute?(ne.enableAttributeAndDivisor(nt,lt.meshPerAttribute),D.maxInstancedCount===void 0&&(D.maxInstancedCount=lt.meshPerAttribute*lt.count)):ne.enableAttribute(nt),H.bindBuffer(34962,qe),H.vertexAttribPointer(nt,Pt,je,Lt,0,0)}else if(pt==="instanceMatrix"){var wt=pe.get(C.instanceMatrix);if(wt===void 0)continue;var qe=wt.buffer,je=wt.type;ne.enableAttributeAndDivisor(nt+0,1),ne.enableAttributeAndDivisor(nt+1,1),ne.enableAttributeAndDivisor(nt+2,1),ne.enableAttributeAndDivisor(nt+3,1),H.bindBuffer(34962,qe),H.vertexAttribPointer(nt+0,4,je,!1,64,0),H.vertexAttribPointer(nt+1,4,je,!1,64,16),H.vertexAttribPointer(nt+2,4,je,!1,64,32),H.vertexAttribPointer(nt+3,4,je,!1,64,48)}else if(Be!==void 0){var Qr=Be[pt];if(Qr!==void 0)switch(Qr.length){case 2:H.vertexAttrib2fv(nt,Qr);break;case 3:H.vertexAttrib3fv(nt,Qr);break;case 4:H.vertexAttrib4fv(nt,Qr);break;default:H.vertexAttrib1fv(nt,Qr)}}}}ne.disableUnusedAttributes()}}this.compile=function(C,D){m=fe.get(C,D),m.init(),C.traverse(function(le){le.isLight&&(m.pushLight(le),le.castShadow&&m.pushShadow(le))}),m.setupLights(D);var J={};C.traverse(function(le){if(le.material)if(Array.isArray(le.material))for(var be=0;be<le.material.length;be++)le.material[be].uuid in J||(Mr(le.material[be],C,le),J[le.material[be].uuid]=!0);else le.material.uuid in J||(Mr(le.material,C,le),J[le.material.uuid]=!0)})};var At=null;function hi(C){Oe.isPresenting||At&&At(C)}var dt=new qC;dt.setAnimationLoop(hi),typeof window!="undefined"&&dt.setContext(window),this.setAnimationLoop=function(C){At=C,Oe.setAnimationLoop(C),dt.start()},this.render=function(C,D){var J,le;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),J=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),le=arguments[3]),!(D&&D.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!v){S.geometry=null,S.program=null,S.wireframe=!1,w=-1,E=null,C.autoUpdate===!0&&C.updateMatrixWorld(),D.parent===null&&D.updateMatrixWorld(),Oe.enabled&&Oe.isPresenting&&(D=Oe.getCamera(D)),m=fe.get(C,D),m.init(),C.onBeforeRender(d,C,D,J||_),M.multiplyMatrices(D.projectionMatrix,D.matrixWorldInverse),q.setFromProjectionMatrix(M),N=this.localClippingEnabled,oe=Z.init(this.clippingPlanes,N,D),u=G.get(C,D),u.init(),Ar(C,D,0,d.sortObjects),d.sortObjects===!0&&u.sort(O,k),oe&&Z.beginShadows();var be=m.state.shadowsArray;Le.render(be,C,D),m.setupLights(D),oe&&Z.endShadows(),this.info.autoReset&&this.info.reset(),J!==void 0&&this.setRenderTarget(J),Oe.enabled&&ge.isAvailable()&&ge.attachCamera(D),ue.render(u,C,D,le);var $e=u.opaque,Be=u.transparent;if(C.overrideMaterial){var pt=C.overrideMaterial;$e.length&&gr($e,C,D,pt),Be.length&&gr(Be,C,D,pt)}else $e.length&&gr($e,C,D),Be.length&&gr(Be,C,D);C.onAfterRender(d,C,D),_!==null&&(ie.updateRenderTargetMipmap(_),ie.updateMultisampleRenderTarget(_)),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1),Oe.enabled&&ge.isAvailable()&&ge.detachCamera(D),u=null,m=null}};function Ar(C,D,J,le){if(C.visible!==!1){var be=C.layers.test(D.layers);if(be){if(C.isGroup)J=C.renderOrder;else if(C.isLOD)C.autoUpdate===!0&&C.update(D);else if(C.isLight)m.pushLight(C),C.castShadow&&m.pushShadow(C);else if(C.isSprite){if(!C.frustumCulled||q.intersectsSprite(C)){le&&$.setFromMatrixPosition(C.matrixWorld).applyMatrix4(M);var $e=_e.update(C),Be=C.material;Be.visible&&u.push(C,$e,Be,J,$.z,null)}}else if(C.isImmediateRenderObject)le&&$.setFromMatrixPosition(C.matrixWorld).applyMatrix4(M),u.push(C,null,C.material,J,$.z,null);else if((C.isMesh||C.isLine||C.isPoints)&&(C.isSkinnedMesh&&C.skeleton.frame!==te.render.frame&&(C.skeleton.update(),C.skeleton.frame=te.render.frame),!C.frustumCulled||q.intersectsObject(C))){le&&$.setFromMatrixPosition(C.matrixWorld).applyMatrix4(M);var $e=_e.update(C),Be=C.material;if(Array.isArray(Be))for(var pt=$e.groups,nt=0,lt=pt.length;nt<lt;nt++){var Lt=pt[nt],Pt=Be[Lt.materialIndex];Pt&&Pt.visible&&u.push(C,$e,Pt,J,$.z,Lt)}else Be.visible&&u.push(C,$e,Be,J,$.z,null)}}for(var wt=C.children,nt=0,lt=wt.length;nt<lt;nt++)Ar(wt[nt],D,J,le)}}function gr(C,D,J,le){for(var be=0,$e=C.length;be<$e;be++){var Be=C[be],pt=Be.object,nt=Be.geometry,lt=le===void 0?Be.material:le,Lt=Be.group;if(J.isArrayCamera)if(x=J,Oe.enabled&&ge.isAvailable())oo(pt,D,J,nt,lt,Lt);else for(var Pt=J.cameras,wt=0,qe=Pt.length;wt<qe;wt++){var je=Pt[wt];pt.layers.test(je.layers)&&(ne.viewport(T.copy(je.viewport)),m.setupLights(je),oo(pt,D,je,nt,lt,Lt))}else x=null,oo(pt,D,J,nt,lt,Lt)}}function oo(C,D,J,le,be,$e){if(C.onBeforeRender(d,D,J,le,be,$e),m=fe.get(D,x||J),C.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,C.matrixWorld),C.normalMatrix.getNormalMatrix(C.modelViewMatrix),C.isImmediateRenderObject){var Be=_d(J,D,be,C);ne.setMaterial(be),S.geometry=null,S.program=null,S.wireframe=!1,Fe(C,Be)}else d.renderBufferDirect(J,D,le,be,C,$e);C.onAfterRender(d,D,J,le,be,$e),m=fe.get(D,x||J)}function Mr(C,D,J){var le=ae.get(C),be=m.state.lights,$e=m.state.shadowsArray,Be=be.state.version,pt=B.getParameters(C,be.state,$e,D,Z.numPlanes,Z.numIntersection,J),nt=B.getProgramCacheKey(pt),lt=le.program,Lt=!0;if(lt===void 0)C.addEventListener("dispose",ye);else if(lt.cacheKey!==nt)tt(C);else if(le.lightsStateVersion!==Be)le.lightsStateVersion=Be,Lt=!1;else{if(pt.shaderID!==void 0)return;Lt=!1}Lt&&(lt=B.acquireProgram(pt,nt),le.program=lt,le.uniforms=pt.uniforms,le.environment=C.isMeshStandardMaterial?D.environment:null,le.outputEncoding=d.outputEncoding,C.program=lt);var Pt=lt.getAttributes();if(C.morphTargets){C.numSupportedMorphTargets=0;for(var wt=0;wt<d.maxMorphTargets;wt++)Pt["morphTarget"+wt]>=0&&C.numSupportedMorphTargets++}if(C.morphNormals){C.numSupportedMorphNormals=0;for(var wt=0;wt<d.maxMorphNormals;wt++)Pt["morphNormal"+wt]>=0&&C.numSupportedMorphNormals++}var qe=le.uniforms;(!C.isShaderMaterial&&!C.isRawShaderMaterial||C.clipping===!0)&&(le.numClippingPlanes=Z.numPlanes,le.numIntersection=Z.numIntersection,qe.clippingPlanes=Z.uniform),le.fog=D.fog,le.needsLights=Nq(C),le.lightsStateVersion=Be,le.needsLights&&(qe.ambientLightColor.value=be.state.ambient,qe.lightProbe.value=be.state.probe,qe.directionalLights.value=be.state.directional,qe.spotLights.value=be.state.spot,qe.rectAreaLights.value=be.state.rectArea,qe.pointLights.value=be.state.point,qe.hemisphereLights.value=be.state.hemi,qe.directionalShadowMap.value=be.state.directionalShadowMap,qe.directionalShadowMatrix.value=be.state.directionalShadowMatrix,qe.spotShadowMap.value=be.state.spotShadowMap,qe.spotShadowMatrix.value=be.state.spotShadowMatrix,qe.pointShadowMap.value=be.state.pointShadowMap,qe.pointShadowMatrix.value=be.state.pointShadowMatrix);var je=le.program.getUniforms(),Fn=Ao.seqWithValue(je.seq,qe);le.uniformsList=Fn}function _d(C,D,J,le){ie.resetTextureUnits();var be=D.fog,$e=J.isMeshStandardMaterial?D.environment:null,Be=ae.get(J),pt=m.state.lights;if(oe&&(N||C!==E)){var nt=C===E&&J.id===w;Z.setState(J.clippingPlanes,J.clipIntersection,J.clipShadows,C,Be,nt)}J.version===Be.__version?(Be.program===void 0||J.fog&&Be.fog!==be||Be.environment!==$e||Be.needsLights&&Be.lightsStateVersion!==pt.state.version||Be.numClippingPlanes!==void 0&&(Be.numClippingPlanes!==Z.numPlanes||Be.numIntersection!==Z.numIntersection)||Be.outputEncoding!==d.outputEncoding)&&Mr(J,D,le):(Mr(J,D,le),Be.__version=J.version);var lt=!1,Lt=!1,Pt=!1,wt=Be.program,qe=wt.getUniforms(),je=Be.uniforms;if(ne.useProgram(wt.program)&&(lt=!0,Lt=!0,Pt=!0),J.id!==w&&(w=J.id,Lt=!0),lt||E!==C){if(wt.numMultiviewViews>0?ge.updateCameraProjectionMatricesUniform(C,qe):qe.setValue(H,"projectionMatrix",C.projectionMatrix),K.logarithmicDepthBuffer&&qe.setValue(H,"logDepthBufFC",2/(Math.log(C.far+1)/Math.LN2)),E!==C&&(E=C,Lt=!0,Pt=!0),J.isShaderMaterial||J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshStandardMaterial||J.envMap){var Fn=qe.map.cameraPosition;Fn!==void 0&&Fn.setValue(H,$.setFromMatrixPosition(C.matrixWorld))}(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial)&&qe.setValue(H,"isOrthographic",C.isOrthographicCamera===!0),(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial||J.skinning)&&(wt.numMultiviewViews>0?ge.updateCameraViewMatricesUniform(C,qe):qe.setValue(H,"viewMatrix",C.matrixWorldInverse))}if(J.skinning){qe.setOptional(H,le,"bindMatrix"),qe.setOptional(H,le,"bindMatrixInverse");var vr=le.skeleton;if(vr){var Sl=vr.bones;if(K.floatVertexTextures){if(vr.boneTexture===void 0){var Ai=Math.sqrt(Sl.length*4);Ai=Qe.ceilPowerOfTwo(Ai),Ai=Math.max(Ai,4);var Qr=new Float32Array(Ai*Ai*4);Qr.set(vr.boneMatrices);var my=new gc(Qr,Ai,Ai,Ki,Es);vr.boneMatrices=Qr,vr.boneTexture=my,vr.boneTextureSize=Ai}qe.setValue(H,"boneTexture",vr.boneTexture,ie),qe.setValue(H,"boneTextureSize",vr.boneTextureSize)}else qe.setOptional(H,vr,"boneMatrices")}}return(Lt||Be.receiveShadow!==le.receiveShadow)&&(Be.receiveShadow=le.receiveShadow,qe.setValue(H,"receiveShadow",le.receiveShadow)),Lt&&(qe.setValue(H,"toneMappingExposure",d.toneMappingExposure),qe.setValue(H,"toneMappingWhitePoint",d.toneMappingWhitePoint),Be.needsLights&&Fq(je,Pt),be&&J.fog&&Aq(je,be),J.isMeshBasicMaterial?Ti(je,J):J.isMeshLambertMaterial?(Ti(je,J),Mq(je,J)):J.isMeshToonMaterial?(Ti(je,J),Pq(je,J)):J.isMeshPhongMaterial?(Ti(je,J),Cq(je,J)):J.isMeshStandardMaterial?(Ti(je,J,$e),J.isMeshPhysicalMaterial?Iq(je,J,$e):Kx(je,J,$e)):J.isMeshMatcapMaterial?(Ti(je,J),Rq(je,J)):J.isMeshDepthMaterial?(Ti(je,J),Lq(je,J)):J.isMeshDistanceMaterial?(Ti(je,J),Oq(je,J)):J.isMeshNormalMaterial?(Ti(je,J),Dq(je,J)):J.isLineBasicMaterial?(bl(je,J),J.isLineDashedMaterial&&wl(je,J)):J.isPointsMaterial?xq(je,J):J.isSpriteMaterial?Tq(je,J):J.isShadowMaterial&&(je.color.value.copy(J.color),je.opacity.value=J.opacity),je.ltc_1!==void 0&&(je.ltc_1.value=Me.LTC_1),je.ltc_2!==void 0&&(je.ltc_2.value=Me.LTC_2),Ao.upload(H,Be.uniformsList,je,ie),J.isShaderMaterial&&(J.uniformsNeedUpdate=!1)),J.isShaderMaterial&&J.uniformsNeedUpdate===!0&&(Ao.upload(H,Be.uniformsList,je,ie),J.uniformsNeedUpdate=!1),J.isSpriteMaterial&&qe.setValue(H,"center",le.center),wt.numMultiviewViews>0?ge.updateObjectMatricesUniforms(le,C,qe):(qe.setValue(H,"modelViewMatrix",le.modelViewMatrix),qe.setValue(H,"normalMatrix",le.normalMatrix)),qe.setValue(H,"modelMatrix",le.matrixWorld),wt}function Ti(C,D,J){C.opacity.value=D.opacity,D.color&&C.diffuse.value.copy(D.color),D.emissive&&C.emissive.value.copy(D.emissive).multiplyScalar(D.emissiveIntensity),D.map&&(C.map.value=D.map),D.alphaMap&&(C.alphaMap.value=D.alphaMap),D.specularMap&&(C.specularMap.value=D.specularMap);var le=D.envMap||J;le&&(C.envMap.value=le,C.flipEnvMap.value=le.isCubeTexture?-1:1,C.reflectivity.value=D.reflectivity,C.refractionRatio.value=D.refractionRatio,C.maxMipLevel.value=ae.get(le).__maxMipLevel),D.lightMap&&(C.lightMap.value=D.lightMap,C.lightMapIntensity.value=D.lightMapIntensity),D.aoMap&&(C.aoMap.value=D.aoMap,C.aoMapIntensity.value=D.aoMapIntensity);var be;D.map?be=D.map:D.specularMap?be=D.specularMap:D.displacementMap?be=D.displacementMap:D.normalMap?be=D.normalMap:D.bumpMap?be=D.bumpMap:D.roughnessMap?be=D.roughnessMap:D.metalnessMap?be=D.metalnessMap:D.alphaMap?be=D.alphaMap:D.emissiveMap&&(be=D.emissiveMap),be!==void 0&&(be.isWebGLRenderTarget&&(be=be.texture),be.matrixAutoUpdate===!0&&be.updateMatrix(),C.uvTransform.value.copy(be.matrix));var $e;D.aoMap?$e=D.aoMap:D.lightMap&&($e=D.lightMap),$e!==void 0&&($e.isWebGLRenderTarget&&($e=$e.texture),$e.matrixAutoUpdate===!0&&$e.updateMatrix(),C.uv2Transform.value.copy($e.matrix))}function bl(C,D){C.diffuse.value.copy(D.color),C.opacity.value=D.opacity}function wl(C,D){C.dashSize.value=D.dashSize,C.totalSize.value=D.dashSize+D.gapSize,C.scale.value=D.scale}function xq(C,D){C.diffuse.value.copy(D.color),C.opacity.value=D.opacity,C.size.value=D.size*L,C.scale.value=V*.5,D.map&&(C.map.value=D.map),D.alphaMap&&(C.alphaMap.value=D.alphaMap);var J;D.map?J=D.map:D.alphaMap&&(J=D.alphaMap),J!==void 0&&(J.matrixAutoUpdate===!0&&J.updateMatrix(),C.uvTransform.value.copy(J.matrix))}function Tq(C,D){C.diffuse.value.copy(D.color),C.opacity.value=D.opacity,C.rotation.value=D.rotation,D.map&&(C.map.value=D.map),D.alphaMap&&(C.alphaMap.value=D.alphaMap);var J;D.map?J=D.map:D.alphaMap&&(J=D.alphaMap),J!==void 0&&(J.matrixAutoUpdate===!0&&J.updateMatrix(),C.uvTransform.value.copy(J.matrix))}function Aq(C,D){C.fogColor.value.copy(D.color),D.isFog?(C.fogNear.value=D.near,C.fogFar.value=D.far):D.isFogExp2&&(C.fogDensity.value=D.density)}function Mq(C,D){D.emissiveMap&&(C.emissiveMap.value=D.emissiveMap)}function Cq(C,D){C.specular.value.copy(D.specular),C.shininess.value=Math.max(D.shininess,1e-4),D.emissiveMap&&(C.emissiveMap.value=D.emissiveMap),D.bumpMap&&(C.bumpMap.value=D.bumpMap,C.bumpScale.value=D.bumpScale,D.side===tr&&(C.bumpScale.value*=-1)),D.normalMap&&(C.normalMap.value=D.normalMap,C.normalScale.value.copy(D.normalScale),D.side===tr&&C.normalScale.value.negate()),D.displacementMap&&(C.displacementMap.value=D.displacementMap,C.displacementScale.value=D.displacementScale,C.displacementBias.value=D.displacementBias)}function Pq(C,D){C.specular.value.copy(D.specular),C.shininess.value=Math.max(D.shininess,1e-4),D.gradientMap&&(C.gradientMap.value=D.gradientMap),D.emissiveMap&&(C.emissiveMap.value=D.emissiveMap),D.bumpMap&&(C.bumpMap.value=D.bumpMap,C.bumpScale.value=D.bumpScale,D.side===tr&&(C.bumpScale.value*=-1)),D.normalMap&&(C.normalMap.value=D.normalMap,C.normalScale.value.copy(D.normalScale),D.side===tr&&C.normalScale.value.negate()),D.displacementMap&&(C.displacementMap.value=D.displacementMap,C.displacementScale.value=D.displacementScale,C.displacementBias.value=D.displacementBias)}function Kx(C,D,J){C.roughness.value=D.roughness,C.metalness.value=D.metalness,D.roughnessMap&&(C.roughnessMap.value=D.roughnessMap),D.metalnessMap&&(C.metalnessMap.value=D.metalnessMap),D.emissiveMap&&(C.emissiveMap.value=D.emissiveMap),D.bumpMap&&(C.bumpMap.value=D.bumpMap,C.bumpScale.value=D.bumpScale,D.side===tr&&(C.bumpScale.value*=-1)),D.normalMap&&(C.normalMap.value=D.normalMap,C.normalScale.value.copy(D.normalScale),D.side===tr&&C.normalScale.value.negate()),D.displacementMap&&(C.displacementMap.value=D.displacementMap,C.displacementScale.value=D.displacementScale,C.displacementBias.value=D.displacementBias),(D.envMap||J)&&(C.envMapIntensity.value=D.envMapIntensity)}function Iq(C,D,J){Kx(C,D,J),C.reflectivity.value=D.reflectivity,C.clearcoat.value=D.clearcoat,C.clearcoatRoughness.value=D.clearcoatRoughness,D.sheen&&C.sheen.value.copy(D.sheen),D.clearcoatNormalMap&&(C.clearcoatNormalScale.value.copy(D.clearcoatNormalScale),C.clearcoatNormalMap.value=D.clearcoatNormalMap,D.side===tr&&C.clearcoatNormalScale.value.negate()),C.transparency.value=D.transparency}function Rq(C,D){D.matcap&&(C.matcap.value=D.matcap),D.bumpMap&&(C.bumpMap.value=D.bumpMap,C.bumpScale.value=D.bumpScale,D.side===tr&&(C.bumpScale.value*=-1)),D.normalMap&&(C.normalMap.value=D.normalMap,C.normalScale.value.copy(D.normalScale),D.side===tr&&C.normalScale.value.negate()),D.displacementMap&&(C.displacementMap.value=D.displacementMap,C.displacementScale.value=D.displacementScale,C.displacementBias.value=D.displacementBias)}function Lq(C,D){D.displacementMap&&(C.displacementMap.value=D.displacementMap,C.displacementScale.value=D.displacementScale,C.displacementBias.value=D.displacementBias)}function Oq(C,D){D.displacementMap&&(C.displacementMap.value=D.displacementMap,C.displacementScale.value=D.displacementScale,C.displacementBias.value=D.displacementBias),C.referencePosition.value.copy(D.referencePosition),C.nearDistance.value=D.nearDistance,C.farDistance.value=D.farDistance}function Dq(C,D){D.bumpMap&&(C.bumpMap.value=D.bumpMap,C.bumpScale.value=D.bumpScale,D.side===tr&&(C.bumpScale.value*=-1)),D.normalMap&&(C.normalMap.value=D.normalMap,C.normalScale.value.copy(D.normalScale),D.side===tr&&C.normalScale.value.negate()),D.displacementMap&&(C.displacementMap.value=D.displacementMap,C.displacementScale.value=D.displacementScale,C.displacementBias.value=D.displacementBias)}function Fq(C,D){C.ambientLightColor.needsUpdate=D,C.lightProbe.needsUpdate=D,C.directionalLights.needsUpdate=D,C.pointLights.needsUpdate=D,C.spotLights.needsUpdate=D,C.rectAreaLights.needsUpdate=D,C.hemisphereLights.needsUpdate=D}function Nq(C){return C.isMeshLambertMaterial||C.isMeshToonMaterial||C.isMeshPhongMaterial||C.isMeshStandardMaterial||C.isShadowMaterial||C.isShaderMaterial&&C.lights===!0}this.setFramebuffer=function(C){p!==C&&_===null&&H.bindFramebuffer(36160,C),p=C},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTarget=function(C,D,J){_=C,g=D,y=J,C&&ae.get(C).__webglFramebuffer===void 0&&ie.setupRenderTarget(C);var le=p,be=!1;if(C){var $e=ae.get(C).__webglFramebuffer;C.isWebGLCubeRenderTarget?(le=$e[D||0],be=!0):C.isWebGLMultisampleRenderTarget?le=ae.get(C).__webglMultisampledFramebuffer:le=$e,T.copy(C.viewport),A.copy(C.scissor),P=C.scissorTest}else T.copy(X).multiplyScalar(L).floor(),A.copy(R).multiplyScalar(L).floor(),P=U;if(b!==le&&(H.bindFramebuffer(36160,le),b=le),ne.viewport(T),ne.scissor(A),ne.setScissorTest(P),be){var Be=ae.get(C.texture);H.framebufferTexture2D(36160,36064,34069+(D||0),Be.__webglTexture,J||0)}},this.readRenderTargetPixels=function(C,D,J,le,be,$e,Be){if(!(C&&C.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var pt=ae.get(C).__webglFramebuffer;if(C.isWebGLCubeRenderTarget&&Be!==void 0&&(pt=pt[Be]),pt){var nt=!1;pt!==b&&(H.bindFramebuffer(36160,pt),nt=!0);try{var lt=C.texture,Lt=lt.format,Pt=lt.type;if(Lt!==Ki&&Ce.convert(Lt)!==H.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Pt!==Ss&&Ce.convert(Pt)!==H.getParameter(35738)&&!(Pt===Es&&(K.isWebGL2||Y.get("OES_texture_float")||Y.get("WEBGL_color_buffer_float")))&&!(Pt===Ea&&(K.isWebGL2?Y.get("EXT_color_buffer_float"):Y.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}H.checkFramebufferStatus(36160)===36053?D>=0&&D<=C.width-le&&J>=0&&J<=C.height-be&&H.readPixels(D,J,le,be,Ce.convert(Lt),Ce.convert(Pt),$e):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{nt&&H.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(C,D,J){J===void 0&&(J=0);var le=Math.pow(2,-J),be=Math.floor(D.image.width*le),$e=Math.floor(D.image.height*le),Be=Ce.convert(D.format);ie.setTexture2D(D,0),H.copyTexImage2D(3553,J,Be,C.x,C.y,be,$e,0),ne.unbindTexture()},this.copyTextureToTexture=function(C,D,J,le){var be=D.image.width,$e=D.image.height,Be=Ce.convert(J.format),pt=Ce.convert(J.type);ie.setTexture2D(J,0),D.isDataTexture?H.texSubImage2D(3553,le||0,C.x,C.y,be,$e,Be,pt,D.image.data):H.texSubImage2D(3553,le||0,C.x,C.y,Be,pt,D.image),ne.unbindTexture()},this.initTexture=function(C){ie.setTexture2D(C,0),ne.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function O0(t,e){this.name="",this.color=new Se(t),this.density=e!==void 0?e:25e-5}Object.assign(O0.prototype,{isFogExp2:!0,clone:function(){return new O0(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function D0(t,e,r){this.name="",this.color=new Se(t),this.near=e!==void 0?e:1,this.far=r!==void 0?r:1e3}Object.assign(D0.prototype,{isFog:!0,clone:function(){return new D0(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function Yn(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=gp,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(Yn.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(Yn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,r){t*=this.stride,r*=e.stride;for(var n=0,s=this.stride;n<s;n++)this.array[t+n]=e.array[r+n];return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var Na=new F;function _c(t,e,r,n){this.data=t,this.itemSize=e,this.offset=r,this.normalized=n===!0}Object.defineProperties(_c.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(_c.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,r=this.data.count;e<r;e++)Na.x=this.getX(e),Na.y=this.getY(e),Na.z=this.getZ(e),Na.applyMatrix4(t),this.setXYZ(e,Na.x,Na.y,Na.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this},setXYZ:function(t,e,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this},setXYZW:function(t,e,r,n,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=n,this.data.array[t+3]=s,this}});function ka(t){Ge.call(this),this.type="SpriteMaterial",this.color=new Se(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}ka.prototype=Object.create(Ge.prototype);ka.prototype.constructor=ka;ka.prototype.isSpriteMaterial=!0;ka.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var bc,Tu=new F,wc=new F,Sc=new F,Ec=new he,Au=new he,uP=new Ue,Fp=new F,Mu=new F,Np=new F,fP=new he,F0=new he,dP=new he;function N0(t){if(ve.call(this),this.type="Sprite",bc===void 0){bc=new Ie;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Yn(e,5);bc.setIndex([0,1,2,0,2,3]),bc.setAttribute("position",new _c(r,3,0,!1)),bc.setAttribute("uv",new _c(r,2,3,!1))}this.geometry=bc,this.material=t!==void 0?t:new ka,this.center=new he(.5,.5)}N0.prototype=Object.assign(Object.create(ve.prototype),{constructor:N0,isSprite:!0,raycast:function(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),wc.setFromMatrixScale(this.matrixWorld),uP.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Sc.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&wc.multiplyScalar(-Sc.z);var r=this.material.rotation,n,s;r!==0&&(s=Math.cos(r),n=Math.sin(r));var o=this.center;kp(Fp.set(-.5,-.5,0),Sc,o,wc,n,s),kp(Mu.set(.5,-.5,0),Sc,o,wc,n,s),kp(Np.set(.5,.5,0),Sc,o,wc,n,s),fP.set(0,0),F0.set(1,0),dP.set(1,1);var a=t.ray.intersectTriangle(Fp,Mu,Np,!1,Tu);if(!(a===null&&(kp(Mu.set(-.5,.5,0),Sc,o,wc,n,s),F0.set(0,1),a=t.ray.intersectTriangle(Fp,Np,Mu,!1,Tu),a===null))){var l=t.ray.origin.distanceTo(Tu);l<t.near||l>t.far||e.push({distance:l,point:Tu.clone(),uv:Ir.getUV(Tu,Fp,Mu,Np,fP,F0,dP,new he),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return ve.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this}});function kp(t,e,r,n,s,o){Ec.subVectors(t,r).addScalar(.5).multiply(n),s!==void 0?(Au.x=o*Ec.x-s*Ec.y,Au.y=s*Ec.x+o*Ec.y):Au.copy(Ec),t.copy(e),t.x+=Au.x,t.y+=Au.y,t.applyMatrix4(uP)}var Vp=new F,pP=new F;function Bp(){ve.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Bp.prototype=Object.assign(Object.create(ve.prototype),{constructor:Bp,isLOD:!0,copy:function(t){ve.prototype.copy.call(this,t,!1);for(var e=t.levels,r=0,n=e.length;r<n;r++){var s=e[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){e===void 0&&(e=0),e=Math.abs(e);for(var r=this.levels,n=0;n<r.length&&!(e<r[n].distance);n++);return r.splice(n,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){for(var r=1,n=e.length;r<n&&!(t<e[r].distance);r++);return e[r-1].object}return null},raycast:function(t,e){var r=this.levels;if(r.length>0){Vp.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Vp);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){Vp.setFromMatrixPosition(t.matrixWorld),pP.setFromMatrixPosition(this.matrixWorld);var r=Vp.distanceTo(pP);e[0].object.visible=!0;for(var n=1,s=e.length;n<s&&r>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(;n<s;n++)e[n].object.visible=!1}},toJSON:function(t){var e=ve.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];for(var r=this.levels,n=0,s=r.length;n<s;n++){var o=r[n];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}});function xc(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Xe.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ue,this.bindMatrixInverse=new Ue}xc.prototype=Object.assign(Object.create(Xe.prototype),{constructor:xc,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Ot,e=this.geometry.attributes.skinWeight,r=0,n=e.count;r<n;r++){t.x=e.getX(r),t.y=e.getY(r),t.z=e.getZ(r),t.w=e.getW(r);var s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(r,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Xe.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var mP=new Ue,D8=new Ue;function Cu(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,e===void 0)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Ue)}}Object.assign(Cu.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var r=new Ue;this.bones[t]&&r.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(r)}},pose:function(){var t,e,r;for(e=0,r=this.bones.length;e<r;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,r=this.bones.length;e<r;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,s=0,o=t.length;s<o;s++){var a=t[s]?t[s].matrixWorld:D8;mP.multiplyMatrices(a,e[s]),mP.toArray(r,s*16)}n!==void 0&&(n.needsUpdate=!0)},clone:function(){return new Cu(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,r=this.bones.length;e<r;e++){var n=this.bones[e];if(n.name===t)return n}}});function Up(){ve.call(this),this.type="Bone"}Up.prototype=Object.assign(Object.create(ve.prototype),{constructor:Up,isBone:!0});var gP=new Ue,vP=new Ue,Tc=[],Pu=new Xe;function k0(t,e,r){Xe.call(this,t,e),this.instanceMatrix=new ze(new Float32Array(r*16),16),this.count=r,this.frustumCulled=!1}k0.prototype=Object.assign(Object.create(Xe.prototype),{constructor:k0,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,t*16)},raycast:function(t,e){var r=this.matrixWorld,n=this.count;if(Pu.geometry=this.geometry,Pu.material=this.material,Pu.material!==void 0)for(var s=0;s<n;s++)this.getMatrixAt(s,gP),vP.multiplyMatrices(r,gP),Pu.matrixWorld=vP,Pu.raycast(t,Tc),Tc.length>0&&(Tc[0].instanceId=s,Tc[0].object=this,e.push(Tc[0]),Tc.length=0)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,t*16)},updateMorphTargets:function(){}});function Qt(t){Ge.call(this),this.type="LineBasicMaterial",this.color=new Se(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}Qt.prototype=Object.create(Ge.prototype);Qt.prototype.constructor=Qt;Qt.prototype.isLineBasicMaterial=!0;Qt.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var yP=new F,_P=new F,bP=new Ue,Hp=new sc,qp=new Wn;function gi(t,e,r){r===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ve.call(this),this.type="Line",this.geometry=t!==void 0?t:new Ie,this.material=e!==void 0?e:new Qt}gi.prototype=Object.assign(Object.create(ve.prototype),{constructor:gi,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var e=t.attributes.position,r=[0],n=1,s=e.count;n<s;n++)yP.fromBufferAttribute(e,n-1),_P.fromBufferAttribute(e,n),r[n]=r[n-1],r[n]+=yP.distanceTo(_P);t.setAttribute("lineDistance",new Pe(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices,r=t.lineDistances;r[0]=0;for(var n=1,s=o.length;n<s;n++)r[n]=r[n-1],r[n]+=o[n-1].distanceTo(o[n])}return this},raycast:function(t,e){var r=t.linePrecision,n=this.geometry,s=this.matrixWorld;if(n.boundingSphere===null&&n.computeBoundingSphere(),qp.copy(n.boundingSphere),qp.applyMatrix4(s),qp.radius+=r,t.ray.intersectsSphere(qp)!==!1){bP.getInverse(s),Hp.copy(t.ray).applyMatrix4(bP);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new F,c=new F,h=new F,f=new F,u=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var m=n.index,d=n.attributes,v=d.position.array;if(m!==null)for(var p=m.array,g=0,y=p.length-1;g<y;g+=u){var _=p[g],b=p[g+1];l.fromArray(v,_*3),c.fromArray(v,b*3);var w=Hp.distanceSqToSegment(l,c,f,h);if(!(w>a)){f.applyMatrix4(this.matrixWorld);var S=t.ray.origin.distanceTo(f);S<t.near||S>t.far||e.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else for(var g=0,y=v.length/3-1;g<y;g+=u){l.fromArray(v,3*g),c.fromArray(v,3*g+3);var w=Hp.distanceSqToSegment(l,c,f,h);if(!(w>a)){f.applyMatrix4(this.matrixWorld);var S=t.ray.origin.distanceTo(f);S<t.near||S>t.far||e.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var E=n.vertices,x=E.length,g=0;g<x-1;g+=u){var w=Hp.distanceSqToSegment(E[g],E[g+1],f,h);if(!(w>a)){f.applyMatrix4(this.matrixWorld);var S=t.ray.origin.distanceTo(f);S<t.near||S>t.far||e.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var zp=new F,Wp=new F;function rr(t,e){gi.call(this,t,e),this.type="LineSegments"}rr.prototype=Object.assign(Object.create(gi.prototype),{constructor:rr,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var e=t.attributes.position,r=[],n=0,s=e.count;n<s;n+=2)zp.fromBufferAttribute(e,n),Wp.fromBufferAttribute(e,n+1),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+zp.distanceTo(Wp);t.setAttribute("lineDistance",new Pe(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(var o=t.vertices,r=t.lineDistances,n=0,s=o.length;n<s;n+=2)zp.copy(o[n]),Wp.copy(o[n+1]),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+zp.distanceTo(Wp);return this}});function Iu(t,e){gi.call(this,t,e),this.type="LineLoop"}Iu.prototype=Object.assign(Object.create(gi.prototype),{constructor:Iu,isLineLoop:!0});function Rs(t){Ge.call(this),this.type="PointsMaterial",this.color=new Se(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Rs.prototype=Object.create(Ge.prototype);Rs.prototype.constructor=Rs;Rs.prototype.isPointsMaterial=!0;Rs.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var wP=new Ue,V0=new sc,Gp=new Wn,$p=new F;function Ru(t,e){ve.call(this),this.type="Points",this.geometry=t!==void 0?t:new Ie,this.material=e!==void 0?e:new Rs,this.updateMorphTargets()}Ru.prototype=Object.assign(Object.create(ve.prototype),{constructor:Ru,isPoints:!0,raycast:function(t,e){var r=this.geometry,n=this.matrixWorld,s=t.params.Points.threshold;if(r.boundingSphere===null&&r.computeBoundingSphere(),Gp.copy(r.boundingSphere),Gp.applyMatrix4(n),Gp.radius+=s,t.ray.intersectsSphere(Gp)!==!1){wP.getInverse(n),V0.copy(t.ray).applyMatrix4(wP);var o=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(r.isBufferGeometry){var l=r.index,c=r.attributes,h=c.position.array;if(l!==null)for(var f=l.array,u=0,m=f.length;u<m;u++){var d=f[u];$p.fromArray(h,d*3),B0($p,d,a,n,t,e,this)}else for(var u=0,v=h.length/3;u<v;u++)$p.fromArray(h,u*3),B0($p,u,a,n,t,e,this)}else for(var p=r.vertices,u=0,v=p.length;u<v;u++)B0(p[u],u,a,n,t,e,this)}},updateMorphTargets:function(){var t=this.geometry,e,r,n;if(t.isBufferGeometry){var s=t.morphAttributes,o=Object.keys(s);if(o.length>0){var a=s[o[0]];if(a!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,r=a.length;e<r;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var l=t.morphTargets;l!==void 0&&l.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function B0(t,e,r,n,s,o,a){var l=V0.distanceSqToPoint(t);if(l<r){var c=new F;V0.closestPointToPoint(t,c),c.applyMatrix4(n);var h=s.ray.origin.distanceTo(c);if(h<s.near||h>s.far)return;o.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:a})}}function SP(t,e,r,n,s,o,a,l,c){Mt.call(this,t,e,r,n,s,o,a,l,c),this.format=a!==void 0?a:Oi,this.minFilter=o!==void 0?o:Vt,this.magFilter=s!==void 0?s:Vt,this.generateMipmaps=!1}SP.prototype=Object.assign(Object.create(Mt.prototype),{constructor:SP,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function Lu(t,e,r,n,s,o,a,l,c,h,f,u){Mt.call(this,null,o,a,l,c,h,n,s,f,u),this.image={width:e,height:r},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}Lu.prototype=Object.create(Mt.prototype);Lu.prototype.constructor=Lu;Lu.prototype.isCompressedTexture=!0;function jp(t,e,r,n,s,o,a,l,c){Mt.call(this,t,e,r,n,s,o,a,l,c),this.needsUpdate=!0}jp.prototype=Object.create(Mt.prototype);jp.prototype.constructor=jp;jp.prototype.isCanvasTexture=!0;function Yp(t,e,r,n,s,o,a,l,c,h){if(h=h!==void 0?h:$l,h!==$l&&h!==hu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===$l&&(r=dp),r===void 0&&h===hu&&(r=pp),Mt.call(this,null,n,s,o,a,l,h,r,c),this.image={width:t,height:e},this.magFilter=a!==void 0?a:It,this.minFilter=l!==void 0?l:It,this.flipY=!1,this.generateMipmaps=!1}Yp.prototype=Object.create(Mt.prototype);Yp.prototype.constructor=Yp;Yp.prototype.isDepthTexture=!0;function Xp(t){Ie.call(this),this.type="WireframeGeometry";var e=[],r,n,s,o,a,l=[0,0],c={},h,f,u,m,d=["a","b","c"],v;if(t&&t.isGeometry){var p=t.faces;for(r=0,s=p.length;r<s;r++){var g=p[r];for(n=0;n<3;n++)f=g[d[n]],u=g[d[(n+1)%3]],l[0]=Math.min(f,u),l[1]=Math.max(f,u),m=l[0]+","+l[1],c[m]===void 0&&(c[m]={index1:l[0],index2:l[1]})}for(m in c)h=c[m],v=t.vertices[h.index1],e.push(v.x,v.y,v.z),v=t.vertices[h.index2],e.push(v.x,v.y,v.z)}else if(t&&t.isBufferGeometry){var y,_,b,w,S,E,x,T;if(v=new F,t.index!==null){for(y=t.attributes.position,_=t.index,b=t.groups,b.length===0&&(b=[{start:0,count:_.count,materialIndex:0}]),o=0,a=b.length;o<a;++o)for(w=b[o],S=w.start,E=w.count,r=S,s=S+E;r<s;r+=3)for(n=0;n<3;n++)f=_.getX(r+n),u=_.getX(r+(n+1)%3),l[0]=Math.min(f,u),l[1]=Math.max(f,u),m=l[0]+","+l[1],c[m]===void 0&&(c[m]={index1:l[0],index2:l[1]});for(m in c)h=c[m],v.fromBufferAttribute(y,h.index1),e.push(v.x,v.y,v.z),v.fromBufferAttribute(y,h.index2),e.push(v.x,v.y,v.z)}else for(y=t.attributes.position,r=0,s=y.count/3;r<s;r++)for(n=0;n<3;n++)x=3*r+n,v.fromBufferAttribute(y,x),e.push(v.x,v.y,v.z),T=3*r+(n+1)%3,v.fromBufferAttribute(y,T),e.push(v.x,v.y,v.z)}this.setAttribute("position",new Pe(e,3))}Xp.prototype=Object.create(Ie.prototype);Xp.prototype.constructor=Xp;function Zp(t,e,r){Ke.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:r},this.fromBufferGeometry(new Ou(t,e,r)),this.mergeVertices()}Zp.prototype=Object.create(Ke.prototype);Zp.prototype.constructor=Zp;function Ou(t,e,r){Ie.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:r};var n=[],s=[],o=[],a=[],l=1e-5,c=new F,h=new F,f=new F,u=new F,m=new F,d,v;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=e+1;for(d=0;d<=r;d++){var g=d/r;for(v=0;v<=e;v++){var y=v/e;t(y,g,h),s.push(h.x,h.y,h.z),y-l>=0?(t(y-l,g,f),u.subVectors(h,f)):(t(y+l,g,f),u.subVectors(f,h)),g-l>=0?(t(y,g-l,f),m.subVectors(h,f)):(t(y,g+l,f),m.subVectors(f,h)),c.crossVectors(u,m).normalize(),o.push(c.x,c.y,c.z),a.push(y,g)}}for(d=0;d<r;d++)for(v=0;v<e;v++){var _=d*p+v,b=d*p+v+1,w=(d+1)*p+v+1,S=(d+1)*p+v;n.push(_,b,S),n.push(b,w,S)}this.setIndex(n),this.setAttribute("position",new Pe(s,3)),this.setAttribute("normal",new Pe(o,3)),this.setAttribute("uv",new Pe(a,2))}Ou.prototype=Object.create(Ie.prototype);Ou.prototype.constructor=Ou;function Qp(t,e,r,n){Ke.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:n},this.fromBufferGeometry(new ki(t,e,r,n)),this.mergeVertices()}Qp.prototype=Object.create(Ke.prototype);Qp.prototype.constructor=Qp;function ki(t,e,r,n){Ie.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:n},r=r||1,n=n||0;var s=[],o=[];a(n),c(r),h(),this.setAttribute("position",new Pe(s,3)),this.setAttribute("normal",new Pe(s.slice(),3)),this.setAttribute("uv",new Pe(o,2)),n===0?this.computeVertexNormals():this.normalizeNormals();function a(y){for(var _=new F,b=new F,w=new F,S=0;S<e.length;S+=3)m(e[S+0],_),m(e[S+1],b),m(e[S+2],w),l(_,b,w,y)}function l(y,_,b,w){var S=Math.pow(2,w),E=[],x,T;for(x=0;x<=S;x++){E[x]=[];var A=y.clone().lerp(b,x/S),P=_.clone().lerp(b,x/S),z=S-x;for(T=0;T<=z;T++)T===0&&x===S?E[x][T]=A:E[x][T]=A.clone().lerp(P,T/z)}for(x=0;x<S;x++)for(T=0;T<2*(S-x)-1;T++){var V=Math.floor(T/2);T%2==0?(u(E[x][V+1]),u(E[x+1][V]),u(E[x][V])):(u(E[x][V+1]),u(E[x+1][V+1]),u(E[x+1][V]))}}function c(y){for(var _=new F,b=0;b<s.length;b+=3)_.x=s[b+0],_.y=s[b+1],_.z=s[b+2],_.normalize().multiplyScalar(y),s[b+0]=_.x,s[b+1]=_.y,s[b+2]=_.z}function h(){for(var y=new F,_=0;_<s.length;_+=3){y.x=s[_+0],y.y=s[_+1],y.z=s[_+2];var b=p(y)/2/Math.PI+.5,w=g(y)/Math.PI+.5;o.push(b,1-w)}d(),f()}function f(){for(var y=0;y<o.length;y+=6){var _=o[y+0],b=o[y+2],w=o[y+4],S=Math.max(_,b,w),E=Math.min(_,b,w);S>.9&&E<.1&&(_<.2&&(o[y+0]+=1),b<.2&&(o[y+2]+=1),w<.2&&(o[y+4]+=1))}}function u(y){s.push(y.x,y.y,y.z)}function m(y,_){var b=y*3;_.x=t[b+0],_.y=t[b+1],_.z=t[b+2]}function d(){for(var y=new F,_=new F,b=new F,w=new F,S=new he,E=new he,x=new he,T=0,A=0;T<s.length;T+=9,A+=6){y.set(s[T+0],s[T+1],s[T+2]),_.set(s[T+3],s[T+4],s[T+5]),b.set(s[T+6],s[T+7],s[T+8]),S.set(o[A+0],o[A+1]),E.set(o[A+2],o[A+3]),x.set(o[A+4],o[A+5]),w.copy(y).add(_).add(b).divideScalar(3);var P=p(w);v(S,A+0,y,P),v(E,A+2,_,P),v(x,A+4,b,P)}}function v(y,_,b,w){w<0&&y.x===1&&(o[_]=y.x-1),b.x===0&&b.z===0&&(o[_]=w/2/Math.PI+.5)}function p(y){return Math.atan2(y.z,-y.x)}function g(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}ki.prototype=Object.create(Ie.prototype);ki.prototype.constructor=ki;function Kp(t,e){Ke.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Du(t,e)),this.mergeVertices()}Kp.prototype=Object.create(Ke.prototype);Kp.prototype.constructor=Kp;function Du(t,e){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];ki.call(this,r,n,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}Du.prototype=Object.create(ki.prototype);Du.prototype.constructor=Du;function Jp(t,e){Ke.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ac(t,e)),this.mergeVertices()}Jp.prototype=Object.create(Ke.prototype);Jp.prototype.constructor=Jp;function Ac(t,e){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];ki.call(this,r,n,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}Ac.prototype=Object.create(ki.prototype);Ac.prototype.constructor=Ac;function em(t,e){Ke.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Fu(t,e)),this.mergeVertices()}em.prototype=Object.create(Ke.prototype);em.prototype.constructor=em;function Fu(t,e){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];ki.call(this,n,s,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}Fu.prototype=Object.create(ki.prototype);Fu.prototype.constructor=Fu;function tm(t,e){Ke.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Nu(t,e)),this.mergeVertices()}tm.prototype=Object.create(Ke.prototype);tm.prototype.constructor=tm;function Nu(t,e){var r=(1+Math.sqrt(5))/2,n=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];ki.call(this,s,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}Nu.prototype=Object.create(ki.prototype);Nu.prototype.constructor=Nu;function rm(t,e,r,n,s,o){Ke.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:s},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Mc(t,e,r,n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}rm.prototype=Object.create(Ke.prototype);rm.prototype.constructor=rm;function Mc(t,e,r,n,s){Ie.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:s},e=e||64,r=r||1,n=n||8,s=s||!1;var o=t.computeFrenetFrames(e,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a=new F,l=new F,c=new he,h=new F,f,u,m=[],d=[],v=[],p=[];g(),this.setIndex(p),this.setAttribute("position",new Pe(m,3)),this.setAttribute("normal",new Pe(d,3)),this.setAttribute("uv",new Pe(v,2));function g(){for(f=0;f<e;f++)y(f);y(s===!1?e:0),b(),_()}function y(w){h=t.getPointAt(w/e,h);var S=o.normals[w],E=o.binormals[w];for(u=0;u<=n;u++){var x=u/n*Math.PI*2,T=Math.sin(x),A=-Math.cos(x);l.x=A*S.x+T*E.x,l.y=A*S.y+T*E.y,l.z=A*S.z+T*E.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,m.push(a.x,a.y,a.z)}}function _(){for(u=1;u<=e;u++)for(f=1;f<=n;f++){var w=(n+1)*(u-1)+(f-1),S=(n+1)*u+(f-1),E=(n+1)*u+f,x=(n+1)*(u-1)+f;p.push(w,S,x),p.push(S,E,x)}}function b(){for(f=0;f<=e;f++)for(u=0;u<=n;u++)c.x=f/e,c.y=u/n,v.push(c.x,c.y)}}Mc.prototype=Object.create(Ie.prototype);Mc.prototype.constructor=Mc;Mc.prototype.toJSON=function(){var t=Ie.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t};function im(t,e,r,n,s,o,a){Ke.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:s,q:o},a!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ku(t,e,r,n,s,o)),this.mergeVertices()}im.prototype=Object.create(Ke.prototype);im.prototype.constructor=im;function ku(t,e,r,n,s,o){Ie.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:s,q:o},t=t||1,e=e||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,s=s||2,o=o||3;var a=[],l=[],c=[],h=[],f,u,m=new F,d=new F,v=new F,p=new F,g=new F,y=new F,_=new F;for(f=0;f<=r;++f){var b=f/r*s*Math.PI*2;for(z(b,s,o,t,v),z(b+.01,s,o,t,p),y.subVectors(p,v),_.addVectors(p,v),g.crossVectors(y,_),_.crossVectors(g,y),g.normalize(),_.normalize(),u=0;u<=n;++u){var w=u/n*Math.PI*2,S=-e*Math.cos(w),E=e*Math.sin(w);m.x=v.x+(S*_.x+E*g.x),m.y=v.y+(S*_.y+E*g.y),m.z=v.z+(S*_.z+E*g.z),l.push(m.x,m.y,m.z),d.subVectors(m,v).normalize(),c.push(d.x,d.y,d.z),h.push(f/r),h.push(u/n)}}for(u=1;u<=r;u++)for(f=1;f<=n;f++){var x=(n+1)*(u-1)+(f-1),T=(n+1)*u+(f-1),A=(n+1)*u+f,P=(n+1)*(u-1)+f;a.push(x,T,P),a.push(T,A,P)}this.setIndex(a),this.setAttribute("position",new Pe(l,3)),this.setAttribute("normal",new Pe(c,3)),this.setAttribute("uv",new Pe(h,2));function z(V,L,O,k,X){var R=Math.cos(V),U=Math.sin(V),q=O/L*V,Z=Math.cos(q);X.x=k*(2+Z)*.5*R,X.y=k*(2+Z)*U*.5,X.z=k*Math.sin(q)*.5}}ku.prototype=Object.create(Ie.prototype);ku.prototype.constructor=ku;function nm(t,e,r,n,s){Ke.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:s},this.fromBufferGeometry(new Vu(t,e,r,n,s)),this.mergeVertices()}nm.prototype=Object.create(Ke.prototype);nm.prototype.constructor=nm;function Vu(t,e,r,n,s){Ie.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:s},t=t||1,e=e||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,s=s||Math.PI*2;var o=[],a=[],l=[],c=[],h=new F,f=new F,u=new F,m,d;for(m=0;m<=r;m++)for(d=0;d<=n;d++){var v=d/n*s,p=m/r*Math.PI*2;f.x=(t+e*Math.cos(p))*Math.cos(v),f.y=(t+e*Math.cos(p))*Math.sin(v),f.z=e*Math.sin(p),a.push(f.x,f.y,f.z),h.x=t*Math.cos(v),h.y=t*Math.sin(v),u.subVectors(f,h).normalize(),l.push(u.x,u.y,u.z),c.push(d/n),c.push(m/r)}for(m=1;m<=r;m++)for(d=1;d<=n;d++){var g=(n+1)*m+d-1,y=(n+1)*(m-1)+d-1,_=(n+1)*(m-1)+d,b=(n+1)*m+d;o.push(g,y,b),o.push(y,_,b)}this.setIndex(o),this.setAttribute("position",new Pe(a,3)),this.setAttribute("normal",new Pe(l,3)),this.setAttribute("uv",new Pe(c,2))}Vu.prototype=Object.create(Ie.prototype);Vu.prototype.constructor=Vu;var F8={triangulate:function(t,e,r){r=r||2;var n=e&&e.length,s=n?e[0]*r:t.length,o=EP(t,0,s,r,!0),a=[];if(!o||o.next===o.prev)return a;var l,c,h,f,u,m,d;if(n&&(o=U8(t,e,o,r)),t.length>80*r){l=h=t[0],c=f=t[1];for(var v=r;v<s;v+=r)u=t[v],m=t[v+1],u<l&&(l=u),m<c&&(c=m),u>h&&(h=u),m>f&&(f=m);d=Math.max(h-l,f-c),d=d!==0?1/d:0}return Uu(o,a,r,l,c,d),a}};function EP(t,e,r,n,s){var o,a;if(s===Z8(t,e,r,n)>0)for(o=e;o<r;o+=n)a=AP(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=AP(o,t[o],t[o+1],a);return a&&Va(a,a.next)&&(qu(a),a=a.next),a}function Bu(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(Va(r,r.next)||Rr(r.prev,r,r.next)===0)){if(qu(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function Uu(t,e,r,n,s,o,a){if(!!t){!a&&o&&W8(t,n,s,o);for(var l=t,c,h;t.prev!==t.next;){if(c=t.prev,h=t.next,o?k8(t,n,s,o):N8(t)){e.push(c.i/r),e.push(t.i/r),e.push(h.i/r),qu(t),t=h.next,l=h.next;continue}if(t=h,t===l){a?a===1?(t=V8(t,e,r),Uu(t,e,r,n,s,o,2)):a===2&&B8(t,e,r,n,s,o):Uu(Bu(t),e,r,n,s,o,1);break}}}}function N8(t){var e=t.prev,r=t,n=t.next;if(Rr(e,r,n)>=0)return!1;for(var s=t.next.next;s!==t.prev;){if(Cc(e.x,e.y,r.x,r.y,n.x,n.y,s.x,s.y)&&Rr(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function k8(t,e,r,n){var s=t.prev,o=t,a=t.next;if(Rr(s,o,a)>=0)return!1;for(var l=s.x<o.x?s.x<a.x?s.x:a.x:o.x<a.x?o.x:a.x,c=s.y<o.y?s.y<a.y?s.y:a.y:o.y<a.y?o.y:a.y,h=s.x>o.x?s.x>a.x?s.x:a.x:o.x>a.x?o.x:a.x,f=s.y>o.y?s.y>a.y?s.y:a.y:o.y>a.y?o.y:a.y,u=U0(l,c,e,r,n),m=U0(h,f,e,r,n),d=t.prevZ,v=t.nextZ;d&&d.z>=u&&v&&v.z<=m;){if(d!==t.prev&&d!==t.next&&Cc(s.x,s.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Rr(d.prev,d,d.next)>=0||(d=d.prevZ,v!==t.prev&&v!==t.next&&Cc(s.x,s.y,o.x,o.y,a.x,a.y,v.x,v.y)&&Rr(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&Cc(s.x,s.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Rr(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=m;){if(v!==t.prev&&v!==t.next&&Cc(s.x,s.y,o.x,o.y,a.x,a.y,v.x,v.y)&&Rr(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function V8(t,e,r){var n=t;do{var s=n.prev,o=n.next.next;!Va(s,o)&&xP(s,n,n.next,o)&&Hu(s,o)&&Hu(o,s)&&(e.push(s.i/r),e.push(n.i/r),e.push(o.i/r),qu(n),qu(n.next),n=t=o),n=n.next}while(n!==t);return n}function B8(t,e,r,n,s,o){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&j8(a,l)){var c=TP(a,l);a=Bu(a,a.next),c=Bu(c,c.next),Uu(a,e,r,n,s,o),Uu(c,e,r,n,s,o);return}l=l.next}a=a.next}while(a!==t)}function U8(t,e,r,n){var s=[],o,a,l,c,h;for(o=0,a=e.length;o<a;o++)l=e[o]*n,c=o<a-1?e[o+1]*n:t.length,h=EP(t,l,c,n,!1),h===h.next&&(h.steiner=!0),s.push($8(h));for(s.sort(H8),o=0;o<s.length;o++)q8(s[o],r),r=Bu(r,r.next);return r}function H8(t,e){return t.x-e.x}function q8(t,e){if(e=z8(t,e),e){var r=TP(e,t);Bu(r,r.next)}}function z8(t,e){var r=e,n=t.x,s=t.y,o=-1/0,a;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var l=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(l<=n&&l>o){if(o=l,l===n){if(s===r.y)return r;if(s===r.next.y)return r.next}a=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!a)return null;if(n===o)return a.prev;var c=a,h=a.x,f=a.y,u=1/0,m;for(r=a.next;r!==c;)n>=r.x&&r.x>=h&&n!==r.x&&Cc(s<f?n:o,s,h,f,s<f?o:n,s,r.x,r.y)&&(m=Math.abs(s-r.y)/(n-r.x),(m<u||m===u&&r.x>a.x)&&Hu(r,t)&&(a=r,u=m)),r=r.next;return a}function W8(t,e,r,n){var s=t;do s.z===null&&(s.z=U0(s.x,s.y,e,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,G8(s)}function G8(t){var e,r,n,s,o,a,l,c,h=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,n=r,l=0,e=0;e<h&&(l++,n=n.nextZ,!!n);e++);for(c=h;l>0||c>0&&n;)l!==0&&(c===0||!n||r.z<=n.z)?(s=r,r=r.nextZ,l--):(s=n,n=n.nextZ,c--),o?o.nextZ=s:t=s,s.prevZ=o,o=s;r=n}o.nextZ=null,h*=2}while(a>1);return t}function U0(t,e,r,n,s){return t=32767*(t-r)*s,e=32767*(e-n)*s,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function $8(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Cc(t,e,r,n,s,o,a,l){return(s-a)*(e-l)-(t-a)*(o-l)>=0&&(t-a)*(n-l)-(r-a)*(e-l)>=0&&(r-a)*(o-l)-(s-a)*(n-l)>=0}function j8(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Y8(t,e)&&Hu(t,e)&&Hu(e,t)&&X8(t,e)}function Rr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Va(t,e){return t.x===e.x&&t.y===e.y}function xP(t,e,r,n){return Va(t,r)&&Va(e,n)||Va(t,n)&&Va(r,e)?!0:Rr(t,e,r)>0!=Rr(t,e,n)>0&&Rr(r,n,t)>0!=Rr(r,n,e)>0}function Y8(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&xP(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Hu(t,e){return Rr(t.prev,t,t.next)<0?Rr(t,e,t.next)>=0&&Rr(t,t.prev,e)>=0:Rr(t,e,t.prev)<0||Rr(t,t.next,e)<0}function X8(t,e){var r=t,n=!1,s=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&s<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function TP(t,e){var r=new H0(t.i,t.x,t.y),n=new H0(e.i,e.x,e.y),s=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function AP(t,e,r,n){var s=new H0(t,e,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function qu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function H0(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Z8(t,e,r,n){for(var s=0,o=e,a=r-n;o<r;o+=n)s+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return s}var Co={area:function(t){for(var e=t.length,r=0,n=e-1,s=0;s<e;n=s++)r+=t[n].x*t[s].y-t[s].x*t[n].y;return r*.5},isClockWise:function(t){return Co.area(t)<0},triangulateShape:function(t,e){var r=[],n=[],s=[];MP(t),CP(r,t);var o=t.length;e.forEach(MP);for(var a=0;a<e.length;a++)n.push(o),o+=e[a].length,CP(r,e[a]);for(var l=F8.triangulate(r,n),a=0;a<l.length;a+=3)s.push(l.slice(a,a+3));return s}};function MP(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function CP(t,e){for(var r=0;r<e.length;r++)t.push(e[r].x),t.push(e[r].y)}function Pc(t,e){Ke.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Ls(t,e)),this.mergeVertices()}Pc.prototype=Object.create(Ke.prototype);Pc.prototype.constructor=Pc;Pc.prototype.toJSON=function(){var t=Ke.prototype.toJSON.call(this),e=this.parameters.shapes,r=this.parameters.options;return PP(e,r,t)};function Ls(t,e){Ie.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var r=this,n=[],s=[],o=0,a=t.length;o<a;o++){var l=t[o];c(l)}this.setAttribute("position",new Pe(n,3)),this.setAttribute("uv",new Pe(s,2)),this.computeVertexNormals();function c(h){var f=[],u=e.curveSegments!==void 0?e.curveSegments:12,m=e.steps!==void 0?e.steps:1,d=e.depth!==void 0?e.depth:100,v=e.bevelEnabled!==void 0?e.bevelEnabled:!0,p=e.bevelThickness!==void 0?e.bevelThickness:6,g=e.bevelSize!==void 0?e.bevelSize:p-2,y=e.bevelOffset!==void 0?e.bevelOffset:0,_=e.bevelSegments!==void 0?e.bevelSegments:3,b=e.extrudePath,w=e.UVGenerator!==void 0?e.UVGenerator:Q8;e.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=e.amount);var S,E=!1,x,T,A,P;b&&(S=b.getSpacedPoints(m),E=!0,v=!1,x=b.computeFrenetFrames(m,!1),T=new F,A=new F,P=new F),v||(_=0,p=0,g=0,y=0);var z,V,L,O=h.extractPoints(u),k=O.shape,X=O.holes,R=!Co.isClockWise(k);if(R)for(k=k.reverse(),V=0,L=X.length;V<L;V++)z=X[V],Co.isClockWise(z)&&(X[V]=z.reverse());var U=Co.triangulateShape(k,X),q=k;for(V=0,L=X.length;V<L;V++)z=X[V],k=k.concat(z);function Z(ge,Le,we){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Le.clone().multiplyScalar(we).add(ge)}var oe,N,M,$,W,H=k.length,ee,Y=U.length;function K(ge,Le,we){var Q,ye,De,tt=ge.x-Le.x,Fe=ge.y-Le.y,ct=we.x-ge.x,gt=we.y-ge.y,At=tt*tt+Fe*Fe,hi=tt*gt-Fe*ct;if(Math.abs(hi)>Number.EPSILON){var dt=Math.sqrt(At),Ar=Math.sqrt(ct*ct+gt*gt),gr=Le.x-Fe/dt,oo=Le.y+tt/dt,Mr=we.x-gt/Ar,_d=we.y+ct/Ar,Ti=((Mr-gr)*gt-(_d-oo)*ct)/(tt*gt-Fe*ct);Q=gr+tt*Ti-ge.x,ye=oo+Fe*Ti-ge.y;var bl=Q*Q+ye*ye;if(bl<=2)return new he(Q,ye);De=Math.sqrt(bl/2)}else{var wl=!1;tt>Number.EPSILON?ct>Number.EPSILON&&(wl=!0):tt<-Number.EPSILON?ct<-Number.EPSILON&&(wl=!0):Math.sign(Fe)===Math.sign(gt)&&(wl=!0),wl?(Q=-Fe,ye=tt,De=Math.sqrt(At)):(Q=tt,ye=Fe,De=Math.sqrt(At/2))}return new he(Q/De,ye/De)}for(var ne=[],te=0,ae=q.length,ie=ae-1,pe=te+1;te<ae;te++,ie++,pe++)ie===ae&&(ie=0),pe===ae&&(pe=0),ne[te]=K(q[te],q[ie],q[pe]);var me=[],_e,B=ne.concat();for(V=0,L=X.length;V<L;V++){for(z=X[V],_e=[],te=0,ae=z.length,ie=ae-1,pe=te+1;te<ae;te++,ie++,pe++)ie===ae&&(ie=0),pe===ae&&(pe=0),_e[te]=K(z[te],z[ie],z[pe]);me.push(_e),B=B.concat(_e)}for(oe=0;oe<_;oe++){for(M=oe/_,$=p*Math.cos(M*Math.PI/2),N=g*Math.sin(M*Math.PI/2)+y,te=0,ae=q.length;te<ae;te++)W=Z(q[te],ne[te],N),Re(W.x,W.y,-$);for(V=0,L=X.length;V<L;V++)for(z=X[V],_e=me[V],te=0,ae=z.length;te<ae;te++)W=Z(z[te],_e[te],N),Re(W.x,W.y,-$)}for(N=g+y,te=0;te<H;te++)W=v?Z(k[te],B[te],N):k[te],E?(A.copy(x.normals[0]).multiplyScalar(W.x),T.copy(x.binormals[0]).multiplyScalar(W.y),P.copy(S[0]).add(A).add(T),Re(P.x,P.y,P.z)):Re(W.x,W.y,0);var G;for(G=1;G<=m;G++)for(te=0;te<H;te++)W=v?Z(k[te],B[te],N):k[te],E?(A.copy(x.normals[G]).multiplyScalar(W.x),T.copy(x.binormals[G]).multiplyScalar(W.y),P.copy(S[G]).add(A).add(T),Re(P.x,P.y,P.z)):Re(W.x,W.y,d/m*G);for(oe=_-1;oe>=0;oe--){for(M=oe/_,$=p*Math.cos(M*Math.PI/2),N=g*Math.sin(M*Math.PI/2)+y,te=0,ae=q.length;te<ae;te++)W=Z(q[te],ne[te],N),Re(W.x,W.y,d+$);for(V=0,L=X.length;V<L;V++)for(z=X[V],_e=me[V],te=0,ae=z.length;te<ae;te++)W=Z(z[te],_e[te],N),E?Re(W.x,W.y+S[m-1].y,S[m-1].x+$):Re(W.x,W.y,d+$)}fe(),ue();function fe(){var ge=n.length/3;if(v){var Le=0,we=H*Le;for(te=0;te<Y;te++)ee=U[te],xe(ee[2]+we,ee[1]+we,ee[0]+we);for(Le=m+_*2,we=H*Le,te=0;te<Y;te++)ee=U[te],xe(ee[0]+we,ee[1]+we,ee[2]+we)}else{for(te=0;te<Y;te++)ee=U[te],xe(ee[2],ee[1],ee[0]);for(te=0;te<Y;te++)ee=U[te],xe(ee[0]+H*m,ee[1]+H*m,ee[2]+H*m)}r.addGroup(ge,n.length/3-ge,0)}function ue(){var ge=n.length/3,Le=0;for(Ne(q,Le),Le+=q.length,V=0,L=X.length;V<L;V++)z=X[V],Ne(z,Le),Le+=z.length;r.addGroup(ge,n.length/3-ge,1)}function Ne(ge,Le){var we,Q;for(te=ge.length;--te>=0;){we=te,Q=te-1,Q<0&&(Q=ge.length-1);var ye=0,De=m+_*2;for(ye=0;ye<De;ye++){var tt=H*ye,Fe=H*(ye+1),ct=Le+we+tt,gt=Le+Q+tt,At=Le+Q+Fe,hi=Le+we+Fe;Ce(ct,gt,At,hi)}}}function Re(ge,Le,we){f.push(ge),f.push(Le),f.push(we)}function xe(ge,Le,we){Ve(ge),Ve(Le),Ve(we);var Q=n.length/3,ye=w.generateTopUV(r,n,Q-3,Q-2,Q-1);Oe(ye[0]),Oe(ye[1]),Oe(ye[2])}function Ce(ge,Le,we,Q){Ve(ge),Ve(Le),Ve(Q),Ve(Le),Ve(we),Ve(Q);var ye=n.length/3,De=w.generateSideWallUV(r,n,ye-6,ye-3,ye-2,ye-1);Oe(De[0]),Oe(De[1]),Oe(De[3]),Oe(De[1]),Oe(De[2]),Oe(De[3])}function Ve(ge){n.push(f[ge*3+0]),n.push(f[ge*3+1]),n.push(f[ge*3+2])}function Oe(ge){s.push(ge.x),s.push(ge.y)}}}Ls.prototype=Object.create(Ie.prototype);Ls.prototype.constructor=Ls;Ls.prototype.toJSON=function(){var t=Ie.prototype.toJSON.call(this),e=this.parameters.shapes,r=this.parameters.options;return PP(e,r,t)};var Q8={generateTopUV:function(t,e,r,n,s){var o=e[r*3],a=e[r*3+1],l=e[n*3],c=e[n*3+1],h=e[s*3],f=e[s*3+1];return[new he(o,a),new he(l,c),new he(h,f)]},generateSideWallUV:function(t,e,r,n,s,o){var a=e[r*3],l=e[r*3+1],c=e[r*3+2],h=e[n*3],f=e[n*3+1],u=e[n*3+2],m=e[s*3],d=e[s*3+1],v=e[s*3+2],p=e[o*3],g=e[o*3+1],y=e[o*3+2];return Math.abs(l-f)<.01?[new he(a,1-c),new he(h,1-u),new he(m,1-v),new he(p,1-y)]:[new he(l,1-c),new he(f,1-u),new he(d,1-v),new he(g,1-y)]}};function PP(t,e,r){if(r.shapes=[],Array.isArray(t))for(var n=0,s=t.length;n<s;n++){var o=t[n];r.shapes.push(o.uuid)}else r.shapes.push(t.uuid);return e.extrudePath!==void 0&&(r.options.extrudePath=e.extrudePath.toJSON()),r}function sm(t,e){Ke.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new zu(t,e)),this.mergeVertices()}sm.prototype=Object.create(Ke.prototype);sm.prototype.constructor=sm;function zu(t,e){e=e||{};var r=e.font;if(!(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ke;var n=r.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),Ls.call(this,n,e),this.type="TextBufferGeometry"}zu.prototype=Object.create(Ls.prototype);zu.prototype.constructor=zu;function om(t,e,r,n,s,o,a){Ke.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Ic(t,e,r,n,s,o,a)),this.mergeVertices()}om.prototype=Object.create(Ke.prototype);om.prototype.constructor=om;function Ic(t,e,r,n,s,o,a){Ie.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:s,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),r=Math.max(2,Math.floor(r)||6),n=n!==void 0?n:0,s=s!==void 0?s:Math.PI*2,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI;var l=Math.min(o+a,Math.PI),c,h,f=0,u=[],m=new F,d=new F,v=[],p=[],g=[],y=[];for(h=0;h<=r;h++){var _=[],b=h/r,w=0;for(h==0&&o==0?w=.5/e:h==r&&l==Math.PI&&(w=-.5/e),c=0;c<=e;c++){var S=c/e;m.x=-t*Math.cos(n+S*s)*Math.sin(o+b*a),m.y=t*Math.cos(o+b*a),m.z=t*Math.sin(n+S*s)*Math.sin(o+b*a),p.push(m.x,m.y,m.z),d.copy(m).normalize(),g.push(d.x,d.y,d.z),y.push(S+w,1-b),_.push(f++)}u.push(_)}for(h=0;h<r;h++)for(c=0;c<e;c++){var E=u[h][c+1],x=u[h][c],T=u[h+1][c],A=u[h+1][c+1];(h!==0||o>0)&&v.push(E,x,A),(h!==r-1||l<Math.PI)&&v.push(x,T,A)}this.setIndex(v),this.setAttribute("position",new Pe(p,3)),this.setAttribute("normal",new Pe(g,3)),this.setAttribute("uv",new Pe(y,2))}Ic.prototype=Object.create(Ie.prototype);Ic.prototype.constructor=Ic;function Rc(t,e,r,n,s,o){Ke.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Wu(t,e,r,n,s,o)),this.mergeVertices()}Rc.prototype=Object.create(Ke.prototype);Rc.prototype.constructor=Rc;function Wu(t,e,r,n,s,o){Ie.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:s,thetaLength:o},t=t||.5,e=e||1,s=s!==void 0?s:0,o=o!==void 0?o:Math.PI*2,r=r!==void 0?Math.max(3,r):8,n=n!==void 0?Math.max(1,n):1;var a=[],l=[],c=[],h=[],f,u=t,m=(e-t)/n,d=new F,v=new he,p,g;for(p=0;p<=n;p++){for(g=0;g<=r;g++)f=s+g/r*o,d.x=u*Math.cos(f),d.y=u*Math.sin(f),l.push(d.x,d.y,d.z),c.push(0,0,1),v.x=(d.x/e+1)/2,v.y=(d.y/e+1)/2,h.push(v.x,v.y);u+=m}for(p=0;p<n;p++){var y=p*(r+1);for(g=0;g<r;g++){f=g+y;var _=f,b=f+r+1,w=f+r+2,S=f+1;a.push(_,b,S),a.push(b,w,S)}}this.setIndex(a),this.setAttribute("position",new Pe(l,3)),this.setAttribute("normal",new Pe(c,3)),this.setAttribute("uv",new Pe(h,2))}Wu.prototype=Object.create(Ie.prototype);Wu.prototype.constructor=Wu;function am(t,e,r,n){Ke.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:n},this.fromBufferGeometry(new Gu(t,e,r,n)),this.mergeVertices()}am.prototype=Object.create(Ke.prototype);am.prototype.constructor=am;function Gu(t,e,r,n){Ie.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:r,phiLength:n},e=Math.floor(e)||12,r=r||0,n=n||Math.PI*2,n=Qe.clamp(n,0,Math.PI*2);var s=[],o=[],a=[],l,c=1/e,h=new F,f=new he,u,m;for(u=0;u<=e;u++){var d=r+u*c*n,v=Math.sin(d),p=Math.cos(d);for(m=0;m<=t.length-1;m++)h.x=t[m].x*v,h.y=t[m].y,h.z=t[m].x*p,o.push(h.x,h.y,h.z),f.x=u/e,f.y=m/(t.length-1),a.push(f.x,f.y)}for(u=0;u<e;u++)for(m=0;m<t.length-1;m++){l=m+u*t.length;var g=l,y=l+t.length,_=l+t.length+1,b=l+1;s.push(g,y,b),s.push(y,_,b)}if(this.setIndex(s),this.setAttribute("position",new Pe(o,3)),this.setAttribute("uv",new Pe(a,2)),this.computeVertexNormals(),n===Math.PI*2){var w=this.attributes.normal.array,S=new F,E=new F,x=new F;for(l=e*t.length*3,u=0,m=0;u<t.length;u++,m+=3)S.x=w[m+0],S.y=w[m+1],S.z=w[m+2],E.x=w[l+m+0],E.y=w[l+m+1],E.z=w[l+m+2],x.addVectors(S,E).normalize(),w[m+0]=w[l+m+0]=x.x,w[m+1]=w[l+m+1]=x.y,w[m+2]=w[l+m+2]=x.z}}Gu.prototype=Object.create(Ie.prototype);Gu.prototype.constructor=Gu;function Lc(t,e){Ke.call(this),this.type="ShapeGeometry",typeof e=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Oc(t,e)),this.mergeVertices()}Lc.prototype=Object.create(Ke.prototype);Lc.prototype.constructor=Lc;Lc.prototype.toJSON=function(){var t=Ke.prototype.toJSON.call(this),e=this.parameters.shapes;return IP(e,t)};function Oc(t,e){Ie.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var r=[],n=[],s=[],o=[],a=0,l=0;if(Array.isArray(t)===!1)h(t);else for(var c=0;c<t.length;c++)h(t[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Pe(n,3)),this.setAttribute("normal",new Pe(s,3)),this.setAttribute("uv",new Pe(o,2));function h(f){var u,m,d,v=n.length/3,p=f.extractPoints(e),g=p.shape,y=p.holes;for(Co.isClockWise(g)===!1&&(g=g.reverse()),u=0,m=y.length;u<m;u++)d=y[u],Co.isClockWise(d)===!0&&(y[u]=d.reverse());var _=Co.triangulateShape(g,y);for(u=0,m=y.length;u<m;u++)d=y[u],g=g.concat(d);for(u=0,m=g.length;u<m;u++){var b=g[u];n.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(u=0,m=_.length;u<m;u++){var w=_[u],S=w[0]+v,E=w[1]+v,x=w[2]+v;r.push(S,E,x),l+=3}}}Oc.prototype=Object.create(Ie.prototype);Oc.prototype.constructor=Oc;Oc.prototype.toJSON=function(){var t=Ie.prototype.toJSON.call(this),e=this.parameters.shapes;return IP(e,t)};function IP(t,e){if(e.shapes=[],Array.isArray(t))for(var r=0,n=t.length;r<n;r++){var s=t[r];e.shapes.push(s.uuid)}else e.shapes.push(t.uuid);return e}function lm(t,e){Ie.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=e!==void 0?e:1;var r=[],n=Math.cos(Qe.DEG2RAD*e),s=[0,0],o={},a,l,c,h=["a","b","c"],f;t.isBufferGeometry?(f=new Ke,f.fromBufferGeometry(t)):f=t.clone(),f.mergeVertices(),f.computeFaceNormals();for(var u=f.vertices,m=f.faces,d=0,v=m.length;d<v;d++)for(var p=m[d],g=0;g<3;g++)a=p[h[g]],l=p[h[(g+1)%3]],s[0]=Math.min(a,l),s[1]=Math.max(a,l),c=s[0]+","+s[1],o[c]===void 0?o[c]={index1:s[0],index2:s[1],face1:d,face2:void 0}:o[c].face2=d;for(c in o){var y=o[c];if(y.face2===void 0||m[y.face1].normal.dot(m[y.face2].normal)<=n){var _=u[y.index1];r.push(_.x,_.y,_.z),_=u[y.index2],r.push(_.x,_.y,_.z)}}this.setAttribute("position",new Pe(r,3))}lm.prototype=Object.create(Ie.prototype);lm.prototype.constructor=lm;function Dc(t,e,r,n,s,o,a,l){Ke.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l},this.fromBufferGeometry(new Po(t,e,r,n,s,o,a,l)),this.mergeVertices()}Dc.prototype=Object.create(Ke.prototype);Dc.prototype.constructor=Dc;function Po(t,e,r,n,s,o,a,l){Ie.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};var c=this;t=t!==void 0?t:1,e=e!==void 0?e:1,r=r||1,n=Math.floor(n)||8,s=Math.floor(s)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,l=l!==void 0?l:Math.PI*2;var h=[],f=[],u=[],m=[],d=0,v=[],p=r/2,g=0;y(),o===!1&&(t>0&&_(!0),e>0&&_(!1)),this.setIndex(h),this.setAttribute("position",new Pe(f,3)),this.setAttribute("normal",new Pe(u,3)),this.setAttribute("uv",new Pe(m,2));function y(){var b,w,S=new F,E=new F,x=0,T=(e-t)/r;for(w=0;w<=s;w++){var A=[],P=w/s,z=P*(e-t)+t;for(b=0;b<=n;b++){var V=b/n,L=V*l+a,O=Math.sin(L),k=Math.cos(L);E.x=z*O,E.y=-P*r+p,E.z=z*k,f.push(E.x,E.y,E.z),S.set(O,T,k).normalize(),u.push(S.x,S.y,S.z),m.push(V,1-P),A.push(d++)}v.push(A)}for(b=0;b<n;b++)for(w=0;w<s;w++){var X=v[w][b],R=v[w+1][b],U=v[w+1][b+1],q=v[w][b+1];h.push(X,R,q),h.push(R,U,q),x+=6}c.addGroup(g,x,0),g+=x}function _(b){var w,S,E,x=new he,T=new F,A=0,P=b===!0?t:e,z=b===!0?1:-1;for(S=d,w=1;w<=n;w++)f.push(0,p*z,0),u.push(0,z,0),m.push(.5,.5),d++;for(E=d,w=0;w<=n;w++){var V=w/n,L=V*l+a,O=Math.cos(L),k=Math.sin(L);T.x=P*k,T.y=p*z,T.z=P*O,f.push(T.x,T.y,T.z),u.push(0,z,0),x.x=O*.5+.5,x.y=k*.5*z+.5,m.push(x.x,x.y),d++}for(w=0;w<n;w++){var X=S+w,R=E+w;b===!0?h.push(R,R+1,X):h.push(R+1,R,X),A+=3}c.addGroup(g,A,b===!0?1:2),g+=A}}Po.prototype=Object.create(Ie.prototype);Po.prototype.constructor=Po;function cm(t,e,r,n,s,o,a){Dc.call(this,0,t,e,r,n,s,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:a}}cm.prototype=Object.create(Dc.prototype);cm.prototype.constructor=cm;function hm(t,e,r,n,s,o,a){Po.call(this,0,t,e,r,n,s,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:a}}hm.prototype=Object.create(Po.prototype);hm.prototype.constructor=hm;function um(t,e,r,n){Ke.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new $u(t,e,r,n)),this.mergeVertices()}um.prototype=Object.create(Ke.prototype);um.prototype.constructor=um;function $u(t,e,r,n){Ie.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n},t=t||1,e=e!==void 0?Math.max(3,e):8,r=r!==void 0?r:0,n=n!==void 0?n:Math.PI*2;var s=[],o=[],a=[],l=[],c,h,f=new F,u=new he;for(o.push(0,0,0),a.push(0,0,1),l.push(.5,.5),h=0,c=3;h<=e;h++,c+=3){var m=r+h/e*n;f.x=t*Math.cos(m),f.y=t*Math.sin(m),o.push(f.x,f.y,f.z),a.push(0,0,1),u.x=(o[c]/t+1)/2,u.y=(o[c+1]/t+1)/2,l.push(u.x,u.y)}for(c=1;c<=e;c++)s.push(c,c+1,0);this.setIndex(s),this.setAttribute("position",new Pe(o,3)),this.setAttribute("normal",new Pe(a,3)),this.setAttribute("uv",new Pe(l,2))}$u.prototype=Object.create(Ie.prototype);$u.prototype.constructor=$u;var ei=Object.freeze({__proto__:null,WireframeGeometry:Xp,ParametricGeometry:Zp,ParametricBufferGeometry:Ou,TetrahedronGeometry:Kp,TetrahedronBufferGeometry:Du,OctahedronGeometry:Jp,OctahedronBufferGeometry:Ac,IcosahedronGeometry:em,IcosahedronBufferGeometry:Fu,DodecahedronGeometry:tm,DodecahedronBufferGeometry:Nu,PolyhedronGeometry:Qp,PolyhedronBufferGeometry:ki,TubeGeometry:rm,TubeBufferGeometry:Mc,TorusKnotGeometry:im,TorusKnotBufferGeometry:ku,TorusGeometry:nm,TorusBufferGeometry:Vu,TextGeometry:sm,TextBufferGeometry:zu,SphereGeometry:om,SphereBufferGeometry:Ic,RingGeometry:Rc,RingBufferGeometry:Wu,PlaneGeometry:Op,PlaneBufferGeometry:Ji,LatheGeometry:am,LatheBufferGeometry:Gu,ShapeGeometry:Lc,ShapeBufferGeometry:Oc,ExtrudeGeometry:Pc,ExtrudeBufferGeometry:Ls,EdgesGeometry:lm,ConeGeometry:cm,ConeBufferGeometry:hm,CylinderGeometry:Dc,CylinderBufferGeometry:Po,CircleGeometry:um,CircleBufferGeometry:$u,BoxGeometry:HC,BoxBufferGeometry:Oa});function Io(t){Ge.call(this),this.type="ShadowMaterial",this.color=new Se(0),this.transparent=!0,this.setValues(t)}Io.prototype=Object.create(Ge.prototype);Io.prototype.constructor=Io;Io.prototype.isShadowMaterial=!0;Io.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this};function Xn(t){zr.call(this,t),this.type="RawShaderMaterial"}Xn.prototype=Object.create(zr.prototype);Xn.prototype.constructor=Xn;Xn.prototype.isRawShaderMaterial=!0;function Er(t){Ge.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Se(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Se(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Er.prototype=Object.create(Ge.prototype);Er.prototype.constructor=Er;Er.prototype.isMeshStandardMaterial=!0;Er.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Fc(t){Er.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new he(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}Fc.prototype=Object.create(Er.prototype);Fc.prototype.constructor=Fc;Fc.prototype.isMeshPhysicalMaterial=!0;Fc.prototype.copy=function(t){return Er.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new Se).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this};function Ba(t){Ge.call(this),this.type="MeshPhongMaterial",this.color=new Se(16777215),this.specular=new Se(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Se(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Ba.prototype=Object.create(Ge.prototype);Ba.prototype.constructor=Ba;Ba.prototype.isMeshPhongMaterial=!0;Ba.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Nc(t){Ge.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Se(16777215),this.specular=new Se(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Se(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Nc.prototype=Object.create(Ge.prototype);Nc.prototype.constructor=Nc;Nc.prototype.isMeshToonMaterial=!0;Nc.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function kc(t){Ge.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}kc.prototype=Object.create(Ge.prototype);kc.prototype.constructor=kc;kc.prototype.isMeshNormalMaterial=!0;kc.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Vc(t){Ge.call(this),this.type="MeshLambertMaterial",this.color=new Se(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Se(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Vc.prototype=Object.create(Ge.prototype);Vc.prototype.constructor=Vc;Vc.prototype.isMeshLambertMaterial=!0;Vc.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Bc(t){Ge.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Se(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bo,this.normalScale=new he(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Bc.prototype=Object.create(Ge.prototype);Bc.prototype.constructor=Bc;Bc.prototype.isMeshMatcapMaterial=!0;Bc.prototype.copy=function(t){return Ge.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function Uc(t){Qt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Uc.prototype=Object.create(Qt.prototype);Uc.prototype.constructor=Uc;Uc.prototype.isLineDashedMaterial=!0;Uc.prototype.copy=function(t){return Qt.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var K8=Object.freeze({__proto__:null,ShadowMaterial:Io,SpriteMaterial:ka,RawShaderMaterial:Xn,ShaderMaterial:zr,PointsMaterial:Rs,MeshPhysicalMaterial:Fc,MeshStandardMaterial:Er,MeshPhongMaterial:Ba,MeshToonMaterial:Nc,MeshNormalMaterial:kc,MeshLambertMaterial:Vc,MeshDepthMaterial:Da,MeshDistanceMaterial:Fa,MeshBasicMaterial:lr,MeshMatcapMaterial:Bc,LineDashedMaterial:Uc,LineBasicMaterial:Qt,Material:Ge}),cr={arraySlice:function(t,e,r){return cr.isTypedArray(t)?new t.constructor(t.subarray(e,r!==void 0?r:t.length)):t.slice(e,r)},convertArray:function(t,e,r){return!t||!r&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(o,a){return t[o]-t[a]}for(var r=t.length,n=new Array(r),s=0;s!==r;++s)n[s]=s;return n.sort(e),n},sortedArray:function(t,e,r){for(var n=t.length,s=new t.constructor(n),o=0,a=0;a!==n;++o)for(var l=r[o]*e,c=0;c!==e;++c)s[a++]=t[l+c];return s},flattenJSON:function(t,e,r,n){for(var s=1,o=t[0];o!==void 0&&o[n]===void 0;)o=t[s++];if(o!==void 0){var a=o[n];if(a!==void 0)if(Array.isArray(a))do a=o[n],a!==void 0&&(e.push(o.time),r.push.apply(r,a)),o=t[s++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[n],a!==void 0&&(e.push(o.time),a.toArray(r,r.length)),o=t[s++];while(o!==void 0);else do a=o[n],a!==void 0&&(e.push(o.time),r.push(a)),o=t[s++];while(o!==void 0)}},subclip:function(t,e,r,n,s){s=s||30;var o=t.clone();o.name=e;for(var a=[],l=0;l<o.tracks.length;++l){for(var c=o.tracks[l],h=c.getValueSize(),f=[],u=[],m=0;m<c.times.length;++m){var d=c.times[m]*s;if(!(d<r||d>=n)){f.push(c.times[m]);for(var v=0;v<h;++v)u.push(c.values[m*h+v])}}f.length!==0&&(c.times=cr.convertArray(f,c.times.constructor),c.values=cr.convertArray(u,c.values.constructor),a.push(c))}o.tracks=a;for(var p=1/0,l=0;l<o.tracks.length;++l)p>o.tracks[l].times[0]&&(p=o.tracks[l].times[0]);for(var l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*p);return o.resetDuration(),o}};function ti(t,e,r,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new e.constructor(r),this.sampleValues=e,this.valueSize=r}Object.assign(ti.prototype,{evaluate:function(t){var e=this.parameterPositions,r=this._cachedIndex,n=e[r],s=e[r-1];e:{t:{var o;r:{i:if(!(t<n)){for(var a=r+2;;){if(n===void 0){if(t<s)break i;return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,t,s)}if(r===a)break;if(s=n,n=e[++r],t<n)break t}o=e.length;break r}if(!(t>=s)){var l=e[1];t<l&&(r=2,s=l);for(var a=r-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(r===a)break;if(n=s,s=e[--r-1],t>=s)break t}o=r,r=0;break r}break e}for(;r<o;){var c=r+o>>>1;t<e[c]?o=c:r=c+1}if(n=e[r],s=e[r-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(n===void 0)return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,s,t)}this._cachedIndex=r,this.intervalChanged_(r,s,n)}return this.interpolate_(r,s,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,r=this.sampleValues,n=this.valueSize,s=t*n,o=0;o!==n;++o)e[o]=r[s+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(ti.prototype,{beforeStart_:ti.prototype.copySampleValue_,afterEnd_:ti.prototype.copySampleValue_});function q0(t,e,r,n){ti.call(this,t,e,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}q0.prototype=Object.assign(Object.create(ti.prototype),{constructor:q0,DefaultSettings_:{endingStart:Yl,endingEnd:Yl},intervalChanged_:function(t,e,r){var n=this.parameterPositions,s=t-2,o=t+1,a=n[s],l=n[o];if(a===void 0)switch(this.getSettings_().endingStart){case Xl:s=t,a=2*e-r;break;case mp:s=n.length-2,a=e+n[s]-n[s+1];break;default:s=t,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Xl:o=t,l=2*r-e;break;case mp:o=1,l=r+n[1]-n[0];break;default:o=t-1,l=e}var c=(r-e)*.5,h=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h},interpolate_:function(t,e,r,n){for(var s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,h=this._offsetPrev,f=this._offsetNext,u=this._weightPrev,m=this._weightNext,d=(r-e)/(n-e),v=d*d,p=v*d,g=-u*p+2*u*v-u*d,y=(1+u)*p+(-1.5-2*u)*v+(-.5+u)*d+1,_=(-1-m)*p+(1.5+m)*v+.5*d,b=m*p-m*v,w=0;w!==a;++w)s[w]=g*o[h+w]+y*o[c+w]+_*o[l+w]+b*o[f+w];return s}});function fm(t,e,r,n){ti.call(this,t,e,r,n)}fm.prototype=Object.assign(Object.create(ti.prototype),{constructor:fm,interpolate_:function(t,e,r,n){for(var s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,h=(r-e)/(n-e),f=1-h,u=0;u!==a;++u)s[u]=o[c+u]*f+o[l+u]*h;return s}});function z0(t,e,r,n){ti.call(this,t,e,r,n)}z0.prototype=Object.assign(Object.create(ti.prototype),{constructor:z0,interpolate_:function(t){return this.copySampleValue_(t-1)}});function Wr(t,e,r,n){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=cr.convertArray(e,this.TimeBufferType),this.values=cr.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}Object.assign(Wr,{toJSON:function(t){var e=t.constructor,r;if(e.toJSON!==void 0)r=e.toJSON(t);else{r={name:t.name,times:cr.convertArray(t.times,Array),values:cr.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(r.interpolation=n)}return r.type=t.ValueTypeName,r}});Object.assign(Wr.prototype,{constructor:Wr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:xa,InterpolantFactoryMethodDiscrete:function(t){return new z0(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new fm(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new q0(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case jl:e=this.InterpolantFactoryMethodDiscrete;break;case xa:e=this.InterpolantFactoryMethodLinear;break;case t0:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jl;case this.InterpolantFactoryMethodLinear:return xa;case this.InterpolantFactoryMethodSmooth:return t0}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]+=t;return this},scale:function(t){if(t!==1)for(var e=this.times,r=0,n=e.length;r!==n;++r)e[r]*=t;return this},trim:function(t,e){for(var r=this.times,n=r.length,s=0,o=n-1;s!==n&&r[s]<t;)++s;for(;o!==-1&&r[o]>e;)--o;if(++o,s!==0||o!==n){s>=o&&(o=Math.max(o,1),s=o-1);var a=this.getValueSize();this.times=cr.arraySlice(r,s,o),this.values=cr.arraySlice(this.values,s*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,n=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==s;a++){var l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(n!==void 0&&cr.isTypedArray(n))for(var a=0,c=n.length;a!==c;++a){var h=n[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),t=!1;break}}return t},optimize:function(){for(var t=cr.arraySlice(this.times),e=cr.arraySlice(this.values),r=this.getValueSize(),n=this.getInterpolation()===t0,s=1,o=t.length-1,a=1;a<o;++a){var l=!1,c=t[a],h=t[a+1];if(c!==h&&(a!==1||c!==c[0]))if(n)l=!0;else for(var f=a*r,u=f-r,m=f+r,d=0;d!==r;++d){var v=e[f+d];if(v!==e[u+d]||v!==e[m+d]){l=!0;break}}if(l){if(a!==s){t[s]=t[a];for(var p=a*r,g=s*r,d=0;d!==r;++d)e[g+d]=e[p+d]}++s}}if(o>0){t[s]=t[o];for(var p=o*r,g=s*r,d=0;d!==r;++d)e[g+d]=e[p+d];++s}return s!==t.length?(this.times=cr.arraySlice(t,0,s),this.values=cr.arraySlice(e,0,s*r)):(this.times=t,this.values=e),this},clone:function(){var t=cr.arraySlice(this.times,0),e=cr.arraySlice(this.values,0),r=this.constructor,n=new r(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}});function W0(t,e,r){Wr.call(this,t,e,r)}W0.prototype=Object.assign(Object.create(Wr.prototype),{constructor:W0,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:jl,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function G0(t,e,r,n){Wr.call(this,t,e,r,n)}G0.prototype=Object.assign(Object.create(Wr.prototype),{constructor:G0,ValueTypeName:"color"});function Ua(t,e,r,n){Wr.call(this,t,e,r,n)}Ua.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Ua,ValueTypeName:"number"});function $0(t,e,r,n){ti.call(this,t,e,r,n)}$0.prototype=Object.assign(Object.create(ti.prototype),{constructor:$0,interpolate_:function(t,e,r,n){for(var s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=(r-e)/(n-e),h=l+a;l!==h;l+=4)Ur.slerpFlat(s,0,o,l-a,o,l,c);return s}});function Ro(t,e,r,n){Wr.call(this,t,e,r,n)}Ro.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Ro,ValueTypeName:"quaternion",DefaultInterpolation:xa,InterpolantFactoryMethodLinear:function(t){return new $0(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function j0(t,e,r,n){Wr.call(this,t,e,r,n)}j0.prototype=Object.assign(Object.create(Wr.prototype),{constructor:j0,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:jl,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Os(t,e,r,n){Wr.call(this,t,e,r,n)}Os.prototype=Object.assign(Object.create(Wr.prototype),{constructor:Os,ValueTypeName:"vector"});function ri(t,e,r){this.name=t,this.tracks=r,this.duration=e!==void 0?e:-1,this.uuid=Qe.generateUUID(),this.duration<0&&this.resetDuration()}function J8(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ua;case"vector":case"vector2":case"vector3":case"vector4":return Os;case"color":return G0;case"quaternion":return Ro;case"bool":case"boolean":return W0;case"string":return j0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function e9(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=J8(t.type);if(t.times===void 0){var r=[],n=[];cr.flattenJSON(t.keys,r,n,"value"),t.times=r,t.values=n}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(ri,{parse:function(t){for(var e=[],r=t.tracks,n=1/(t.fps||1),s=0,o=r.length;s!==o;++s)e.push(e9(r[s]).scale(n));return new ri(t.name,t.duration,e)},toJSON:function(t){for(var e=[],r=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},s=0,o=r.length;s!==o;++s)e.push(Wr.toJSON(r[s]));return n},CreateFromMorphTargetSequence:function(t,e,r,n){for(var s=e.length,o=[],a=0;a<s;a++){var l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);var h=cr.getKeyframeOrder(l);l=cr.sortedArray(l,1,h),c=cr.sortedArray(c,1,h),!n&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Ua(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/r))}return new ri(t,-1,o)},findByName:function(t,e){var r=t;if(!Array.isArray(t)){var n=t;r=n.geometry&&n.geometry.animations||n.animations}for(var s=0;s<r.length;s++)if(r[s].name===e)return r[s];return null},CreateClipsFromMorphTargetSequences:function(t,e,r){for(var n={},s=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var l=t[o],c=l.name.match(s);if(c&&c.length>1){var h=c[1],f=n[h];f||(n[h]=f=[]),f.push(l)}}var u=[];for(var h in n)u.push(ri.CreateFromMorphTargetSequence(h,n[h],e,r));return u},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(b,w,S,E,x){if(S.length!==0){var T=[],A=[];cr.flattenJSON(S,T,A,E),T.length!==0&&x.push(new b(w,T,A))}},n=[],s=t.name||"default",o=t.length||-1,a=t.fps||30,l=t.hierarchy||[],c=0;c<l.length;c++){var h=l[c].keys;if(!(!h||h.length===0))if(h[0].morphTargets){for(var f={},u=0;u<h.length;u++)if(h[u].morphTargets)for(var m=0;m<h[u].morphTargets.length;m++)f[h[u].morphTargets[m]]=-1;for(var d in f){for(var v=[],p=[],m=0;m!==h[u].morphTargets.length;++m){var g=h[u];v.push(g.time),p.push(g.morphTarget===d?1:0)}n.push(new Ua(".morphTargetInfluence["+d+"]",v,p))}o=f.length*(a||1)}else{var y=".bones["+e[c].name+"]";r(Os,y+".position",h,"pos",n),r(Ro,y+".quaternion",h,"rot",n),r(Os,y+".scale",h,"scl",n)}}if(n.length===0)return null;var _=new ri(s,o,n);return _}});Object.assign(ri.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,r=0,n=t.length;r!==n;++r){var s=this.tracks[r];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new ri(this.name,this.duration,t)}});var Lo={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function RP(t,e,r){var n=this,s=!1,o=0,a=0,l=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=r,this.itemStart=function(h){a++,s===!1&&n.onStart!==void 0&&n.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,n.onProgress!==void 0&&n.onProgress(h,o,a),o===a&&(s=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(h){n.onError!==void 0&&n.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,f){return c.push(h,f),this},this.removeHandler=function(h){var f=c.indexOf(h);return f!==-1&&c.splice(f,2),this},this.getHandler=function(h){for(var f=0,u=c.length;f<u;f+=2){var m=c[f],d=c[f+1];if(m.global&&(m.lastIndex=0),m.test(h))return d}return null}}var t9=new RP;function bt(t){this.manager=t!==void 0?t:t9,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(bt.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}});var xn={};function Gr(t){bt.call(this,t)}Gr.prototype=Object.assign(Object.create(bt.prototype),{constructor:Gr,load:function(t,e,r,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var s=this,o=Lo.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;if(xn[t]!==void 0){xn[t].push({onLoad:e,onProgress:r,onError:n});return}var a=/^data:(.*?)(;base64)?,(.*)$/,l=t.match(a);if(l){var c=l[1],h=!!l[2],f=l[3];f=decodeURIComponent(f),h&&(f=atob(f));try{var u,m=(this.responseType||"").toLowerCase();switch(m){case"arraybuffer":case"blob":for(var d=new Uint8Array(f.length),v=0;v<f.length;v++)d[v]=f.charCodeAt(v);m==="blob"?u=new Blob([d.buffer],{type:c}):u=d.buffer;break;case"document":var p=new DOMParser;u=p.parseFromString(f,c);break;case"json":u=JSON.parse(f);break;default:u=f;break}setTimeout(function(){e&&e(u),s.manager.itemEnd(t)},0)}catch(_){setTimeout(function(){n&&n(_),s.manager.itemError(t),s.manager.itemEnd(t)},0)}}else{xn[t]=[],xn[t].push({onLoad:e,onProgress:r,onError:n});var g=new XMLHttpRequest;g.open("GET",t,!0),g.addEventListener("load",function(_){var b=this.response,w=xn[t];if(delete xn[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Lo.add(t,b);for(var S=0,E=w.length;S<E;S++){var x=w[S];x.onLoad&&x.onLoad(b)}s.manager.itemEnd(t)}else{for(var S=0,E=w.length;S<E;S++){var x=w[S];x.onError&&x.onError(_)}s.manager.itemError(t),s.manager.itemEnd(t)}},!1),g.addEventListener("progress",function(_){for(var b=xn[t],w=0,S=b.length;w<S;w++){var E=b[w];E.onProgress&&E.onProgress(_)}},!1),g.addEventListener("error",function(_){var b=xn[t];delete xn[t];for(var w=0,S=b.length;w<S;w++){var E=b[w];E.onError&&E.onError(_)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),g.addEventListener("abort",function(_){var b=xn[t];delete xn[t];for(var w=0,S=b.length;w<S;w++){var E=b[w];E.onError&&E.onError(_)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),this.responseType!==void 0&&(g.responseType=this.responseType),this.withCredentials!==void 0&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var y in this.requestHeader)g.setRequestHeader(y,this.requestHeader[y]);g.send(null)}return s.manager.itemStart(t),g},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});function LP(t){bt.call(this,t)}LP.prototype=Object.assign(Object.create(bt.prototype),{constructor:LP,load:function(t,e,r,n){var s=this,o=new Gr(s.manager);o.setPath(s.path),o.load(t,function(a){e(s.parse(JSON.parse(a)))},r,n)},parse:function(t){for(var e=[],r=0;r<t.length;r++){var n=ri.parse(t[r]);e.push(n)}return e}});function OP(t){bt.call(this,t)}OP.prototype=Object.assign(Object.create(bt.prototype),{constructor:OP,load:function(t,e,r,n){var s=this,o=[],a=new Lu;a.image=o;var l=new Gr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer");function c(m){l.load(t[m],function(d){var v=s.parse(d,!0);o[m]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},h+=1,h===6&&(v.mipmapCount===1&&(a.minFilter=Vt),a.format=v.format,a.needsUpdate=!0,e&&e(a))},r,n)}if(Array.isArray(t))for(var h=0,f=0,u=t.length;f<u;++f)c(f);else l.load(t,function(m){var d=s.parse(m,!0);if(d.isCubemap)for(var v=d.mipmaps.length/d.mipmapCount,p=0;p<v;p++){o[p]={mipmaps:[]};for(var g=0;g<d.mipmapCount;g++)o[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+g]),o[p].format=d.format,o[p].width=d.width,o[p].height=d.height}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Vt),a.format=d.format,a.needsUpdate=!0,e&&e(a)},r,n);return a}});function Hc(t){bt.call(this,t)}Hc.prototype=Object.assign(Object.create(bt.prototype),{constructor:Hc,load:function(t,e,r,n){var s=this,o=new gc,a=new Gr(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,function(l){var c=s.parse(l);!c||(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:kr,o.wrapT=c.wrapT!==void 0?c.wrapT:kr,o.magFilter=c.magFilter!==void 0?c.magFilter:Vt,o.minFilter=c.minFilter!==void 0?c.minFilter:Vt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Sa),c.mipmapCount===1&&(o.minFilter=Vt),o.needsUpdate=!0,e&&e(o,c))},r,n),o}});function ju(t){bt.call(this,t)}ju.prototype=Object.assign(Object.create(bt.prototype),{constructor:ju,load:function(t,e,r,n){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var s=this,o=Lo.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function l(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1),Lo.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(h){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1),n&&n(h),s.manager.itemError(t),s.manager.itemEnd(t)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}});function Y0(t){bt.call(this,t)}Y0.prototype=Object.assign(Object.create(bt.prototype),{constructor:Y0,load:function(t,e,r,n){var s=new To,o=new ju(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function l(h){o.load(t[h],function(f){s.images[h]=f,a++,a===6&&(s.needsUpdate=!0,e&&e(s))},void 0,n)}for(var c=0;c<t.length;++c)l(c);return s}});function Ha(t){bt.call(this,t)}Ha.prototype=Object.assign(Object.create(bt.prototype),{constructor:Ha,load:function(t,e,r,n){var s=new Mt,o=new ju(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a;var l=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;s.format=l?Oi:Ki,s.needsUpdate=!0,e!==void 0&&e(s)},r,n),s}});function We(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(We.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var r=this.getUtoTmapping(t);return this.getPoint(r,e)},getPoints:function(t){t===void 0&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return e},getSpacedPoints:function(t){t===void 0&&(t=5);for(var e=[],r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e=[],r,n=this.getPoint(0),s,o=0;for(e.push(0),s=1;s<=t;s++)r=this.getPoint(s/t),o+=r.distanceTo(n),e.push(o),n=r;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var r=this.getLengths(),n=0,s=r.length,o;e?o=e:o=t*r[s-1];for(var a=0,l=s-1,c;a<=l;)if(n=Math.floor(a+(l-a)/2),c=r[n]-o,c<0)a=n+1;else if(c>0)l=n-1;else{l=n;break}if(n=l,r[n]===o)return n/(s-1);var h=r[n],f=r[n+1],u=f-h,m=(o-h)/u,d=(n+m)/(s-1);return d},getTangent:function(t){var e=1e-4,r=t-e,n=t+e;r<0&&(r=0),n>1&&(n=1);var s=this.getPoint(r),o=this.getPoint(n),a=o.clone().sub(s);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var r=new F,n=[],s=[],o=[],a=new F,l=new Ue,c,h,f;for(c=0;c<=t;c++)h=c/t,n[c]=this.getTangentAt(h),n[c].normalize();s[0]=new F,o[0]=new F;var u=Number.MAX_VALUE,m=Math.abs(n[0].x),d=Math.abs(n[0].y),v=Math.abs(n[0].z);for(m<=u&&(u=m,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),v<=u&&r.set(0,0,1),a.crossVectors(n[0],r).normalize(),s[0].crossVectors(n[0],a),o[0].crossVectors(n[0],s[0]),c=1;c<=t;c++)s[c]=s[c-1].clone(),o[c]=o[c-1].clone(),a.crossVectors(n[c-1],n[c]),a.length()>Number.EPSILON&&(a.normalize(),f=Math.acos(Qe.clamp(n[c-1].dot(n[c]),-1,1)),s[c].applyMatrix4(l.makeRotationAxis(a,f))),o[c].crossVectors(n[c],s[c]);if(e===!0)for(f=Math.acos(Qe.clamp(s[0].dot(s[t]),-1,1)),f/=t,n[0].dot(a.crossVectors(s[0],s[t]))>0&&(f=-f),c=1;c<=t;c++)s[c].applyMatrix4(l.makeRotationAxis(n[c],f*c)),o[c].crossVectors(n[c],s[c]);return{tangents:n,normals:s,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});function tn(t,e,r,n,s,o,a,l){We.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=s||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=l||0}tn.prototype=Object.create(We.prototype);tn.prototype.constructor=tn;tn.prototype.isEllipseCurve=!0;tn.prototype.getPoint=function(t,e){for(var r=e||new he,n=Math.PI*2,s=this.aEndAngle-this.aStartAngle,o=Math.abs(s)<Number.EPSILON;s<0;)s+=n;for(;s>n;)s-=n;s<Number.EPSILON&&(o?s=0:s=n),this.aClockwise===!0&&!o&&(s===n?s=-n:s=s-n);var a=this.aStartAngle+t*s,l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){var h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),u=l-this.aX,m=c-this.aY;l=u*h-m*f+this.aX,c=u*f+m*h+this.aY}return r.set(l,c)};tn.prototype.copy=function(t){return We.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};tn.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t};tn.prototype.fromJSON=function(t){return We.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};function Yu(t,e,r,n,s,o){tn.call(this,t,e,r,r,n,s,o),this.type="ArcCurve"}Yu.prototype=Object.create(tn.prototype);Yu.prototype.constructor=Yu;Yu.prototype.isArcCurve=!0;function X0(){var t=0,e=0,r=0,n=0;function s(o,a,l,c){t=o,e=l,r=-3*o+3*a-2*l-c,n=2*o-2*a+l+c}return{initCatmullRom:function(o,a,l,c,h){s(a,l,h*(l-o),h*(c-a))},initNonuniformCatmullRom:function(o,a,l,c,h,f,u){var m=(a-o)/h-(l-o)/(h+f)+(l-a)/f,d=(l-a)/f-(c-a)/(f+u)+(c-l)/u;m*=f,d*=f,s(a,l,m,d)},calc:function(o){var a=o*o,l=a*o;return t+e*o+r*a+n*l}}}var dm=new F,Z0=new X0,Q0=new X0,K0=new X0;function ii(t,e,r,n){We.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=r||"centripetal",this.tension=n||.5}ii.prototype=Object.create(We.prototype);ii.prototype.constructor=ii;ii.prototype.isCatmullRomCurve3=!0;ii.prototype.getPoint=function(t,e){var r=e||new F,n=this.points,s=n.length,o=(s-(this.closed?0:1))*t,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);var c,h,f,u;if(this.closed||a>0?c=n[(a-1)%s]:(dm.subVectors(n[0],n[1]).add(n[0]),c=dm),h=n[a%s],f=n[(a+1)%s],this.closed||a+2<s?u=n[(a+2)%s]:(dm.subVectors(n[s-1],n[s-2]).add(n[s-1]),u=dm),this.curveType==="centripetal"||this.curveType==="chordal"){var m=this.curveType==="chordal"?.5:.25,d=Math.pow(c.distanceToSquared(h),m),v=Math.pow(h.distanceToSquared(f),m),p=Math.pow(f.distanceToSquared(u),m);v<1e-4&&(v=1),d<1e-4&&(d=v),p<1e-4&&(p=v),Z0.initNonuniformCatmullRom(c.x,h.x,f.x,u.x,d,v,p),Q0.initNonuniformCatmullRom(c.y,h.y,f.y,u.y,d,v,p),K0.initNonuniformCatmullRom(c.z,h.z,f.z,u.z,d,v,p)}else this.curveType==="catmullrom"&&(Z0.initCatmullRom(c.x,h.x,f.x,u.x,this.tension),Q0.initCatmullRom(c.y,h.y,f.y,u.y,this.tension),K0.initCatmullRom(c.z,h.z,f.z,u.z,this.tension));return r.set(Z0.calc(l),Q0.calc(l),K0.calc(l)),r};ii.prototype.copy=function(t){We.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};ii.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t};ii.prototype.fromJSON=function(t){We.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(new F().fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};function DP(t,e,r,n,s){var o=(n-e)*.5,a=(s-r)*.5,l=t*t,c=t*l;return(2*r-2*n+o+a)*c+(-3*r+3*n-2*o-a)*l+o*t+r}function r9(t,e){var r=1-t;return r*r*e}function i9(t,e){return 2*(1-t)*t*e}function n9(t,e){return t*t*e}function Xu(t,e,r,n){return r9(t,e)+i9(t,r)+n9(t,n)}function s9(t,e){var r=1-t;return r*r*r*e}function o9(t,e){var r=1-t;return 3*r*r*t*e}function a9(t,e){return 3*(1-t)*t*t*e}function l9(t,e){return t*t*t*e}function Zu(t,e,r,n,s){return s9(t,e)+o9(t,r)+a9(t,n)+l9(t,s)}function Zn(t,e,r,n){We.call(this),this.type="CubicBezierCurve",this.v0=t||new he,this.v1=e||new he,this.v2=r||new he,this.v3=n||new he}Zn.prototype=Object.create(We.prototype);Zn.prototype.constructor=Zn;Zn.prototype.isCubicBezierCurve=!0;Zn.prototype.getPoint=function(t,e){var r=e||new he,n=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Zu(t,n.x,s.x,o.x,a.x),Zu(t,n.y,s.y,o.y,a.y)),r};Zn.prototype.copy=function(t){return We.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};Zn.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};Zn.prototype.fromJSON=function(t){return We.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function Ds(t,e,r,n){We.call(this),this.type="CubicBezierCurve3",this.v0=t||new F,this.v1=e||new F,this.v2=r||new F,this.v3=n||new F}Ds.prototype=Object.create(We.prototype);Ds.prototype.constructor=Ds;Ds.prototype.isCubicBezierCurve3=!0;Ds.prototype.getPoint=function(t,e){var r=e||new F,n=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Zu(t,n.x,s.x,o.x,a.x),Zu(t,n.y,s.y,o.y,a.y),Zu(t,n.z,s.z,o.z,a.z)),r};Ds.prototype.copy=function(t){return We.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};Ds.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};Ds.prototype.fromJSON=function(t){return We.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function Vi(t,e){We.call(this),this.type="LineCurve",this.v1=t||new he,this.v2=e||new he}Vi.prototype=Object.create(We.prototype);Vi.prototype.constructor=Vi;Vi.prototype.isLineCurve=!0;Vi.prototype.getPoint=function(t,e){var r=e||new he;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r};Vi.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};Vi.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()};Vi.prototype.copy=function(t){return We.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Vi.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Vi.prototype.fromJSON=function(t){return We.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function Qn(t,e){We.call(this),this.type="LineCurve3",this.v1=t||new F,this.v2=e||new F}Qn.prototype=Object.create(We.prototype);Qn.prototype.constructor=Qn;Qn.prototype.isLineCurve3=!0;Qn.prototype.getPoint=function(t,e){var r=e||new F;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r};Qn.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};Qn.prototype.copy=function(t){return We.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Qn.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Qn.prototype.fromJSON=function(t){return We.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function Kn(t,e,r){We.call(this),this.type="QuadraticBezierCurve",this.v0=t||new he,this.v1=e||new he,this.v2=r||new he}Kn.prototype=Object.create(We.prototype);Kn.prototype.constructor=Kn;Kn.prototype.isQuadraticBezierCurve=!0;Kn.prototype.getPoint=function(t,e){var r=e||new he,n=this.v0,s=this.v1,o=this.v2;return r.set(Xu(t,n.x,s.x,o.x),Xu(t,n.y,s.y,o.y)),r};Kn.prototype.copy=function(t){return We.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Kn.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Kn.prototype.fromJSON=function(t){return We.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function Fs(t,e,r){We.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new F,this.v1=e||new F,this.v2=r||new F}Fs.prototype=Object.create(We.prototype);Fs.prototype.constructor=Fs;Fs.prototype.isQuadraticBezierCurve3=!0;Fs.prototype.getPoint=function(t,e){var r=e||new F,n=this.v0,s=this.v1,o=this.v2;return r.set(Xu(t,n.x,s.x,o.x),Xu(t,n.y,s.y,o.y),Xu(t,n.z,s.z,o.z)),r};Fs.prototype.copy=function(t){return We.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};Fs.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};Fs.prototype.fromJSON=function(t){return We.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function Jn(t){We.call(this),this.type="SplineCurve",this.points=t||[]}Jn.prototype=Object.create(We.prototype);Jn.prototype.constructor=Jn;Jn.prototype.isSplineCurve=!0;Jn.prototype.getPoint=function(t,e){var r=e||new he,n=this.points,s=(n.length-1)*t,o=Math.floor(s),a=s-o,l=n[o===0?o:o-1],c=n[o],h=n[o>n.length-2?n.length-1:o+1],f=n[o>n.length-3?n.length-1:o+2];return r.set(DP(a,l.x,c.x,h.x,f.x),DP(a,l.y,c.y,h.y,f.y)),r};Jn.prototype.copy=function(t){We.prototype.copy.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(n.clone())}return this};Jn.prototype.toJSON=function(){var t=We.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var n=this.points[e];t.points.push(n.toArray())}return t};Jn.prototype.fromJSON=function(t){We.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(new he().fromArray(n))}return this};var J0=Object.freeze({__proto__:null,ArcCurve:Yu,CatmullRomCurve3:ii,CubicBezierCurve:Zn,CubicBezierCurve3:Ds,EllipseCurve:tn,LineCurve:Vi,LineCurve3:Qn,QuadraticBezierCurve:Kn,QuadraticBezierCurve3:Fs,SplineCurve:Jn});function Oo(){We.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Oo.prototype=Object.assign(Object.create(We.prototype),{constructor:Oo,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Vi(e,t))},getPoint:function(t){for(var e=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=e){var s=r[n]-e,o=this.curves[n],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,r=0,n=this.curves.length;r<n;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t===void 0&&(t=40);for(var e=[],r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e=[],r,n=0,s=this.curves;n<s.length;n++)for(var o=s[n],a=o&&o.isEllipseCurve?t*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,l=o.getPoints(a),c=0;c<l.length;c++){var h=l[c];r&&r.equals(h)||(e.push(h),r=h)}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){We.prototype.copy.call(this,t),this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=We.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,r=this.curves.length;e<r;e++){var n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){We.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var n=t.curves[e];this.curves.push(new J0[n.type]().fromJSON(n))}return this}});function es(t){Oo.call(this),this.type="Path",this.currentPoint=new he,t&&this.setFromPoints(t)}es.prototype=Object.assign(Object.create(Oo.prototype),{constructor:es,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var r=new Vi(this.currentPoint.clone(),new he(t,e));return this.curves.push(r),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,r,n){var s=new Kn(this.currentPoint.clone(),new he(t,e),new he(r,n));return this.curves.push(s),this.currentPoint.set(r,n),this},bezierCurveTo:function(t,e,r,n,s,o){var a=new Zn(this.currentPoint.clone(),new he(t,e),new he(r,n),new he(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),r=new Jn(e);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,r,n,s,o){var a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(t+a,e+l,r,n,s,o),this},absarc:function(t,e,r,n,s,o){return this.absellipse(t,e,r,r,n,s,o),this},ellipse:function(t,e,r,n,s,o,a,l){var c=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+c,e+h,r,n,s,o,a,l),this},absellipse:function(t,e,r,n,s,o,a,l){var c=new tn(t,e,r,n,s,o,a,l);if(this.curves.length>0){var h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);var f=c.getPoint(1);return this.currentPoint.copy(f),this},copy:function(t){return Oo.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Oo.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Oo.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}});function qa(t){es.call(this,t),this.uuid=Qe.generateUUID(),this.type="Shape",this.holes=[]}qa.prototype=Object.assign(Object.create(es.prototype),{constructor:qa,getPointsHoles:function(t){for(var e=[],r=0,n=this.holes.length;r<n;r++)e[r]=this.holes[r].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){es.prototype.copy.call(this,t),this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){var t=es.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,r=this.holes.length;e<r;e++){var n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){es.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var n=t.holes[e];this.holes.push(new es().fromJSON(n))}return this}});function zt(t,e){ve.call(this),this.type="Light",this.color=new Se(t),this.intensity=e!==void 0?e:1,this.receiveShadow=void 0}zt.prototype=Object.assign(Object.create(ve.prototype),{constructor:zt,isLight:!0,copy:function(t){return ve.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=ve.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function eb(t,e,r){zt.call(this,t,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ve.DefaultUp),this.updateMatrix(),this.groundColor=new Se(e)}eb.prototype=Object.assign(Object.create(zt.prototype),{constructor:eb,isHemisphereLight:!0,copy:function(t){return zt.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}});function Ns(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new he(512,512),this.map=null,this.mapPass=null,this.matrix=new Ue,this._frustum=new bu,this._frameExtents=new he(1,1),this._viewportCount=1,this._viewports=[new Ot(0,0,1,1)]}Object.assign(Ns.prototype,{_projScreenMatrix:new Ue,_lightPositionWorld:new F,_lookTarget:new F,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,r=this.matrix,n=this._projScreenMatrix,s=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),s.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(s),e.updateMatrixWorld(),n.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(e.projectionMatrix),r.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return this.bias!==0&&(t.bias=this.bias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});function tb(){Ns.call(this,new Bt(50,1,.5,500))}tb.prototype=Object.assign(Object.create(Ns.prototype),{constructor:tb,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,r=Qe.RAD2DEG*2*t.angle,n=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(r!==e.fov||n!==e.aspect||s!==e.far)&&(e.fov=r,e.aspect=n,e.far=s,e.updateProjectionMatrix()),Ns.prototype.updateMatrices.call(this,t)}});function Qu(t,e,r,n,s,o){zt.call(this,t,e),this.type="SpotLight",this.position.copy(ve.DefaultUp),this.updateMatrix(),this.target=new ve,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}}),this.distance=r!==void 0?r:0,this.angle=n!==void 0?n:Math.PI/3,this.penumbra=s!==void 0?s:0,this.decay=o!==void 0?o:1,this.shadow=new tb}Qu.prototype=Object.assign(Object.create(zt.prototype),{constructor:Qu,isSpotLight:!0,copy:function(t){return zt.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function rb(){Ns.call(this,new Bt(90,1,.5,500)),this._frameExtents=new he(4,2),this._viewportCount=6,this._viewports=[new Ot(2,1,1,1),new Ot(0,1,1,1),new Ot(3,1,1,1),new Ot(1,1,1,1),new Ot(3,0,1,1),new Ot(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}rb.prototype=Object.assign(Object.create(Ns.prototype),{constructor:rb,isPointLightShadow:!0,updateMatrices:function(t,e){e===void 0&&(e=0);var r=this.camera,n=this.matrix,s=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;s.setFromMatrixPosition(t.matrixWorld),r.position.copy(s),o.copy(r.position),o.add(this._cubeDirections[e]),r.up.copy(this._cubeUps[e]),r.lookAt(o),r.updateMatrixWorld(),n.makeTranslation(-s.x,-s.y,-s.z),a.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}});function za(t,e,r,n){zt.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(s){this.intensity=s/(4*Math.PI)}}),this.distance=r!==void 0?r:0,this.decay=n!==void 0?n:1,this.shadow=new rb}za.prototype=Object.assign(Object.create(zt.prototype),{constructor:za,isPointLight:!0,copy:function(t){return zt.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}});function Tn(t,e,r,n,s,o){Ps.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t!==void 0?t:-1,this.right=e!==void 0?e:1,this.top=r!==void 0?r:1,this.bottom=n!==void 0?n:-1,this.near=s!==void 0?s:.1,this.far=o!==void 0?o:2e3,this.updateProjectionMatrix()}Tn.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Tn,isOrthographicCamera:!0,copy:function(t,e){return Ps.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,e,r,n,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,s=r-t,o=r+t,a=n+e,l=n-e;if(this.view!==null&&this.view.enabled){var c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=ve.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function ib(){Ns.call(this,new Tn(-5,5,5,-5,.5,500))}ib.prototype=Object.assign(Object.create(Ns.prototype),{constructor:ib,isDirectionalLightShadow:!0,updateMatrices:function(t){Ns.prototype.updateMatrices.call(this,t)}});function Wa(t,e){zt.call(this,t,e),this.type="DirectionalLight",this.position.copy(ve.DefaultUp),this.updateMatrix(),this.target=new ve,this.shadow=new ib}Wa.prototype=Object.assign(Object.create(zt.prototype),{constructor:Wa,isDirectionalLight:!0,copy:function(t){return zt.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function nb(t,e){zt.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}nb.prototype=Object.assign(Object.create(zt.prototype),{constructor:nb,isAmbientLight:!0});function sb(t,e,r,n){zt.call(this,t,e),this.type="RectAreaLight",this.width=r!==void 0?r:10,this.height=n!==void 0?n:10}sb.prototype=Object.assign(Object.create(zt.prototype),{constructor:sb,isRectAreaLight:!0,copy:function(t){return zt.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=zt.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});function ab(t){bt.call(this,t),this.textures={}}ab.prototype=Object.assign(Object.create(bt.prototype),{constructor:ab,load:function(t,e,r,n){var s=this,o=new Gr(s.manager);o.setPath(s.path),o.load(t,function(a){e(s.parse(JSON.parse(a)))},r,n)},parse:function(t){var e=this.textures;function r(c){return e[c]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",c),e[c]}var n=new K8[t.type];if(t.uuid!==void 0&&(n.uuid=t.uuid),t.name!==void 0&&(n.name=t.name),t.color!==void 0&&n.color.setHex(t.color),t.roughness!==void 0&&(n.roughness=t.roughness),t.metalness!==void 0&&(n.metalness=t.metalness),t.sheen!==void 0&&(n.sheen=new Se().setHex(t.sheen)),t.emissive!==void 0&&n.emissive.setHex(t.emissive),t.specular!==void 0&&n.specular.setHex(t.specular),t.shininess!==void 0&&(n.shininess=t.shininess),t.clearcoat!==void 0&&(n.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=t.clearcoatRoughness),t.vertexColors!==void 0&&(n.vertexColors=t.vertexColors),t.fog!==void 0&&(n.fog=t.fog),t.flatShading!==void 0&&(n.flatShading=t.flatShading),t.blending!==void 0&&(n.blending=t.blending),t.combine!==void 0&&(n.combine=t.combine),t.side!==void 0&&(n.side=t.side),t.opacity!==void 0&&(n.opacity=t.opacity),t.transparent!==void 0&&(n.transparent=t.transparent),t.alphaTest!==void 0&&(n.alphaTest=t.alphaTest),t.depthTest!==void 0&&(n.depthTest=t.depthTest),t.depthWrite!==void 0&&(n.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(n.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(n.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(n.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(n.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(n.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(n.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(n.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(n.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(n.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(n.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(n.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(n.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(n.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(n.rotation=t.rotation),t.linewidth!==1&&(n.linewidth=t.linewidth),t.dashSize!==void 0&&(n.dashSize=t.dashSize),t.gapSize!==void 0&&(n.gapSize=t.gapSize),t.scale!==void 0&&(n.scale=t.scale),t.polygonOffset!==void 0&&(n.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(n.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(n.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(n.skinning=t.skinning),t.morphTargets!==void 0&&(n.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(n.morphNormals=t.morphNormals),t.dithering!==void 0&&(n.dithering=t.dithering),t.visible!==void 0&&(n.visible=t.visible),t.toneMapped!==void 0&&(n.toneMapped=t.toneMapped),t.userData!==void 0&&(n.userData=t.userData),t.uniforms!==void 0)for(var s in t.uniforms){var o=t.uniforms[s];switch(n.uniforms[s]={},o.type){case"t":n.uniforms[s].value=r(o.value);break;case"c":n.uniforms[s].value=new Se().setHex(o.value);break;case"v2":n.uniforms[s].value=new he().fromArray(o.value);break;case"v3":n.uniforms[s].value=new F().fromArray(o.value);break;case"v4":n.uniforms[s].value=new Ot().fromArray(o.value);break;case"m3":n.uniforms[s].value=new Br().fromArray(o.value);case"m4":n.uniforms[s].value=new Ue().fromArray(o.value);break;default:n.uniforms[s].value=o.value}}if(t.defines!==void 0&&(n.defines=t.defines),t.vertexShader!==void 0&&(n.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(n.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(var a in t.extensions)n.extensions[a]=t.extensions[a];if(t.shading!==void 0&&(n.flatShading=t.shading===1),t.size!==void 0&&(n.size=t.size),t.sizeAttenuation!==void 0&&(n.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(n.map=r(t.map)),t.matcap!==void 0&&(n.matcap=r(t.matcap)),t.alphaMap!==void 0&&(n.alphaMap=r(t.alphaMap),n.transparent=!0),t.bumpMap!==void 0&&(n.bumpMap=r(t.bumpMap)),t.bumpScale!==void 0&&(n.bumpScale=t.bumpScale),t.normalMap!==void 0&&(n.normalMap=r(t.normalMap)),t.normalMapType!==void 0&&(n.normalMapType=t.normalMapType),t.normalScale!==void 0){var l=t.normalScale;Array.isArray(l)===!1&&(l=[l,l]),n.normalScale=new he().fromArray(l)}return t.displacementMap!==void 0&&(n.displacementMap=r(t.displacementMap)),t.displacementScale!==void 0&&(n.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(n.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(n.roughnessMap=r(t.roughnessMap)),t.metalnessMap!==void 0&&(n.metalnessMap=r(t.metalnessMap)),t.emissiveMap!==void 0&&(n.emissiveMap=r(t.emissiveMap)),t.emissiveIntensity!==void 0&&(n.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(n.specularMap=r(t.specularMap)),t.envMap!==void 0&&(n.envMap=r(t.envMap)),t.envMapIntensity!==void 0&&(n.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(n.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(n.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(n.lightMap=r(t.lightMap)),t.lightMapIntensity!==void 0&&(n.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(n.aoMap=r(t.aoMap)),t.aoMapIntensity!==void 0&&(n.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(n.gradientMap=r(t.gradientMap)),t.clearcoatNormalMap!==void 0&&(n.clearcoatNormalMap=r(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(n.clearcoatNormalScale=new he().fromArray(t.clearcoatNormalScale)),n},setTextures:function(t){return this.textures=t,this}});var Do={decodeText:function(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);for(var e="",r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(e))}catch(s){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};function lb(){Ie.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}lb.prototype=Object.assign(Object.create(Ie.prototype),{constructor:lb,isInstancedBufferGeometry:!0,copy:function(t){return Ie.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t=Ie.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}});function cb(t,e,r,n){typeof r=="number"&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),ze.call(this,t,e,r),this.meshPerAttribute=n||1}cb.prototype=Object.assign(Object.create(ze.prototype),{constructor:cb,isInstancedBufferAttribute:!0,copy:function(t){return ze.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=ze.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});function hb(t){bt.call(this,t)}hb.prototype=Object.assign(Object.create(bt.prototype),{constructor:hb,load:function(t,e,r,n){var s=this,o=new Gr(s.manager);o.setPath(s.path),o.load(t,function(a){e(s.parse(JSON.parse(a)))},r,n)},parse:function(t){var e=t.isInstancedBufferGeometry?new lb:new Ie,r=t.data.index;if(r!==void 0){var n=new ub[r.type](r.array);e.setIndex(new ze(n,1))}var s=t.data.attributes;for(var o in s){var a=s[o],n=new ub[a.type](a.array),l=a.isInstancedBufferAttribute?cb:ze,c=new l(n,a.itemSize,a.normalized);a.name!==void 0&&(c.name=a.name),e.setAttribute(o,c)}var h=t.data.morphAttributes;if(h)for(var o in h){for(var f=h[o],u=[],m=0,d=f.length;m<d;m++){var a=f[m],n=new ub[a.type](a.array),c=new ze(n,a.itemSize,a.normalized);a.name!==void 0&&(c.name=a.name),u.push(c)}e.morphAttributes[o]=u}var v=t.data.morphTargetsRelative;v&&(e.morphTargetsRelative=!0);var p=t.data.groups||t.data.drawcalls||t.data.offsets;if(p!==void 0)for(var m=0,g=p.length;m!==g;++m){var y=p[m];e.addGroup(y.start,y.count,y.materialIndex)}var _=t.data.boundingSphere;if(_!==void 0){var b=new F;_.center!==void 0&&b.fromArray(_.center),e.boundingSphere=new Wn(b,_.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var ub={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function fb(t){bt.call(this,t)}fb.prototype=Object.assign(Object.create(bt.prototype),{constructor:fb,load:function(t,e,r,n){var s=this,o=this.path===""?Do.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new Gr(s.manager);a.setPath(this.path),a.load(t,function(l){var c=null;try{c=JSON.parse(l)}catch(f){n!==void 0&&n(f),console.error("THREE:ObjectLoader: Can't parse "+t+".",f.message);return}var h=c.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+t);return}s.parse(c,e)},r,n)},parse:function(t,e){var r=this.parseShape(t.shapes),n=this.parseGeometries(t.geometries,r),s=this.parseImages(t.images,function(){e!==void 0&&e(l)}),o=this.parseTextures(t.textures,s),a=this.parseMaterials(t.materials,o),l=this.parseObject(t.object,n,a);return t.animations&&(l.animations=this.parseAnimations(t.animations)),(t.images===void 0||t.images.length===0)&&e!==void 0&&e(l),l},parseShape:function(t){var e={};if(t!==void 0)for(var r=0,n=t.length;r<n;r++){var s=new qa().fromJSON(t[r]);e[s.uuid]=s}return e},parseGeometries:function(t,e){var r={};if(t!==void 0)for(var n=new hb,s=0,o=t.length;s<o;s++){var a,l=t[s];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new ei[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new ei[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new ei[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new ei[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new ei[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new ei[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new ei[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new ei[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new ei[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new ei[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new ei[l.type](new J0[l.path.type]().fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new ei[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new ei[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],h=0,f=l.shapes.length;h<f;h++){var u=e[l.shapes[h]];c.push(u)}a=new ei[l.type](c,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(var c=[],h=0,f=l.shapes.length;h<f;h++){var u=e[l.shapes[h]];c.push(u)}var m=l.options.extrudePath;m!==void 0&&(l.options.extrudePath=new J0[m.type]().fromJSON(m)),a=new ei[l.type](c,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=n.parse(l);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var d=new THREE.LegacyJSONLoader;a=d.parse(l,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}return r},parseMaterials:function(t,e){var r={},n={};if(t!==void 0){var s=new ab;s.setTextures(e);for(var o=0,a=t.length;o<a;o++){var l=t[o];if(l.type==="MultiMaterial"){for(var c=[],h=0;h<l.materials.length;h++){var f=l.materials[h];r[f.uuid]===void 0&&(r[f.uuid]=s.parse(f)),c.push(r[f.uuid])}n[l.uuid]=c}else r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),n[l.uuid]=r[l.uuid]}}return n},parseAnimations:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r],s=ri.parse(n);n.uuid!==void 0&&(s.uuid=n.uuid),e.push(s)}return e},parseImages:function(t,e){var r=this,n={};function s(p){return r.manager.itemStart(p),a.load(p,function(){r.manager.itemEnd(p)},void 0,function(){r.manager.itemError(p),r.manager.itemEnd(p)})}if(t!==void 0&&t.length>0){var o=new RP(e),a=new ju(o);a.setCrossOrigin(this.crossOrigin);for(var l=0,c=t.length;l<c;l++){var h=t[l],f=h.url;if(Array.isArray(f)){n[h.uuid]=[];for(var u=0,m=f.length;u<m;u++){var d=f[u],v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;n[h.uuid].push(s(v))}}else{var v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h.url)?h.url:r.resourcePath+h.url;n[h.uuid]=s(v)}}}return n},parseTextures:function(t,e){function r(c,h){return typeof c=="number"?c:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",c),h[c])}var n={};if(t!==void 0)for(var s=0,o=t.length;s<o;s++){var a=t[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),e[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var l;Array.isArray(e[a.image])?l=new To(e[a.image]):l=new Mt(e[a.image]),l.needsUpdate=!0,l.uuid=a.uuid,a.name!==void 0&&(l.name=a.name),a.mapping!==void 0&&(l.mapping=r(a.mapping,c9)),a.offset!==void 0&&l.offset.fromArray(a.offset),a.repeat!==void 0&&l.repeat.fromArray(a.repeat),a.center!==void 0&&l.center.fromArray(a.center),a.rotation!==void 0&&(l.rotation=a.rotation),a.wrap!==void 0&&(l.wrapS=r(a.wrap[0],FP),l.wrapT=r(a.wrap[1],FP)),a.format!==void 0&&(l.format=a.format),a.type!==void 0&&(l.type=a.type),a.encoding!==void 0&&(l.encoding=a.encoding),a.minFilter!==void 0&&(l.minFilter=r(a.minFilter,NP)),a.magFilter!==void 0&&(l.magFilter=r(a.magFilter,NP)),a.anisotropy!==void 0&&(l.anisotropy=a.anisotropy),a.flipY!==void 0&&(l.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(l.unpackAlignment=a.unpackAlignment),n[a.uuid]=l}return n},parseObject:function(t,e,r){var n;function s(g){return e[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),e[g]}function o(g){if(g!==void 0){if(Array.isArray(g)){for(var y=[],_=0,b=g.length;_<b;_++){var w=g[_];r[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),y.push(r[w])}return y}return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),r[g]}}switch(t.type){case"Scene":n=new fr,t.background!==void 0&&Number.isInteger(t.background)&&(n.background=new Se(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?n.fog=new D0(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(n.fog=new O0(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Bt(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(n.focus=t.focus),t.zoom!==void 0&&(n.zoom=t.zoom),t.filmGauge!==void 0&&(n.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(n.filmOffset=t.filmOffset),t.view!==void 0&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new Tn(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(n.zoom=t.zoom),t.view!==void 0&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new nb(t.color,t.intensity);break;case"DirectionalLight":n=new Wa(t.color,t.intensity);break;case"PointLight":n=new za(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new sb(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new Qu(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new eb(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=s(t.geometry),l=o(t.material);a.bones&&a.bones.length>0?n=new xc(a,l):n=new Xe(a,l);break;case"InstancedMesh":var a=s(t.geometry),l=o(t.material),c=t.count,h=t.instanceMatrix;n=new k0(a,l,c),n.instanceMatrix=new ze(new Float32Array(h.array),16);break;case"LOD":n=new Bp;break;case"Line":n=new gi(s(t.geometry),o(t.material),t.mode);break;case"LineLoop":n=new Iu(s(t.geometry),o(t.material));break;case"LineSegments":n=new rr(s(t.geometry),o(t.material));break;case"PointCloud":case"Points":n=new Ru(s(t.geometry),o(t.material));break;case"Sprite":n=new N0(o(t.material));break;case"Group":n=new Mo;break;default:n=new ve}if(n.uuid=t.uuid,t.name!==void 0&&(n.name=t.name),t.matrix!==void 0?(n.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(t.position!==void 0&&n.position.fromArray(t.position),t.rotation!==void 0&&n.rotation.fromArray(t.rotation),t.quaternion!==void 0&&n.quaternion.fromArray(t.quaternion),t.scale!==void 0&&n.scale.fromArray(t.scale)),t.castShadow!==void 0&&(n.castShadow=t.castShadow),t.receiveShadow!==void 0&&(n.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(n.shadow.bias=t.shadow.bias),t.shadow.radius!==void 0&&(n.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&n.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(n.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(n.visible=t.visible),t.frustumCulled!==void 0&&(n.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(n.renderOrder=t.renderOrder),t.userData!==void 0&&(n.userData=t.userData),t.layers!==void 0&&(n.layers.mask=t.layers),t.children!==void 0)for(var f=t.children,u=0;u<f.length;u++)n.add(this.parseObject(f[u],e,r));if(t.type==="LOD"){t.autoUpdate!==void 0&&(n.autoUpdate=t.autoUpdate);for(var m=t.levels,d=0;d<m.length;d++){var v=m[d],p=n.getObjectByProperty("uuid",v.object);p!==void 0&&n.addLevel(p,v.distance)}}return n}});var c9={UVMapping:X_,CubeReflectionMapping:Z_,CubeRefractionMapping:Q_,EquirectangularReflectionMapping:hC,EquirectangularRefractionMapping:K_,SphericalReflectionMapping:uC,CubeUVReflectionMapping:au,CubeUVRefractionMapping:J_},FP={RepeatWrapping:_o,ClampToEdgeWrapping:kr,MirroredRepeatWrapping:Gl},NP={NearestFilter:It,NearestMipmapNearestFilter:lu,NearestMipmapLinearFilter:cu,LinearFilter:Vt,LinearMipmapNearestFilter:fp,LinearMipmapLinearFilter:Sa};function kP(t){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),bt.call(this,t),this.options=void 0}kP.prototype=Object.assign(Object.create(bt.prototype),{constructor:kP,setOptions:function(e){return this.options=e,this},load:function(t,e,r,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var s=this,o=Lo.get(t);if(o!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;fetch(t).then(function(a){return a.blob()}).then(function(a){return s.options===void 0?createImageBitmap(a):createImageBitmap(a,s.options)}).then(function(a){Lo.add(t,a),e&&e(a),s.manager.itemEnd(t)}).catch(function(a){n&&n(a),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}});function VP(){this.type="ShapePath",this.color=new Se,this.subPaths=[],this.currentPath=null}Object.assign(VP.prototype,{moveTo:function(t,e){return this.currentPath=new es,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,r,n){return this.currentPath.quadraticCurveTo(t,e,r,n),this},bezierCurveTo:function(t,e,r,n,s,o){return this.currentPath.bezierCurveTo(t,e,r,n,s,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function r(k){for(var X=[],R=0,U=k.length;R<U;R++){var q=k[R],Z=new qa;Z.curves=q.curves,X.push(Z)}return X}function n(k,X){for(var R=X.length,U=!1,q=R-1,Z=0;Z<R;q=Z++){var oe=X[q],N=X[Z],M=N.x-oe.x,$=N.y-oe.y;if(Math.abs($)>Number.EPSILON){if($<0&&(oe=X[Z],M=-M,N=X[q],$=-$),k.y<oe.y||k.y>N.y)continue;if(k.y===oe.y){if(k.x===oe.x)return!0}else{var W=$*(k.x-oe.x)-M*(k.y-oe.y);if(W===0)return!0;if(W<0)continue;U=!U}}else{if(k.y!==oe.y)continue;if(N.x<=k.x&&k.x<=oe.x||oe.x<=k.x&&k.x<=N.x)return!0}}return U}var s=Co.isClockWise,o=this.subPaths;if(o.length===0)return[];if(e===!0)return r(o);var a,l,c,h=[];if(o.length===1)return l=o[0],c=new qa,c.curves=l.curves,h.push(c),h;var f=!s(o[0].getPoints());f=t?!f:f;var u=[],m=[],d=[],v=0,p;m[v]=void 0,d[v]=[];for(var g=0,y=o.length;g<y;g++)l=o[g],p=l.getPoints(),a=s(p),a=t?!a:a,a?(!f&&m[v]&&v++,m[v]={s:new qa,p},m[v].s.curves=l.curves,f&&v++,d[v]=[]):d[v].push({h:l,p:p[0]});if(!m[0])return r(o);if(m.length>1){for(var _=!1,b=[],w=0,S=m.length;w<S;w++)u[w]=[];for(var w=0,S=m.length;w<S;w++)for(var E=d[w],x=0;x<E.length;x++){for(var T=E[x],A=!0,P=0;P<m.length;P++)n(T.p,m[P].p)&&(w!==P&&b.push({froms:w,tos:P,hole:x}),A?(A=!1,u[P].push(T)):_=!0);A&&u[w].push(T)}b.length>0&&(_||(d=u))}for(var z,g=0,V=m.length;g<V;g++){c=m[g].s,h.push(c),z=d[g];for(var L=0,O=z.length;L<O;L++)c.holes.push(z[L].h)}return h}});function BP(t){this.type="Font",this.data=t}Object.assign(BP.prototype,{isFont:!0,generateShapes:function(t,e){e===void 0&&(e=100);for(var r=[],n=h9(t,e,this.data),s=0,o=n.length;s<o;s++)Array.prototype.push.apply(r,n[s].toShapes());return r}});function h9(t,e,r){for(var n=Array.from?Array.from(t):String(t).split(""),s=e/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*s,a=[],l=0,c=0,h=0;h<n.length;h++){var f=n[h];if(f===`
`)l=0,c-=o;else{var u=u9(f,s,l,c,r);l+=u.offsetX,a.push(u.path)}}return a}function u9(t,e,r,n,s){var o=s.glyphs[t]||s.glyphs["?"];if(!o){console.error('THREE.Font: character "'+t+'" does not exists in font family '+s.familyName+".");return}var a=new VP,l,c,h,f,u,m,d,v;if(o.o)for(var p=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,y=p.length;g<y;){var _=p[g++];switch(_){case"m":l=p[g++]*e+r,c=p[g++]*e+n,a.moveTo(l,c);break;case"l":l=p[g++]*e+r,c=p[g++]*e+n,a.lineTo(l,c);break;case"q":h=p[g++]*e+r,f=p[g++]*e+n,u=p[g++]*e+r,m=p[g++]*e+n,a.quadraticCurveTo(u,m,h,f);break;case"b":h=p[g++]*e+r,f=p[g++]*e+n,u=p[g++]*e+r,m=p[g++]*e+n,d=p[g++]*e+r,v=p[g++]*e+n,a.bezierCurveTo(u,m,d,v,h,f);break}}return{offsetX:o.ha*e,path:a}}function UP(t){bt.call(this,t)}UP.prototype=Object.assign(Object.create(bt.prototype),{constructor:UP,load:function(t,e,r,n){var s=this,o=new Gr(this.manager);o.setPath(this.path),o.load(t,function(a){var l;try{l=JSON.parse(a)}catch(h){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),l=JSON.parse(a.substring(65,a.length-2))}var c=s.parse(l);e&&e(c)},r,n)},parse:function(t){return new BP(t)}});var pm,HP={getContext:function(){return pm===void 0&&(pm=new(window.AudioContext||window.webkitAudioContext)),pm},setContext:function(t){pm=t}};function db(t){bt.call(this,t)}db.prototype=Object.assign(Object.create(bt.prototype),{constructor:db,load:function(t,e,r,n){var s=new Gr(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(t,function(o){var a=o.slice(0),l=HP.getContext();l.decodeAudioData(a,function(c){e(c)})},r,n)}});function pb(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new F)}Object.assign(pb.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var r=t.x,n=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScale(o[1],.488603*n),e.addScale(o[2],.488603*s),e.addScale(o[3],.488603*r),e.addScale(o[4],1.092548*(r*n)),e.addScale(o[5],1.092548*(n*s)),e.addScale(o[6],.315392*(3*s*s-1)),e.addScale(o[7],1.092548*(r*s)),e.addScale(o[8],.546274*(r*r-n*n)),e},getIrradianceAt:function(t,e){var r=t.x,n=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScale(o[1],2*.511664*n),e.addScale(o[2],2*.511664*s),e.addScale(o[3],2*.511664*r),e.addScale(o[4],2*.429043*r*n),e.addScale(o[5],2*.429043*n*s),e.addScale(o[6],.743125*s*s-.247708),e.addScale(o[7],2*.429043*r*s),e.addScale(o[8],.429043*(r*r-n*n)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var r=0;r<9;r++)this.coefficients[r].lerp(t.coefficients[r],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(t,e){e===void 0&&(e=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].fromArray(t,e+n*3);return this},toArray:function(t,e){t===void 0&&(t=[]),e===void 0&&(e=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].toArray(t,e+n*3);return t}});Object.assign(pb,{getBasisAt:function(t,e){var r=t.x,n=t.y,s=t.z;e[0]=.282095,e[1]=.488603*n,e[2]=.488603*s,e[3]=.488603*r,e[4]=1.092548*r*n,e[5]=1.092548*n*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*r*s,e[8]=.546274*(r*r-n*n)}});function ts(t,e){zt.call(this,void 0,e),this.sh=t!==void 0?t:new pb}ts.prototype=Object.assign(Object.create(zt.prototype),{constructor:ts,isLightProbe:!0,copy:function(t){return zt.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){var e=zt.prototype.toJSON.call(this,t);return e}});function qP(t,e,r){ts.call(this,void 0,r);var n=new Se().set(t),s=new Se().set(e),o=new F(n.r,n.g,n.b),a=new F(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}qP.prototype=Object.assign(Object.create(ts.prototype),{constructor:qP,isHemisphereLightProbe:!0,copy:function(t){return ts.prototype.copy.call(this,t),this},toJSON:function(t){var e=ts.prototype.toJSON.call(this,t);return e}});function zP(t,e){ts.call(this,void 0,e);var r=new Se().set(t);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}zP.prototype=Object.assign(Object.create(ts.prototype),{constructor:zP,isAmbientLightProbe:!0,copy:function(t){return ts.prototype.copy.call(this,t),this},toJSON:function(t){var e=ts.prototype.toJSON.call(this,t);return e}});var WP=new Ue,GP=new Ue;function f9(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(f9.prototype,{update:function(t){var e=this._cache,r=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(r){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n=t.projectionMatrix.clone(),s=e.eyeSep/2,o=s*e.near/e.focus,a=e.near*Math.tan(Qe.DEG2RAD*e.fov*.5)/e.zoom,l,c;GP.elements[12]=-s,WP.elements[12]=s,l=-a*e.aspect+o,c=a*e.aspect+o,n.elements[0]=2*e.near/(c-l),n.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(n),l=-a*e.aspect-o,c=a*e.aspect-o,n.elements[0]=2*e.near/(c-l),n.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(GP),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(WP)}});function $P(t){this.autoStart=t!==void 0?t:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign($P.prototype,{start:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=(typeof performance=="undefined"?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var Ga=new F,jP=new Ur,d9=new F,$a=new F;function YP(){ve.call(this),this.type="AudioListener",this.context=HP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new $P}YP.prototype=Object.assign(Object.create(ve.prototype),{constructor:YP,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){ve.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ga,jP,d9),$a.set(0,0,-1).applyQuaternion(jP),e.positionX){var n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Ga.x,n),e.positionY.linearRampToValueAtTime(Ga.y,n),e.positionZ.linearRampToValueAtTime(Ga.z,n),e.forwardX.linearRampToValueAtTime($a.x,n),e.forwardY.linearRampToValueAtTime($a.y,n),e.forwardZ.linearRampToValueAtTime($a.z,n),e.upX.linearRampToValueAtTime(r.x,n),e.upY.linearRampToValueAtTime(r.y,n),e.upZ.linearRampToValueAtTime(r.z,n)}else e.setPosition(Ga.x,Ga.y,Ga.z),e.setOrientation($a.x,$a.y,$a.z,r.x,r.y,r.z)}});function Ku(t){ve.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Ku.prototype=Object.assign(Object.create(ve.prototype),{constructor:Ku,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(t===void 0&&(t=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var ja=new F,XP=new Ur,p9=new F,Ya=new F;function ZP(t){Ku.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}ZP.prototype=Object.assign(Object.create(Ku.prototype),{constructor:ZP,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,r){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(t){if(ve.prototype.updateMatrixWorld.call(this,t),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(ja,XP,p9),Ya.set(0,0,1).applyQuaternion(XP);var e=this.panner;if(e.positionX){var r=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ja.x,r),e.positionY.linearRampToValueAtTime(ja.y,r),e.positionZ.linearRampToValueAtTime(ja.z,r),e.orientationX.linearRampToValueAtTime(Ya.x,r),e.orientationY.linearRampToValueAtTime(Ya.y,r),e.orientationZ.linearRampToValueAtTime(Ya.z,r)}else e.setPosition(ja.x,ja.y,ja.z),e.setOrientation(Ya.x,Ya.y,Ya.z)}}});function QP(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e!==void 0?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}Object.assign(QP.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),r=0;r<e.length;r++)t+=e[r];return t/e.length}});function KP(t,e,r){this.binding=t,this.valueSize=r;var n=Float64Array,s;switch(e){case"quaternion":s=this._slerp;break;case"string":case"bool":n=Array,s=this._select;break;default:s=this._lerp}this.buffer=new n(r*4),this._mixBufferRegion=s,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(KP.prototype,{accumulate:function(t,e){var r=this.buffer,n=this.valueSize,s=t*n+n,o=this.cumulativeWeight;if(o===0){for(var a=0;a!==n;++a)r[s+a]=r[a];o=e}else{o+=e;var l=e/o;this._mixBufferRegion(r,s,0,l,n)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,r=this.buffer,n=t*e+e,s=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,s<1){var a=e*3;this._mixBufferRegion(r,n,a,1-s,e)}for(var l=e,c=e+e;l!==c;++l)if(r[l]!==r[l+e]){o.setValue(r,n);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,r=this.valueSize,n=r*3;t.getValue(e,n);for(var s=r,o=n;s!==o;++s)e[s]=e[n+s%r];this.cumulativeWeight=0},restoreOriginalState:function(){var t=this.valueSize*3;this.binding.setValue(this.buffer,t)},_select:function(t,e,r,n,s){if(n>=.5)for(var o=0;o!==s;++o)t[e+o]=t[r+o]},_slerp:function(t,e,r,n){Ur.slerpFlat(t,e,t,e,t,r,n)},_lerp:function(t,e,r,n,s){for(var o=1-n,a=0;a!==s;++a){var l=e+a;t[l]=t[l]*o+t[r+a]*n}}});var mb="\\[\\]\\.:\\/",m9=new RegExp("["+mb+"]","g"),gb="[^"+mb+"]",g9="[^"+mb.replace("\\.","")+"]",v9=/((?:WC+[\/:])*)/.source.replace("WC",gb),y9=/(WCOD+)?/.source.replace("WCOD",g9),_9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gb),b9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gb),w9=new RegExp("^"+v9+y9+_9+b9+"$"),S9=["material","materials","bones"];function JP(t,e,r){var n=r||Lr.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}Object.assign(JP.prototype,{getValue:function(t,e){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(t,e)},setValue:function(t,e){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,s=r.length;n!==s;++n)r[n].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}});function Lr(t,e,r){this.path=e,this.parsedPath=r||Lr.parseTrackName(e),this.node=Lr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(Lr,{Composite:JP,create:function(t,e,r){return t&&t.isAnimationObjectGroup?new Lr.Composite(t,e,r):new Lr(t,e,r)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(m9,"")},parseTrackName:function(t){var e=w9.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var r={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){var s=r.nodeName.substring(n+1);S9.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r},findNode:function(t,e){if(!e||e===""||e==="root"||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=t.skeleton.getBoneByName(e);if(r!==void 0)return r}if(t.children){var n=function(o){for(var a=0;a<o.length;a++){var l=o[a];if(l.name===e||l.uuid===e)return l;var c=n(l.children);if(c)return c}return null},s=n(t.children);if(s)return s}return null}});Object.assign(Lr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,r){e[r]=this.node[this.propertyName]},function(e,r){for(var n=this.resolvedProperty,s=0,o=n.length;s!==o;++s)e[r++]=n[s]},function(e,r){e[r]=this.resolvedProperty[this.propertyIndex]},function(e,r){this.resolvedProperty.toArray(e,r)}],SetterByBindingTypeAndVersioning:[[function(e,r){this.targetObject[this.propertyName]=e[r]},function(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.needsUpdate=!0},function(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,r){for(var n=this.resolvedProperty,s=0,o=n.length;s!==o;++s)n[s]=e[r++]},function(e,r){for(var n=this.resolvedProperty,s=0,o=n.length;s!==o;++s)n[s]=e[r++];this.targetObject.needsUpdate=!0},function(e,r){for(var n=this.resolvedProperty,s=0,o=n.length;s!==o;++s)n[s]=e[r++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,r){this.resolvedProperty[this.propertyIndex]=e[r]},function(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.needsUpdate=!0},function(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,r){this.resolvedProperty.fromArray(e,r)},function(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.needsUpdate=!0},function(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,r){this.bind(),this.getValue(e,r)},setValue:function(e,r){this.bind(),this.setValue(e,r)},bind:function(){var t=this.node,e=this.parsedPath,r=e.objectName,n=e.propertyName,s=e.propertyIndex;if(t||(t=Lr.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){var o=e.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(o!==void 0){if(t[o]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[o]}}var l=t[n];if(l===void 0){var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",t);return}var h=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);var f=this.BindingType.Direct;if(s!==void 0){if(n==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===s){s=a;break}}else{if(!t.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===s){s=a;break}}}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=s}else l.fromArray!==void 0&&l.toArray!==void 0?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=n;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][h]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(Lr.prototype,{_getValue_unbound:Lr.prototype.getValue,_setValue_unbound:Lr.prototype.setValue});function E9(){this.uuid=Qe.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,r=arguments.length;e!==r;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(E9.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,s=this._paths,o=this._parsedPaths,a=this._bindings,l=a.length,c=void 0,h=0,f=arguments.length;h!==f;++h){var u=arguments[h],m=u.uuid,d=n[m];if(d===void 0){d=e++,n[m]=d,t.push(u);for(var v=0,p=l;v!==p;++v)a[v].push(new Lr(u,s[v],o[v]))}else if(d<r){c=t[d];var g=--r,y=t[g];n[y.uuid]=d,t[d]=y,n[m]=g,t[g]=u;for(var v=0,p=l;v!==p;++v){var _=a[v],b=_[g],w=_[d];_[d]=b,w===void 0&&(w=new Lr(u,s[v],o[v])),_[g]=w}}else t[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,s=n.length,o=0,a=arguments.length;o!==a;++o){var l=arguments[o],c=l.uuid,h=r[c];if(h!==void 0&&h>=e){var f=e++,u=t[f];r[u.uuid]=h,t[h]=u,r[c]=f,t[f]=l;for(var m=0,d=s;m!==d;++m){var v=n[m],p=v[f],g=v[h];v[h]=p,v[f]=g}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,s=this._bindings,o=s.length,a=0,l=arguments.length;a!==l;++a){var c=arguments[a],h=c.uuid,f=n[h];if(f!==void 0)if(delete n[h],f<r){var u=--r,m=t[u],d=--e,v=t[d];n[m.uuid]=f,t[f]=m,n[v.uuid]=u,t[u]=v,t.pop();for(var p=0,g=o;p!==g;++p){var y=s[p],_=y[u],b=y[d];y[f]=_,y[u]=b,y.pop()}}else{var d=--e,v=t[d];n[v.uuid]=f,t[f]=v,t.pop();for(var p=0,g=o;p!==g;++p){var y=s[p];y[f]=y[d],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var r=this._bindingsIndicesByPath,n=r[t],s=this._bindings;if(n!==void 0)return s[n];var o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,h=this.nCachedObjects_,f=new Array(c);n=s.length,r[t]=n,o.push(t),a.push(e),s.push(f);for(var u=h,m=l.length;u!==m;++u){var d=l[u];f[u]=new Lr(d,t,e)}return f},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,r=e[t];if(r!==void 0){var n=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=t[a];e[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),n[r]=n[a],n.pop()}}});function eI(t,e,r){this._mixer=t,this._clip=e,this._localRoot=r||null;for(var n=e.tracks,s=n.length,o=new Array(s),a={endingStart:Yl,endingEnd:Yl},l=0;l!==s;++l){var c=n[l].createInterpolant(null);o[l]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_5,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(eI.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,r){if(t.fadeOut(e),this.fadeIn(e),r){var n=this._clip.duration,s=t._clip.duration,o=s/n,a=n/s;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,r){return t.crossFadeFrom(this,e,r)},stopFading:function(){var t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,r){var n=this._mixer,s=n.time,o=this._timeScaleInterpolant,a=this.timeScale;o===null&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+r,c[0]=t/a,c[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,r,n){if(!this.enabled){this._updateWeight(t);return}var s=this._startTime;if(s!==null){var o=(t-s)*r;if(o<0||r===0)return;this._startTime=null,e=r*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),l=this._updateWeight(t);if(l>0)for(var c=this._interpolants,h=this._propertyBindings,f=0,u=c.length;f!==u;++f)c[f].evaluate(a),h[f].accumulate(n,l)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var r=this._weightInterpolant;if(r!==null){var n=r.evaluate(t)[0];e*=n,t>r.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var r=this._timeScaleInterpolant;if(r!==null){var n=r.evaluate(t)[0];e*=n,t>r.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,r=this._clip.duration,n=this.loop,s=this._loopCount,o=n===b5;if(t===0)return s===-1?e:o&&(s&1)==1?r-e:e;if(n===y5){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(e>=r)e=r;else if(e<0)e=0;else{this.time=e;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),e>=r||e<0){var a=Math.floor(e/r);e-=r*a,s+=Math.abs(a);var l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?r:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){var c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=e;if(o&&(s&1)==1)return r-e}return e},_setEndings:function(t,e,r){var n=this._interpolantSettings;r?(n.endingStart=Xl,n.endingEnd=Xl):(t?n.endingStart=this.zeroSlopeAtStart?Xl:Yl:n.endingStart=mp,e?n.endingEnd=this.zeroSlopeAtEnd?Xl:Yl:n.endingEnd=mp)},_scheduleFading:function(t,e,r){var n=this._mixer,s=n.time,o=this._weightInterpolant;o===null&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=e,a[1]=s+t,l[1]=r,this}});function qc(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}qc.prototype=Object.assign(Object.create(yr.prototype),{constructor:qc,_bindAction:function(t,e){var r=t._localRoot||this._root,n=t._clip.tracks,s=n.length,o=t._propertyBindings,a=t._interpolants,l=r.uuid,c=this._bindingsByRootAndName,h=c[l];h===void 0&&(h={},c[l]=h);for(var f=0;f!==s;++f){var u=n[f],m=u.name,d=h[m];if(d!==void 0)o[f]=d;else{if(d=o[f],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,l,m));continue}var v=e&&e._propertyBindings[f].binding.parsedPath;d=new KP(Lr.create(r,m,v),u.ValueTypeName,u.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,l,m),o[f]=d}a[f].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){var e=(t._localRoot||this._root).uuid,r=t._clip.uuid,n=this._actionsByClip[r];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,r,e)}for(var s=t._propertyBindings,o=0,a=s.length;o!==a;++o){var l=s[o];l.useCount++==0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,r=0,n=e.length;r!==n;++r){var s=e[r];--s.useCount==0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(t,e,r){var n=this._actions,s=this._actionsByClip,o=s[e];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=n.length,n.push(t),o.actionByRoot[r]=t},_removeInactiveAction:function(t){var e=this._actions,r=e[e.length-1],n=t._cacheIndex;r._cacheIndex=n,e[n]=r,e.pop(),t._cacheIndex=null;var s=t._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=t._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),t._byClipCacheIndex=null;var f=a.actionByRoot,u=(t._localRoot||this._root).uuid;delete f[u],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,r=0,n=e.length;r!==n;++r){var s=e[r];--s.referenceCount==0&&this._removeInactiveBinding(s)}},_lendAction:function(t){var e=this._actions,r=t._cacheIndex,n=this._nActiveActions++,s=e[n];t._cacheIndex=n,e[n]=t,s._cacheIndex=r,e[r]=s},_takeBackAction:function(t){var e=this._actions,r=t._cacheIndex,n=--this._nActiveActions,s=e[n];t._cacheIndex=n,e[n]=t,s._cacheIndex=r,e[r]=s},_addInactiveBinding:function(t,e,r){var n=this._bindingsByRootAndName,s=n[e],o=this._bindings;s===void 0&&(s={},n[e]=s),s[r]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,r=t.binding,n=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[n],l=e[e.length-1],c=t._cacheIndex;l._cacheIndex=c,e[c]=l,e.pop(),delete a[s],Object.keys(a).length===0&&delete o[n]},_lendBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=this._nActiveBindings++,s=e[n];t._cacheIndex=n,e[n]=t,s._cacheIndex=r,e[r]=s},_takeBackBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=--this._nActiveBindings,s=e[n];t._cacheIndex=n,e[n]=t,s._cacheIndex=r,e[r]=s},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,r=t[e];return r===void 0&&(r=new fm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=e,t[e]=r),r},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,r=t.__cacheIndex,n=--this._nActiveControlInterpolants,s=e[n];t.__cacheIndex=n,e[n]=t,s.__cacheIndex=r,e[r]=s},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var r=e||this._root,n=r.uuid,s=typeof t=="string"?ri.findByName(r,t):t,o=s!==null?s.uuid:t,a=this._actionsByClip[o],l=null;if(a!==void 0){var c=a.actionByRoot[n];if(c!==void 0)return c;l=a.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;var h=new eI(this,s,e);return this._bindAction(h,l),this._addInactiveAction(h,o,n),h},existingAction:function(t,e){var r=e||this._root,n=r.uuid,s=typeof t=="string"?ri.findByName(r,t):t,o=s?s.uuid:t,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[n]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var s=0;s!==e;++s)t[s].reset();for(var s=0;s!==n;++s)r[s].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,r=this._nActiveActions,n=this.time+=t,s=Math.sign(t),o=this._accuIndex^=1,a=0;a!==r;++a){var l=e[a];l._update(n,t,s,o)}for(var c=this._bindings,h=this._nActiveBindings,a=0;a!==h;++a)c[a].apply(o);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,r=t.uuid,n=this._actionsByClip,s=n[r];if(s!==void 0){for(var o=s.knownActions,a=0,l=o.length;a!==l;++a){var c=o[a];this._deactivateAction(c);var h=c._cacheIndex,f=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=h,e[h]=f,e.pop(),this._removeInactiveBindingsForAction(c)}delete n[r]}},uncacheRoot:function(t){var e=t.uuid,r=this._actionsByClip;for(var n in r){var s=r[n].actionByRoot,o=s[e];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,l=a[e];if(l!==void 0)for(var c in l){var h=l[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}},uncacheAction:function(t,e){var r=this.existingAction(t,e);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}});function vb(t){typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}vb.prototype.clone=function(){return new vb(this.value.clone===void 0?this.value:this.value.clone())};function tI(t,e,r){Yn.call(this,t,e),this.meshPerAttribute=r||1}tI.prototype=Object.assign(Object.create(Yn.prototype),{constructor:tI,isInstancedInterleavedBuffer:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}});function yb(t,e,r,n){this.ray=new sc(t,e),this.near=r||0,this.far=n||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function rI(t,e){return t.distance-e.distance}function _b(t,e,r,n){if(t.visible!==!1&&(t.raycast(e,r),n===!0))for(var s=t.children,o=0,a=s.length;o<a;o++)_b(s[o],e,r,!0)}Object.assign(yb.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,r){var n=r||[];return _b(t,this,n,e),n.sort(rI),n},intersectObjects:function(t,e,r){var n=r||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var s=0,o=t.length;s<o;s++)_b(t[s],this,n,e);return n.sort(rI),n}});function Xa(t,e,r){return this.radius=t!==void 0?t:1,this.phi=e!==void 0?e:0,this.theta=r!==void 0?r:0,this}Object.assign(Xa.prototype,{set:function(t,e,r){return this.radius=t,this.phi=e,this.theta=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,r){return this.radius=Math.sqrt(t*t+e*e+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(Qe.clamp(e/this.radius,-1,1))),this}});function x9(t,e,r){return this.radius=t!==void 0?t:1,this.theta=e!==void 0?e:0,this.y=r!==void 0?r:0,this}Object.assign(x9.prototype,{set:function(t,e,r){return this.radius=t,this.theta=e,this.y=r,this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,r){return this.radius=Math.sqrt(t*t+r*r),this.theta=Math.atan2(t,r),this.y=e,this}});var iI=new he;function nI(t,e){this.min=t!==void 0?t:new he(1/0,1/0),this.max=e!==void 0?e:new he(-1/0,-1/0)}Object.assign(nI.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var r=iI.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new he),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new he),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return e===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new he),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return e===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new he),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){var e=iI.copy(t).clamp(this.min,this.max);return e.sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var sI=new F,mm=new F;function oI(t,e){this.start=t!==void 0?t:new F,this.end=e!==void 0?e:new F}Object.assign(oI.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return t===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new F),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return t===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),t=new F),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return e===void 0&&(console.warn("THREE.Line3: .at() target is now required"),e=new F),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){sI.subVectors(t,this.start),mm.subVectors(this.end,this.start);var r=mm.dot(mm),n=mm.dot(sI),s=n/r;return e&&(s=Qe.clamp(s,0,1)),s},closestPointToPoint:function(t,e,r){var n=this.closestPointToPointParameter(t,e);return r===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new F),this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}});function gm(t){ve.call(this),this.material=t,this.render=function(){}}gm.prototype=Object.create(ve.prototype);gm.prototype.constructor=gm;gm.prototype.isImmediateRenderObject=!0;var aI=new F;function Ju(t,e){ve.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var r=new Ie,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,o=1,a=32;s<a;s++,o++){var l=s/a*Math.PI*2,c=o/a*Math.PI*2;n.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Pe(n,3));var h=new Qt({fog:!1});this.cone=new rr(r,h),this.add(this.cone),this.update()}Ju.prototype=Object.create(ve.prototype);Ju.prototype.constructor=Ju;Ju.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};Ju.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),aI.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(aI),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Fo=new F,vm=new Ue,bb=new Ue;function lI(t){var e=[];t&&t.isBone&&e.push(t);for(var r=0;r<t.children.length;r++)e.push.apply(e,lI(t.children[r]));return e}function Za(t){for(var e=lI(t),r=new Ie,n=[],s=[],o=new Se(0,0,1),a=new Se(0,1,0),l=0;l<e.length;l++){var c=e[l];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Pe(n,3)),r.setAttribute("color",new Pe(s,3));var h=new Qt({vertexColors:wa,depthTest:!1,depthWrite:!1,transparent:!0});rr.call(this,r,h),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}Za.prototype=Object.create(rr.prototype);Za.prototype.constructor=Za;Za.prototype.updateMatrixWorld=function(t){var e=this.bones,r=this.geometry,n=r.getAttribute("position");bb.getInverse(this.root.matrixWorld);for(var s=0,o=0;s<e.length;s++){var a=e[s];a.parent&&a.parent.isBone&&(vm.multiplyMatrices(bb,a.matrixWorld),Fo.setFromMatrixPosition(vm),n.setXYZ(o,Fo.x,Fo.y,Fo.z),vm.multiplyMatrices(bb,a.parent.matrixWorld),Fo.setFromMatrixPosition(vm),n.setXYZ(o+1,Fo.x,Fo.y,Fo.z),o+=2)}r.getAttribute("position").needsUpdate=!0,ve.prototype.updateMatrixWorld.call(this,t)};function ef(t,e,r){this.light=t,this.light.updateMatrixWorld(),this.color=r;var n=new Ic(e,4,2),s=new lr({wireframe:!0,fog:!1});Xe.call(this,n,s),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}ef.prototype=Object.create(Xe.prototype);ef.prototype.constructor=ef;ef.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};ef.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var T9=new F,cI=new Se,hI=new Se;function tf(t,e,r){ve.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new Ac(e);n.rotateY(Math.PI*.5),this.material=new lr({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=wa);var s=n.getAttribute("position"),o=new Float32Array(s.count*3);n.setAttribute("color",new ze(o,3)),this.add(new Xe(n,this.material)),this.update()}tf.prototype=Object.create(ve.prototype);tf.prototype.constructor=tf;tf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};tf.prototype.update=function(){var t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");cI.copy(this.light.color),hI.copy(this.light.groundColor);for(var r=0,n=e.count;r<n;r++){var s=r<n/2?cI:hI;e.setXYZ(r,s.r,s.g,s.b)}e.needsUpdate=!0}t.lookAt(T9.setFromMatrixPosition(this.light.matrixWorld).negate())};function wb(t,e,r,n){t=t||10,e=e||10,r=new Se(r!==void 0?r:4473924),n=new Se(n!==void 0?n:8947848);for(var s=e/2,o=t/e,a=t/2,l=[],c=[],h=0,f=0,u=-a;h<=e;h++,u+=o){l.push(-a,0,u,a,0,u),l.push(u,0,-a,u,0,a);var m=h===s?r:n;m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3,m.toArray(c,f),f+=3}var d=new Ie;d.setAttribute("position",new Pe(l,3)),d.setAttribute("color",new Pe(c,3));var v=new Qt({vertexColors:wa});rr.call(this,d,v)}wb.prototype=Object.assign(Object.create(rr.prototype),{constructor:wb,copy:function(t){return rr.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return new this.constructor().copy(this)}});function Sb(t,e,r,n,s,o){t=t||10,e=e||16,r=r||8,n=n||64,s=new Se(s!==void 0?s:4473924),o=new Se(o!==void 0?o:8947848);var a=[],l=[],c,h,f,u,m,d,v;for(u=0;u<=e;u++)f=u/e*(Math.PI*2),c=Math.sin(f)*t,h=Math.cos(f)*t,a.push(0,0,0),a.push(c,0,h),v=u&1?s:o,l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b);for(u=0;u<=r;u++)for(v=u&1?s:o,d=t-t/r*u,m=0;m<n;m++)f=m/n*(Math.PI*2),c=Math.sin(f)*d,h=Math.cos(f)*d,a.push(c,0,h),l.push(v.r,v.g,v.b),f=(m+1)/n*(Math.PI*2),c=Math.sin(f)*d,h=Math.cos(f)*d,a.push(c,0,h),l.push(v.r,v.g,v.b);var p=new Ie;p.setAttribute("position",new Pe(a,3)),p.setAttribute("color",new Pe(l,3));var g=new Qt({vertexColors:wa});rr.call(this,p,g)}Sb.prototype=Object.create(rr.prototype);Sb.prototype.constructor=Sb;var uI=new F,ym=new F,fI=new F;function rf(t,e,r){ve.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,e===void 0&&(e=1);var n=new Ie;n.setAttribute("position",new Pe([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var s=new Qt({fog:!1});this.lightPlane=new gi(n,s),this.add(this.lightPlane),n=new Ie,n.setAttribute("position",new Pe([0,0,0,0,0,1],3)),this.targetLine=new gi(n,s),this.add(this.targetLine),this.update()}rf.prototype=Object.create(ve.prototype);rf.prototype.constructor=rf;rf.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};rf.prototype.update=function(){uI.setFromMatrixPosition(this.light.matrixWorld),ym.setFromMatrixPosition(this.light.target.matrixWorld),fI.subVectors(ym,uI),this.lightPlane.lookAt(ym),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ym),this.targetLine.scale.z=fI.length()};var _m=new F,ir=new Ps;function bm(t){var e=new Ie,r=new Qt({color:16777215,vertexColors:v$}),n=[],s=[],o={},a=new Se(16755200),l=new Se(16711680),c=new Se(43775),h=new Se(16777215),f=new Se(3355443);u("n1","n2",a),u("n2","n4",a),u("n4","n3",a),u("n3","n1",a),u("f1","f2",a),u("f2","f4",a),u("f4","f3",a),u("f3","f1",a),u("n1","f1",a),u("n2","f2",a),u("n3","f3",a),u("n4","f4",a),u("p","n1",l),u("p","n2",l),u("p","n3",l),u("p","n4",l),u("u1","u2",c),u("u2","u3",c),u("u3","u1",c),u("c","t",h),u("p","c",f),u("cn1","cn2",f),u("cn3","cn4",f),u("cf1","cf2",f),u("cf3","cf4",f);function u(d,v,p){m(d,p),m(v,p)}function m(d,v){n.push(0,0,0),s.push(v.r,v.g,v.b),o[d]===void 0&&(o[d]=[]),o[d].push(n.length/3-1)}e.setAttribute("position",new Pe(n,3)),e.setAttribute("color",new Pe(s,3)),rr.call(this,e,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}bm.prototype=Object.create(rr.prototype);bm.prototype.constructor=bm;bm.prototype.update=function(){var t=this.geometry,e=this.pointMap,r=1,n=1;ir.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),hr("c",e,t,ir,0,0,-1),hr("t",e,t,ir,0,0,1),hr("n1",e,t,ir,-r,-n,-1),hr("n2",e,t,ir,r,-n,-1),hr("n3",e,t,ir,-r,n,-1),hr("n4",e,t,ir,r,n,-1),hr("f1",e,t,ir,-r,-n,1),hr("f2",e,t,ir,r,-n,1),hr("f3",e,t,ir,-r,n,1),hr("f4",e,t,ir,r,n,1),hr("u1",e,t,ir,r*.7,n*1.1,-1),hr("u2",e,t,ir,-r*.7,n*1.1,-1),hr("u3",e,t,ir,0,n*2,-1),hr("cf1",e,t,ir,-r,0,1),hr("cf2",e,t,ir,r,0,1),hr("cf3",e,t,ir,0,-n,1),hr("cf4",e,t,ir,0,n,1),hr("cn1",e,t,ir,-r,0,-1),hr("cn2",e,t,ir,r,0,-1),hr("cn3",e,t,ir,0,-n,-1),hr("cn4",e,t,ir,0,n,-1),t.getAttribute("position").needsUpdate=!0};function hr(t,e,r,n,s,o,a){_m.set(s,o,a).unproject(n);var l=e[t];if(l!==void 0)for(var c=r.getAttribute("position"),h=0,f=l.length;h<f;h++)c.setXYZ(l[h],_m.x,_m.y,_m.z)}var wm=new Hr;function Qa(t,e){this.object=t,e===void 0&&(e=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(8*3),s=new Ie;s.setIndex(new ze(r,1)),s.setAttribute("position",new ze(n,3)),rr.call(this,s,new Qt({color:e})),this.matrixAutoUpdate=!1,this.update()}Qa.prototype=Object.create(rr.prototype);Qa.prototype.constructor=Qa;Qa.prototype.update=function(t){if(t!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&wm.setFromObject(this.object),!wm.isEmpty()){var e=wm.min,r=wm.max,n=this.geometry.attributes.position,s=n.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=e.x,s[4]=r.y,s[5]=r.z,s[6]=e.x,s[7]=e.y,s[8]=r.z,s[9]=r.x,s[10]=e.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=e.z,s[15]=e.x,s[16]=r.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=r.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}};Qa.prototype.setFromObject=function(t){return this.object=t,this.update(),this};Qa.prototype.copy=function(t){return rr.prototype.copy.call(this,t),this.object=t.object,this};Qa.prototype.clone=function(){return new this.constructor().copy(this)};function Sm(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ie;s.setIndex(new ze(r,1)),s.setAttribute("position",new Pe(n,3)),rr.call(this,s,new Qt({color:e})),this.geometry.computeBoundingSphere()}Sm.prototype=Object.create(rr.prototype);Sm.prototype.constructor=Sm;Sm.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),ve.prototype.updateMatrixWorld.call(this,t))};function Em(t,e,r){this.type="PlaneHelper",this.plane=t,this.size=e===void 0?1:e;var n=r!==void 0?r:16776960,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new Ie;o.setAttribute("position",new Pe(s,3)),o.computeBoundingSphere(),gi.call(this,o,new Qt({color:n}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],l=new Ie;l.setAttribute("position",new Pe(a,3)),l.computeBoundingSphere(),this.add(new Xe(l,new lr({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}Em.prototype=Object.create(gi.prototype);Em.prototype.constructor=Em;Em.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?tr:bn,this.lookAt(this.plane.normal),ve.prototype.updateMatrixWorld.call(this,t)};var dI=new F,xm,Eb;function No(t,e,r,n,s,o){ve.call(this),t===void 0&&(t=new F(0,0,1)),e===void 0&&(e=new F(0,0,0)),r===void 0&&(r=1),n===void 0&&(n=16776960),s===void 0&&(s=.2*r),o===void 0&&(o=.2*s),xm===void 0&&(xm=new Ie,xm.setAttribute("position",new Pe([0,0,0,0,1,0],3)),Eb=new Po(0,.5,1,5,1),Eb.translate(0,-.5,0)),this.position.copy(e),this.line=new gi(xm,new Qt({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Xe(Eb,new lr({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(r,s,o)}No.prototype=Object.create(ve.prototype);No.prototype.constructor=No;No.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{dI.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(dI,e)}};No.prototype.setLength=function(t,e,r){e===void 0&&(e=.2*t),r===void 0&&(r=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(r,e,r),this.cone.position.y=t,this.cone.updateMatrix()};No.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)};No.prototype.copy=function(t){return ve.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this};No.prototype.clone=function(){return new this.constructor().copy(this)};function xb(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new Ie;n.setAttribute("position",new Pe(e,3)),n.setAttribute("color",new Pe(r,3));var s=new Qt({vertexColors:wa});rr.call(this,n,s)}xb.prototype=Object.create(rr.prototype);xb.prototype.constructor=xb;var zc=4,ko=8,rs=Math.pow(2,ko),pI=[.125,.215,.35,.446,.526,.582],mI=ko-zc+1+pI.length,Wc=20,is={[Vr]:0,[Zl]:1,[Ta]:2,[EC]:3,[xC]:4,[TC]:5,[Ql]:6},Tb=new Tn,Tm=P9(Wc),Vo=null,Bo=null,{_lodPlanes:nf,_sizeLods:gI,_sigmas:Am}=A9(),Mm=null,Dt=null,Ab=null,Ka=(1+Math.sqrt(5))/2,Gc=1/Ka,vI=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,Ka,Gc),new F(0,Ka,-Gc),new F(Gc,0,Ka),new F(-Gc,0,Ka),new F(Ka,Gc,0),new F(-Ka,Gc,0)];function Cm(t){Dt=t,Mb(Tm)}Cm.prototype={constructor:Cm,fromScene:function(t,e=0,r=.1,n=100){Ab=Dt.getRenderTarget();var s=yI();return M9(t,r,n,s),e>0&&SI(s,0,0,e),wI(s),_I(s),s},fromEquirectangular:function(t){return t.magFilter=It,t.minFilter=It,t.generateMipmaps=!1,this.fromCubemap(t)},fromCubemap:function(t){Ab=Dt.getRenderTarget();var e=yI(t);return C9(t,e),wI(e),_I(e),e},compileCubemapShader:function(){Bo==null&&(Bo=TI(),Mb(Bo))},compileEquirectangularShader:function(){Vo==null&&(Vo=xI(),Mb(Vo))},dispose:function(){Tm.dispose(),Bo!=null&&Bo.dispose(),Vo!=null&&Vo.dispose();for(var t=0;t<nf.length;t++)nf[t].dispose()}};function A9(){for(var t=[],e=[],r=[],n=ko,s=0;s<mI;s++){var o=Math.pow(2,n);e.push(o);var a=1/o;s>ko-zc?a=pI[s-ko+zc-1]:s==0&&(a=0),r.push(a);for(var l=1/(o-1),c=-l/2,h=1+l/2,f=[c,c,h,c,h,h,c,c,h,h,c,h],u=6,m=6,d=3,v=2,p=1,g=new Float32Array(d*m*u),y=new Float32Array(v*m*u),_=new Float32Array(p*m*u),b=0;b<u;b++){var w=b%3*2/3-1,S=b>2?0:-1,E=[w,S,0,w+2/3,S,0,w+2/3,S+1,0,w,S,0,w+2/3,S+1,0,w,S+1,0];g.set(E,d*m*b),y.set(f,v*m*b);var x=[b,b,b,b,b,b];_.set(x,p*m*b)}var T=new Ie;T.setAttribute("position",new ze(g,d)),T.setAttribute("uv",new ze(y,v)),T.setAttribute("faceIndex",new ze(_,p)),t.push(T),n>zc&&n--}return{_lodPlanes:t,_sizeLods:e,_sigmas:r}}function yI(t){var e={magFilter:It,minFilter:It,generateMipmaps:!1,type:t?t.type:Ss,format:t?t.format:e0,encoding:t?t.encoding:Ta,depthBuffer:!1,stencilBuffer:!1},r=bI(e);return r.depthBuffer=!t,Mm=bI(e),r}function _I(t){Mm.dispose(),Dt.setRenderTarget(Ab),t.scissorTest=!1,t.setSize(t.width,t.height)}function M9(t,e,r,n){var s=90,o=1,a=new Bt(s,o,e,r),l=[1,1,1,1,-1,1],c=[1,1,-1,-1,-1,1],h=Dt.outputEncoding,f=Dt.toneMapping,u=Dt.toneMappingExposure,m=Dt.getClearColor(),d=Dt.getClearAlpha();Dt.toneMapping=j_,Dt.toneMappingExposure=1,Dt.outputEncoding=Vr,t.scale.z*=-1;var v=t.background;if(v&&v.isColor){v.convertSRGBToLinear();var p=Math.max(v.r,v.g,v.b),g=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);v=v.multiplyScalar(Math.pow(2,-g));var y=(g+128)/255;Dt.setClearColor(v,y),t.background=null}for(var _=0;_<6;_++){var b=_%3;b==0?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):b==1?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_])),Cb(n,b*rs,_>2?rs:0,rs,rs),Dt.setRenderTarget(n),Dt.render(t,a)}Dt.toneMapping=f,Dt.toneMappingExposure=u,Dt.outputEncoding=h,Dt.setClearColor(m,d),t.scale.z*=-1}function C9(t,e){var r=new fr;t.isCubeTexture?Bo==null&&(Bo=TI()):Vo==null&&(Vo=xI());var n=t.isCubeTexture?Bo:Vo;r.add(new Xe(nf[0],n));var s=n.uniforms;s.envMap.value=t,t.isCubeTexture||s.texelSize.value.set(1/t.image.width,1/t.image.height),s.inputEncoding.value=is[t.encoding],s.outputEncoding.value=is[t.encoding],Cb(e,0,0,3*rs,2*rs),Dt.setRenderTarget(e),Dt.render(r,Tb)}function Mb(t){var e=new fr;e.add(new Xe(nf[0],t)),Dt.compile(e,Tb)}function bI(t){var e=new ur(3*rs,3*rs,t);return e.texture.mapping=au,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Cb(t,e,r,n,s){t.viewport.set(e,r,n,s),t.scissor.set(e,r,n,s)}function wI(t){var e=Dt.autoClear;Dt.autoClear=!1;for(var r=1;r<mI;r++){var n=Math.sqrt(Am[r]*Am[r]-Am[r-1]*Am[r-1]),s=vI[(r-1)%vI.length];SI(t,r-1,r,n,s)}Dt.autoClear=e}function SI(t,e,r,n,s){EI(t,Mm,e,r,n,"latitudinal",s),EI(Mm,t,r,r,n,"longitudinal",s)}function EI(t,e,r,n,s,o,a){o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var l=3,c=new fr;c.add(new Xe(nf[n],Tm));var h=Tm.uniforms,f=gI[r]-1,u=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Wc-1),m=s/u,d=isFinite(s)?1+Math.floor(l*m):Wc;d>Wc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${d} samples when the maximum is set to ${Wc}`);for(var v=[],p=0,g=0;g<Wc;++g){var b=g/m,y=Math.exp(-b*b/2);v.push(y),g==0?p+=y:g<d&&(p+=2*y)}for(var g=0;g<v.length;g++)v[g]=v[g]/p;h.envMap.value=t.texture,h.samples.value=d,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a),h.dTheta.value=u,h.mipInt.value=ko-r,h.inputEncoding.value=is[t.texture.encoding],h.outputEncoding.value=is[t.texture.encoding];var _=gI[n],b=3*Math.max(0,rs-2*_),w=(n===0?0:2*rs)+2*_*(n>ko-zc?n-ko+zc:0);Cb(e,b,w,3*_,2*_),Dt.setRenderTarget(e),Dt.render(c,Tb)}function P9(t){var e=new Float32Array(t),r=new F(0,1,0),n=new Xn({defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:is[Vr]},outputEncoding:{value:is[Vr]}},vertexShader:Pb(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${Ib()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

void main() {
	gl_FragColor = vec4(0.0);
	for (int i = 0; i < n; i++) {
		if (i >= samples)
			break;
		for (int dir = -1; dir < 2; dir += 2) {
			if (i == 0 && dir == 1)
				continue;
			vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
			if (all(equal(axis, vec3(0.0))))
				axis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);
			axis = normalize(axis);
			float theta = dTheta * float(dir * i);
			float cosTheta = cos(theta);
			// Rodrigues' axis-angle rotation
			vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross(axis, vOutputDirection) * sin(theta)
					+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
			gl_FragColor.rgb +=
					weights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);
		}
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:qn,depthTest:!1,depthWrite:!1});return n.type="SphericalGaussianBlur",n}function xI(){var t=new he(1,1),e=new Xn({uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:is[Vr]},outputEncoding:{value:is[Vr]}},vertexShader:Pb(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${Ib()}

#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv;
	uv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;
	uv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:qn,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function TI(){var t=new Xn({uniforms:{envMap:{value:null},inputEncoding:{value:is[Vr]},outputEncoding:{value:is[Vr]}},vertexShader:Pb(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${Ib()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:qn,depthTest:!1,depthWrite:!1});return t.type="CubemapToCubeUV",t}function Pb(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx;
		direction.z *= -1.0;
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.z *= -1.0;
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.x *= -1.0;
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.y *= -1.0;
	} else if (face == 5.0) {
		direction.xz *= -1.0;
	}
	return direction;
}
void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function Ib(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}We.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(We.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t};Object.assign(Oo.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Ke,r=0,n=t.length;r<n;r++){var s=t[r];e.vertices.push(new F(s.x,s.y,s.z||0))}return e}});Object.assign(es.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}});function I9(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ii.call(this,t),this.type="catmullrom",this.closed=!0}I9.prototype=Object.create(ii.prototype);function R9(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ii.call(this,t),this.type="catmullrom"}R9.prototype=Object.create(ii.prototype);function AI(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ii.call(this,t),this.type="catmullrom"}AI.prototype=Object.create(ii.prototype);Object.assign(AI.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});wb.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Za.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(bt.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Do.extractUrlBase(t)}});bt.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(fb.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}});Object.assign(nI.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}});Object.assign(Hr.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}});bu.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)};oI.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)};Object.assign(Qe,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Qe.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Qe.ceilPowerOfTwo(t)}});Object.assign(Br.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Ue.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new F().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,r,n,s,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,r,s,o)}});Gn.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)};Ur.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)};Object.assign(sc.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}});Object.assign(Ir.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}});Object.assign(Ir,{barycoordFromPoint:function(t,e,r,n,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ir.getBarycoord(t,e,r,n,s)},normal:function(t,e,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ir.getNormal(t,e,r,n)}});Object.assign(qa.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Pc(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Lc(this,t)}});Object.assign(he.prototype,{fromAttribute:function(t,e,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(F.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Ot.prototype,{fromAttribute:function(t,e,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Ke.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.assign(ve.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(ve.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Xe.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Xe.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),w5},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Bp.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Cu.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});xc.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(We.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}});Bt.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(t)};Object.defineProperties(zt.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}});Object.defineProperties(ze.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===uu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(uu)}}});Object.assign(ze.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?uu:gp),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Ie.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new ze(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)},addDrawCall:function(t,e,r){r!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(Ie.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(Yn.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===uu},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}});Object.assign(Yn.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?uu:gp),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Ls.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(vb.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Ge.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Se}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===tC}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}});Object.defineProperties(Ba.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(zr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}});Object.assign(Dp.prototype,{clearTarget:function(t,e,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,r,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(Dp.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?Zl:Vr}}});Object.defineProperties(cP.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(ur.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}});Object.defineProperties(Ku.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,r=new db;return r.load(t,function(n){e.setBuffer(n)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});QP.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};_u.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};Aa.crossOrigin=void 0;Aa.loadTexture=function(t,e,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var s=new Ha;s.setCrossOrigin(this.crossOrigin);var o=s.load(t,r,void 0,n);return e&&(o.mapping=e),o};Aa.loadTextureCube=function(t,e,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var s=new Y0;s.setCrossOrigin(this.crossOrigin);var o=s.load(t,r,void 0,n);return e&&(o.mapping=e),o};Aa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Aa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:p$}}));var vi=function(t){bt.call(this,t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};vi.prototype=Object.assign(Object.create(bt.prototype),{constructor:vi,setDecoderPath:function(t){return this.decoderPath=t,this},setDecoderConfig:function(t){return this.decoderConfig=t,this},setWorkerLimit:function(t){return this.workerLimit=t,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(t,e,r,n){var s=new Gr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),this.crossOrigin==="use-credentials"&&s.setWithCredentials(!0),s.load(t,o=>{var a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(e).catch(n)},r,n)},decodeDracoFile:function(t,e,r,n){var s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(t,s).then(e)},decodeGeometry:function(t,e){for(var r in e.attributeTypes){var n=e.attributeTypes[r];n.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[r]=n.name)}var s=JSON.stringify(e);if(vi.taskCache.has(t)){var o=vi.taskCache.get(t);if(o.key===s)return o.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var a,l=this.workerNextTaskID++,c=t.byteLength,h=this._getWorker(l,c).then(f=>(a=f,new Promise((u,m)=>{a._callbacks[l]={resolve:u,reject:m},a.postMessage({type:"decode",id:l,taskConfig:e,buffer:t},[t])}))).then(f=>this._createGeometry(f.geometry));return h.finally(()=>{a&&l&&this._releaseTask(a,l)}),vi.taskCache.set(t,{key:s,promise:h}),h},_createGeometry:function(t){var e=new Ie;t.index&&e.setIndex(new ze(t.index.array,1));for(var r=0;r<t.attributes.length;r++){var n=t.attributes[r],s=n.name,o=n.array,a=n.itemSize;e.setAttribute(s,new ze(o,a))}return e},_loadLibrary:function(t,e){var r=new Gr(this.manager);return r.setPath(this.decoderPath),r.setResponseType(e),new Promise((n,s)=>{r.load(t,n,void 0,s)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(r=>{var n=r[0];t||(this.decoderConfig.wasmBinary=r[1]);var s=vi.DRACOWorker.toString(),o=["/* draco decoder */",n,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending},_getWorker:function(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){var r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){var o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(n,s){return n._taskLoad>s._taskLoad?-1:1});var r=this.workerPool[this.workerPool.length-1];return r._taskCosts[t]=e,r._taskLoad+=e,r})},_releaseTask:function(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]},debug:function(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))},dispose:function(){for(var t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}});vi.DRACOWorker=function(){var t,e;onmessage=function(s){var o=s.data;switch(o.type){case"init":t=o.decoderConfig,e=new Promise(function(c){t.onModuleLoaded=function(h){c({draco:h})},DracoDecoderModule(t)});break;case"decode":var a=o.buffer,l=o.taskConfig;e.then(c=>{var h=c.draco,f=new h.Decoder,u=new h.DecoderBuffer;u.Init(new Int8Array(a),a.byteLength);try{var m=r(h,f,u,l),d=m.attributes.map(v=>v.array.buffer);m.index&&d.push(m.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:m},d)}catch(v){console.error(v),self.postMessage({type:"error",id:o.id,error:v.message})}finally{h.destroy(u),h.destroy(f)}});break}};function r(s,o,a,l){var c=l.attributeIDs,h=l.attributeTypes,f,u,m=o.GetEncodedGeometryType(a);if(m===s.TRIANGULAR_MESH)f=new s.Mesh,u=o.DecodeBufferToMesh(a,f);else if(m===s.POINT_CLOUD)f=new s.PointCloud,u=o.DecodeBufferToPointCloud(a,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());var d={index:null,attributes:[]};for(var v in c){var p=self[h[v]],g,y;if(l.useUniqueIDs)y=c[v],g=o.GetAttributeByUniqueId(f,y);else{if(y=o.GetAttributeId(f,s[c[v]]),y===-1)continue;g=o.GetAttribute(f,y)}d.attributes.push(n(s,o,f,v,p,g))}if(m===s.TRIANGULAR_MESH){for(var _=f.num_faces(),b=_*3,w=new Uint32Array(b),S=new s.DracoInt32Array,E=0;E<_;++E){o.GetFaceFromMesh(f,E,S);for(var x=0;x<3;++x)w[E*3+x]=S.GetValue(x)}d.index={array:w,itemSize:1},s.destroy(S)}return s.destroy(f),d}function n(s,o,a,l,c,h){var f=h.num_components(),u=a.num_points(),m=u*f,d,v;switch(c){case Float32Array:d=new s.DracoFloat32Array,o.GetAttributeFloatForAllPoints(a,h,d),v=new Float32Array(m);break;case Int8Array:d=new s.DracoInt8Array,o.GetAttributeInt8ForAllPoints(a,h,d),v=new Int8Array(m);break;case Int16Array:d=new s.DracoInt16Array,o.GetAttributeInt16ForAllPoints(a,h,d),v=new Int16Array(m);break;case Int32Array:d=new s.DracoInt32Array,o.GetAttributeInt32ForAllPoints(a,h,d),v=new Int32Array(m);break;case Uint8Array:d=new s.DracoUInt8Array,o.GetAttributeUInt8ForAllPoints(a,h,d),v=new Uint8Array(m);break;case Uint16Array:d=new s.DracoUInt16Array,o.GetAttributeUInt16ForAllPoints(a,h,d),v=new Uint16Array(m);break;case Uint32Array:d=new s.DracoUInt32Array,o.GetAttributeUInt32ForAllPoints(a,h,d),v=new Uint32Array(m);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var p=0;p<m;p++)v[p]=d.GetValue(p);return s.destroy(d),{name:l,array:v,itemSize:f}}};vi.taskCache=new WeakMap;vi.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")};vi.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")};vi.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")};vi.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var MI=function(){function t(N){bt.call(this,N),this.dracoLoader=null,this.ddsLoader=null}t.prototype=Object.assign(Object.create(bt.prototype),{constructor:t,load:function(N,M,$,W){var H=this,ee;this.resourcePath!==""?ee=this.resourcePath:this.path!==""?ee=this.path:ee=Do.extractUrlBase(N),H.manager.itemStart(N);var Y=function(ne){W?W(ne):console.error(ne),H.manager.itemError(N),H.manager.itemEnd(N)},K=new Gr(H.manager);K.setPath(this.path),K.setResponseType("arraybuffer"),H.crossOrigin==="use-credentials"&&K.setWithCredentials(!0),K.load(N,function(ne){try{H.parse(ne,ee,function(te){M(te),H.manager.itemEnd(N)},Y)}catch(te){Y(te)}},$,Y)},setDRACOLoader:function(N){return this.dracoLoader=N,this},setDDSLoader:function(N){return this.ddsLoader=N,this},parse:function(N,M,$,W){var H,ee={};if(typeof N=="string")H=N;else{var Y=Do.decodeText(new Uint8Array(N,0,4));if(Y===a){try{ee[r.KHR_BINARY_GLTF]=new h(N)}catch(pe){W&&W(pe);return}H=ee[r.KHR_BINARY_GLTF].content}else H=Do.decodeText(new Uint8Array(N))}var K=JSON.parse(H);if(K.asset===void 0||K.asset.version[0]<2){W&&W(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}if(K.extensionsUsed)for(var ne=0;ne<K.extensionsUsed.length;++ne){var te=K.extensionsUsed[ne],ae=K.extensionsRequired||[];switch(te){case r.KHR_LIGHTS_PUNCTUAL:ee[te]=new s(K);break;case r.KHR_MATERIALS_UNLIT:ee[te]=new o;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:ee[te]=new d;break;case r.KHR_DRACO_MESH_COMPRESSION:ee[te]=new f(K,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:ee[te]=new n(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:ee[te]=new u;break;case r.KHR_MESH_QUANTIZATION:ee[te]=new v;break;default:ae.indexOf(te)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+te+'".')}}var ie=new U(K,ee,{path:M||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager});ie.parse($,W)}});function e(){var N={};return{get:function(M){return N[M]},add:function(M,$){N[M]=$},remove:function(M){delete N[M]},removeAll:function(){N={}}}}var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(N){if(!N)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=N}function s(N){this.name=r.KHR_LIGHTS_PUNCTUAL;var M=N.extensions&&N.extensions[r.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=M.lights||[]}s.prototype.loadLight=function(N){var M=this.lightDefs[N],$,W=new Se(16777215);M.color!==void 0&&W.fromArray(M.color);var H=M.range!==void 0?M.range:0;switch(M.type){case"directional":$=new Wa(W),$.target.position.set(0,0,-1),$.add($.target);break;case"point":$=new za(W),$.distance=H;break;case"spot":$=new Qu(W),$.distance=H,M.spot=M.spot||{},M.spot.innerConeAngle=M.spot.innerConeAngle!==void 0?M.spot.innerConeAngle:0,M.spot.outerConeAngle=M.spot.outerConeAngle!==void 0?M.spot.outerConeAngle:Math.PI/4,$.angle=M.spot.outerConeAngle,$.penumbra=1-M.spot.innerConeAngle/M.spot.outerConeAngle,$.target.position.set(0,0,-1),$.add($.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+M.type+'".')}return $.position.set(0,0,0),$.decay=2,M.intensity!==void 0&&($.intensity=M.intensity),$.name=M.name||"light_"+N,Promise.resolve($)};function o(){this.name=r.KHR_MATERIALS_UNLIT}o.prototype.getMaterialType=function(){return lr},o.prototype.extendParams=function(N,M,$){var W=[];N.color=new Se(1,1,1),N.opacity=1;var H=M.pbrMetallicRoughness;if(H){if(Array.isArray(H.baseColorFactor)){var ee=H.baseColorFactor;N.color.fromArray(ee),N.opacity=ee[3]}H.baseColorTexture!==void 0&&W.push($.assignTexture(N,"map",H.baseColorTexture))}return Promise.all(W)};var a="glTF",l=12,c={JSON:1313821514,BIN:5130562};function h(N){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var M=new DataView(N,0,l);if(this.header={magic:Do.decodeText(new Uint8Array(N.slice(0,4))),version:M.getUint32(4,!0),length:M.getUint32(8,!0)},this.header.magic!==a)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var $=new DataView(N,l),W=0;W<$.byteLength;){var H=$.getUint32(W,!0);W+=4;var ee=$.getUint32(W,!0);if(W+=4,ee===c.JSON){var Y=new Uint8Array(N,l+W,H);this.content=Do.decodeText(Y)}else if(ee===c.BIN){var K=l+W;this.body=N.slice(K,K+H)}W+=H}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function f(N,M){if(!M)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=N,this.dracoLoader=M,this.dracoLoader.preload()}f.prototype.decodePrimitive=function(N,M){var $=this.json,W=this.dracoLoader,H=N.extensions[this.name].bufferView,ee=N.extensions[this.name].attributes,Y={},K={},ne={};for(var te in ee){var ae=S[te]||te.toLowerCase();Y[ae]=ee[te]}for(te in N.attributes){var ae=S[te]||te.toLowerCase();if(ee[te]!==void 0){var ie=$.accessors[N.attributes[te]],pe=y[ie.componentType];ne[ae]=pe,K[ae]=ie.normalized===!0}}return M.getDependency("bufferView",H).then(function(me){return new Promise(function(_e){W.decodeDracoFile(me,function(B){for(var G in B.attributes){var fe=B.attributes[G],ue=K[G];ue!==void 0&&(fe.normalized=ue)}_e(B)},Y,ne)})})};function u(){this.name=r.KHR_TEXTURE_TRANSFORM}u.prototype.extendTexture=function(N,M){return N=N.clone(),M.offset!==void 0&&N.offset.fromArray(M.offset),M.rotation!==void 0&&(N.rotation=M.rotation),M.scale!==void 0&&N.repeat.fromArray(M.scale),M.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),N.needsUpdate=!0,N};function m(N){Er.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var M=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),$=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),W=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),H=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),ee=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join(`
`),Y={specular:{value:new Se().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=Y,this.onBeforeCompile=function(K){for(var ne in Y)K.uniforms[ne]=Y[ne];K.fragmentShader=K.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),K.fragmentShader=K.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),K.fragmentShader=K.fragmentShader.replace("#include <roughnessmap_pars_fragment>",M),K.fragmentShader=K.fragmentShader.replace("#include <metalnessmap_pars_fragment>",$),K.fragmentShader=K.fragmentShader.replace("#include <roughnessmap_fragment>",W),K.fragmentShader=K.fragmentShader.replace("#include <metalnessmap_fragment>",H),K.fragmentShader=K.fragmentShader.replace("#include <lights_physical_fragment>",ee)},Object.defineProperties(this,{specular:{get:function(){return Y.specular.value},set:function(K){Y.specular.value=K}},specularMap:{get:function(){return Y.specularMap.value},set:function(K){Y.specularMap.value=K}},glossiness:{get:function(){return Y.glossiness.value},set:function(K){Y.glossiness.value=K}},glossinessMap:{get:function(){return Y.glossinessMap.value},set:function(K){Y.glossinessMap.value=K,K?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(N)}m.prototype=Object.create(Er.prototype),m.prototype.constructor=m,m.prototype.copy=function(N){return Er.prototype.copy.call(this,N),this.specularMap=N.specularMap,this.specular.copy(N.specular),this.glossinessMap=N.glossinessMap,this.glossiness=N.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function d(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return m},extendParams:function(N,M,$){var W=M.extensions[this.name];N.color=new Se(1,1,1),N.opacity=1;var H=[];if(Array.isArray(W.diffuseFactor)){var ee=W.diffuseFactor;N.color.fromArray(ee),N.opacity=ee[3]}if(W.diffuseTexture!==void 0&&H.push($.assignTexture(N,"map",W.diffuseTexture)),N.emissive=new Se(0,0,0),N.glossiness=W.glossinessFactor!==void 0?W.glossinessFactor:1,N.specular=new Se(1,1,1),Array.isArray(W.specularFactor)&&N.specular.fromArray(W.specularFactor),W.specularGlossinessTexture!==void 0){var Y=W.specularGlossinessTexture;H.push($.assignTexture(N,"glossinessMap",Y)),H.push($.assignTexture(N,"specularMap",Y))}return Promise.all(H)},createMaterial:function(N){var M=new m(N);return M.fog=!0,M.color=N.color,M.map=N.map===void 0?null:N.map,M.lightMap=null,M.lightMapIntensity=1,M.aoMap=N.aoMap===void 0?null:N.aoMap,M.aoMapIntensity=1,M.emissive=N.emissive,M.emissiveIntensity=1,M.emissiveMap=N.emissiveMap===void 0?null:N.emissiveMap,M.bumpMap=N.bumpMap===void 0?null:N.bumpMap,M.bumpScale=1,M.normalMap=N.normalMap===void 0?null:N.normalMap,M.normalMapType=bo,N.normalScale&&(M.normalScale=N.normalScale),M.displacementMap=null,M.displacementScale=1,M.displacementBias=0,M.specularMap=N.specularMap===void 0?null:N.specularMap,M.specular=N.specular,M.glossinessMap=N.glossinessMap===void 0?null:N.glossinessMap,M.glossiness=N.glossiness,M.alphaMap=null,M.envMap=N.envMap===void 0?null:N.envMap,M.envMapIntensity=1,M.refractionRatio=.98,M}}}function v(){this.name=r.KHR_MESH_QUANTIZATION}function p(N,M,$,W){ti.call(this,N,M,$,W)}p.prototype=Object.create(ti.prototype),p.prototype.constructor=p,p.prototype.copySampleValue_=function(N){for(var M=this.resultBuffer,$=this.sampleValues,W=this.valueSize,H=N*W*3+W,ee=0;ee!==W;ee++)M[ee]=$[H+ee];return M},p.prototype.beforeStart_=p.prototype.copySampleValue_,p.prototype.afterEnd_=p.prototype.copySampleValue_,p.prototype.interpolate_=function(N,M,$,W){for(var H=this.resultBuffer,ee=this.sampleValues,Y=this.valueSize,K=Y*2,ne=Y*3,te=W-M,ae=($-M)/te,ie=ae*ae,pe=ie*ae,me=N*ne,_e=me-ne,B=-2*pe+3*ie,G=pe-ie,fe=1-B,ue=G-ie+ae,Ne=0;Ne!==Y;Ne++){var Re=ee[_e+Ne+Y],xe=ee[_e+Ne+K]*te,Ce=ee[me+Ne+Y],Ve=ee[me+Ne]*te;H[Ne]=fe*Re+ue*xe+B*Ce+G*Ve}return H};var g={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},y={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_={9728:It,9729:Vt,9984:lu,9985:fp,9986:cu,9987:Sa},b={33071:kr,33648:Gl,10497:_o},w={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},S={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},E={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},x={CUBICSPLINE:void 0,LINEAR:xa,STEP:jl},T={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"},A={"image/png":Ki,"image/jpeg":Oi};function P(N,M){return typeof N!="string"||N===""?"":(/^https?:\/\//i.test(M)&&/^\//.test(N)&&(M=M.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(N)||/^data:.*,.*$/i.test(N)||/^blob:.*$/i.test(N)?N:M+N)}function z(N){return N.DefaultMaterial===void 0&&(N.DefaultMaterial=new Er({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:bn})),N.DefaultMaterial}function V(N,M,$){for(var W in $.extensions)N[W]===void 0&&(M.userData.gltfExtensions=M.userData.gltfExtensions||{},M.userData.gltfExtensions[W]=$.extensions[W])}function L(N,M){M.extras!==void 0&&(typeof M.extras=="object"?Object.assign(N.userData,M.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+M.extras))}function O(N,M,$){for(var W=!1,H=!1,ee=0,Y=M.length;ee<Y;ee++){var K=M[ee];if(K.POSITION!==void 0&&(W=!0),K.NORMAL!==void 0&&(H=!0),W&&H)break}if(!W&&!H)return Promise.resolve(N);for(var ne=[],te=[],ee=0,Y=M.length;ee<Y;ee++){var K=M[ee];if(W){var ae=K.POSITION!==void 0?$.getDependency("accessor",K.POSITION):N.attributes.position;ne.push(ae)}if(H){var ae=K.NORMAL!==void 0?$.getDependency("accessor",K.NORMAL):N.attributes.normal;te.push(ae)}}return Promise.all([Promise.all(ne),Promise.all(te)]).then(function(ie){var pe=ie[0],me=ie[1];return W&&(N.morphAttributes.position=pe),H&&(N.morphAttributes.normal=me),N.morphTargetsRelative=!0,N})}function k(N,M){if(N.updateMorphTargets(),M.weights!==void 0)for(var $=0,W=M.weights.length;$<W;$++)N.morphTargetInfluences[$]=M.weights[$];if(M.extras&&Array.isArray(M.extras.targetNames)){var H=M.extras.targetNames;if(N.morphTargetInfluences.length===H.length){N.morphTargetDictionary={};for(var $=0,W=H.length;$<W;$++)N.morphTargetDictionary[H[$]]=$}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function X(N){var M=N.extensions&&N.extensions[r.KHR_DRACO_MESH_COMPRESSION],$;return M?$="draco:"+M.bufferView+":"+M.indices+":"+R(M.attributes):$=N.indices+":"+R(N.attributes)+":"+N.mode,$}function R(N){for(var M="",$=Object.keys(N).sort(),W=0,H=$.length;W<H;W++)M+=$[W]+":"+N[$[W]]+";";return M}function U(N,M,$){this.json=N||{},this.extensions=M||{},this.options=$||{},this.cache=new e,this.primitiveCache={},this.textureLoader=new Ha(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Gr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}U.prototype.parse=function(N,M){var $=this,W=this.json,H=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(ee){var Y={scene:ee[0][W.scene||0],scenes:ee[0],animations:ee[1],cameras:ee[2],asset:W.asset,parser:$,userData:{}};V(H,Y,W),L(Y,W),N(Y)}).catch(M)},U.prototype.markDefs=function(){for(var N=this.json.nodes||[],M=this.json.skins||[],$=this.json.meshes||[],W={},H={},ee=0,Y=M.length;ee<Y;ee++)for(var K=M[ee].joints,ne=0,te=K.length;ne<te;ne++)N[K[ne]].isBone=!0;for(var ae=0,ie=N.length;ae<ie;ae++){var pe=N[ae];pe.mesh!==void 0&&(W[pe.mesh]===void 0&&(W[pe.mesh]=H[pe.mesh]=0),W[pe.mesh]++,pe.skin!==void 0&&($[pe.mesh].isSkinnedMesh=!0))}this.json.meshReferences=W,this.json.meshUses=H},U.prototype.getDependency=function(N,M){var $=N+":"+M,W=this.cache.get($);if(!W){switch(N){case"scene":W=this.loadScene(M);break;case"node":W=this.loadNode(M);break;case"mesh":W=this.loadMesh(M);break;case"accessor":W=this.loadAccessor(M);break;case"bufferView":W=this.loadBufferView(M);break;case"buffer":W=this.loadBuffer(M);break;case"material":W=this.loadMaterial(M);break;case"texture":W=this.loadTexture(M);break;case"skin":W=this.loadSkin(M);break;case"animation":W=this.loadAnimation(M);break;case"camera":W=this.loadCamera(M);break;case"light":W=this.extensions[r.KHR_LIGHTS_PUNCTUAL].loadLight(M);break;default:throw new Error("Unknown type: "+N)}this.cache.add($,W)}return W},U.prototype.getDependencies=function(N){var M=this.cache.get(N);if(!M){var $=this,W=this.json[N+(N==="mesh"?"es":"s")]||[];M=Promise.all(W.map(function(H,ee){return $.getDependency(N,ee)})),this.cache.add(N,M)}return M},U.prototype.loadBuffer=function(N){var M=this.json.buffers[N],$=this.fileLoader;if(M.type&&M.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+M.type+" buffer type is not supported.");if(M.uri===void 0&&N===0)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var W=this.options;return new Promise(function(H,ee){$.load(P(M.uri,W.path),H,void 0,function(){ee(new Error('THREE.GLTFLoader: Failed to load buffer "'+M.uri+'".'))})})},U.prototype.loadBufferView=function(N){var M=this.json.bufferViews[N];return this.getDependency("buffer",M.buffer).then(function($){var W=M.byteLength||0,H=M.byteOffset||0;return $.slice(H,H+W)})},U.prototype.loadAccessor=function(N){var M=this,$=this.json,W=this.json.accessors[N];if(W.bufferView===void 0&&W.sparse===void 0)return Promise.resolve(null);var H=[];return W.bufferView!==void 0?H.push(this.getDependency("bufferView",W.bufferView)):H.push(null),W.sparse!==void 0&&(H.push(this.getDependency("bufferView",W.sparse.indices.bufferView)),H.push(this.getDependency("bufferView",W.sparse.values.bufferView))),Promise.all(H).then(function(ee){var Y=ee[0],K=w[W.type],ne=y[W.componentType],te=ne.BYTES_PER_ELEMENT,ae=te*K,ie=W.byteOffset||0,pe=W.bufferView!==void 0?$.bufferViews[W.bufferView].byteStride:void 0,me=W.normalized===!0,_e,B;if(pe&&pe!==ae){var G=Math.floor(ie/pe),fe="InterleavedBuffer:"+W.bufferView+":"+W.componentType+":"+G+":"+W.count,ue=M.cache.get(fe);ue||(_e=new ne(Y,G*pe,W.count*pe/te),ue=new Yn(_e,pe/te),M.cache.add(fe,ue)),B=new _c(ue,K,ie%pe/te,me)}else Y===null?_e=new ne(W.count*K):_e=new ne(Y,ie,W.count*K),B=new ze(_e,K,me);if(W.sparse!==void 0){var Ne=w.SCALAR,Re=y[W.sparse.indices.componentType],xe=W.sparse.indices.byteOffset||0,Ce=W.sparse.values.byteOffset||0,Ve=new Re(ee[1],xe,W.sparse.count*Ne),Oe=new ne(ee[2],Ce,W.sparse.count*K);Y!==null&&(B=new ze(B.array.slice(),B.itemSize,B.normalized));for(var ge=0,Le=Ve.length;ge<Le;ge++){var we=Ve[ge];if(B.setX(we,Oe[ge*K]),K>=2&&B.setY(we,Oe[ge*K+1]),K>=3&&B.setZ(we,Oe[ge*K+2]),K>=4&&B.setW(we,Oe[ge*K+3]),K>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return B})},U.prototype.loadTexture=function(N){var M=this,$=this.json,W=this.options,H=this.textureLoader,ee=window.URL||window.webkitURL,Y=$.textures[N],K=Y.extensions||{},ne;K[r.MSFT_TEXTURE_DDS]?ne=$.images[K[r.MSFT_TEXTURE_DDS].source]:ne=$.images[Y.source];var te=ne.uri,ae=!1;return ne.bufferView!==void 0&&(te=M.getDependency("bufferView",ne.bufferView).then(function(ie){ae=!0;var pe=new Blob([ie],{type:ne.mimeType});return te=ee.createObjectURL(pe),te})),Promise.resolve(te).then(function(ie){var pe=W.manager.getHandler(ie);return pe||(pe=K[r.MSFT_TEXTURE_DDS]?M.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:H),new Promise(function(me,_e){pe.load(P(ie,W.path),me,void 0,_e)})}).then(function(ie){ae===!0&&ee.revokeObjectURL(te),ie.flipY=!1,Y.name!==void 0&&(ie.name=Y.name),ne.mimeType in A&&(ie.format=A[ne.mimeType]);var pe=$.samplers||{},me=pe[Y.sampler]||{};return ie.magFilter=_[me.magFilter]||Vt,ie.minFilter=_[me.minFilter]||Sa,ie.wrapS=b[me.wrapS]||_o,ie.wrapT=b[me.wrapT]||_o,ie})},U.prototype.assignTexture=function(N,M,$){var W=this;return this.getDependency("texture",$.index).then(function(H){if(!H.isCompressedTexture)switch(M){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":H.format=Oi;break}if($.texCoord!==void 0&&$.texCoord!=0&&!(M==="aoMap"&&$.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+$.texCoord+" for texture "+M+" not yet supported."),W.extensions[r.KHR_TEXTURE_TRANSFORM]){var ee=$.extensions!==void 0?$.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;ee&&(H=W.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(H,ee))}N[M]=H})},U.prototype.assignFinalMaterial=function(N){var M=N.geometry,$=N.material,W=this.extensions,H=M.attributes.tangent!==void 0,ee=M.attributes.color!==void 0,Y=M.attributes.normal===void 0,K=N.isSkinnedMesh===!0,ne=Object.keys(M.morphAttributes).length>0,te=ne&&M.morphAttributes.normal!==void 0;if(N.isPoints){var ae="PointsMaterial:"+$.uuid,ie=this.cache.get(ae);ie||(ie=new Rs,Ge.prototype.copy.call(ie,$),ie.color.copy($.color),ie.map=$.map,ie.sizeAttenuation=!1,this.cache.add(ae,ie)),$=ie}else if(N.isLine){var ae="LineBasicMaterial:"+$.uuid,pe=this.cache.get(ae);pe||(pe=new Qt,Ge.prototype.copy.call(pe,$),pe.color.copy($.color),this.cache.add(ae,pe)),$=pe}if(H||ee||Y||K||ne){var ae="ClonedMaterial:"+$.uuid+":";$.isGLTFSpecularGlossinessMaterial&&(ae+="specular-glossiness:"),K&&(ae+="skinning:"),H&&(ae+="vertex-tangents:"),ee&&(ae+="vertex-colors:"),Y&&(ae+="flat-shading:"),ne&&(ae+="morph-targets:"),te&&(ae+="morph-normals:");var me=this.cache.get(ae);me||(me=$.clone(),K&&(me.skinning=!0),H&&(me.vertexTangents=!0),ee&&(me.vertexColors=wa),Y&&(me.flatShading=!0),ne&&(me.morphTargets=!0),te&&(me.morphNormals=!0),this.cache.add(ae,me)),$=me}$.aoMap&&M.attributes.uv2===void 0&&M.attributes.uv!==void 0&&M.setAttribute("uv2",new ze(M.attributes.uv.array,2)),$.normalScale&&!H&&($.normalScale.y=-$.normalScale.y),N.material=$},U.prototype.loadMaterial=function(N){var M=this,$=this.json,W=this.extensions,H=$.materials[N],ee,Y={},K=H.extensions||{},ne=[];if(K[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var te=W[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];ee=te.getMaterialType(),ne.push(te.extendParams(Y,H,M))}else if(K[r.KHR_MATERIALS_UNLIT]){var ae=W[r.KHR_MATERIALS_UNLIT];ee=ae.getMaterialType(),ne.push(ae.extendParams(Y,H,M))}else{ee=Er;var ie=H.pbrMetallicRoughness||{};if(Y.color=new Se(1,1,1),Y.opacity=1,Array.isArray(ie.baseColorFactor)){var pe=ie.baseColorFactor;Y.color.fromArray(pe),Y.opacity=pe[3]}ie.baseColorTexture!==void 0&&ne.push(M.assignTexture(Y,"map",ie.baseColorTexture)),Y.metalness=ie.metallicFactor!==void 0?ie.metallicFactor:1,Y.roughness=ie.roughnessFactor!==void 0?ie.roughnessFactor:1,ie.metallicRoughnessTexture!==void 0&&(ne.push(M.assignTexture(Y,"metalnessMap",ie.metallicRoughnessTexture)),ne.push(M.assignTexture(Y,"roughnessMap",ie.metallicRoughnessTexture)))}H.doubleSided===!0&&(Y.side=yo);var me=H.alphaMode||T.OPAQUE;return me===T.BLEND?Y.transparent=!0:(Y.transparent=!1,me===T.MASK&&(Y.alphaTest=H.alphaCutoff!==void 0?H.alphaCutoff:.5)),H.normalTexture!==void 0&&ee!==lr&&(ne.push(M.assignTexture(Y,"normalMap",H.normalTexture)),Y.normalScale=new he(1,1),H.normalTexture.scale!==void 0&&Y.normalScale.set(H.normalTexture.scale,H.normalTexture.scale)),H.occlusionTexture!==void 0&&ee!==lr&&(ne.push(M.assignTexture(Y,"aoMap",H.occlusionTexture)),H.occlusionTexture.strength!==void 0&&(Y.aoMapIntensity=H.occlusionTexture.strength)),H.emissiveFactor!==void 0&&ee!==lr&&(Y.emissive=new Se().fromArray(H.emissiveFactor)),H.emissiveTexture!==void 0&&ee!==lr&&ne.push(M.assignTexture(Y,"emissiveMap",H.emissiveTexture)),Promise.all(ne).then(function(){var _e;return ee===m?_e=W[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(Y):_e=new ee(Y),H.name!==void 0&&(_e.name=H.name),_e.map&&(_e.map.encoding=Zl),_e.emissiveMap&&(_e.emissiveMap.encoding=Zl),L(_e,H),H.extensions&&V(W,_e,H),_e})};function q(N,M,$){var W=M.attributes,H=new Hr;if(W.POSITION!==void 0){var ee=$.json.accessors[W.POSITION],Y=ee.min,K=ee.max;if(Y!==void 0&&K!==void 0)H.set(new F(Y[0],Y[1],Y[2]),new F(K[0],K[1],K[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var ne=M.targets;if(ne!==void 0)for(var te=new F,ae=0,ie=ne.length;ae<ie;ae++){var pe=ne[ae];if(pe.POSITION!==void 0){var ee=$.json.accessors[pe.POSITION],Y=ee.min,K=ee.max;Y!==void 0&&K!==void 0?(te.setX(Math.max(Math.abs(Y[0]),Math.abs(K[0]))),te.setY(Math.max(Math.abs(Y[1]),Math.abs(K[1]))),te.setZ(Math.max(Math.abs(Y[2]),Math.abs(K[2]))),H.expandByVector(te)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}N.boundingBox=H;var me=new Wn;H.getCenter(me.center),me.radius=H.min.distanceTo(H.max)/2,N.boundingSphere=me}function Z(N,M,$){var W=M.attributes,H=[];function ee(te,ae){return $.getDependency("accessor",te).then(function(ie){N.setAttribute(ae,ie)})}for(var Y in W){var K=S[Y]||Y.toLowerCase();K in N.attributes||H.push(ee(W[Y],K))}if(M.indices!==void 0&&!N.index){var ne=$.getDependency("accessor",M.indices).then(function(te){N.setIndex(te)});H.push(ne)}return L(N,M),q(N,M,$),Promise.all(H).then(function(){return M.targets!==void 0?O(N,M.targets,$):N})}function oe(N,M){var $=N.getIndex();if($===null){var W=[],H=N.getAttribute("position");if(H!==void 0){for(var ee=0;ee<H.count;ee++)W.push(ee);N.setIndex(W),$=N.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),N}var Y=$.count-2,K=[];if(M===r0)for(var ee=1;ee<=Y;ee++)K.push($.getX(0)),K.push($.getX(ee)),K.push($.getX(ee+1));else for(var ee=0;ee<Y;ee++)ee%2==0?(K.push($.getX(ee)),K.push($.getX(ee+1)),K.push($.getX(ee+2))):(K.push($.getX(ee+2)),K.push($.getX(ee+1)),K.push($.getX(ee)));K.length/3!==Y&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var ne=N.clone();return ne.setIndex(K),ne}return U.prototype.loadGeometries=function(N){var M=this,$=this.extensions,W=this.primitiveCache;function H(pe){return $[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(pe,M).then(function(me){return Z(me,pe,M)})}for(var ee=[],Y=0,K=N.length;Y<K;Y++){var ne=N[Y],te=X(ne),ae=W[te];if(ae)ee.push(ae.promise);else{var ie;ne.extensions&&ne.extensions[r.KHR_DRACO_MESH_COMPRESSION]?ie=H(ne):ie=Z(new Ie,ne,M),W[te]={primitive:ne,promise:ie},ee.push(ie)}}return Promise.all(ee)},U.prototype.loadMesh=function(N){for(var M=this,$=this.json,W=$.meshes[N],H=W.primitives,ee=[],Y=0,K=H.length;Y<K;Y++){var ne=H[Y].material===void 0?z(this.cache):this.getDependency("material",H[Y].material);ee.push(ne)}return ee.push(M.loadGeometries(H)),Promise.all(ee).then(function(te){for(var ae=te.slice(0,te.length-1),ie=te[te.length-1],pe=[],me=0,_e=ie.length;me<_e;me++){var B=ie[me],G=H[me],fe,ue=ae[me];if(G.mode===g.TRIANGLES||G.mode===g.TRIANGLE_STRIP||G.mode===g.TRIANGLE_FAN||G.mode===void 0)fe=W.isSkinnedMesh===!0?new xc(B,ue):new Xe(B,ue),fe.isSkinnedMesh===!0&&!fe.geometry.attributes.skinWeight.normalized&&fe.normalizeSkinWeights(),G.mode===g.TRIANGLE_STRIP?fe.geometry=oe(fe.geometry,SC):G.mode===g.TRIANGLE_FAN&&(fe.geometry=oe(fe.geometry,r0));else if(G.mode===g.LINES)fe=new rr(B,ue);else if(G.mode===g.LINE_STRIP)fe=new gi(B,ue);else if(G.mode===g.LINE_LOOP)fe=new Iu(B,ue);else if(G.mode===g.POINTS)fe=new Ru(B,ue);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+G.mode);Object.keys(fe.geometry.morphAttributes).length>0&&k(fe,W),fe.name=W.name||"mesh_"+N,ie.length>1&&(fe.name+="_"+me),L(fe,W),M.assignFinalMaterial(fe),pe.push(fe)}if(pe.length===1)return pe[0];for(var Ne=new Mo,me=0,_e=pe.length;me<_e;me++)Ne.add(pe[me]);return Ne})},U.prototype.loadCamera=function(N){var M,$=this.json.cameras[N],W=$[$.type];if(!W){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return $.type==="perspective"?M=new Bt(Qe.radToDeg(W.yfov),W.aspectRatio||1,W.znear||1,W.zfar||2e6):$.type==="orthographic"&&(M=new Tn(W.xmag/-2,W.xmag/2,W.ymag/2,W.ymag/-2,W.znear,W.zfar)),$.name!==void 0&&(M.name=$.name),L(M,$),Promise.resolve(M)},U.prototype.loadSkin=function(N){var M=this.json.skins[N],$={joints:M.joints};return M.inverseBindMatrices===void 0?Promise.resolve($):this.getDependency("accessor",M.inverseBindMatrices).then(function(W){return $.inverseBindMatrices=W,$})},U.prototype.loadAnimation=function(N){for(var M=this.json,$=M.animations[N],W=[],H=[],ee=[],Y=[],K=[],ne=0,te=$.channels.length;ne<te;ne++){var ae=$.channels[ne],ie=$.samplers[ae.sampler],pe=ae.target,me=pe.node!==void 0?pe.node:pe.id,_e=$.parameters!==void 0?$.parameters[ie.input]:ie.input,B=$.parameters!==void 0?$.parameters[ie.output]:ie.output;W.push(this.getDependency("node",me)),H.push(this.getDependency("accessor",_e)),ee.push(this.getDependency("accessor",B)),Y.push(ie),K.push(pe)}return Promise.all([Promise.all(W),Promise.all(H),Promise.all(ee),Promise.all(Y),Promise.all(K)]).then(function(G){for(var fe=G[0],ue=G[1],Ne=G[2],Re=G[3],xe=G[4],Ce=[],Ve=0,Oe=fe.length;Ve<Oe;Ve++){var ge=fe[Ve],Le=ue[Ve],we=Ne[Ve],Q=Re[Ve],ye=xe[Ve];if(ge!==void 0){ge.updateMatrix(),ge.matrixAutoUpdate=!0;var De;switch(E[ye.path]){case E.weights:De=Ua;break;case E.rotation:De=Ro;break;case E.position:case E.scale:default:De=Os;break}var tt=ge.name?ge.name:ge.uuid,Fe=Q.interpolation!==void 0?x[Q.interpolation]:xa,ct=[];E[ye.path]===E.weights?ge.traverse(function(Mr){Mr.isMesh===!0&&Mr.morphTargetInfluences&&ct.push(Mr.name?Mr.name:Mr.uuid)}):ct.push(tt);var gt=we.array;if(we.normalized){var At;if(gt.constructor===Int8Array)At=1/127;else if(gt.constructor===Uint8Array)At=1/255;else if(gt.constructor==Int16Array)At=1/32767;else if(gt.constructor===Uint16Array)At=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var hi=new Float32Array(gt.length),dt=0,Ar=gt.length;dt<Ar;dt++)hi[dt]=gt[dt]*At;gt=hi}for(var dt=0,Ar=ct.length;dt<Ar;dt++){var gr=new De(ct[dt]+"."+E[ye.path],Le.array,gt,Fe);Q.interpolation==="CUBICSPLINE"&&(gr.createInterpolant=function(bl){return new p(this.times,this.values,this.getValueSize()/3,bl)},gr.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Ce.push(gr)}}}var oo=$.name!==void 0?$.name:"animation_"+N;return new ri(oo,void 0,Ce)})},U.prototype.loadNode=function(N){var M=this.json,$=this.extensions,W=this,H=M.meshReferences,ee=M.meshUses,Y=M.nodes[N];return function(){var K=[];return Y.mesh!==void 0&&K.push(W.getDependency("mesh",Y.mesh).then(function(ne){var te;if(H[Y.mesh]>1){var ae=ee[Y.mesh]++;te=ne.clone(),te.name+="_instance_"+ae}else te=ne;return Y.weights!==void 0&&te.traverse(function(ie){if(!!ie.isMesh)for(var pe=0,me=Y.weights.length;pe<me;pe++)ie.morphTargetInfluences[pe]=Y.weights[pe]}),te})),Y.camera!==void 0&&K.push(W.getDependency("camera",Y.camera)),Y.extensions&&Y.extensions[r.KHR_LIGHTS_PUNCTUAL]&&Y.extensions[r.KHR_LIGHTS_PUNCTUAL].light!==void 0&&K.push(W.getDependency("light",Y.extensions[r.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(K)}().then(function(K){var ne;if(Y.isBone===!0?ne=new Up:K.length>1?ne=new Mo:K.length===1?ne=K[0]:ne=new ve,ne!==K[0])for(var te=0,ae=K.length;te<ae;te++)ne.add(K[te]);if(Y.name!==void 0&&(ne.userData.name=Y.name,ne.name=Lr.sanitizeNodeName(Y.name)),L(ne,Y),Y.extensions&&V($,ne,Y),Y.matrix!==void 0){var ie=new Ue;ie.fromArray(Y.matrix),ne.applyMatrix4(ie)}else Y.translation!==void 0&&ne.position.fromArray(Y.translation),Y.rotation!==void 0&&ne.quaternion.fromArray(Y.rotation),Y.scale!==void 0&&ne.scale.fromArray(Y.scale);return ne})},U.prototype.loadScene=function(){function N(M,$,W,H){var ee=W.nodes[M];return H.getDependency("node",M).then(function(Y){if(ee.skin===void 0)return Y;var K;return H.getDependency("skin",ee.skin).then(function(ne){K=ne;for(var te=[],ae=0,ie=K.joints.length;ae<ie;ae++)te.push(H.getDependency("node",K.joints[ae]));return Promise.all(te)}).then(function(ne){return Y.traverse(function(te){if(!!te.isMesh){for(var ae=[],ie=[],pe=0,me=ne.length;pe<me;pe++){var _e=ne[pe];if(_e){ae.push(_e);var B=new Ue;K.inverseBindMatrices!==void 0&&B.fromArray(K.inverseBindMatrices.array,pe*16),ie.push(B)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',K.joints[pe])}te.bind(new Cu(ae,ie),te.matrixWorld)}}),Y})}).then(function(Y){$.add(Y);var K=[];if(ee.children)for(var ne=ee.children,te=0,ae=ne.length;te<ae;te++){var ie=ne[te];K.push(N(ie,Y,W,H))}return Promise.all(K)})}return function($){var W=this.json,H=this.extensions,ee=this.json.scenes[$],Y=this,K=new fr;ee.name!==void 0&&(K.name=ee.name),L(K,ee),ee.extensions&&V(H,K,ee);for(var ne=ee.nodes||[],te=[],ae=0,ie=ne.length;ae<ie;ae++)te.push(N(ne[ae],K,W,Y));return Promise.all(te).then(function(){return K})}}(),t}();var CI=function(){var t=a(),e=new fr;e.add(new Xe(new Ji(2,2),t));var r=new Tn(0,1,0,1,0,1),n=null,s=null,o=function(l){s=l,s.compile(e,r)};o.prototype={constructor:o,generateMipmaps:function(l){var{roughnessMap:c,normalMap:h}=l;if(!(c==null||h==null||!c.generateMipmaps||l.userData.roughnessUpdated)){l.userData.roughnessUpdated=!0;var f=Math.max(c.image.width,h.image.width),u=Math.max(c.image.height,h.image.height);if(!(!Qe.isPowerOfTwo(f)||!Qe.isPowerOfTwo(u))){var m=s.getRenderTarget(),d=s.autoClear;if(s.autoClear=!1,(n==null||n.width!==f||n.height!==u)&&(n!=null&&n.dispose(),n=new ur(f,u,{depthBuffer:!1,stencilBuffer:!1}),n.scissorTest=!0),f!==c.image.width||u!==c.image.height){var v=new ur(f,u,{minFilter:fC,depthBuffer:!1,stencilBuffer:!1});v.texture.generateMipmaps=!0,s.setRenderTarget(v),l.roughnessMap=v.texture,l.metalnessMap==c&&(l.metalnessMap=l.roughnessMap),l.aoMap==c&&(l.aoMap=l.roughnessMap)}t.uniforms.roughnessMap.value=c,t.uniforms.normalMap.value=h;for(var p=new he(0,0),g=t.uniforms.texelSize.value,y=0;f>=1&&u>=1;++y,f/=2,u/=2)g.set(1/f,1/u),y==0&&g.set(0,0),n.viewport.set(p.x,p.y,f,u),n.scissor.set(p.x,p.y,f,u),s.setRenderTarget(n),s.render(e,r),s.copyFramebufferToTexture(p,l.roughnessMap,y),t.uniforms.roughnessMap.value=l.roughnessMap;c!==l.roughnessMap&&c.dispose(),s.setRenderTarget(m),s.autoClear=d}}},dispose:function(){t.dispose(),e.children[0].geometry.dispose(),n!=null&&n.dispose()}};function a(){var l=new Xn({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new he(1,1)}},vertexShader:`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = vec4( position, 1.0 );
}
              `,fragmentShader:`
precision mediump float;
precision mediump int;
varying vec2 vUv;
uniform sampler2D roughnessMap;
uniform sampler2D normalMap;
uniform vec2 texelSize;

#define ENVMAP_TYPE_CUBE_UV
vec4 envMapTexelToLinear(vec4 a){return a;}
#include <cube_uv_reflection_fragment>

float roughnessToVariance(float roughness) {
  float variance = 0.0;
  if (roughness >= r1) {
    variance = (r0 - roughness) * (v1 - v0) / (r0 - r1) + v0;
  } else if (roughness >= r4) {
    variance = (r1 - roughness) * (v4 - v1) / (r1 - r4) + v1;
  } else if (roughness >= r5) {
    variance = (r4 - roughness) * (v5 - v4) / (r4 - r5) + v4;
  } else {
    float roughness2 = roughness * roughness;
    variance = 1.79 * roughness2 * roughness2;
  }
  return variance;
}
float varianceToRoughness(float variance) {
  float roughness = 0.0;
  if (variance >= v1) {
    roughness = (v0 - variance) * (r1 - r0) / (v0 - v1) + r0;
  } else if (variance >= v4) {
    roughness = (v1 - variance) * (r4 - r1) / (v1 - v4) + r1;
  } else if (variance >= v5) {
    roughness = (v4 - variance) * (r5 - r4) / (v4 - v5) + r4;
  } else {
    roughness = pow(0.559 * variance, 0.25);// 0.559 = 1.0 / 1.79
  }
  return roughness;
}

void main() {
    gl_FragColor = texture2D(roughnessMap, vUv, -1.0);
    if (texelSize.x == 0.0) return;
    float roughness = gl_FragColor.g;
    float variance = roughnessToVariance(roughness);
    vec3 avgNormal;
    for (float x = -1.0; x < 2.0; x += 2.0) {
    for (float y = -1.0; y < 2.0; y += 2.0) {
        vec2 uv = vUv + vec2(x, y) * 0.25 * texelSize;
        avgNormal += normalize(texture2D(normalMap, uv, -1.0).xyz - 0.5);
    }
    }
    variance += 1.0 - 0.25 * length(avgNormal);
    gl_FragColor.g = varianceToRoughness(variance);
}
              `,blending:qn,depthTest:!1,depthWrite:!1});return l.type="RoughnessMipmapper",l}return o}();var PI,II,An=Symbol("retainerCount"),ks=Symbol("recentlyUsed"),Pm=Symbol("evict"),sf=Symbol("evictionThreshold"),Rb=Symbol("cache"),Lb=class{constructor(e,r=5){this[PI]=new Map,this[II]=[],this[Rb]=e,this[sf]=r}set evictionThreshold(e){this[sf]=e,this[Pm]()}get evictionThreshold(){return this[sf]}get cache(){return this[Rb]}retainerCount(e){return this[An].get(e)||0}reset(){this[An].clear(),this[ks]=[]}retain(e){this[An].has(e)||this[An].set(e,0),this[An].set(e,this[An].get(e)+1);let r=this[ks].indexOf(e);r!==-1&&this[ks].splice(r,1),this[ks].unshift(e),this[Pm]()}release(e){this[An].has(e)&&this[An].set(e,Math.max(this[An].get(e)-1,0)),this[Pm]()}[(PI=An,II=ks,Pm)](){if(!(this[ks].length<this[sf]))for(let e=this[ks].length-1;e>=this[sf];--e){let r=this[ks][e];this[An].get(r)===0&&(this[Rb].delete(r),this[ks].splice(e,1))}}};var RI={retarget:function(){var t=new F,e=new Ur,r=new F,n=new Ue,s=new Ue,o=new Ue;return function(a,l,c){c=c||{},c.preserveMatrix=c.preserveMatrix!==void 0?c.preserveMatrix:!0,c.preservePosition=c.preservePosition!==void 0?c.preservePosition:!0,c.preserveHipPosition=c.preserveHipPosition!==void 0?c.preserveHipPosition:!1,c.useTargetMatrix=c.useTargetMatrix!==void 0?c.useTargetMatrix:!1,c.hip=c.hip!==void 0?c.hip:"hip",c.names=c.names||{};var h=l.isObject3D?l.skeleton.bones:this.getBones(l),f=a.isObject3D?a.skeleton.bones:this.getBones(a),u,m,d,v,p,g;if(a.isObject3D?a.skeleton.pose():(c.useTargetMatrix=!0,c.preserveMatrix=!1),c.preservePosition)for(p=[],g=0;g<f.length;g++)p.push(f[g].position.clone());if(c.preserveMatrix)for(a.updateMatrixWorld(),a.matrixWorld.identity(),g=0;g<a.children.length;++g)a.children[g].updateMatrixWorld(!0);if(c.offsets)for(u=[],g=0;g<f.length;++g)m=f[g],d=c.names[m.name]||m.name,c.offsets&&c.offsets[d]&&(m.matrix.multiply(c.offsets[d]),m.matrix.decompose(m.position,m.quaternion,m.scale),m.updateMatrixWorld()),u.push(m.matrixWorld.clone());for(g=0;g<f.length;++g){if(m=f[g],d=c.names[m.name]||m.name,v=this.getBoneByName(d,h),o.copy(m.matrixWorld),v){if(v.updateMatrixWorld(),c.useTargetMatrix?s.copy(v.matrixWorld):(s.getInverse(a.matrixWorld),s.multiply(v.matrixWorld)),r.setFromMatrixScale(s),s.scale(r.set(1/r.x,1/r.y,1/r.z)),o.makeRotationFromQuaternion(e.setFromRotationMatrix(s)),a.isObject3D){var y=f.indexOf(m),_=u?u[y]:n.getInverse(a.skeleton.boneInverses[y]);o.multiply(_)}o.copyPosition(s)}m.parent&&m.parent.isBone?(m.matrix.getInverse(m.parent.matrixWorld),m.matrix.multiply(o)):m.matrix.copy(o),c.preserveHipPosition&&d===c.hip&&m.matrix.setPosition(t.set(0,m.position.y,0)),m.matrix.decompose(m.position,m.quaternion,m.scale),m.updateMatrixWorld()}if(c.preservePosition)for(g=0;g<f.length;++g)m=f[g],d=c.names[m.name]||m.name,d!==c.hip&&m.position.copy(p[g]);c.preserveMatrix&&a.updateMatrixWorld(!0)}}(),retargetClip:function(t,e,r,n){n=n||{},n.useFirstFramePosition=n.useFirstFramePosition!==void 0?n.useFirstFramePosition:!1,n.fps=n.fps!==void 0?n.fps:30,n.names=n.names||[],e.isObject3D||(e=this.getHelperFromSkeleton(e));var s=Math.round(r.duration*(n.fps/1e3)*1e3),o=1/n.fps,a=[],l=new qc(e),c=this.getBones(t.skeleton),h=[],f,u,m,d,v,p,g;for(l.clipAction(r).play(),l.update(0),e.updateMatrixWorld(),p=0;p<s;++p){var y=p*o;for(this.retarget(t,e,n),g=0;g<c.length;++g)v=n.names[c[g].name]||c[g].name,m=this.getBoneByName(v,e.skeleton),m&&(u=c[g],d=h[g]=h[g]||{bone:u},n.hip===v&&(d.pos||(d.pos={times:new Float32Array(s),values:new Float32Array(s*3)}),n.useFirstFramePosition&&(p===0&&(f=u.position.clone()),u.position.sub(f)),d.pos.times[p]=y,u.position.toArray(d.pos.values,p*3)),d.quat||(d.quat={times:new Float32Array(s),values:new Float32Array(s*4)}),d.quat.times[p]=y,u.quaternion.toArray(d.quat.values,p*4));l.update(o),e.updateMatrixWorld()}for(p=0;p<h.length;++p)d=h[p],d&&(d.pos&&a.push(new Os(".bones["+d.bone.name+"].position",d.pos.times,d.pos.values)),a.push(new Ro(".bones["+d.bone.name+"].quaternion",d.quat.times,d.quat.values)));return l.uncacheAction(r),new ri(r.name,-1,a)},getHelperFromSkeleton:function(t){var e=new Za(t.bones[0]);return e.skeleton=t,e},getSkeletonOffsets:function(){var t=new F,e=new F,r=new F,n=new F,s=new he,o=new he;return function(a,l,c){c=c||{},c.hip=c.hip!==void 0?c.hip:"hip",c.names=c.names||{},l.isObject3D||(l=this.getHelperFromSkeleton(l));var h=Object.keys(c.names),f=Object.values(c.names),u=l.isObject3D?l.skeleton.bones:this.getBones(l),m=a.isObject3D?a.skeleton.bones:this.getBones(a),d=[],v,p,g,y;for(a.skeleton.pose(),y=0;y<m.length;++y)if(v=m[y],g=c.names[v.name]||v.name,p=this.getBoneByName(g,u),p&&g!==c.hip){var _=this.getNearestBone(v.parent,h),b=this.getNearestBone(p.parent,f);_.updateMatrixWorld(),b.updateMatrixWorld(),t.setFromMatrixPosition(_.matrixWorld),e.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(p.matrixWorld),s.subVectors(new he(e.x,e.y),new he(t.x,t.y)).normalize(),o.subVectors(new he(n.x,n.y),new he(r.x,r.y)).normalize();var w=s.angle()-o.angle(),S=new Ue().makeRotationFromEuler(new zn(0,0,w));v.matrix.multiply(S),v.matrix.decompose(v.position,v.quaternion,v.scale),v.updateMatrixWorld(),d[g]=S}return d}}(),renameBones:function(t,e){for(var r=this.getBones(t),n=0;n<r.length;++n){var s=r[n];e[s.name]&&(s.name=e[s.name])}return this},getBones:function(t){return Array.isArray(t)?t:t.bones},getBoneByName:function(t,e){for(var r=0,n=this.getBones(e);r<n.length;r++)if(t===n[r].name)return n[r]},getNearestBone:function(t,e){for(;t.isBone;){if(e.indexOf(t.name)!==-1)return t;t=t.parent}},findBoneTrackData:function(t,e){for(var r=/\[(.*)\]\.(.*)/,n={name:t},s=0;s<e.length;++s){var o=r.exec(e[s].name);o&&t===o[1]&&(n[o[2]]=s)}return n},getEqualsBonesNames:function(t,e){var r=this.getBones(t),n=this.getBones(e),s=[];e:for(var o=0;o<r.length;o++)for(var a=r[o].name,l=0;l<n.length;l++)if(a===n[l].name){s.push(a);continue e}return s},clone:function(t){var e=new Map,r=new Map,n=t.clone();return LI(t,n,function(s,o){e.set(o,s),r.set(s,o)}),n.traverse(function(s){if(!!s.isSkinnedMesh){var o=s,a=e.get(s),l=a.skeleton.bones;o.skeleton=a.skeleton.clone(),o.bindMatrix.copy(a.bindMatrix),o.skeleton.bones=l.map(function(c){return r.get(c)}),o.bind(o.skeleton,o.bindMatrix)}}),n}};function LI(t,e,r){r(t,e);for(var n=0;n<t.children.length;n++)LI(t.children[n],e.children[n],r)}var Ob=`
#ifdef ALPHATEST

    if ( diffuseColor.a < ALPHATEST ) discard;
    diffuseColor.a = 1.0;

#endif
`;var OI=t=>{let e=Object.assign(Object.assign({},t),{scene:RI.clone(t.scene)}),r=n=>{let s=n.clone(),o=n.onBeforeCompile;return s.onBeforeCompile=n.isGLTFSpecularGlossinessMaterial?a=>{o(a,void 0),a.fragmentShader=a.fragmentShader.replace("#include <alphatest_fragment>",Ob)}:a=>{a.fragmentShader=a.fragmentShader.replace("#include <alphatest_fragment>",Ob),o(a,void 0)},s.shadowSide=bn,s.transparent&&(s.depthWrite=!1),!s.alphaTest&&!s.transparent&&(s.alphaTest=-.5),s};return e.scene.traverse(n=>{n.renderOrder=1e3,Array.isArray(n.material)?n.material=n.material.map(r):n.material!=null&&(n.material=r(n.material))}),e},Db=(t,e)=>{for(;t.children.length;)e.add(t.children.shift())},Fb=(t,e)=>{let r=0,n=new F;return t.traverse(s=>{let o,a;s.updateWorldMatrix(!1,!1);let l=s.geometry;if(l!==void 0){if(l.isGeometry){let c=l.vertices;for(o=0,a=c.length;o<a;o++)n.copy(c[o]),n.applyMatrix4(s.matrixWorld),r=e(r,n)}else if(l.isBufferGeometry){let c=l.attributes.position;if(c!==void 0)for(o=0,a=c.count;o<a;o++)n.fromBufferAttribute(c,o).applyMatrix4(s.matrixWorld),r=e(r,n)}}}),r};var Vs=t=>t!=null&&t!=="null"?L9(t):null,Nb=()=>{if(zl)return;let t=[];throw z_||t.push("WebXR Device API"),W_||t.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${t.join(", ")}`)},L9=t=>new URL(t,window.location.toString()).toString(),DI=(t,e)=>{let r=null,n=(...s)=>{r==null&&(t(...s),r=self.setTimeout(()=>r=null,e))};return n.flush=()=>{r!=null&&(self.clearTimeout(r),r=null)},n},$c=(t,e)=>{let r=null;return(...n)=>{r!=null&&self.clearTimeout(r),r=self.setTimeout(()=>{r=null,t(...n)},e)}};var Uo=(t,e,r)=>Math.max(e,Math.min(r,t)),O9=1,Ho=(()=>{let t=(()=>{let e=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(let r of e)if(r.name==="viewport")return!0;return!1})();return t||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>t?window.devicePixelRatio:O9})(),kb=(()=>{let t="model-viewer-debug-mode",e=new RegExp(`[?&]${t}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),FI=t=>{if(t.keys!=null)return t.keys().next().value||null;let e=null;try{t.forEach((r,n,s)=>{throw e=n,new Error})}catch(r){}return e};var Im=class extends ve{constructor(e){super();this.hitTestSource=null,this.hitTestSourceRequest=null,this._hitMatrix=null,this.name="Reticle";let r=new Rc(.1,.11,24,1),n=new lr({color:16777215});r.applyMatrix4(new Ue().makeRotationX(Qe.degToRad(-90))),this.ring=new Xe(r,n),this.add(this.ring),this.visible=!1,this.camera=e}get hitMatrix(){return this._hitMatrix}async update(e,r,n,s){if(!this.hitTestSourceRequest)this.hitTestSourceRequest=e.requestHitTestSource({space:n}).then(o=>{this.hitTestSource=o});else if(this.hitTestSource){let o=r.getHitTestResults(this.hitTestSource);if(o.length){let a=o[0];this._hitMatrix=new Ue().fromArray(a.getPose(s).transform.matrix),this.position.setFromMatrixPosition(this._hitMatrix);let l=new F().setFromMatrixPosition(this.camera.matrixWorld),c=Math.atan2(l.x-this.position.x,l.z-this.position.z);this.rotation.set(0,c,0),this.visible=!0}else this._hitMatrix=null}else this._hitMatrix=null}};var Vb=t=>{if(t==null)throw new Error("WebGL is not available!");return t},NI=(t,e)=>Vb(t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),kI=t=>{let e={EXT_shader_texture_lod:`
      #extension GL_EXT_shader_texture_lod : enable
      precision mediump float;
      uniform sampler2D tex;
      void main() {
        gl_FragColor = texture2DLodEXT(tex, vec2(0.0, 0.0), 0.0);
      }`};function r(s,o){let a=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(a,e[o]),s.compileShader(a);let l=s.getShaderParameter(a,s.COMPILE_STATUS);return s.deleteShader(a),l}let n=t.getExtension;t.getExtension=s=>{let o;return e[s]?(o=n.call(t,s),o&&!r(t,s)&&(o=null)):o=n.call(t,s),o}};var VI,BI,UI,HI,qI,zI,WI,Mn=Symbol("presentedScene"),Bb=Symbol("rafId"),ns=Symbol("currentSession"),Ub=Symbol("tick"),Ja=Symbol("refSpace"),Hb=Symbol("viewerRefSpace"),Rm=Symbol("resolveCleanup"),qb=Symbol("outputContext"),GI=Symbol("onWebXRFrame"),zb=Symbol("postSessionCleanup"),D9=new Ue,F9=new F,Wb=class extends yr{constructor(e){super();this.renderer=e,this.camera=new Bt,this.scene=new fr,this.dolly=new ve,this.reticle=new Im(this.camera),this.raycaster=null,this[VI]=null,this[BI]=null,this[UI]=null,this[HI]=null,this[qI]=null,this[zI]=null,this[WI]=null,this.threeRenderer=e.threeRenderer,this.inputContext=e.context3D,this.camera.matrixAutoUpdate=!1,this.scene.add(this.reticle),this.scene.add(this.dolly)}initializeRenderer(){this.threeRenderer.setPixelRatio(1)}async resolveARSession(){Nb();let e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"]}),r=Vb(this.threeRenderer.getContext());return await r.makeXRCompatible(),this[qb]=r,e.updateRenderState({baseLayer:new XRWebGLLayer(e,r,{alpha:!0})}),await new Promise((s,o)=>{e.requestAnimationFrame(()=>s())}),this.threeRenderer.setFramebuffer(e.renderState.baseLayer.framebuffer),this.threeRenderer.setSize(e.renderState.baseLayer.framebufferWidth,e.renderState.baseLayer.framebufferHeight,!1),e}get presentedScene(){return this[Mn]}async supportsPresentation(){try{return Nb(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return!1}}async present(e){this.isPresenting&&console.warn("Cannot present while a model is already presenting"),e.model.scale.set(1,1,1),this[Mn]=e,this.initializeRenderer(),this[ns]=await this.resolveARSession(),this[ns].addEventListener("end",()=>{this[zb]()},{once:!0}),this[Ja]=await this[ns].requestReferenceSpace("local"),this[Hb]=await this[ns].requestReferenceSpace("viewer"),this[Ub]()}async stopPresenting(){if(!this.isPresenting)return;let e=new Promise(r=>{this[Rm]=r});try{let r=this[ns];this[ns]=null,r.cancelAnimationFrame(this[Bb]),await r.end(),await e}catch(r){console.warn("Error while trying to end AR session"),console.warn(r),this[zb]()}}[(VI=qb,BI=Bb,UI=ns,HI=Ja,qI=Hb,zI=Mn,WI=Rm,zb)](){this.threeRenderer.setFramebuffer(null),this[Mn]!=null&&(this.dolly.remove(this[Mn]),this[Mn].isDirty=!0),this.renderer.setRendererSize(1,1),this[Ja]=null,this[Mn]=null,this.scene.environment=null,this[Rm]!=null&&this[Rm]()}get isPresenting(){return this[Mn]!=null}get outputContext(){return this[qb]}async placeModel(){if(this[ns]!=null&&this.reticle&&this.reticle.hitMatrix){let e=this[Mn],r=this.reticle.hitMatrix;this.dolly.position.setFromMatrixPosition(r);let n=F9.setFromMatrixPosition(this.camera.matrix);this.dolly.lookAt(n.x,this.dolly.position.y,n.z),this.dolly.rotateY(-e.pivot.rotation.y),this.dolly.add(e),this.dispatchEvent({type:"modelmove"})}}processXRInput(e){let{session:r}=e,n=Array.from(r.inputSources).filter(o=>o.targetRayMode==="screen");if(n.length===0)return;e.getPose(n[0].targetRaySpace,this[Ja])&&this.placeModel()}[Ub](){this[Bb]=this[ns].requestAnimationFrame((e,r)=>this[GI](e,r))}[GI](e,r){let{session:n}=r,s=r.getViewerPose(this[Ja]);if(this[Ub](),s!=null){this.scene.environment!==this[Mn].environment&&(this.scene.environment=this[Mn].environment);for(let o of r.getViewerPose(this[Ja]).views){let a=n.renderState.baseLayer.getViewport(o);this.threeRenderer.setViewport(a.x,a.y,a.width,a.height),this.camera.projectionMatrix.fromArray(o.projectionMatrix);let l=D9.fromArray(o.transform.inverse.matrix);this.camera.matrix.getInverse(l),this.camera.updateMatrixWorld(!0),this.reticle.update(this[ns],r,this[Hb],this[Ja]),this.processXRInput(r),this.threeRenderer.render(this.scene,this.camera)}}}};var Gb=class{constructor(e){e.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:e,THREE:{ShaderMaterial:zr,Texture:Mt,Mesh:Xe,Scene:fr,PlaneBufferGeometry:Ji,OrthographicCamera:Tn,WebGLRenderTarget:ur}}}))})}addScene(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:e}}))}removeScene(e){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:e}}))}};var Lm=function(t){Hc.call(this,t),this.type=Ss};Lm.prototype=Object.assign(Object.create(Hc.prototype),{constructor:Lm,parse:function(t){var e=-1,r=1,n=2,s=3,o=4,a=function(V,L){switch(V){case r:console.error("RGBELoader Read Error: "+(L||""));break;case n:console.error("RGBELoader Write Error: "+(L||""));break;case s:console.error("RGBELoader Bad File Format: "+(L||""));break;default:case o:console.error("RGBELoader: Error: "+(L||""))}return e},l=1,c=2,h=4,f=`
`,u=function(V,L,O){L=L||1024;for(var k=V.pos,X=-1,R=0,U="",q=128,Z=String.fromCharCode.apply(null,new Uint16Array(V.subarray(k,k+q)));0>(X=Z.indexOf(f))&&R<L&&k<V.byteLength;)U+=Z,R+=Z.length,k+=q,Z+=String.fromCharCode.apply(null,new Uint16Array(V.subarray(k,k+q)));return-1<X?(O!==!1&&(V.pos+=R+X+1),U+Z.slice(0,X)):!1},m=function(V){var L,O,k=/^#\?(\S+)$/,X=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*FORMAT=(\S+)\s*$/,q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(V.pos>=V.byteLength||!(L=u(V)))return a(r,"no header found");if(!(O=L.match(k)))return a(s,"bad initial token");for(Z.valid|=l,Z.programtype=O[1],Z.string+=L+`
`;L=u(V),L!==!1;){if(Z.string+=L+`
`,L.charAt(0)==="#"){Z.comments+=L+`
`;continue}if((O=L.match(X))&&(Z.gamma=parseFloat(O[1],10)),(O=L.match(R))&&(Z.exposure=parseFloat(O[1],10)),(O=L.match(U))&&(Z.valid|=c,Z.format=O[1]),(O=L.match(q))&&(Z.valid|=h,Z.height=parseInt(O[1],10),Z.width=parseInt(O[2],10)),Z.valid&c&&Z.valid&h)break}return Z.valid&c?Z.valid&h?Z:a(s,"missing image size specifier"):a(s,"missing format specifier")},d=function(V,L,O){var k,X,R,U,q,Z,oe,N,M,$,W,H,ee=L,Y=O,K;if(ee<8||ee>32767||V[0]!==2||V[1]!==2||V[2]&128)return new Uint8Array(V);if(ee!==(V[2]<<8|V[3]))return a(s,"wrong scanline width");if(k=new Uint8Array(4*L*O),!k||!k.length)return a(o,"unable to allocate buffer space");for(X=0,R=0,N=4*ee,K=new Uint8Array(4),Z=new Uint8Array(N);Y>0&&R<V.byteLength;){if(R+4>V.byteLength)return a(r);if(K[0]=V[R++],K[1]=V[R++],K[2]=V[R++],K[3]=V[R++],K[0]!=2||K[1]!=2||(K[2]<<8|K[3])!=ee)return a(s,"bad rgbe scanline format");for(oe=0;oe<N&&R<V.byteLength;){if(U=V[R++],H=U>128,H&&(U-=128),U===0||oe+U>N)return a(s,"bad scanline data");if(H)for(q=V[R++],M=0;M<U;M++)Z[oe++]=q;else Z.set(V.subarray(R,R+U),oe),oe+=U,R+=U}for($=ee,M=0;M<$;M++)W=0,k[X]=Z[M+W],W+=ee,k[X+1]=Z[M+W],W+=ee,k[X+2]=Z[M+W],W+=ee,k[X+3]=Z[M+W],X+=4;Y--}return k},v=function(V,L,O,k){var X=V[L+3],R=Math.pow(2,X-128)/255;O[k+0]=V[L+0]*R,O[k+1]=V[L+1]*R,O[k+2]=V[L+2]*R},p=function(){var V=new Float32Array(1),L=new Int32Array(V.buffer);function O(k){V[0]=k;var X=L[0],R=X>>16&32768,U=X>>12&2047,q=X>>23&255;return q<103?R:q>142?(R|=31744,R|=(q==255?0:1)&&X&8388607,R):q<113?(U|=2048,R|=(U>>114-q)+(U>>113-q&1),R):(R|=q-112<<10|U>>1,R+=U&1,R)}return function(k,X,R,U){var q=k[X+3],Z=Math.pow(2,q-128)/255;R[U+0]=O(k[X+0]*Z),R[U+1]=O(k[X+1]*Z),R[U+2]=O(k[X+2]*Z)}}(),g=new Uint8Array(t);g.pos=0;var y=m(g);if(e!==y){var _=y.width,b=y.height,w=d(g.subarray(g.pos),_,b);if(e!==w){switch(this.type){case Ss:var S=w,E=e0,x=Ss;break;case Es:for(var T=w.length/4*3,A=new Float32Array(T),P=0;P<T;P++)v(w,P*4,A,P*3);var S=A,E=Oi,x=Es;break;case Ea:for(var T=w.length/4*3,z=new Uint16Array(T),P=0;P<T;P++)p(w,P*4,z,P*3);var S=z,E=Oi,x=Ea;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:_,height:b,data:S,header:y.string,gamma:y.gamma,exposure:y.exposure,format:E,type:x}}}return null},setDataType:function(t){return this.type=t,this},load:function(t,e,r,n){function s(o,a){switch(o.type){case Ss:o.encoding=Ta,o.minFilter=It,o.magFilter=It,o.generateMipmaps=!1,o.flipY=!0;break;case Es:o.encoding=Vr,o.minFilter=Vt,o.magFilter=Vt,o.generateMipmaps=!1,o.flipY=!0;break;case Ea:o.encoding=Vr,o.minFilter=Vt,o.magFilter=Vt,o.generateMipmaps=!1,o.flipY=!0;break}e&&e(o,a)}return Hc.prototype.load.call(this,t,s,r,n)}});var Om=class extends fr{constructor(){super();this.position.y=-3.5;let e=new Oa;e.deleteAttribute("uv");let r=new Er({metalness:0,side:tr}),n=new Er({metalness:0}),s=new za(16777215,500,28,2);s.position.set(.418,16.199,.3),this.add(s);let o=new Xe(e,r);o.position.set(-.757,13.219,.717),o.scale.set(31.713,28.305,28.591),this.add(o);let a=new Xe(e,n);a.position.set(-10.906,2.009,1.846),a.rotation.set(0,-.195,0),a.scale.set(2.328,7.905,4.651),this.add(a);let l=new Xe(e,n);l.position.set(-5.607,-.754,-.758),l.rotation.set(0,.994,0),l.scale.set(1.97,1.534,3.955),this.add(l);let c=new Xe(e,n);c.position.set(6.167,.857,7.803),c.rotation.set(0,.561,0),c.scale.set(3.927,6.285,3.687),this.add(c);let h=new Xe(e,n);h.position.set(-2.017,.018,6.124),h.rotation.set(0,.333,0),h.scale.set(2.002,4.566,2.064),this.add(h);let f=new Xe(e,n);f.position.set(2.291,-.756,-2.621),f.rotation.set(0,-.286,0),f.scale.set(1.546,1.552,1.496),this.add(f);let u=new Xe(e,n);u.position.set(-2.193,-.369,-5.547),u.rotation.set(0,.516,0),u.scale.set(3.875,3.487,2.986),this.add(u);let m=new Xe(e,this.createAreaLightMaterial(50));m.position.set(-16.116,14.37,8.208),m.scale.set(.1,2.428,2.739),this.add(m);let d=new Xe(e,this.createAreaLightMaterial(50));d.position.set(-16.109,18.021,-8.207),d.scale.set(.1,2.425,2.751),this.add(d);let v=new Xe(e,this.createAreaLightMaterial(17));v.position.set(14.904,12.198,-1.832),v.scale.set(.15,4.265,6.331),this.add(v);let p=new Xe(e,this.createAreaLightMaterial(43));p.position.set(-.462,8.89,14.52),p.scale.set(4.38,5.441,.088),this.add(p);let g=new Xe(e,this.createAreaLightMaterial(20));g.position.set(3.235,11.486,-12.541),g.scale.set(2.5,2,.1),this.add(g);let y=new Xe(e,this.createAreaLightMaterial(100));y.position.set(0,20,0),y.scale.set(1,.1,1),this.add(y)}createAreaLightMaterial(e){let r=new lr;return r.color.setScalar(e),r}};var $I,jI,N9=.04;Lo.enabled=!0;var k9=/\.hdr$/,V9=new Ha,B9=new Lm,jc=Symbol("environmentMapCache"),el=Symbol("generatedEnvironmentMap"),of=Symbol("PMREMGenerator"),af=Symbol("addMetadata"),$b=Symbol("loadEnvironmentMapFromUrl"),YI=Symbol("loadGeneratedEnvironmentMap"),U9={url:null,mapping:null},Dm=class extends yr{constructor(e){super();this[$I]=null,this[jI]=new Map,this[of]=new Cm(e)}get pmremGenerator(){return this[of]}async load(e,r=()=>{}){try{this[of].compileEquirectangularShader();let n=k9.test(e),s=n?B9:V9,o=await new Promise((a,l)=>s.load(e,a,c=>{r(c.loaded/c.total*.9)},l));return r(1),this[af](o,e,"Equirectangular"),n?(o.encoding=Ta,o.minFilter=It,o.magFilter=It,o.flipY=!0):o.encoding=Ql,o}finally{r&&r(1)}}async loadEquirectAsCubeUV(e,r=()=>{}){let n=null;try{n=await this.load(e,r);let s=this[of].fromEquirectangular(n);return this[af](s.texture,e,"CubeUV"),s}finally{n!=null&&n.dispose()}}async generateEnvironmentMapAndSkybox(e=null,r=null,n={}){let{progressTracker:s}=n,o=s!=null?s.beginActivity():()=>{};try{let a=Promise.resolve(null),l;e&&(a=this[$b](e,s)),r?l=this[$b](r,s):e?l=a:l=this[YI]();let[c,h]=await Promise.all([l,a]);return this[af](c.texture,r,"PMREM"),h!=null&&this[af](h.texture,e,"PMREM"),{environmentMap:c,skybox:h}}finally{o(1)}}[($I=el,jI=jc,af)](e,r,n){e.userData=Object.assign(Object.assign({},U9),{url:r,mapping:n})}[$b](e,r){if(!this[jc].has(e)){let n=r?r.beginActivity():()=>{},s=this.loadEquirectAsCubeUV(e,n);this[jc].set(e,s)}return this[jc].get(e)}[YI](){if(this[el]==null){let e=new Om;this[el]=this[of].fromScene(e,N9),e.dispose()}return Promise.resolve(this[el])}async dispose(){let e=[];this[jc].forEach(r=>{e.push(r)}),this[jc].clear();for(let r of e)try{(await r).dispose()}catch(n){}this[el]!=null&&(this[el].dispose(),this[el]=null)}};var XI,ZI,qo=Symbol("arRenderer"),QI=Symbol("onWebGLContextLost"),jb=Symbol("webGLContextLostHandler"),Fm=Symbol("singleton"),Bs=class extends yr{constructor(e){super();this.width=0,this.height=0,this.debugger=null,this.scenes=new Set,this[ZI]=n=>this[QI](n);let r={alpha:!0,antialias:!0};zl&&Object.assign(r,{alpha:!0,preserveDrawingBuffer:!0}),qM&&zM?this.canvas3D=new OffscreenCanvas(0,0):this.canvas3D=document.createElement("canvas"),this.canvas3D.addEventListener("webglcontextlost",this[jb]);try{this.context3D=NI(this.canvas3D,r),kI(this.context3D),this.threeRenderer=new Dp({canvas:this.canvas3D,context:this.context3D}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=Ql,this.threeRenderer.gammaFactor=2.2,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(Ho()),this.threeRenderer.shadowMap.enabled=!0,this.threeRenderer.shadowMap.type=G_,this.threeRenderer.shadowMap.autoUpdate=!1,this.debugger=e!=null&&!!e.debug?new Gb(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=Y_}catch(n){this.context3D=null,console.warn(n)}this[qo]=new Wb(this),this.textureUtils=this.canRender?new Dm(this.threeRenderer):null,this.setRendererSize(1,1),this.lastTick=performance.now()}static get singleton(){return this[Fm]}static resetSingleton(){this[Fm].dispose(),this[Fm]=new Bs({debug:kb()})}get canRender(){return this.threeRenderer!=null&&this.context3D!=null}setRendererSize(e,r){this.canRender&&this.threeRenderer.setSize(e,r,!1),this.width=e,this.height=r}registerScene(e){this.scenes.add(e),this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop(r=>this.render(r)),this.debugger!=null&&this.debugger.addScene(e)}unregisterScene(e){this.scenes.delete(e),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null),this.debugger!=null&&this.debugger.removeScene(e)}async supportsPresentation(){return this.canRender&&this[qo].supportsPresentation()}get presentedScene(){return this[qo].presentedScene}async present(e){try{return await this[qo].present(e)}catch(r){throw await this[qo].stopPresenting(),r}finally{this.width=this.height=0}}stopPresenting(){return this[qo].stopPresenting()}get isPresenting(){return this[qo]!=null&&this[qo].isPresenting}render(e){if(!this.canRender||this.isPresenting)return;let r=e-this.lastTick,n=Ho();n!==this.threeRenderer.getPixelRatio()&&this.threeRenderer.setPixelRatio(n);for(let s of this.scenes){let{element:o,width:a,height:l,context:c}=s;if(o[ni](e,r),!s.visible||!s.isDirty||s.paused)continue;let h=s.getCamera();if(a>this.width||l>this.height){let g=Math.max(a,this.width),y=Math.max(l,this.height);this.setRendererSize(g,y)}let{exposure:f,shadow:u}=s,m=typeof f=="number"&&!self.isNaN(f);this.threeRenderer.toneMappingExposure=m?f:1;let d=this.threeRenderer.shadowMap.needsUpdate;u!=null&&(this.threeRenderer.shadowMap.needsUpdate=d||u.needsUpdate,u.needsUpdate=!1),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,0,a,l),this.threeRenderer.render(s,h);let v=a*n,p=l*n;c.clearRect(0,0,v,p),c.drawImage(this.threeRenderer.domElement,0,this.canvas3D.height-p,v,p,0,0,v,p),s.isDirty=!1}this.lastTick=e}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null,this.scenes.clear(),this.canvas3D.removeEventListener("webglcontextlost",this[jb])}[(XI=Fm,ZI=jb,QI)](e){this.dispatchEvent({type:"contextlost",sourceEvent:e})}};Bs[XI]=new Bs({debug:kb()});var KI,JI,H9=(t,e,r=()=>{})=>{let n=s=>{r(s.loaded/s.total)};return new Promise((s,o)=>{e.load(t,s,n,o)})},Yb=Symbol("releaseFromCache"),Us=new Map,Xb=new Map,Hs=Symbol("evictionPolicy"),eR,tR=new vi,lf=Symbol("loader"),si=class{constructor(){this[JI]=new MI,this.roughnessMipmapper=new CI(Bs.singleton.threeRenderer),this[lf].setDRACOLoader(tR)}static setDRACODecoderLocation(e){eR=e,tR.setDecoderPath(e)}static getDRACODecoderLocation(){return eR}static get cache(){return Us}static clearCache(){Us.forEach((e,r)=>{this.delete(r)}),this[Hs].reset()}static has(e){return Us.has(e)}static async delete(e){if(!this.has(e))return;let r=Us.get(e);Xb.delete(e),Us.delete(e),(await r).scenes.forEach(s=>{s.traverse(o=>{if(!o.isMesh)return;let a=o;(Array.isArray(a.material)?a.material:[a.material]).forEach(c=>{c.dispose()}),a.geometry.dispose()})})}static hasFinishedLoading(e){return!!Xb.get(e)}get[(KI=Hs,JI=lf,Hs)](){return this.constructor[Hs]}async preload(e,r=()=>{}){Us.has(e)||Us.set(e,H9(e,this[lf],n=>{r(n*.9)})),await Us.get(e),r&&r(1),Xb.set(e,!0)}async load(e,r=()=>{}){await this.preload(e,r);let n=await Us.get(e),s=[];n.scene!=null&&n.scene.traverse(l=>{if(l.frustumCulled=!1,l.name||(l.name=l.uuid),!l.isMesh)return;l.castShadow=!0;let c=l,h=!1;(Array.isArray(c.material)?c.material:[c.material]).forEach(u=>{u.isMeshStandardMaterial&&(u.transparent&&u.side===yo&&(h=!0,u.side=bn),this.roughnessMipmapper.generateMipmaps(u))}),h&&s.push(c)});for(let l of s){let h=(Array.isArray(l.material)?l.material:[l.material]).map(m=>{let d=m.clone();return d.side=tr,d}),f=Array.isArray(l.material)?h:h[0],u=new Xe(l.geometry,f);u.renderOrder=-1,l.add(u)}let o=OI(n),a=o.scene?o.scene:null;return a!=null&&(a.userData.animations=o.animations,this[Hs].retain(e),a[Yb]=(()=>{let l=!1;return()=>{l||(a.traverse(c=>{if(!c.isMesh)return;let h=c;(Array.isArray(h.material)?h.material:[h.material]).forEach(u=>{u.dispose()})}),this[Hs].release(e),l=!0)}})()),a}};si[KI]=new Lb(si);var rR,iR,Nm=Symbol("cancelPendingSourceChange"),Yc=Symbol("currentScene"),km=45,nR=Symbol("loader"),Vm=class extends ve{constructor(){super();this[rR]=null,this[iR]=new si,this.animations=[],this.animationsByName=new Map,this.currentAnimationAction=null,this.modelContainer=new ve,this.animationNames=[],this.boundingBox=new Hr,this.size=new F,this.idealCameraDistance=0,this.fieldOfViewAspect=0,this.userData={url:null},this.url=null,this.name="Model",this.modelContainer.name="ModelContainer",this.add(this.modelContainer),this.mixer=new qc(this.modelContainer)}get loader(){return this[nR]}hasModel(){return!!this.modelContainer.children.length}setObject(e){this.clear(),this.modelContainer.add(e),this.updateFraming(),this.dispatchEvent({type:"model-load"})}async setSource(e,r){if(!e||e===this.url){r&&r(1);return}this[Nm]!=null&&(this[Nm](),this[Nm]=null),this.url=e;let n=null;try{n=await new Promise(async(l,c)=>{this[Nm]=()=>c();try{let h=await this.loader.load(e,r);l(h)}catch(h){c(h)}})}catch(l){if(l==null)return;throw l}this.clear(),this[Yc]=n,n!=null&&Db(n,this.modelContainer),this.modelContainer.traverse(l=>{l&&l.type==="Mesh"&&(l.castShadow=!0)});let s=n?n.userData.animations:[],o=new Map,a=[];for(let l of s)o.set(l.name,l),a.push(l.name);this.animations=s,this.animationsByName=o,this.animationNames=a,this.userData.url=e,this.updateFraming(),this.dispatchEvent({type:"model-load",url:e})}set animationTime(e){this.currentAnimationAction!=null&&(this.currentAnimationAction.time=e)}get animationTime(){return this.currentAnimationAction!=null?this.currentAnimationAction.time:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,r=0){let{animations:n}=this;if(n==null||n.length===0){console.warn("Cannot play animation (model does not have any animations)");return}let s=null;e!=null&&(s=this.animationsByName.get(e)),s==null&&(s=n[0]);try{let{currentAnimationAction:o}=this;this.currentAnimationAction=this.mixer.clipAction(s,this).play(),this.currentAnimationAction.enabled=!0,o!=null&&this.currentAnimationAction!==o&&this.currentAnimationAction.crossFadeFrom(o,r,!1)}catch(o){console.error(o)}}stopAnimation(){this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction.reset(),this.currentAnimationAction=null),this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e)}clear(){this.url=null,this.userData={url:null},this[Yc]!=null&&(Db(this.modelContainer,this[Yc]),this[Yc][Yb](),this[Yc]=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}updateFraming(e=null){this.remove(this.modelContainer),e==null&&(this.boundingBox.setFromObject(this.modelContainer),this.boundingBox.getSize(this.size),e=this.boundingBox.getCenter(new F));let r=(l,c)=>Math.max(l,e.distanceToSquared(c)),n=Math.sqrt(Fb(this.modelContainer,r)),s=km/2*Math.PI/180;this.idealCameraDistance=n/Math.sin(s);let o=Math.tan(s),a=(l,c)=>{c.sub(e);let h=Math.sqrt(c.x*c.x+c.z*c.z);return Math.max(l,h/(this.idealCameraDistance-Math.abs(c.y)))};this.fieldOfViewAspect=Fb(this.modelContainer,a)/o,this.add(this.modelContainer)}};rR=Yc,iR=nR;var q9=.001,sR=.1,oR=9,z9=6,aR=2,Zb=class extends Wa{constructor(e,r,n){super();this.model=e,this.shadowMaterial=new Io,this.boundingBox=new Hr,this.size=new F,this.needsUpdate=!1,this.intensity=0,this.castShadow=!0,this.frustumCulled=!1,this.floor=new Xe(new Ji,this.shadowMaterial),this.floor.rotateX(-Math.PI/2),this.floor.receiveShadow=!0,this.floor.castShadow=!1,this.floor.frustumCulled=!1,this.add(this.floor),this.shadow.camera.up.set(0,0,1),this.target=r,this.setModel(e,n)}setModel(e,r){this.model=e;let{camera:n}=this.shadow;this.boundingBox.copy(e.boundingBox),this.size.copy(e.size);let{boundingBox:s,size:o}=this;if(this.model.animationNames.length>0){let l=Math.max(o.x,o.y,o.z)*aR;o.y=l,s.expandByVector(o.subScalar(l).multiplyScalar(-.5)),s.max.y=s.min.y+l,o.set(l,l,l)}let a=o.y*q9;this.position.y=s.max.y+a,s.getCenter(this.floor.position),this.floor.position.y-=o.y/2+this.position.y-2*a,n.near=0,n.far=o.y,this.setSoftness(r)}setSoftness(e){let r=Math.pow(2,oR-e*(oR-z9));this.setMapSize(r)}setMapSize(e){let{camera:r,mapSize:n,map:s}=this.shadow,{boundingBox:o,size:a}=this;s!=null&&(s.dispose(),this.shadow.map=null),this.model.animationNames.length>0&&(e*=aR);let l=Math.floor(a.x>a.z?e:e*a.x/a.z),c=Math.floor(a.x>a.z?e*a.z/a.x:e);n.set(l,c);let h=2.5*a.x/l,f=2.5*a.z/c;r.left=-o.max.x-h,r.right=-o.min.x+h,r.bottom=o.min.z-f,r.top=o.max.z+f,this.updateMatrixWorld(),r.updateProjectionMatrix(),this.shadow.updateMatrices(this),this.floor.scale.set(a.x+2*h,a.z+2*f,1),this.needsUpdate=!0}setIntensity(e){this.shadowMaterial.opacity=e*sR,e>0?(this.visible=!0,this.floor.visible=!0):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.shadowMaterial.opacity/sR}setRotation(e){this.shadow.camera.up.set(Math.sin(e),0,Math.cos(e)),this.shadow.updateMatrices(this)}};var lR;var W9=Math.tan(km/2*Math.PI/180),Bm=Symbol("paused"),Qb=class extends fr{constructor({canvas:e,element:r,width:n,height:s}){super();this[lR]=!1,this.aspect=1,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.width=1,this.height=1,this.isVisible=!1,this.isDirty=!1,this.exposure=1,this.framedFieldOfView=km,this.camera=new Bt(45,1,.1,100),this.name="ModelScene",this.element=r,this.canvas=e,this.context=e.getContext("2d"),this.model=new Vm,this.camera=new Bt(45,1,.1,100),this.camera.name="MainCamera",this.activeCamera=this.camera,this.pivot=new ve,this.pivot.name="Pivot",this.pivotCenter=new F,this.add(this.pivot),this.pivot.add(this.model),this.setSize(n,s),this.model.addEventListener("model-load",o=>this.onModelLoad(o))}get paused(){return this[Bm]}pause(){this[Bm]=!0}resume(){this[Bm]=!1}async setModelSource(e,r){try{await this.model.setSource(e,r)}catch(n){throw new Error(`Could not set model source to '${e}': ${n.message}`)}}setSize(e,r){if(e!==this.width||r!==this.height){this.width=Math.max(e,1),this.height=Math.max(r,1);let n=Ho();this.canvas.width=this.width*n,this.canvas.height=this.height*n,this.canvas.style.width=`${this.width}px`,this.canvas.style.height=`${this.height}px`,this.aspect=this.width/this.height,this.frameModel(),Promise.resolve().then(()=>{this.element[xr].render(performance.now())})}}frameModel(){let e=W9*Math.max(1,this.model.fieldOfViewAspect/this.aspect);this.framedFieldOfView=2*Math.atan(e)*180/Math.PI}getSize(){return{width:this.width,height:this.height}}getCamera(){return this.activeCamera}setCamera(e){this.activeCamera=e}setPivotRotation(e){this.pivot.rotation.y=e,this.pivot.position.x=-this.pivotCenter.x,this.pivot.position.z=-this.pivotCenter.z,this.pivot.position.applyAxisAngle(this.pivot.up,e),this.pivot.position.x+=this.pivotCenter.x,this.pivot.position.z+=this.pivotCenter.z,this.shadow!=null&&this.shadow.setRotation(e)}getPivotRotation(){return this.pivot.rotation.y}onModelLoad(e){this.frameModel(),this.setShadowIntensity(this.shadowIntensity),this.shadow!=null&&this.shadow.setModel(this.model,this.shadowSoftness),this.element[nr](),this.dispatchEvent({type:"model-load",url:e.url})}setShadowIntensity(e){this.shadowIntensity=e,e>0&&this.model.hasModel()&&(this.shadow==null&&(this.shadow=new Zb(this.model,this.pivot,this.shadowSoftness),this.pivot.add(this.shadow)),this.shadow.setIntensity(e))}setShadowSoftness(e){this.shadowSoftness=e,this.shadow!=null&&this.shadow.setSoftness(e)}};lR=Bm;var cR=async t=>new Promise((e,r)=>{let n=512,s=t.match(/data:(.*);/);if(!s)return r(new Error(`${t} is not a valid data Url`));let o=s[1],a=t.replace(/data:image\/\w+;base64,/,""),l=atob(a),c=[];for(let h=0;h<l.length;h+=n){let f=l.slice(h,h+n),u=new Array(f.length);for(let d=0;d<f.length;d++)u[d]=f.charCodeAt(d);let m=new Uint8Array(u);c.push(m)}e(new Blob(c,{type:o}))});var hR,uR,cf=Symbol("ongoingActivities"),Kb=Symbol("announceTotalProgress"),Um=Symbol("eventDelegate"),G9=.5,Jb=class{constructor(){this[hR]=document.createDocumentFragment(),this.addEventListener=(...e)=>this[Um].addEventListener(...e),this.removeEventListener=(...e)=>this[Um].removeEventListener(...e),this.dispatchEvent=(...e)=>this[Um].dispatchEvent(...e),this[uR]=new Set}get ongoingActivityCount(){return this[cf].size}beginActivity(){let e={progress:0};return this[cf].add(e),this.ongoingActivityCount===1&&this[Kb](),r=>{let n;return n=Math.max(Uo(r,0,1),e.progress),n!==e.progress&&(e.progress=n,this[Kb]()),e.progress}}[(hR=Um,uR=cf,Kb)](){let e=0,r=0,n=0;for(let s of this[cf]){let{progress:o}=s,a=G9/Math.pow(2,r++);e+=o*a,o===1&&n++}n===this.ongoingActivityCount&&(e=1,this[cf].clear()),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:e}}))}};var fR=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},dR,pR,mR,gR,vR,yR,_R,bR,wR,SR,$9=1e3,j9=50,Y9=300,X9=150,Xc=Symbol("updateSize"),hf=Symbol("loaded"),ew=Symbol("template"),Hm=Symbol("fallbackResizeHandler"),tw=Symbol("defaultAriaLabel"),qm=Symbol("resizeObserver"),zm=Symbol("intersectionObserver"),rw=Symbol("lastDpr"),uf=Symbol("clearModelTimeout"),ER=Symbol("onContextLost"),iw=Symbol("contextLostHandler"),rn=Symbol("isInRenderTree"),ff=Symbol("ariaLabel"),df=Symbol("loadedTime"),qs=Symbol("updateSource"),xR=Symbol("markLoaded"),nn=Symbol("container"),yi=Symbol("canvas"),Ee=Symbol("scene"),nr=Symbol("needsRender"),ni=Symbol("tick"),Bi=Symbol("onModelLoad"),zo=Symbol("onResize"),che=Symbol("onUserModelOrbit"),xr=Symbol("renderer"),zs=Symbol("progressTracker"),pf=Symbol("getLoaded"),mf=Symbol("getModelIsVisible"),nw=t=>({x:t.x,y:t.y,z:t.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),Zc=class extends ba{constructor(){super();this.alt=null,this.src=null,this[dR]=!1,this[pR]=!1,this[mR]=0,this[gR]=Ho(),this[vR]=null,this[yR]=$c(()=>{let o=this.getBoundingClientRect();this[Xc](o)},j9),this[_R]=null,this[bR]=null,this[wR]=new Jb,this[SR]=o=>this[ER](o);let e=this.constructor.template;window.ShadyCSS&&window.ShadyCSS.styleElement(this,{}),this.attachShadow({mode:"open"});let r=this.shadowRoot;r.appendChild(e.content.cloneNode(!0)),this[nn]=r.querySelector(".container"),this[yi]=r.querySelector("canvas"),this[tw]=this[yi].getAttribute("aria-label");let n,s;if(this.isConnected){let o=this.getBoundingClientRect();n=o.width,s=o.height}else n=Y9,s=X9;if(this[Ee]=new Qb({canvas:this[yi],element:this,width:n,height:s}),this[Ee].addEventListener("model-load",o=>{this[xR](),this[Bi](o),this.dispatchEvent(new CustomEvent("load",{detail:{url:o.url}}))}),Promise.resolve().then(()=>{this[Xc](this.getBoundingClientRect(),!0)}),ap&&(this[qm]=new ResizeObserver(o=>{if(!this[xr].isPresenting)for(let a of o)a.target===this&&this[Xc](a.contentRect)})),lp){let o=this[zs].beginActivity();this[zm]=new IntersectionObserver(a=>{for(let l of a)if(l.target===this){let c=this[rn];this[rn]=this[Ee].visible=l.isIntersecting,this.requestUpdate(rn,c),this[rn]&&Promise.resolve().then(()=>{o(1)})}},{root:null,rootMargin:"10px",threshold:0})}else this[rn]=this[Ee].visible=!0,this.requestUpdate(rn,!1)}static get is(){return"model-viewer"}static get template(){return this.hasOwnProperty(ew)||(this[ew]=KM(this.is)),this[ew]}static set modelCacheSize(e){si[Hs].evictionThreshold=e}static get modelCacheSize(){return si[Hs].evictionThreshold}get loaded(){return this[pf]()}get[(dR=rn,pR=hf,mR=df,gR=rw,vR=uf,yR=Hm,_R=qm,bR=zm,wR=zs,SR=iw,xr)](){return Bs.singleton}get modelIsVisible(){return this[mf]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),ap?this[qm].observe(this):self.addEventListener("resize",this[Hm]),lp&&this[zm].observe(this),this[xr].addEventListener("contextlost",this[iw]),this[xr].registerScene(this[Ee]),this[Ee].isDirty=!0,this[uf]!=null&&(self.clearTimeout(this[uf]),this[uf]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),ap?this[qm].unobserve(this):self.removeEventListener("resize",this[Hm]),lp&&this[zm].unobserve(this),this[xr].removeEventListener("contextlost",this[iw]),this[xr].unregisterScene(this[Ee]),this[uf]=self.setTimeout(()=>{this[Ee].model.clear()},$9)}updated(e){if(super.updated(e),e.has("src")&&(this.src==null||this.src!==this[Ee].model.url)&&(this[hf]=!1,this[df]=0,this[qs]()),e.has("alt")){let r=this.alt==null?this[tw]:this.alt;this[yi].setAttribute("aria-label",r)}}toDataURL(e,r){return this[yi].toDataURL(e,r)}async toBlob(e){let r=e?e.mimeType:void 0,n=e?e.qualityArgument:void 0,s=e?e.idealAspect:void 0,{width:o,height:a,model:l,aspect:c}=this[Ee];if(s===!0){let h=l.fieldOfViewAspect>c?o:Math.round(a*l.fieldOfViewAspect),f=l.fieldOfViewAspect>c?Math.round(o/l.fieldOfViewAspect):a;this[Xc]({width:h,height:f}),await new Promise(u=>requestAnimationFrame(u))}try{return new Promise(async(h,f)=>{if(this[yi].msToBlob&&(!r||r==="image/png"))return h(this[yi].msToBlob());if(!this[yi].toBlob)return h(await cR(this[yi].toDataURL(r,n)));this[yi].toBlob(u=>{if(!u)return f(new Error("Unable to retrieve canvas blob"));h(u)},r,n)})}finally{this[Xc]({width:o,height:a})}}get[ff](){return this.alt==null||this.alt==="null"?this[tw]:this.alt}[pf](){return this[hf]}[mf](){return!0}[Xc]({width:e,height:r},n=!1){let{width:s,height:o}=this[Ee].getSize(),a=parseInt(e,10),l=parseInt(r,10);this[nn].style.width=`${e}px`,this[nn].style.height=`${r}px`,(n||s!==a||o!==l)&&this[zo]({width:a,height:l})}[ni](e,r){let n=Ho();n!==this[rw]&&(this[rw]=n,this[Hm]())}[xR](){this[hf]||(this[hf]=!0,this[df]=performance.now(),this.requestUpdate())}[nr](){this[Ee].isDirty=!0}[Bi](e){this[nr]()}[zo](e){this[Ee].setSize(e.width,e.height),this[nr]()}[ER](e){this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:e.sourceEvent}}))}async[qs](){let e=this[zs].beginActivity(),r=this.src;try{this[yi].classList.add("show"),await this[Ee].setModelSource(r,n=>e(n*.9))}catch(n){this[yi].classList.remove("show"),this.dispatchEvent(new CustomEvent("error",{detail:n}))}finally{e(1)}}};fR([st({type:String})],Zc.prototype,"alt",void 0);fR([st({converter:{fromAttribute:Vs}})],Zc.prototype,"src",void 0);var sw=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},TR=1e3,Wm=Symbol("changeAnimation"),Ws=Symbol("paused"),AR=t=>{var e;class r extends t{constructor(){super(...arguments);this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0}get availableAnimations(){return this.loaded?this[Ee].model.animationNames:[]}get paused(){return this[Ws]}get currentTime(){return this[Ee].model.animationTime}set currentTime(s){this[Ee].model.animationTime=s}pause(){this[Ws]||(this[Ws]=!0,this[xr].threeRenderer.shadowMap.autoUpdate=!1,this.dispatchEvent(new CustomEvent("pause")))}play(){this[Ws]&&this.availableAnimations.length>0&&(this[Ws]=!1,this[xr].threeRenderer.shadowMap.autoUpdate=!0,this[Ee].model.hasActiveAnimation||this[Wm](),this.dispatchEvent(new CustomEvent("play")))}[(e=Ws,Bi)](){this[Ws]=!0,this.autoplay&&(this[Wm](),this.play())}[ni](s,o){if(super[ni](s,o),this[Ws])return;let{model:a}=this[Ee];a.updateAnimation(o/TR),this[nr]()}updated(s){super.updated(s),s.has("autoplay")&&this.autoplay&&this.play(),s.has("animationName")&&this[Wm]()}async[qs](){return this[Ee].model.stopAnimation(),super[qs]()}[Wm](){let{model:s}=this[Ee];s.playAnimation(this.animationName,this.animationCrossfadeDuration/TR),this[Ws]&&(s.updateAnimation(0),this[nr]())}}return sw([st({type:Boolean})],r.prototype,"autoplay",void 0),sw([st({type:String,attribute:"animation-name"})],r.prototype,"animationName",void 0),sw([st({type:Number,attribute:"animation-crossfade-duration"})],r.prototype,"animationCrossfadeDuration",void 0),r};var tl=function(t){ve.call(this),this.element=t,this.element.style.position="absolute",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})};tl.prototype=Object.create(ve.prototype);tl.prototype.constructor=tl;var MR=function(){var t=this,e,r,n,s,o=new F,a=new Ue,l=new Ue,c={objects:new WeakMap},h=document.createElement("div");h.style.overflow="hidden",this.domElement=h,this.getSize=function(){return{width:e,height:r}},this.setSize=function(v,p){e=v,r=p,n=e/2,s=r/2,h.style.width=v+"px",h.style.height=p+"px"};var f=function(v,p,g){if(v instanceof tl){v.onBeforeRender(t,p,g),o.setFromMatrixPosition(v.matrixWorld),o.applyMatrix4(l);var y=v.element,_="translate(-50%,-50%) translate("+(o.x*n+n)+"px,"+(-o.y*s+s)+"px)";y.style.WebkitTransform=_,y.style.MozTransform=_,y.style.oTransform=_,y.style.transform=_,y.style.display=v.visible&&o.z>=-1&&o.z<=1?"":"none";var b={distanceToCameraSquared:u(g,v)};c.objects.set(v,b),y.parentNode!==h&&h.appendChild(y),v.onAfterRender(t,p,g)}for(var w=0,S=v.children.length;w<S;w++)f(v.children[w],p,g)},u=function(){var v=new F,p=new F;return function(g,y){return v.setFromMatrixPosition(g.matrixWorld),p.setFromMatrixPosition(y.matrixWorld),v.distanceToSquared(p)}}(),m=function(v){var p=[];return v.traverse(function(g){g instanceof tl&&p.push(g)}),p},d=function(v){for(var p=m(v).sort(function(b,w){var S=c.objects.get(b).distanceToCameraSquared,E=c.objects.get(w).distanceToCameraSquared;return S-E}),g=p.length,y=0,_=p.length;y<_;y++)p[y].element.style.zIndex=g-y};this.render=function(v,p){v.autoUpdate===!0&&v.updateMatrixWorld(),p.parent===null&&p.updateMatrixWorld(),a.copy(p.matrixWorldInverse),l.multiplyMatrices(p.projectionMatrix,a),f(v,v,p),d(v)}};var _r=(t,e)=>({type:"number",number:t,unit:e}),Gs=(()=>{let t={},e=1e3;return r=>{let n=r;if(n in t)return t[n];let s=[],o=0;for(;r;){if(++o>e){r="";break}let a=CR(r),l=a.nodes[0];if(l==null||l.terms.length===0)break;s.push(l),r=a.remainingInput}return t[n]=s}})(),CR=(()=>{let t=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,r=/^[\),]/,n="(",s="#";return o=>{let a=[];for(;o.length&&(o=o.trim(),!r.test(o));)if(o[0]===n){let{nodes:l,remainingInput:c}=PR(o);o=c,a.push({type:"function",name:{type:"ident",value:"calc"},arguments:l})}else if(t.test(o)){let l=Z9(o),c=l.nodes[0];if(o=l.remainingInput,o[0]===n){let{nodes:h,remainingInput:f}=PR(o);a.push({type:"function",name:c,arguments:h}),o=f}else a.push(c)}else if(e.test(o))a.push({type:"operator",value:o[0]}),o=o.slice(1);else{let{nodes:l,remainingInput:c}=o[0]===s?K9(o):Q9(o);if(l.length===0)break;a.push(l[0]),o=c}return{nodes:[{type:"expression",terms:a}],remainingInput:o}}})(),Z9=(()=>{let t=/[^a-z^0-9^_^\-^\u0240-\uffff]/i;return e=>{let r=e.match(t),n=r==null?e:e.substr(0,r.index),s=r==null?"":e.substr(r.index);return{nodes:[{type:"ident",value:n}],remainingInput:s}}})(),Q9=(()=>{let t=/[^0-9\.\-]|$/,e=/^[a-z%]+/i,r=/^(m|mm|cm|rad|deg|[%])$/;return n=>{let s=n.match(t),o=s==null?n:n.substr(0,s.index);n=s==null?n:n.slice(s.index);let a=n.match(e),l=a!=null&&a[0]!==""?a[0]:null,c=a==null?n:n.slice(l.length);return l!=null&&!r.test(l)&&(l=null),{nodes:[{type:"number",number:parseFloat(o)||0,unit:l}],remainingInput:c}}})(),K9=(()=>{let t=/^[a-f0-9]*/i;return e=>{e=e.slice(1).trim();let r=e.match(t);return{nodes:r==null?[]:[{type:"hex",value:r[0]}],remainingInput:r==null?e:e.slice(r[0].length)}}})(),PR=t=>{let e=[];for(t=t.slice(1).trim();t.length;){let r=CR(t);if(e.push(r.nodes[0]),t=r.remainingInput.trim(),t[0]===",")t=t.slice(1).trim();else if(t[0]===")"){t=t.slice(1);break}}return{nodes:e,remainingInput:t}},IR=Symbol("visitedTypes"),ow=class{constructor(e){this[IR]=e}walk(e,r){let n=e.slice();for(;n.length;){let s=n.shift();switch(this[IR].indexOf(s.type)>-1&&r(s),s.type){case"expression":n.unshift(...s.terms);break;case"function":n.unshift(s.name,...s.arguments);break}}}},ss=Object.freeze({type:"number",number:0,unit:null});var Gm=(t,e=0)=>{let{number:r,unit:n}=t;if(!isFinite(r))r=e,n="rad";else if(t.unit==="rad"||t.unit==null)return t;let a=(n==="deg"&&r!=null?r:0)*Math.PI/180;return{type:"number",number:a,unit:"rad"}};var RR=(t,e=0)=>{let{number:r,unit:n}=t;if(!isFinite(r))r=e,n="m";else if(t.unit==="m")return t;let s;switch(n){default:s=1;break;case"cm":s=1/100;break;case"mm":s=1/1e3;break}let o=s*r;return{type:"number",number:o,unit:"m"}},os=(()=>{let t=r=>r,e={rad:t,deg:Gm,m:t,mm:RR,cm:RR};return(r,n=ss)=>{let{number:s,unit:o}=r;if(isFinite(s)||(s=n.number,o=n.unit),o==null)return r;let a=e[o];return a==null?n:a(r)}})();var LR,OR,DR,FR,Qc=Symbol("slot"),gf=Symbol("referenceCount"),$m=Symbol("updateVisibility"),Wo=Symbol("visible"),NR=Symbol("onSlotchange"),aw=Symbol("slotchangeHandler"),jm=class extends tl{constructor(e){super(document.createElement("div"));this.normal=new F(0,1,0),this[LR]=!1,this[OR]=1,this[DR]=document.createElement("slot"),this[FR]=()=>this[NR](),this.element.classList.add("annotation-wrapper"),this[Qc].name=e.name,this[Qc].addEventListener("slotchange",this[aw]),this.element.appendChild(this[Qc]),this.updatePosition(e.position),this.updateNormal(e.normal),this.show()}show(){this[Wo]||(this[Wo]=!0,this[$m]({notify:!0}))}hide(){this[Wo]&&(this[Wo]=!1,this[$m]({notify:!0}))}dispose(){this[Qc].removeEventListener("slotchange",this[aw])}increment(){this[gf]++}decrement(){return this[gf]>0&&--this[gf],this[gf]===0}updatePosition(e){if(e==null)return;let r=Gs(e)[0].terms;for(let n=0;n<3;++n)this.position.setComponent(n,os(r[n]).number)}updateNormal(e){if(e==null)return;let r=Gs(e)[0].terms;for(let n=0;n<3;++n)this.normal.setComponent(n,os(r[n]).number)}[(LR=Wo,OR=gf,DR=Qc,FR=aw,$m)]({notify:e}){this[Wo]?this.element.classList.remove("hide"):this.element.classList.add("hide"),this[Qc].assignedNodes().forEach(r=>{if(r.nodeType!==Node.ELEMENT_NODE)return;let n=r,s=n.dataset.visibilityAttribute;if(s!=null){let o=`data-${s}`;this[Wo]?n.setAttribute(o,""):n.removeAttribute(o)}e&&n.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:this[Wo]}}))})}[NR](){this[$m]({notify:!1})}};var Ym=Symbol("annotationRenderer"),kR=Symbol("updateHotspots"),Kc=Symbol("hotspotMap"),lw=Symbol("mutationCallback"),vf=Symbol("observer"),Xm=Symbol("pixelPosition"),cw=Symbol("addHotspot"),VR=Symbol("removeHotspot"),BR=new yb,UR=t=>{var e,r,n,s,o;class a extends t{constructor(...c){super(...c);this[e]=new MR,this[r]=new Map,this[n]=f=>{f.forEach(u=>{(!(u instanceof MutationRecord)||u.type==="childList")&&(u.addedNodes.forEach(m=>{this[cw](m)}),u.removedNodes.forEach(m=>{this[VR](m)}))})},this[s]=new MutationObserver(this[lw]),this[o]=new he;let{domElement:h}=this[Ym];h.classList.add("annotation-container"),this.shadowRoot.querySelector(".container").appendChild(h)}connectedCallback(){super.connectedCallback();for(let h=0;h<this.children.length;++h)this[cw](this.children[h]);let{ShadyDOM:c}=self;c==null?this[vf].observe(this,{childList:!0}):this[vf]=c.observeChildren(this,this[lw])}disconnectedCallback(){super.disconnectedCallback();let{ShadyDOM:c}=self;c==null?this[vf].disconnect():c.unobserveChildren(this[vf])}updateHotspot(c){let h=this[Kc].get(c.name);h!=null&&(h.updatePosition(c.position),h.updateNormal(c.normal))}positionAndNormalFromPoint(c,h){let{width:f,height:u}=this[Ee];this[Xm].set(c/f,h/u).multiplyScalar(2).subScalar(1),this[Xm].y*=-1,BR.setFromCamera(this[Xm],this[Ee].getCamera());let m=BR.intersectObject(this[Ee],!0);if(m.length===0)return null;let d=m[0];if(d.face==null)return null;let v=new Ue().getInverse(this[Ee].pivot.matrixWorld),p=nw(d.point.applyMatrix4(v)),g=nw(d.face.normal.applyMatrix4(d.object.matrixWorld).applyMatrix4(v));return{position:p,normal:g}}[(e=Ym,r=Kc,n=lw,s=vf,o=Xm,ni)](c,h){super[ni](c,h),this[kR](),this[Ym].render(this[Ee],this[Ee].activeCamera)}[zo](c){super[zo](c),this[Ym].setSize(c.width,c.height)}[kR](){let{children:c}=this[Ee].pivot;for(let h=0,f=c.length;h<f;h++){let u=c[h];if(u instanceof jm){let m=this[Ee].activeCamera.position.clone();m.sub(u.position);let d=u.normal.clone().transformDirection(this[Ee].pivot.matrixWorld);m.dot(d)<0?u.hide():u.show()}}}[cw](c){if(!(c instanceof HTMLElement&&c.slot.indexOf("hotspot")===0))return;let h=this[Kc].get(c.slot);h!=null?h.increment():(h=new jm({name:c.slot,position:c.dataset.position,normal:c.dataset.normal}),this[Kc].set(c.slot,h),this[Ee].pivot.add(h))}[VR](c){if(!(c instanceof HTMLElement))return;let h=this[Kc].get(c.slot);!h||h.decrement()&&(this[Ee].pivot.remove(h),this[Kc].delete(c.slot),h.dispose())}}return a};var HR=t=>e=>{try{let r=Gs(e),n=(r.length?r[0].terms:[]).filter(o=>o&&o.type==="ident").map(o=>o.value).filter(o=>t.indexOf(o)>-1),s=new Set;for(let o of n)s.add(o);return s}catch(r){}return new Set};var yf=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},J9=(()=>{let t=document.createElement("a");return t.setAttribute("rel","ar"),t.appendChild(document.createElement("img")),e=>{t.setAttribute("href",e),t.click()}})(),eY=(()=>{let t=document.createElement("a"),e=/(link|title)(=|&)|(\?|&)(link|title)$/,r="#model-viewer-no-ar-fallback",n=!1;return(s,o,a)=>{if(n)return;let l=self.location.toString(),c=new URL(l),h=new URL(s),f=encodeURIComponent(l),u=h.protocol.replace(":","");h.search&&h.search.match(e)&&console.warn(`The model URL (${h.toString()}) contains a "link" and/or "title" query parameter.
 These parameters are used to configure Scene Viewer and will be duplicated in the URL.
 You should choose different query parameter names if possible!`),c.hash=r,o=encodeURIComponent(o),h.protocol="intent://",h.search+=(h.search?"&":"")+`link=${f}&title=${o}`,a==="fixed"&&(h.search+="&resizable=false");let m=`${h.toString()}#Intent;scheme=${u};package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(c.toString())};end;`,d=()=>{self.location.hash===r&&!n&&(n=!0,self.history.back())};self.addEventListener("hashchange",d,{once:!0}),t.setAttribute("href",m),t.click()}})(),tY=HR(["safari","chrome"]),as={QUICK_LOOK:"quick-look",AR_VIEWER:"ar-viewer",UNSTABLE_WEBXR:"unstable-webxr",NONE:"none"},hw=Symbol("exitFullscreenButtonContainer"),rl=Symbol("arButtonContainer"),rY=Symbol("defaultExitFullscreenButton"),qR=Symbol("enterARWithWebXR"),iY=Symbol("canActivateAR"),Go=Symbol("arMode"),zR=Symbol("canLaunchQuickLook"),Zm=Symbol("quickLookBrowsers"),uw=Symbol("arButtonContainerFallbackClickHandler"),WR=Symbol("onARButtonContainerFallbackClick"),fw=Symbol("arButtonContainerClickHandler"),GR=Symbol("onARButtonContainerClick"),dw=Symbol("exitFullscreenButtonContainerClickHandler"),$R=Symbol("onExitFullscreenButtonClick"),pw=Symbol("fullscreenHandler"),jR=Symbol("onFullscreen"),YR=t=>{var e,r,n,s,o,a,l,c,h,f;class u extends t{constructor(){super(...arguments);this.ar=!1,this.arScale="auto",this.unstableWebxr=!1,this.iosSrc=null,this.quickLookBrowsers="safari",this[e]=!1,this[r]=this.shadowRoot.querySelector(".ar-button"),this[n]=this.shadowRoot.querySelector(".slot.exit-fullscreen-button"),this[s]=this.shadowRoot.querySelector("#default-exit-fullscreen-button"),this[o]=d=>this[WR](d),this[a]=d=>this[GR](d),this[l]=()=>this[$R](),this[c]=()=>this[jR](),this[h]=as.NONE,this[f]=new Set}get canActivateAR(){return this[Go]!==as.NONE}async activateAR(){switch(this[Go]){case as.QUICK_LOOK:J9(this.iosSrc);break;case as.UNSTABLE_WEBXR:await this[qR]();break;case as.AR_VIEWER:eY(this.src,this.alt||"",this.arScale);break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}connectedCallback(){super.connectedCallback(),document.addEventListener("fullscreenchange",this[pw])}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("fullscreenchange",this[pw])}[(e=iY,r=rl,n=hw,s=rY,o=uw,a=fw,l=dw,c=pw,h=Go,f=Zm,$R)](){document.fullscreenElement===this&&document.exitFullscreen()}[jR](){let d=this[Ee];if(document.fullscreenElement===this?this[nn].classList.add("fullscreen"):this[nn].classList.remove("fullscreen"),document.fullscreenElement!==this&&this[xr].presentedScene===d)try{this[xr].stopPresenting()}catch(p){console.warn("Unexpected error while stopping AR presentation"),console.error(p)}}async[qR](){console.log("Attempting to present in AR...");try{await this[xr].present(this[Ee])}catch(d){console.warn("Error while trying to present to AR"),console.error(d)}}async update(d){if(super.update(d),d.has("quickLookBrowsers")&&(this[Zm]=tY(this.quickLookBrowsers)),!d.has("unstableWebxr")&&!d.has("iosSrc")&&!d.has("ar")&&!d.has("src")&&!d.has("alt"))return;let v=this.unstableWebxr&&zl&&await this[xr].supportsPresentation(),p=WM&&this.ar,g=cp&&GM&&this[zR]&&!!this.iosSrc,y=v||p||g;v?this[Go]=as.UNSTABLE_WEBXR:p?this[Go]=as.AR_VIEWER:g?this[Go]=as.QUICK_LOOK:this[Go]=as.NONE,y?(this[rl].classList.add("enabled"),this[rl].addEventListener("click",this[fw]),this[rl].addEventListener("click",this[uw]),this[hw].addEventListener("click",this[dw])):(this[rl].removeEventListener("click",this[fw]),this[rl].removeEventListener("click",this[uw]),this[hw].removeEventListener("click",this[dw]),this[rl].classList.remove("enabled"))}[WR](d){this[Go]===as.AR_VIEWER&&this.requestFullscreen()}[GR](d){d.preventDefault(),this.activateAR()}get[zR](){return $M?this[Zm].has("chrome"):jM?this[Zm].has("safari"):!1}}return yf([st({type:Boolean,attribute:"ar"})],u.prototype,"ar",void 0),yf([st({type:String,attribute:"ar-scale"})],u.prototype,"arScale",void 0),yf([st({type:Boolean,attribute:"unstable-webxr"})],u.prototype,"unstableWebxr",void 0),yf([st({converter:{fromAttribute:Vs},attribute:"ios-src"})],u.prototype,"iosSrc",void 0),yf([st({type:String,attribute:"quick-look-browsers"})],u.prototype,"quickLookBrowsers",void 0),u};var XR,ZR,QR,Jc=Symbol("evaluate"),Qm=Symbol("lastValue"),Wt=class{constructor(){this[XR]=null}static evaluatableFor(e,r=ss){if(e instanceof Wt)return e;if(e.type==="number")return e.unit==="%"?new JR(e,r):e;switch(e.name.value){case"calc":return new tL(e,r);case"env":return new eL(e)}return ss}static evaluate(e){return e instanceof Wt?e.evaluate():e}static isConstant(e){return e instanceof Wt?e.isConstant:!0}static applyIntrinsics(e,r){let{basis:n,keywords:s}=r,{auto:o}=s;return n.map((a,l)=>{let c=o[l]==null?a:o[l],h=e[l]?e[l]:c;if(h.type==="ident"){let f=h.value;f in s&&(h=s[f][l])}return(h==null||h.type==="ident")&&(h=c),h.unit==="%"?_r(h.number/100*a.number,a.unit):(h=os(h,a),h.unit!==a.unit?a:h)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[Qm]==null)&&(this[Qm]=this[Jc]()),this[Qm]}};XR=Qm;var KR=Symbol("percentage"),mw=Symbol("basis"),JR=class extends Wt{constructor(e,r){super();this[KR]=e,this[mw]=r}get isConstant(){return!0}[Jc](){return _r(this[KR].number/100*this[mw].number,this[mw].unit)}},Km=Symbol("identNode"),eL=class extends Wt{constructor(e){super();this[ZR]=null;let r=e.arguments.length?e.arguments[0].terms[0]:null;r!=null&&r.type==="ident"&&(this[Km]=r)}get isConstant(){return!1}[(ZR=Km,Jc)](){if(this[Km]!=null)switch(this[Km].value){case"window-scroll-y":let e=window.pageYOffset,r=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),n=e/(r-window.innerHeight)||0;return{type:"number",number:n,unit:null}}return ss}},nY=/[\*\/]/,eh=Symbol("evalutor"),tL=class extends Wt{constructor(e,r=ss){super();if(this[QR]=null,e.arguments.length!==1)return;let n=e.arguments[0].terms.slice(),s=[];for(;n.length;){let o=n.shift();if(s.length>0){let a=s[s.length-1];if(a.type==="operator"&&nY.test(a.value)){let l=s.pop(),c=s.pop();if(c==null)return;s.push(new yw(l,Wt.evaluatableFor(c,r),Wt.evaluatableFor(o,r)));continue}}s.push(o.type==="operator"?o:Wt.evaluatableFor(o,r))}for(;s.length>2;){let[o,a,l]=s.splice(0,3);if(a.type!=="operator")return;s.unshift(new yw(a,Wt.evaluatableFor(o,r),Wt.evaluatableFor(l,r)))}s.length===1&&(this[eh]=s[0])}get isConstant(){return this[eh]==null||Wt.isConstant(this[eh])}[(QR=eh,Jc)](){return this[eh]!=null?Wt.evaluate(this[eh]):ss}},rL=Symbol("operator"),gw=Symbol("left"),vw=Symbol("right"),yw=class extends Wt{constructor(e,r,n){super();this[rL]=e,this[gw]=r,this[vw]=n}get isConstant(){return Wt.isConstant(this[gw])&&Wt.isConstant(this[vw])}[Jc](){let e=os(Wt.evaluate(this[gw])),r=os(Wt.evaluate(this[vw])),{number:n,unit:s}=e,{number:o,unit:a}=r;if(a!=null&&s!=null&&a!=s)return ss;let l=s||a,c;switch(this[rL].value){case"+":c=n+o;break;case"-":c=n-o;break;case"/":c=n/o;break;case"*":c=n*o;break;default:return ss}return{type:"number",number:c,unit:l}}},_w=Symbol("evaluatables"),iL=Symbol("intrinsics"),bw=class extends Wt{constructor(e,r){super();this[iL]=r;let n=e[0],s=n!=null?n.terms:[];this[_w]=r.basis.map((o,a)=>{let l=s[a];return l==null?{type:"ident",value:"auto"}:l.type==="ident"?l:Wt.evaluatableFor(l,o)})}get isConstant(){for(let e of this[_w])if(!Wt.isConstant(e))return!1;return!0}[Jc](){let e=this[_w].map(r=>Wt.evaluate(r));return Wt.applyIntrinsics(e,this[iL]).map(r=>r.number)}};var nL,sL,oL,aL,th=Symbol("instances"),lL=Symbol("activateListener"),cL=Symbol("deactivateListener"),ww=Symbol("notifyInstances"),hL=Symbol("notify"),uL=Symbol("callback"),Cn=class{constructor(e){this[uL]=e}static[ww](){for(let e of Cn[th])e[hL]()}static[(nL=th,lL)](){window.addEventListener("scroll",this[ww],{passive:!0})}static[cL](){window.removeEventListener("scroll",this[ww])}observe(){Cn[th].size===0&&Cn[lL](),Cn[th].add(this)}disconnect(){Cn[th].delete(this),Cn[th].size===0&&Cn[cL]()}[hL](){this[uL]()}};Cn[nL]=new Set;var fL=Symbol("computeStyleCallback"),dL=Symbol("astWalker"),_f=Symbol("dependencies"),pL=Symbol("scrollHandler"),mL=Symbol("onScroll"),Sw=class{constructor(e){this[sL]={},this[oL]=new ow(["function"]),this[aL]=()=>this[mL](),this[fL]=e}observeEffectsFor(e){let r={},n=this[_f];this[dL].walk(e,s=>{let{name:o}=s,l=s.arguments[0].terms[0];if(!(o.value!=="env"||l==null||l.type!=="ident"))switch(l.value){case"window-scroll-y":if(r["window-scroll"]==null){let c="window-scroll"in n?n["window-scroll"]:new Cn(this[pL]);c.observe(),delete n["window-scroll"],r["window-scroll"]=c}break}});for(let s in n)n[s].disconnect();this[_f]=r}dispose(){for(let e in this[_f])this[_f][e].disconnect()}[(sL=_f,oL=dL,aL=pL,mL)](){this[fL]({relatedState:"window-scroll"})}};var $o=t=>{let e=t.observeEffects||!1,r=t.intrinsics instanceof Function?t.intrinsics:()=>t.intrinsics;return(n,s)=>{let o=n.updated,a=n.connectedCallback,l=n.disconnectedCallback,c=Symbol(`${s}StyleEffector`),h=Symbol(`${s}StyleEvaluator`),f=Symbol(`${s}UpdateEvaluator`),u=Symbol(`${s}EvaluateAndSync`);Object.defineProperties(n,{[c]:{value:null,writable:!0},[h]:{value:null,writable:!0},[f]:{value:function(){let m=Gs(this[s]);this[h]=new bw(m,r(this)),this[c]==null&&e&&(this[c]=new Sw(()=>this[u]())),this[c]!=null&&this[c].observeEffectsFor(m)}},[u]:{value:function(){if(this[h]==null)return;let m=this[h].evaluate();this[t.updateHandler](m)}},updated:{value:function(m){m.has(s)&&(this[f](),this[u]()),o.call(this,m)}},connectedCallback:{value:function(){a.call(this),this.requestUpdate(s,this[s])}},disconnectedCallback:{value:function(){l.call(this),this[c]!=null&&(this[c].dispose(),this[c]=null)}}})}};var gL,vL,yL,_L,bL,wL,SL,EL,xL,TL,AL,ML,CL,PL,IL,RL,LL,sY=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,eventHandlingBehavior:"prevent-all",interactionPolicy:"always-allow"}),bf=Symbol("velocity"),pr=Symbol("spherical"),Tr=Symbol("goalSpherical"),OL=Symbol("thetaDamper"),DL=Symbol("phiDamper"),FL=Symbol("radiusDamper"),wf=Symbol("fov"),Sf=Symbol("goalLogFov"),NL=Symbol("fovDamper"),ls=Symbol("target"),rh=Symbol("goalTarget"),kL=Symbol("targetDamperX"),VL=Symbol("targetDamperY"),BL=Symbol("targetDamperZ"),Ui=Symbol("options"),Ew=Symbol("touchMode"),xw=Symbol("canInteract"),ih=Symbol("interactionEnabled"),cs=Symbol("userAdjustOrbit"),Jm=Symbol("isUserChange"),UL=Symbol("isMoving"),HL=Symbol("moveCamera"),Ef=Symbol("isUserPointing"),eg=Symbol("pointerIsDown"),jo=Symbol("lastPointerPosition"),xf=Symbol("lastTouches"),Tw=Symbol("pixelLengthToSphericalAngle"),Aw=Symbol("twoTouchDistance"),qL=Symbol("wrapAngle"),Mw=Symbol("onMouseMove"),Cw=Symbol("onMouseDown"),Pw=Symbol("onMouseUp"),Iw=Symbol("onTouchStart"),Rw=Symbol("onTouchEnd"),Lw=Symbol("onTouchMove"),Ow=Symbol("onWheel"),Dw=Symbol("onKeyDown"),Fw=Symbol("handlePointerMove"),Nw=Symbol("handleSinglePointerMove"),kw=Symbol("handlePointerDown"),Vw=Symbol("handleSinglePointerDown"),Bw=Symbol("handlePointerUp"),zL=Symbol("handleWheel"),WL=Symbol("handleKey"),GL=/^touch(start|end|move)$/,tg=Math.PI/8,rg=.1,$L=50,Tf=1/$L,oY=2e-4*Tf,nh={PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40},Af={USER_INTERACTION:"user-interaction",NONE:"none"},Yo=class{constructor(){this[gL]=0}update(e,r,n,s){if(e==null||e===r&&this[bf]===0)return r;if(n<0)return e;let o=e-r,a=this[bf]+Tf*o,l=o+n*a,c=Math.exp(-Tf*n),h=(a-Tf*l)*c,f=-Tf*(h+a*c);return Math.abs(h)<oY*s&&f*o>=0?(this[bf]=0,r):(this[bf]=h,r+l*c)}};gL=bf;var Uw=class extends yr{constructor(e,r){super();this.camera=e,this.element=r,this[vL]=!1,this[yL]=!1,this[_L]=!1,this[bL]=new Xa,this[wL]=new Xa,this[SL]=new Yo,this[EL]=new Yo,this[xL]=new Yo,this[TL]=new Yo,this[AL]=new F,this[ML]=new F,this[CL]=new Yo,this[PL]=new Yo,this[IL]=new Yo,this[RL]=!1,this[LL]={clientX:0,clientY:0},this[Mw]=n=>this[Fw](n),this[Cw]=n=>this[kw](n),this[Pw]=n=>this[Bw](n),this[Ow]=n=>this[zL](n),this[Dw]=n=>this[WL](n),this[Iw]=n=>this[kw](n),this[Rw]=n=>this[Bw](n),this[Lw]=n=>this[Fw](n),this[Ui]=Object.assign({},sY),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this[ih]}enableInteraction(){if(this[ih]===!1){let{element:e}=this;e.addEventListener("mousemove",this[Mw]),e.addEventListener("mousedown",this[Cw]),e.addEventListener("wheel",this[Ow]),e.addEventListener("keydown",this[Dw]),e.addEventListener("touchstart",this[Iw]),e.addEventListener("touchmove",this[Lw]),self.addEventListener("mouseup",this[Pw]),self.addEventListener("touchend",this[Rw]),this.element.style.cursor="grab",this[ih]=!0}}disableInteraction(){if(this[ih]===!0){let{element:e}=this;e.removeEventListener("mousemove",this[Mw]),e.removeEventListener("mousedown",this[Cw]),e.removeEventListener("wheel",this[Ow]),e.removeEventListener("keydown",this[Dw]),e.removeEventListener("touchstart",this[Iw]),e.removeEventListener("touchmove",this[Lw]),self.removeEventListener("mouseup",this[Pw]),self.removeEventListener("touchend",this[Rw]),e.style.cursor="",this[ih]=!1}}get options(){return this[Ui]}getCameraSpherical(e=new Xa){return e.copy(this[pr])}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this[Ui],e),this.setOrbit(),this.setFieldOfView(Math.exp(this[Sf])),this.jumpToGoal()}updateNearFar(e,r){this.camera.near=Math.max(e,r/1e3),this.camera.far=r,this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this[Tr].theta,r=this[Tr].phi,n=this[Tr].radius){let{minimumAzimuthalAngle:s,maximumAzimuthalAngle:o,minimumPolarAngle:a,maximumPolarAngle:l,minimumRadius:c,maximumRadius:h}=this[Ui],{theta:f,phi:u,radius:m}=this[Tr],d=Uo(e,s,o);!isFinite(s)&&!isFinite(o)&&(this[pr].theta=this[qL](this[pr].theta-d)+d);let v=Uo(r,a,l),p=Uo(n,c,h);return d===f&&v===u&&p===m?!1:(this[Tr].theta=d,this[Tr].phi=v,this[Tr].radius=p,this[Tr].makeSafe(),this[Jm]=!1,!0)}setRadius(e){this[Tr].radius=e,this.setOrbit()}setFieldOfView(e){let{minimumFieldOfView:r,maximumFieldOfView:n}=this[Ui];e=Uo(e,r,n),this[Sf]=Math.log(e)}setTarget(e,r,n){this[rh].set(e,r,n)}getTarget(){return this[ls].clone()}adjustOrbit(e,r,n,s){let{theta:o,phi:a,radius:l}=this[Tr],c=this[pr].theta-o,h=Math.PI-.001,f=o-Uo(e,-h-c,h-c),u=a-r,m=l+n,d=this.setOrbit(f,u,m);if(s!==0){let v=this[Sf]+s;this.setFieldOfView(Math.exp(v)),d=!0}return d}jumpToGoal(){this.update(0,100*$L)}update(e,r){if(this[UL]())return;let{maximumPolarAngle:n,maximumRadius:s,maximumFieldOfView:o}=this[Ui],a=this[pr].theta-this[Tr].theta;Math.abs(a)>Math.PI&&!isFinite(this[Ui].minimumAzimuthalAngle)&&!isFinite(this[Ui].maximumAzimuthalAngle)&&(this[pr].theta-=Math.sign(a)*2*Math.PI),this[pr].theta=this[OL].update(this[pr].theta,this[Tr].theta,r,Math.PI),this[pr].phi=this[DL].update(this[pr].phi,this[Tr].phi,r,n),this[pr].radius=this[FL].update(this[pr].radius,this[Tr].radius,r,s),this[wf]=this[NL].update(this[wf],this[Sf],r,o),this[ls].x=this[kL].update(this[ls].x,this[rh].x,r,s),this[ls].y=this[VL].update(this[ls].y,this[rh].y,r,s),this[ls].z=this[BL].update(this[ls].z,this[rh].z,r,s),this[HL]()}[(vL=ih,yL=Jm,_L=Ef,bL=pr,wL=Tr,SL=OL,EL=DL,xL=FL,TL=NL,AL=ls,ML=rh,CL=kL,PL=VL,IL=BL,RL=eg,LL=jo,UL)](){return this[Tr].theta===this[pr].theta&&this[Tr].phi===this[pr].phi&&this[Tr].radius===this[pr].radius&&this[Sf]===this[wf]&&this[rh].equals(this[ls])}[HL](){this[pr].makeSafe(),this.camera.position.setFromSpherical(this[pr]),this.camera.position.add(this[ls]),this.camera.setRotationFromEuler(new zn(this[pr].phi-Math.PI/2,this[pr].theta,0,"YXZ")),this.camera.fov!==Math.exp(this[wf])&&(this.camera.fov=Math.exp(this[wf]),this.camera.updateProjectionMatrix());let e=this[Jm]?Af.USER_INTERACTION:Af.NONE;this.dispatchEvent({type:"change",source:e})}get[xw](){return this[Ui].interactionPolicy=="allow-when-focused"?this.element.getRootNode().activeElement===this.element:this[Ui].interactionPolicy==="always-allow"}[cs](e,r,n,s){let o=this.adjustOrbit(e,r,n,s);return this[Jm]=!0,this.dispatchEvent({type:"change",source:Af.USER_INTERACTION}),o}[qL](e){let r=(e+Math.PI)/(2*Math.PI);return(r-Math.floor(r))*2*Math.PI-Math.PI}[Tw](e){return 2*Math.PI*e/this.element.clientHeight}[Aw](e,r){let{clientX:n,clientY:s}=e,{clientX:o,clientY:a}=r,l=o-n,c=a-s;return Math.sqrt(l*l+c*c)}[Fw](e){if(!this[eg]||!this[xw])return;let r=!1;if(GL.test(e.type)){let{touches:n}=e;switch(this[Ew]){case"zoom":if(this[xf].length>1&&n.length>1){let s=this[Aw](this[xf][0],this[xf][1]),o=this[Aw](n[0],n[1]),a=-1*rg*(o-s)/10;r=this[cs](0,0,0,a)}break;case"rotate":r=this[Nw](n[0]);break}this[xf]=n}else r=this[Nw](e);(r||this[Ui].eventHandlingBehavior==="prevent-all")&&e.cancelable&&e.preventDefault()}[Nw](e){let{clientX:r,clientY:n}=e,s=this[Tw](r-this[jo].clientX),o=this[Tw](n-this[jo].clientY);return this[jo].clientX=r,this[jo].clientY=n,this[Ef]===!1&&(this[Ef]=!0,this.dispatchEvent({type:"pointer-change-start",pointer:Object.assign({},e)})),this[cs](s,o,0,0)}[kw](e){if(this[eg]=!0,this[Ef]=!1,GL.test(e.type)){let{touches:r}=e;switch(r.length){default:case 1:this[Ew]="rotate",this[Vw](r[0]);break;case 2:this[Ew]="zoom";break}this[xf]=r}else this[Vw](e)}[Vw](e){this[jo].clientX=e.clientX,this[jo].clientY=e.clientY,this.element.style.cursor="grabbing"}[Bw](e){this.element.style.cursor="grab",this[eg]=!1,this[Ef]&&this.dispatchEvent({type:"pointer-change-end",pointer:Object.assign({},this[jo])})}[zL](e){if(!this[xw])return;let r=e.deltaY*rg/30;(this[cs](0,0,0,r)||this[Ui].eventHandlingBehavior==="prevent-all")&&e.cancelable&&e.preventDefault()}[WL](e){let r=!1,n=!1;switch(e.keyCode){case nh.PAGE_UP:r=!0,n=this[cs](0,0,0,rg);break;case nh.PAGE_DOWN:r=!0,n=this[cs](0,0,0,-1*rg);break;case nh.UP:r=!0,n=this[cs](0,-tg,0,0);break;case nh.DOWN:r=!0,n=this[cs](0,tg,0,0);break;case nh.LEFT:r=!0,n=this[cs](-tg,0,0,0);break;case nh.RIGHT:r=!0,n=this[cs](tg,0,0,0);break}r&&(n||this[Ui].eventHandlingBehavior==="prevent-all")&&e.cancelable&&e.preventDefault()}};var jL=t=>t<.5?2*t*t:-1+(4-2*t)*t,aY=(t,e,r=jL)=>n=>t+(e-t)*r(n),lY=(t,e)=>{let r=e.reduce((s,o)=>s+o,0),n=e.map(s=>s/r);return s=>{let o=0,a=1/0,l=()=>0;for(let c=0;c<n.length&&(a=n[c],l=t[c],!(s<=o+a));++c)o+=a;return l((s-o)/a)}},Hw=(t,e)=>{let r=[],n=[],s=t;for(let o=0;o<e.length;++o){let a=e[o],{value:l,frames:c}=a,h=a.ease||jL,f=aY(s,l,h);r.push(f),n.push(c),s=l}return lY(r,n)};var sn=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},cY=5e3,hY=Hw(0,[{frames:6,value:0},{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:12,value:0}]),uY=Hw(0,[{frames:2,value:0},{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:4,value:0}]),sh={AUTO:"auto",WHEN_FOCUSED:"when-focused",NONE:"none"},qw={BASIC:"basic",WIGGLE:"wiggle"},fY={ALWAYS_ALLOW:"always-allow",WHEN_FOCUSED:"allow-when-focused"},YL="0deg 75deg 105%",dY="auto auto auto",pY="auto",mY=t=>({basis:[_r(t[ag]*Math.PI/180,"rad")],keywords:{auto:[null]}}),gY={basis:[Gm(_r(10,"deg"))],keywords:{auto:[null]}},vY=t=>{let e=t[Ee];return{basis:[Gm(_r(45,"deg"))],keywords:{auto:[_r(e.framedFieldOfView,"deg")]}}},yY=(()=>{let t=Gs(YL)[0].terms,e=os(t[0]),r=os(t[1]);return n=>{let s=n[Ee].model.idealCameraDistance;return{basis:[e,r,_r(s,"m")],keywords:{auto:[null,null,_r(105,"%")]}}}})(),_Y={basis:[_r(-1/0,"rad"),_r(Math.PI/8,"rad"),_r(0,"m")],keywords:{auto:[null,null,null]}},bY={basis:[_r(1/0,"rad"),_r(Math.PI-Math.PI/8,"rad"),_r(1/0,"m")],keywords:{auto:[null,null,null]}},wY=t=>{let e=t[Ee].model.boundingBox.getCenter(new F);return{basis:[_r(e.x,"m"),_r(e.y,"m"),_r(e.z,"m")],keywords:{auto:[null,null,null]}}},zw=Math.PI/2,XL=Math.PI/3,ZL=zw/2,QL=2*Math.PI,SY=["front","right","back","left"],EY=["upper-","","lower-"],xY=3e3,TY="Use mouse, touch or arrow keys to control the camera!",$t=Symbol("controls"),Mf=Symbol("promptElement"),Ww=Symbol("promptAnimatedContainer"),nue=Symbol("idealCameraDistance"),ig=Symbol("deferInteractionPrompt"),KL=Symbol("updateAria"),JL=Symbol("updateCameraForRadius"),Gw=Symbol("blurHandler"),$w=Symbol("focusHandler"),jw=Symbol("changeHandler"),Cf=Symbol("pointerChangeHandler"),eO=Symbol("onBlur"),tO=Symbol("onFocus"),rO=Symbol("onChange"),iO=Symbol("onPointerChange"),ng=Symbol("shouldPromptUserToInteract"),$s=Symbol("waitingToPromptUser"),sg=Symbol("userPromptedOnce"),Xo=Symbol("promptElementVisibleTime"),og=Symbol("lastPromptOffset"),Pf=Symbol("focusedTime"),ag=Symbol("zoomAdjustedFieldOfView"),lg=Symbol("lastSpherical"),If=Symbol("jumpCamera"),nO=Symbol("syncCameraOrbit"),sO=Symbol("syncFieldOfView"),oO=Symbol("syncCameraTarget"),aO=Symbol("syncMinCameraOrbit"),lO=Symbol("syncMaxCameraOrbit"),cO=Symbol("syncMinFieldOfView"),hO=Symbol("syncMaxFieldOfView"),uO=t=>{var e,r,n,s,o,a,l,c,h,f,u,m,d,v,p,g;class y extends t{constructor(){super(...arguments);this.cameraControls=!1,this.cameraOrbit=YL,this.cameraTarget=dY,this.fieldOfView=pY,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=xY,this.interactionPromptStyle=qw.WIGGLE,this.interactionPrompt=sh.AUTO,this.interactionPolicy=fY.ALWAYS_ALLOW,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[r]=this.shadowRoot.querySelector(".interaction-prompt > .animated-container"),this[n]=1/0,this[s]=0,this[o]=1/0,this[a]=!1,this[l]=!1,this[c]=!0,this[h]=new Uw(this[Ee].getCamera(),this[Ee].canvas),this[f]=0,this[u]=new Xa,this[m]=!1,this[d]=b=>this[rO](b),this[v]=b=>this[iO](b),this[p]=()=>this[tO](),this[g]=()=>this[eO]()}getCameraOrbit(){let{theta:b,phi:w,radius:S}=this[lg];return{theta:b,phi:w,radius:S}}getCameraTarget(){return this[$t].getTarget()}getFieldOfView(){return this[$t].getFieldOfView()}jumpCameraToGoal(){this[If]=!0,this.requestUpdate(If,!1)}resetInteractionPrompt(){this[og]=0,this[Xo]=1/0,this[sg]=!1,this[$s]=this.interactionPrompt===sh.AUTO&&this.cameraControls,this[ng]=!0}connectedCallback(){super.connectedCallback(),this[$t].addEventListener("change",this[jw]),this[$t].addEventListener("pointer-change-start",this[Cf]),this[$t].addEventListener("pointer-change-end",this[Cf])}disconnectedCallback(){super.disconnectedCallback(),this[$t].removeEventListener("change",this[jw]),this[$t].removeEventListener("pointer-change-start",this[Cf]),this[$t].removeEventListener("pointer-change-end",this[Cf])}updated(b){super.updated(b);let w=this[$t],S=this[Ee];if(b.has("cameraControls")&&(this.cameraControls?(w.enableInteraction(),this.interactionPrompt===sh.AUTO&&(this[$s]=!0),S.canvas.addEventListener("focus",this[$w]),S.canvas.addEventListener("blur",this[Gw])):(S.canvas.removeEventListener("focus",this[$w]),S.canvas.removeEventListener("blur",this[Gw]),w.disableInteraction(),this[ig]())),(b.has("interactionPrompt")||b.has("cameraControls")||b.has("src"))&&(this.interactionPrompt===sh.AUTO&&this.cameraControls?this[$s]=!0:this[ig]()),b.has("interactionPromptStyle")&&this[Mf].classList.toggle("wiggle",this.interactionPromptStyle===qw.WIGGLE),b.has("interactionPolicy")){let E=this.interactionPolicy;w.applyOptions({interactionPolicy:E})}this[If]===!0&&Promise.resolve().then(()=>{this[$t].jumpToGoal(),this[If]=!1})}[(e=Mf,r=Ww,n=Pf,s=og,o=Xo,a=sg,l=$s,c=ng,h=$t,f=ag,u=lg,m=If,d=jw,v=Cf,p=$w,g=Gw,sO)](b){this[$t].setFieldOfView(b[0]*180/Math.PI)}[nO](b){this[JL](b[2]),this[$t].setOrbit(b[0],b[1],b[2])}[aO](b){this[$t].applyOptions({minimumAzimuthalAngle:b[0],minimumPolarAngle:b[1],minimumRadius:b[2]})}[lO](b){this[$t].applyOptions({maximumAzimuthalAngle:b[0],maximumPolarAngle:b[1],maximumRadius:b[2]})}[cO](b){this[$t].applyOptions({minimumFieldOfView:b[0]*180/Math.PI})}[hO](b){this[$t].applyOptions({maximumFieldOfView:b[0]*180/Math.PI})}[oO](b){let[w,S,E]=b,x=this[Ee];this[$t].setTarget(w,S,E),x.pivotCenter.set(w,S,E),x.setPivotRotation(x.getPivotRotation())}[ni](b,w){if(super[ni](b,w),this[$s]&&this.interactionPrompt!==sh.NONE){let E=this.interactionPrompt===sh.AUTO?this[df]:this[Pf];this.loaded&&b>E+this.interactionPromptThreshold&&(this[Ee].canvas.setAttribute("aria-label",TY),this[sg]=!0,this[$s]=!1,this[Xo]=b,this[Mf].classList.add("visible"))}if(isFinite(this[Xo])&&this.interactionPromptStyle===qw.WIGGLE){let E=this[Ee],x=(b-this[Xo])/cY%1,T=hY(x),A=uY(x),P=T*E.width*.05,z=(T-this[og])*Math.PI/16;this[Ww].style.transform=`translateX(${P}px)`,this[Ww].style.opacity=`${A}`,this[$t].adjustOrbit(z,0,0,0),this[og]=T,this[nr]()}this[$t].update(b,w);let S=this[$t].getTarget();this[Ee].pivotCenter.equals(S)||(this[Ee].pivotCenter.copy(S),this[Ee].setPivotRotation(this[Ee].getPivotRotation()))}[ig](){this[$s]=!1,this[Mf].classList.remove("visible"),this[Xo]=1/0,this[sg]&&(this[ng]=!1)}[JL](b){let{idealCameraDistance:w}=this[Ee].model,S=Math.max(w,b),E=0,x=2*S;this[$t].updateNearFar(E,x)}[KL](){let{theta:b,phi:w}=this[lg],{theta:S,phi:E}=this[$t].getCameraSpherical(this[lg]),x=this.getRootNode();if(x!=null&&x.activeElement===this){let T=(4+Math.floor((b%QL+ZL)/zw))%4,A=(4+Math.floor((S%QL+ZL)/zw))%4,P=Math.floor(w/XL),z=Math.floor(E/XL);if(A!==T||z!==P){let{canvas:V}=this[Ee],L=SY[A],k=`View from stage ${EY[z]}${L}`;V.setAttribute("aria-label",k)}}}[zo](b){let w=this[$t],S=this[Ee].framedFieldOfView;super[zo](b);let E=this[Ee].framedFieldOfView,x=w.getFieldOfView()/S;this[ag]=E*x,w.updateAspect(this[Ee].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.jumpCameraToGoal()}[Bi](b){super[Bi](b);let{framedFieldOfView:w}=this[Ee];this[ag]=w,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[tO](){let{canvas:b}=this[Ee];isFinite(this[Pf])||(this[Pf]=performance.now());let w=this[ff];b.getAttribute("aria-label")!==w&&b.setAttribute("aria-label",w),!isFinite(this[Xo])&&this[ng]&&(this[$s]=!0)}[eO](){this[$s]=!1,this[Mf].classList.remove("visible"),this[Xo]=1/0,this[Pf]=1/0}[rO]({source:b}){this[KL](),this[nr](),b===Af.USER_INTERACTION&&this[ig](),this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:b}}))}[iO](b){b.type==="pointer-change-start"?this[nn].classList.add("pointer-tumbling"):this[nn].classList.remove("pointer-tumbling")}}return sn([st({type:Boolean,attribute:"camera-controls"})],y.prototype,"cameraControls",void 0),sn([$o({intrinsics:yY,observeEffects:!0,updateHandler:nO}),st({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],y.prototype,"cameraOrbit",void 0),sn([$o({intrinsics:wY,observeEffects:!0,updateHandler:oO}),st({type:String,attribute:"camera-target",hasChanged:()=>!0})],y.prototype,"cameraTarget",void 0),sn([$o({intrinsics:mY,observeEffects:!0,updateHandler:sO}),st({type:String,attribute:"field-of-view",hasChanged:()=>!0})],y.prototype,"fieldOfView",void 0),sn([$o({intrinsics:_Y,updateHandler:aO}),st({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],y.prototype,"minCameraOrbit",void 0),sn([$o({intrinsics:bY,updateHandler:lO}),st({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],y.prototype,"maxCameraOrbit",void 0),sn([$o({intrinsics:gY,updateHandler:cO}),st({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],y.prototype,"minFieldOfView",void 0),sn([$o({intrinsics:vY,updateHandler:hO}),st({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],y.prototype,"maxFieldOfView",void 0),sn([st({type:Number,attribute:"interaction-prompt-threshold"})],y.prototype,"interactionPromptThreshold",void 0),sn([st({type:String,attribute:"interaction-prompt-style"})],y.prototype,"interactionPromptStyle",void 0),sn([st({type:String,attribute:"interaction-prompt"})],y.prototype,"interactionPrompt",void 0),sn([st({type:String,attribute:"interaction-policy"})],y.prototype,"interactionPolicy",void 0),y};var Rf=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},AY=0,MY=1,CY=1,Lf=Symbol("currentEnvironmentMap"),cg=Symbol("applyEnvironmentMap"),fO=Symbol("updateEnvironment"),Of=Symbol("cancelEnvironmentUpdate"),dO=t=>{var e,r;class n extends t{constructor(){super(...arguments);this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=AY,this.shadowSoftness=MY,this.exposure=CY,this[e]=null,this[r]=null}updated(o){super.updated(o),o.has("shadowIntensity")&&(this[Ee].setShadowIntensity(this.shadowIntensity),this[nr]()),o.has("shadowSoftness")&&(this[Ee].setShadowSoftness(this.shadowSoftness),this[nr]()),o.has("exposure")&&(this[Ee].exposure=this.exposure,this[nr]()),(o.has("environmentImage")||o.has("skyboxImage")||o.has("experimentalPmrem")||o.has(rn))&&this[fO]()}[(e=Lf,r=Of,Bi)](o){super[Bi](o),this[Lf]!=null&&this[cg](this[Lf])}async[fO](){if(!this[rn])return;let{skyboxImage:o,environmentImage:a}=this;this[Of]!=null&&(this[Of](),this[Of]=null);let{textureUtils:l}=this[xr];if(l!=null)try{let{environmentMap:c,skybox:h}=await new Promise(async(f,u)=>{let m=l.generateEnvironmentMapAndSkybox(o,a,{progressTracker:this[zs]});this[Of]=()=>u(m),f(await m)});h!=null?this[Ee].background=h.texture:this[Ee].background=null,this[cg](c.texture),this[Ee].model.dispatchEvent({type:"envmap-update"})}catch(c){if(c instanceof Error)throw this[cg](null),c;let{environmentMap:h,skybox:f}=await c;h!=null&&h.dispose(),f!=null&&f.dispose()}}[cg](o){this[Lf]=o,this[Ee].environment=this[Lf],this.dispatchEvent(new CustomEvent("environment-change")),this[nr]()}}return Rf([st({type:String,attribute:"environment-image",converter:{fromAttribute:Vs}})],n.prototype,"environmentImage",void 0),Rf([st({type:String,attribute:"skybox-image",converter:{fromAttribute:Vs}})],n.prototype,"skyboxImage",void 0),Rf([st({type:Number,attribute:"shadow-intensity"})],n.prototype,"shadowIntensity",void 0),Rf([st({type:Number,attribute:"shadow-softness"})],n.prototype,"shadowSoftness",void 0),Rf([st({type:Number})],n.prototype,"exposure",void 0),n};var pO,mO,PY="This page includes one or more 3D models that are loading",IY="All 3D models in the page have loaded",RY=100,hg=Symbol("modelViewerStatusInstance"),gO=Symbol("updateStatus"),Yw=class extends yr{constructor(){super();this[pO]=null,this.registeredInstanceStatuses=new Map,this.loadingPromises=[],this.statusElement=document.createElement("p"),this.statusUpdateInProgress=!1,this[mO]=$c(()=>this.updateStatus(),RY);let{statusElement:e}=this,{style:r}=e;e.setAttribute("role","status"),e.classList.add("screen-reader-only"),r.top=r.left="0",r.pointerEvents="none"}registerInstance(e){if(this.registeredInstanceStatuses.has(e))return;let r=()=>{},n=e.loaded===!1&&!!e.src,s=new Promise(o=>{if(!n){o();return}let a=()=>{o(),e.removeEventListener("load",a),e.removeEventListener("error",a)};e.addEventListener("load",a),e.addEventListener("error",a),r=a});this.registeredInstanceStatuses.set(e,{onUnregistered:r}),this.loadingPromises.push(s),this.modelViewerStatusInstance==null&&(this.modelViewerStatusInstance=e)}unregisterInstance(e){if(!this.registeredInstanceStatuses.has(e))return;let r=this.registeredInstanceStatuses,n=r.get(e);r.delete(e),n.onUnregistered(),this.modelViewerStatusInstance===e&&(this.modelViewerStatusInstance=r.size>0?FI(r):null)}get modelViewerStatusInstance(){return this[hg]}set modelViewerStatusInstance(e){if(this[hg]===e)return;let{statusElement:n}=this;e!=null&&e.shadowRoot!=null?e.shadowRoot.appendChild(n):n.parentNode!=null&&n.parentNode.removeChild(n),this[hg]=e,this[gO]()}async updateStatus(){if(!(this.statusUpdateInProgress||this.loadingPromises.length===0)){for(this.statusElement.textContent=PY,this.statusUpdateInProgress=!0,this.dispatchEvent({type:"initial-status-announced"});this.loadingPromises.length;){let{loadingPromises:e}=this;this.loadingPromises=[],await Promise.all(e)}this.statusElement.textContent=IY,this.statusUpdateInProgress=!1,this.dispatchEvent({type:"finished-loading-announced"})}}};pO=hg,mO=gO;var Xw=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o};var LY=100,OY=.2,DY=0,FY="https://www.gstatic.com/draco/versioned/decoders/1.3.5/",NY=32,kY=13,vO={AUTO:"auto",INTERACTION:"interaction"},Zw={INTERACTION:"interaction"},yO=new si,_O=new Yw,il=Symbol("defaultProgressBarElement"),bO=Symbol("defaultProgressMaskElement"),nl=Symbol("posterContainerElement"),oh=Symbol("defaultPosterElement"),ah=Symbol("posterDismissalSource"),Qw=Symbol("announceModelVisibility"),ug=Symbol("modelIsReadyForReveal"),wO=Symbol("shouldAttemptPreload"),Kw=Symbol("shouldRevealModel"),SO=Symbol("showPoster"),EO=Symbol("hidePoster"),fg=Symbol("modelIsVisible"),dg=Symbol("preloadAttempted"),pg=Symbol("sourceUpdated"),xO=Symbol("updateLoadingAndVisibility"),Jw=Symbol("updateProgressBar"),Df=Symbol("lastReportedProgress"),TO=Symbol("ariaLabelCallToAction"),eS=Symbol("clickHandler"),tS=Symbol("keydownHandler"),rS=Symbol("processHandler"),AO=Symbol("onClick"),MO=Symbol("onKeydown"),CO=Symbol("onProgress"),PO=t=>{var e,r,n,s,o,a,l,c,h,f,u,m,d,v,p;class g extends t{constructor(..._){super(..._);this.poster=null,this.reveal=vO.AUTO,this.preload=!1,this[e]=!1,this[r]=!1,this[n]=!1,this[s]=0,this[o]=null,this[a]=this.shadowRoot.querySelector(".slot.poster"),this[l]=this.shadowRoot.querySelector("#default-poster"),this[c]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[h]=this.shadowRoot.querySelector("#default-progress-bar > .mask"),this[f]=this[oh].getAttribute("aria-label"),this[u]=()=>this[AO](),this[m]=S=>this[MO](S),this[d]=S=>this[CO](S),this[v]=$c(S=>{this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:S}}))},DY),this[p]=DI(S=>{let E=this[il].parentNode;requestAnimationFrame(()=>{this[bO].style.opacity=`${(1-S)*OY}`,this[il].style.transform=`scaleX(${S})`,S===0&&(E.removeChild(this[il]),E.appendChild(this[il])),S===1?this[il].classList.add("hide"):this[il].classList.remove("hide")})},LY);let w=(self.ModelViewerElement||{}).dracoDecoderLocation||FY;si.setDRACODecoderLocation(w)}static set dracoDecoderLocation(_){si.setDRACODecoderLocation(_)}static get dracoDecoderLocation(){return si.getDRACODecoderLocation()}static mapURLs(_){yO[lf].manager.setURLModifier(_)}dismissPoster(){this[ah]=Zw.INTERACTION,this.requestUpdate()}connectedCallback(){super.connectedCallback(),this[nl].addEventListener("click",this[eS]),this[nl].addEventListener("keydown",this[tS]),this[zs].addEventListener("progress",this[rS]),_O.registerInstance(this)}disconnectedCallback(){super.disconnectedCallback(),this[nl].removeEventListener("click",this[eS]),this[nl].removeEventListener("keydown",this[tS]),this[zs].removeEventListener("progress",this[rS]),_O.unregisterInstance(this)}async updated(_){super.updated(_),_.has("poster")&&this.poster!=null&&(this[oh].style.backgroundImage=`url(${this.poster})`),_.has("src")&&(this[ug]||(this[Df]=0),this[ah]=null,this[dg]=!1,this[pg]=!1),_.has("alt")&&this[oh].setAttribute("aria-label",`${this[ff]}. ${this[TO]}`),this[xO]()}[(e=fg,r=dg,n=pg,s=Df,o=ah,a=nl,l=oh,c=il,h=bO,f=TO,u=eS,m=tS,d=rS,v=Qw,p=Jw,AO)](){this[ah]=Zw.INTERACTION,this.requestUpdate()}[MO](_){switch(_.keyCode){case NY:case kY:this[ah]=Zw.INTERACTION;break;default:break}this.requestUpdate()}[CO](_){let b=_.detail.totalProgress;this.requestUpdate(),b===1&&this[Jw].flush(),this[Jw](b),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:b}})),this[Df]=Math.max(b,this[Df])}get[ug](){let{src:_}=this;return!!_&&si.hasFinishedLoading(_)&&this[Df]===1&&this[Kw]}get[Kw](){return this.reveal===vO.AUTO||!!this[ah]}get[wO](){let{src:_}=this;return!!_&&(this.preload||this[Kw])&&this[rn]}async[xO](){if(this[wO]&&!this[dg]){this[dg]=!0;let _=this[zs].beginActivity();try{let b=this.src,w={url:b};await yO.preload(b,_),this.dispatchEvent(new CustomEvent("preload",{detail:w}))}catch(b){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:b}}))}finally{_(1),this.requestUpdate()}}this[ug]?await this[qs]():this[SO]()}[SO](){let _=this[nl],b=this[oh],w=parseFloat(self.getComputedStyle(_).opacity);b.removeAttribute("tabindex"),b.removeAttribute("aria-hidden"),_.classList.add("show"),w<1&&_.addEventListener("transitionend",()=>{this[fg]=!1,this[Qw](!1)},{once:!0})}[EO](){let _=this[nl],b=this[oh];_.classList.contains("show")&&(_.classList.remove("show"),_.addEventListener("transitionend",()=>{this[Qw](!0),requestAnimationFrame(()=>{this[fg]=!0;let w=this.getRootNode();w&&w.activeElement===this&&this[yi].focus(),b.setAttribute("aria-hidden","true"),b.tabIndex=-1})},{once:!0}))}[mf](){return super[mf]()||this[fg]}[pf](){let _=this.src;return super[pf]()||!!(_&&si.hasFinishedLoading(_))}async[qs](){this[ug]&&!this[pg]&&(this[pg]=!0,await super[qs](),this[EO]())}}return Xw([st({converter:{fromAttribute:Vs}})],g.prototype,"poster",void 0),Xw([st({type:String})],g.prototype,"reveal",void 0),Xw([st({type:Boolean})],g.prototype,"preload",void 0),g};var VY=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},IO=Symbol("showMlModel"),RO=Symbol("hideMlModel"),LO=Symbol("isHeliosBrowser"),Or=Symbol("mlModel"),iS=.65,BY="150px",OO=t=>{var e,r;class n extends t{constructor(){super(...arguments);this.magicLeap=!1,this[e]=self.mlWorld!=null,this[r]=null}updated(o){if(super.updated(o),!this[LO]||!(o.has("magicLeap")||o.has("src")))return;let a=this[Ee];this.magicLeap?(!!customElements.get("ml-model")||console.warn("<ml-model> is not registered. Is prismatic.js loaded?"),a.pause(),this[nn].setAttribute("style","display: none;"),this[IO](),o.has("src")&&this.src&&this.src!==this[Or].getAttribute("src")&&this[Or].setAttribute("src",this.src)):(this[RO](),a.resume(),this[nn].removeAttribute("style"))}[(e=LO,r=Or,IO)](){this[Or]==null&&(this[Or]=document.createElement("ml-model"),this[Or].setAttribute("style","display: block; top: 0; left: 0; width: 100%; height: 100%"),this[Or].setAttribute("model-scale",`${iS} ${iS} ${iS}`),this[Or].setAttribute("z-offset",BY),this[Or].setAttribute("extractable","true"),this[Or].setAttribute("extracted-scale","1"),this[Or].setAttribute("environment-lighting","color-intensity: 5;"),this.src!=null&&this[Or].setAttribute("src",this.src)),this.shadowRoot.appendChild(this[Or])}[RO](){this[Or]!=null&&this[Or].parentNode!=null&&this[Or].parentNode.removeChild(this[Or])}}return VY([st({type:Boolean,attribute:"magic-leap"})],n.prototype,"magicLeap",void 0),n};var DO={Array:!0,ArrayBuffer:!0,BigInt:!0,BigInt64Array:!0,BigUint64Array:!0,Boolean:!0,Cache:!0,CustomEvent:!0,DataView:!0,Date:!0,Error:!0,EvalError:!0,Event:!0,EventTarget:!0,Float32Array:!0,Float64Array:!0,Function:!0,Infinity:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Intl:!0,JSON:!0,Map:!0,Math:!0,MessagePort:!0,MessageEvent:!0,MessageChannel:!0,NaN:!0,Number:!0,Object:!0,Promise:!0,Proxy:!0,RangeError:!0,ReferenceError:!0,Reflect:!0,RegExp:!0,Set:!0,String:!0,Symbol:!0,SyntaxError:!0,TextDecoder:!0,TextEncoder:!0,TypeError:!0,URIError:!0,URL:!0,Uint16Array:!0,Uint32Array:!0,Uint8Array:!0,Uint8ClampedArray:!0,WeakMap:!0,WeakSet:!0,WebAssembly:!0,atob:!0,addEventListener:!0,removeEventListener:!0,btoa:!0,caches:!0,clearInterval:!0,clearTimeout:!0,console:!0,decodeURI:!0,decodeURIComponent:!0,document:!0,encodeURI:!0,encodeURIComponent:!0,escape:!0,fetch:!0,indexedDB:!0,isFinite:!0,isNaN:!0,location:!0,navigator:!0,onerror:!0,onrejectionhandled:!0,onunhandledrejection:!0,parseFloat:!0,parseInt:!0,performance:!0,postMessage:!0,requestAnimationFrame:!0,cancelAnimationFrame:!0,self:!0,setTimeout:!0,setInterval:!0,unescape:!0};function FO(t){let e=Symbol("pbrMetallicRoughness"),r=Symbol("kernel"),n=Symbol("name");class s extends t{constructor(a,l){super(a,l);this[r]=a,l.name!=null&&(this[n]=l.name),this[e]=a.deserialize("pbr-metallic-roughness",l.pbrMetallicRoughness)}get pbrMetallicRoughness(){return this[e]}}return s}var $r={HANDSHAKE:1,IMPORT_SCRIPT:2,MODEL_CHANGE:3,MUTATION_RESULT:4,CONTEXT_INITIALIZED:5,MUTATE:6};function NO(t,e,r){var n,s,o,a,l,c;let h={model:t,material:e,"pbr-metallic-roughness":r},f=Symbol("onMessageEvent"),u=Symbol("messageEventHandler"),m=Symbol("port"),d=Symbol("model"),v=Symbol("elementsByLocalId"),p=Symbol("localIdsByElement"),g=Symbol("elementsByType"),y=Symbol("pendingMutations"),_=Symbol("nextMutationId");class b{constructor(S,E){this[n]=new Map,this[s]=new Map,this[o]=new Map,this[a]=T=>this[f](T),this[l]=new Map,this[c]=0;let x=Object.keys(h);for(let T of x)this[g].set(T,new Set);this[m]=S,this[m].addEventListener("message",this[u]),this[m].start(),this[d]=this.deserialize("model",E)}get model(){return this[d]}async mutate(S,E,x){if(!this[p].has(S))throw new Error("Cannot mutate unknown element");let T=this[p].get(S);return new Promise((A,P)=>{let z=this[_]++;this[m].postMessage({type:$r.MUTATE,id:T,property:E,value:x,mutationId:z}),this[y].set(z,{resolve:A,reject:P})})}deserialize(S,E){if(!(S in h))throw new Error(`Cannot deserialize unknown type: ${S}`);let{id:x}=E,T=h[S],A=new T(this,E);return this[v].set(x,A),this[p].set(A,x),this[g].get(S).add(A),A}getElementsByType(S){return this[g].has(S)?Array.from(this[g].get(S)):[]}deactivate(){this[m].close(),this[m].removeEventListener("message",this[u])}[(n=v,s=p,o=g,a=u,l=y,c=_,f)](S){let{data:E}=S;switch(E&&E.type){case $r.MUTATION_RESULT:{let x=E,{applied:T,mutationId:A}=x,P=this[y].get(A);this[y].delete(A),P!=null&&(T?P.resolve():P.reject());break}}}}return b}function kO(t){var e;let r=Symbol("material"),n=Symbol("kernel");class s extends t{constructor(a,l){super(a);this[e]=Object.freeze([]),this[n]=a;for(let c of l.materials)this[n].deserialize("material",c)}get materials(){return this[n].getElementsByType("material")}get ownerModel(){}}return e=r,s}function VO(t){let e=Symbol("kernel"),r=Symbol("baseColorFactor");class n extends t{constructor(o,a){super(o,a);this[e]=o,this[r]=Object.freeze(a.baseColorFactor)}get baseColorFactor(){return this[r]}async setBaseColorFactor(o){await this[e].mutate(this,"baseColorFactor",o),this[r]=Object.freeze(o)}}return n}function BO(){let t=Symbol("ownerModel");class e{constructor(n){if(n==null)throw new Error("Illegal constructor");this[t]=n.model}get ownerModel(){return this[t]}}return e}var UO=()=>`${NO.toString()}
${BO.toString()}
${kO.toString()}
${FO.toString()}
${VO.toString()}

var ThreeDOMElement = defineThreeDOMElement();
var Model = defineModel(ThreeDOMElement);
var Material = defineMaterial(ThreeDOMElement);
var PBRMetallicRoughness = definePBRMetallicRoughness(ThreeDOMElement);

var ModelKernel = defineModelKernel(
  Model,
  Material,
  PBRMetallicRoughness
);

// Populate the global scope with constructors
// so that author code can use instanceof checks
self.ThreeDOMElement = ThreeDOMElement;
self.Model = Model;
self.Material = Material;
self.PBRMetallicRoughness = PBRMetallicRoughness;`;function UY(){let t='Capability "material-properties" not allowed';Object.defineProperty(this.PBRMetallicRoughness.prototype,"setBaseColorFactor",{value:()=>{throw new Error(t)},configurable:!1,writable:!1})}function HY(){let t='Capability "messaging" not allowed',e=()=>{throw new Error(t)},r=this.addEventListener;Object.defineProperties(this,{postMessage:{value:e,configurable:!1},MessageChannel:{value:e,configurable:!1},MessageEvent:{value:e,configurable:!1},onmessage:{set(){e()},configurable:!1},addEventListener:{value:function(n,s,o){n==="message"&&e(),r.call(this,n,s,o)},configurable:!1}})}function qY(){Object.defineProperties(this,{fetch:{value:()=>{throw new Error('Capability "fetch" not allowed')},configurable:!1}})}var HO={messaging:HY,"material-properties":UY,fetch:qY},qO=t=>{let e=Object.keys(HO),r=[];for(let n of e){if(t.indexOf(n)>-1)continue;let s=HO[n];r.push(`(${s.toString()}).call(self);`)}return r.join(`
`)};function zY(t,e){for(;t&&t.constructor!==EventTarget;)Object.getOwnPropertyNames(t).forEach(r=>{if(!(e.hasOwnProperty(r)&&e[r]===!0))try{delete t[r]}catch(n){console.warn(n)}}),t=Object.getPrototypeOf(t)}var zO=t=>`(${zY.toString()})(self, ${JSON.stringify(t)});`;function WY(t,e){let r=null;e.addEventListener("message",n=>{let{data:s}=n;if(s&&s.type&&s.type===$r.HANDSHAKE){let o=n.ports[0];o.addEventListener("message",a=>{let{data:l}=a;if(l&&l.type)switch(l.type){case $r.MODEL_CHANGE:{let c=r!=null?r.model:void 0,h=l.model,f=a.ports[0];if(r!=null)r.deactivate();else if(h==null)break;h!=null?(r=new t(f,h),this.model=r.model):(r=null,this.model=void 0);let u=new Event("model-change");u.previousModel=c,u.model=this.model,this.dispatchEvent(u);break}case $r.IMPORT_SCRIPT:{let c=l.url;c&&e.importScripts(c);break}}}),o.start(),o.postMessage({type:$r.CONTEXT_INITIALIZED})}})}var WO=()=>WY.toString();var GO,$O,jO=Symbol("modelGraft"),lh=Symbol("port"),nS=Symbol("messageEventHandler"),YO=Symbol("onMessageEvent"),XO=class{constructor(e,r){this[GO]=n=>this[YO](n),this[jO]=e,this[lh]=r,this[lh].addEventListener("message",this[nS]),this[lh].start()}dispose(){this[lh].removeEventListener("message",this[nS]),this[lh].close()}[(GO=nS,YO)](e){let{data:r}=e;if(r&&r.type&&r.type===$r.MUTATE){let n=!1,{mutationId:s}=r;try{this[jO].mutate(r.id,r.property,r.value),n=!0}finally{this[lh].postMessage({type:$r.MUTATION_RESULT,applied:n,mutationId:s})}}}},GY=Object.freeze(["messaging","material-properties","fetch"]),$Y=(t=GY)=>`;(function() {
var ThreeDOMMessageType = ${JSON.stringify($r)};

var preservedContext = {
  postMessage: self.postMessage.bind(self),
  addEventListener: self.addEventListener.bind(self),
  importScripts: self.importScripts.bind(self)
};

${zO(DO)}
${UO()}
${qO(t)}
${WO()}

initialize.call(self, ModelKernel, preservedContext);

})();`,mg=Symbol("worker"),gg=Symbol("workerInitializes"),ch=Symbol("modelGraftManipulator"),sS=class extends EventTarget{constructor(e){super();this[$O]=null;let r=$Y(e),n=URL.createObjectURL(new Blob([r],{type:"text/javascript"}));this[mg]=new Worker(n),this[gg]=new Promise(s=>{let{port1:o,port2:a}=new MessageChannel,l=c=>{c.data&&c.data.type===$r.CONTEXT_INITIALIZED&&(o.removeEventListener("message",l),s(o))};this[mg].postMessage({type:$r.HANDSHAKE},[a]),o.addEventListener("message",l),o.start()})}get worker(){return this[mg]}async changeModel(e){let r=await this[gg],{port1:n,port2:s}=new MessageChannel;r.postMessage({type:$r.MODEL_CHANGE,model:e!=null&&e.model!=null?e.model.toJSON():null},[s]);let o=this[ch];o!=null&&(o.dispose(),this[ch]=null),e!=null&&(this[ch]=new XO(e,n))}async eval(e){let r=await this[gg],n=URL.createObjectURL(new Blob([e],{type:"text/javascript"}));r.postMessage({type:$r.IMPORT_SCRIPT,url:n})}async terminate(){this[mg].terminate();let e=this[ch];e!=null&&(e.dispose(),this[ch]=null),(await this[gg]).close()}};$O=ch;var ZO=(()=>{let t=0;return()=>t++})();var QO,Ff=Symbol("relatedObject"),Xue=Symbol("type"),KO=Symbol("graft"),oS=Symbol("id"),sl=class{constructor(e,r){this[QO]=ZO(),this[Ff]=r,this[KO]=e,e.adopt(this)}get ownerModel(){return this[KO].model}get internalID(){return this[oS]}get name(){let e=this[Ff];return(e.isObject3D||e.isMaterial)&&e.userData?e.userData.name:null}get relatedObject(){return this[Ff]}toJSON(){let e={id:this[oS]},{name:r}=this;return r!=null&&(e.name=r),e}};QO=oS;var vg=Symbol("threeMaterial"),aS=class extends sl{get[vg](){return this[Ff]}constructor(e,r){super(e,r)}get baseColorFactor(){let e=this[vg];return e.color?[...e.color.toArray(),e.opacity]:[1,1,1,1]}set baseColorFactor(e){this[vg].color.fromArray(e),this[vg].opacity=e[3]}toJSON(){let e=super.toJSON();return e.baseColorFactor=this.baseColorFactor,e}};var JO=Symbol("pbrMetallicRoughness"),lS=class extends sl{constructor(e,r){super(e,r);this[JO]=new aS(e,r)}get pbrMetallicRoughness(){return this[JO]}toJSON(){let e=super.toJSON();return e.pbrMetallicRoughness=this.pbrMetallicRoughness.toJSON(),e}};var eD,tD,cS=Symbol("modelUri"),jY=Symbol("gltf"),yg=Symbol("materials"),hS=class extends sl{constructor(e,r,n){super(e,n);this[eD]="",this[tD]=[],this[cS]=r,this[jY]=n;let s=new Set;n.scene.traverse(o=>{let a=o,l=[];a.isMesh&&a.material!=null&&(l=Array.isArray(a.material)?a.material:[a.material]);for(let c of l)s.has(c)||(this[yg].push(new lS(e,c)),s.add(c))})}get materials(){return this[yg]}toJSON(){let e=super.toJSON();return e.modelUri=this[cS],e.materials=this[yg].map(r=>r.toJSON()),e}};eD=cS,tD=yg;var rD,iD=Symbol("model"),uS=Symbol("elementsByInternalId"),fS=class extends EventTarget{constructor(e,r){super();this[rD]=new Map,this[iD]=new hS(this,e,r)}get model(){return this[iD]}getElementByInternalId(e){let r=this[uS].get(e);return r??null}adopt(e){this[uS].set(e.internalID,e)}mutate(e,r,n){let s=this.getElementByInternalId(e);s!=null&&r in s&&(s[r]=n,this.dispatchEvent(new CustomEvent("mutation",{detail:{element:s}})))}};rD=uS;var YY=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},dS="experimental-scene-graph-worklet",XY=new Set(["messaging","fetch","material-properties"]),nD=Symbol("onChildListMutation"),sD=Symbol("childListMutationHandler"),pS=Symbol("mutationObserver"),oD=Symbol("createExecutionContext"),mS=Symbol("onScriptElementAdded"),js=Symbol("executionContext"),gS=Symbol("updateExecutionContextModel"),Nf=Symbol("modelGraft"),aD=Symbol("onModelGraftMutation"),vS=Symbol("modelGraftMutationHandler"),lD=t=>{var e,r,n,s,o;class a extends t{constructor(){super(...arguments);this[o]=null,this[e]=c=>this[nD](c),this[r]=c=>this[aD](c),this[n]=new MutationObserver(this[sD]),this[s]=null}get worklet(){let c=this[js];return c!=null?c.worker:null}connectedCallback(){super.connectedCallback(),this[pS].observe(this,{childList:!0});let c=this.querySelector(`script[type="${dS}"]:last-of-type`);c!=null&&c.textContent&&this[mS](c)}disconnectedCallback(){super.disconnectedCallback(),this[pS].disconnect(),this[js]!=null&&(this[js].terminate(),this[js]=null)}updated(c){if(super.updated(c),c.has(Nf)){let h=c.get(Nf);h!=null&&h.removeEventListener("mutation",this[vS]);let f=this[Nf];f!=null&&f.addEventListener("mutation",this[vS])}}[(o=Nf,e=sD,r=vS,n=pS,s=js,Bi)](c){super[Bi](c),this[gS]()}[nD](c){if(this.parentNode==null)return;let h=null;for(let f of c)for(let u of Array.from(f.addedNodes))u instanceof HTMLScriptElement&&u.textContent&&u.getAttribute("type")===dS&&(h=u);h!=null&&this[mS](h)}[mS](c){if(!c.textContent||c.getAttribute("type")!==dS)return;let f=(c.getAttribute("allow")||"").split(";").map(u=>u.trim()).filter(u=>XY.has(u));this[oD](c.textContent,f)}[oD](c,h){let f=this[js];f!=null&&f.terminate(),this[js]=new sS(h),this[js].eval(c),this.dispatchEvent(new CustomEvent("worklet-created",{detail:{worklet:this.worklet}})),this[gS]()}[gS](){let c=this[js];if(c==null||this.parentNode==null)return;let h=this[Ee],f=this.loaded?new fS(h.model.url||"",{scene:h,scenes:[h],animations:[],cameras:[],parser:{},asset:{},userData:{}}):null;c.changeModel(f),this[Nf]=f}[aD](c){this[nr]()}}return YY([st({type:Object})],a.prototype,o,void 0),a};var Zo=Symbol("time"),ol=Symbol("duration"),_g=class{constructor(e){this[ol]=e,this[Zo]=0}get time(){return this[Zo]}get timeScale(){return this[Zo]/this[ol]}get duration(){return this[ol]}get hasStopped(){return this[Zo]>=this[ol]}reset(){this[Zo]=0}stop(){this[Zo]=this[ol]}tick(e){this[Zo]+=e,this.time>=this[ol]&&(this[Zo]=this[ol])}};var cD=function(t,e,r,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(o=(s<3?a(o):s>3?a(e,r,o):a(e,r))||o);return s>3&&o&&Object.defineProperty(e,r,o),o},ZY=Math.PI/32,QY=3e3,Qo=Symbol("autoRotateTimer"),yS=Symbol("cameraChangeHandler"),hD=Symbol("onCameraChange"),uD=t=>{var e,r;class n extends t{constructor(){super(...arguments);this.autoRotate=!1,this.autoRotateDelay=QY,this[e]=new _g(this.autoRotateDelay),this[r]=o=>this[hD](o)}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[yS]),this[Qo].stop()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[yS]),this[Qo].stop()}updated(o){if(super.updated(o),o.has("autoRotate")&&this[nr](),o.has("autoRotateDelay")){let a=new _g(this.autoRotateDelay);a.tick(this[Qo].time),a.hasStopped&&a.reset(),this[Qo]=a}}[(e=Qo,r=yS,ni)](o,a){super[ni](o,a),!(!this.autoRotate||!this.modelIsVisible)&&(this[Qo].tick(a),this[Qo].hasStopped&&(this[Ee].setPivotRotation(this[Ee].getPivotRotation()+ZY*a*.001),this[nr]()))}[hD](o){!this.autoRotate||o.detail.source==="user-interaction"&&this[Qo].reset()}get turntableRotation(){return this[Ee].getPivotRotation()}resetTurntableRotation(){this[Ee].setPivotRotation(0),this[nr]()}}return cD([st({type:Boolean,attribute:"auto-rotate"})],n.prototype,"autoRotate",void 0),cD([st({type:Number,attribute:"auto-rotate-delay"})],n.prototype,"autoRotateDelay",void 0),n};var fD=t=>{var e;let r=o=>{if(o.shadowRoot==null||o.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(o.shadowRoot);else{let a=()=>{self.applyFocusVisiblePolyfill(o.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",a,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",a)}}return()=>{}},n=Symbol("endPolyfillCoordination");class s extends t{constructor(){super(...arguments);this[e]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[n]==null&&(this[n]=r(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this[n]!=null&&(this[n](),this[n]=null)}}return e=n,s};var KY=lD(OO(UR(uD(dO(uO(YR(PO(AR(fD(Zc))))))))));customElements.define("model-viewer",KY);var _S=re(Ye());function dD(){return{restrict:"A",scope:{mqnViewInAr:"="},link:(t,e)=>{let r=t.mqnViewInAr;if(!r||typeof r!="object")return;if(!r.glb){console.error('"glb" is required');return}let n=e[0];if(_S.is.android()){let s={file:r.glb};r.title&&(s.title=r.title),r.link&&r.link.startsWith("http")&&(s.link=r.link);let o=new URLSearchParams(s).toString(),a="https://arvr.google.com/scene-viewer?"+o,l="intent://arvr.google.com/scene-viewer/1.1?"+o+"#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url="+a+";end;";n.href=l}else if(_S.is.ios()&&r.usdz)n.addEventListener("click",()=>{let s=document.createElement("img"),o=document.createElement("a");s.style.display="none",o.appendChild(s),o.setAttribute("href",r.usdz),o.setAttribute("rel","ar"),o.click()});else{let s=new pD(r);n.addEventListener("click",()=>s.open())}}}}var pD=class{constructor(e){this.glb=e.glb,this.usdz=e.usdz,this.isOpen=!1,this.modalEl=null}open(){if(this.isOpen)return;let e=document.createElement("button");e.classList.add(j.mqnCssName("mqn2-fqk")),e.addEventListener("click",()=>{this.close()});let r=document.createElement("model-viewer");r.setAttribute("ar",""),r.setAttribute("src",this.glb),this.usdz&&r.setAttribute("ios-src",this.usdz),r.setAttribute("shadow-intensity","1"),r.setAttribute("camera-controls",""),r.setAttribute("auto-rotate",""),r.setAttribute("style","");let n=document.createElement("div");n.classList.add(j.mqnCssName("mqn2-fqj")),n.appendChild(e),n.appendChild(r),document.body.appendChild(n),this.modalEl=n,this.isOpen=!0}close(){!this.isOpen||(console.log("ViewInArModal.close()"),document.body.removeChild(this.modalEl),this.isOpen=!1)}dispose(){this.close()}};var JY=function(){return{restrict:"A",link:function(t,e,r){let n=e[0],s=mt.makeSmithCooperateWithNativeSticky(n);t.$on("$destroy",()=>{s&&s.done()})}}},mD=JY;var yD=re(Ye()),_D=re(Et()),e7=vD(),bD=class{static get $inject(){return["$element","$scope","$attrs","$timeout","$window","$rootScope"]}constructor(e,r,n,s,o,a){this.el=e[0],this.$scope=r,this.$rootScope=a,this.config=JSON.parse(n.mqnParallax),this.raf=null,this.instances=[],this.observer=null,this.windowY=null,this.raf=new yD.Raf(()=>{this.instances.forEach(l=>{l.update()})}),this.observer=_D.elementVisibility.inview(this.el,null,(l,c,h)=>{c.isIntersecting?this.raf.start():this.raf.stop()}),window.setTimeout(()=>{this.config.forEach(l=>{this.instances.push(this.createSingleBasicScroll_(l))})}),this.resizeHandler_=()=>this.recalculate(),window.addEventListener("resize",this.resizeHandler_),r.$on("MQN2_PARALLAX_STOP",()=>{this.raf.stop()}),r.$on("MQN2_PARALLAX_UPDATE",()=>{this.instances.forEach(l=>{l.update()})}),r.$on("MQN2_PARALLAX_CALCULATE",()=>{this.recalculate()}),this.$scope.$on("MQN2_EQUAL_HEIGHTS_INITIALIZED",()=>{this.recalculate()}),r.$on("MQN2_PARALLAX_START",()=>{this.raf.start()}),r.$on("$destroy",()=>{this.dispose_()})}recalculate(){this.instances.forEach(e=>{e.calculate()})}createSingleBasicScroll_(e){return e.elem=this.el,e.direct=!0,e7.create(e)}dispose_(){this.raf&&this.raf.stop(),this.observer&&this.observer.dispose(),this.instances.forEach(e=>{e.destroy()}),window.removeEventListener("resize",this.resizeHandler_)}},t7=function(){return{restrict:"A",controller:bD}},wD=t7;var r7=function(){return{restrict:"A",scope:{mqnRewriteLinkTargets:"&",mqnRewriteLinkTargetsTarget:"&"},link:function(t,e,r){let n=e[0],s=r.mqnRewriteLinkTargetsTarget,o=n.querySelectorAll("a[href]");[].forEach.call(o,function(a){a.getAttribute("href").startsWith("/")&&(a.target=s)})}}},SD=r7;var ED=class{static get $inject(){return["$element","$scope","$attrs","$timeout","$window","$rootScope"]}constructor(e,r,n,s){this.el=e[0],this.$window=n,r.$on("$destroy",()=>{this.dispose_()});let o=a=>{a.stopPropagation(),a.preventDefault()};this.listenerRemover=()=>(this.el.addEventListener("click",o),()=>{this.el.removeEventListener("click",o)}),this.listenerRemover()}dispose_(){this.listenerRemover&&this.listenerRemover()}},i7=function(){return{restrict:"A",controller:ED}},xD=i7;var n7=function(){return{restrict:"A",scope:{mqnSwipe:"&",mqnSwipeLeft:"&",mqnSwipeRight:"&",mqnSwipeUp:"&",mqnSwipeDown:"&"},link:function(t,e,r){let n=e[0],s=+r.mqnSwipeDebounce||300,o=!1,a=!1,l=null,c=null,h="ontouchstart"in document.documentElement,f=d=>{l=d.touches&&d.touches[0].clientX||d.x,c=d.touches&&d.touches[0].clientY||d.y,a=!0},u=d=>{a=!1},m=d=>{if(!l||!c||o||!a)return;o=!0;let v=d.touches&&d.touches[0].clientX||d.x,p=d.touches&&d.touches[0].clientY||d.y,g=v-l,y=p-c;Math.abs(g)>Math.abs(y)?g>0?t.$apply(()=>{t.mqnSwipeLeft()}):t.$apply(()=>{t.mqnSwipeRight()}):y>0?t.$apply(()=>{t.mqnSwipeUp()}):t.$apply(()=>{t.mqnSwipeDown()}),window.setTimeout(()=>{o=!1,a=!1},s),v=null,p=null};h?(n.addEventListener("touchstart",f,{passive:!0}),n.addEventListener("touchmove",m,{passive:!0}),n.addEventListener("touchend",u,{passive:!0})):(n.addEventListener("mousedown",f,{passive:!0}),n.addEventListener("mousemove",m,{passive:!0}),n.addEventListener("mouseup",u,{passive:!0})),t.$on("$destroy",()=>{n.removeEventListener("touchstart",f),n.removeEventListener("touchmove",m),n.removeEventListener("touchend",u),n.removeEventListener("mousedown",f),n.removeEventListener("mouseup",u)})}}},TD=n7;var AD=re(Nn());var MD=re(yt()),bg=re(Ye()),s7=0;function o7(){return Symbol(s7++)}function a7(t){return t.replace(/\./g,"")}var CD=class{constructor(e,r,n,s,o){this.cssClass_=e,this.noReset_=r,this.fireOnce_=n,this.fired_=!1,this.ranges_=[],this.scrubbable_=s,this.dispatchInviewEvent_=o,this.hasReset_=!0}isDone(){return this.fired_&&this.fireOnce_}addConfig(e,r){bg.is.defined(e.from)&&e.from=="end"&&(e.from=r.duration),this.ranges_.push(new ce(bg.is.defined(e.from)?e.from:-1/0,bg.is.defined(e.to)?e.to:1/0))}update(e,r,n){this.scrubbable_&&ut(r,"opacity")==="0"||(this.shouldFire(r)?(this.dispatchInviewEvent_&&n&&!this.fired_&&n.$broadcast("mqn-inview-in",{inview:!0}),this.fired_=!0,gn(e,this.cssClass_),this.hasReset_=!1):this.fireOnce_||vn(e,this.cssClass_))}shouldFire(e){return!!this.ranges_.some(r=>r.contains(e.currentTime))}reset(e){!this.noReset_&&!this.hasReset_&&(vn(e,this.cssClass_),this.hasReset_=!0)}resetFiredState(e){this.fired_=!1,vn(e,this.cssClass_)}},PD=class{static get $inject(){return["$element","$attrs","$scope","mqnVideoCssTriggerTargetCollection"]}constructor(e,r,n,s){this.mqnVideoCssTriggerTargetCollection_=s;let o=JSON.parse(r.mqnVideoCssTriggers);if(this.id_=r.mqnVideoCssTriggersId||o7(),this.ngScope_=n,this.rl_=se.getDestroyableInstance(),!o.length){console.warn("Video CSS Triggers invoked without triggers. Config:",o);return}if(this.triggers=ho.usingFunction(([a,l,c,h,f])=>new CD(a7(a),l,c,h,f)),this.video=e[0],this.domWatcher=new MD.DomWatcher,this.domWatcher.add({element:document,on:"visibilitychange",callback:this.visibilityChange.bind(this),eventOptions:{passive:!0}}),!r.mqnVideoCssTriggersId){let l=mt.getClosestMqnFrame(this.video).children[0];this.registeredTargetElement_=l,this.mqnVideoCssTriggerTargetCollection_.addTarget(this.id_,l)}this.raf=new AD.default(()=>this.update()),n.$on("$destroy",()=>this.dispose_()),this.video.addEventListener("timeupdate",()=>this.update()),this.video.addEventListener("pause",()=>this.raf.stop()),this.video.addEventListener("play",()=>this.raf.start()),this.video.addEventListener("loadedmetadata",()=>{this.init_(o)})}init_(e){e.forEach(r=>{r.classes.forEach(n=>{this.triggers.get([n,r.no_reset,r.fire_once,r.scrubbable,r.dispatch_inview_event]).addConfig(r,this.video)})})}getAllTriggers(){return Array.from(this.triggers.values())}getTargetElements_(){return this.mqnVideoCssTriggerTargetCollection_.getTargets(this.id_).map(e=>e.getElement())}reset(){this.getAllTriggers().filter(e=>!e.isDone()).forEach(e=>{this.getTargetElements_().forEach(r=>e.reset(r))})}visibilityChange(){this.video.hasAttribute("mqn-lazyimage-video-no-play")||(document.hidden?this.getAllTriggers().forEach(e=>{this.getTargetElements_().forEach(r=>e.resetFiredState(r))}):(this.video.currentTime=0,this.video.play().then(()=>{}).catch(r=>{})))}update(){this.rl_.measure(()=>{if(!_t(this.video,!0))return;this.video.currentTime===0&&this.reset();let e=this.getTargetElements_();this.getAllTriggers().forEach(r=>{e.forEach(n=>{r.update(n,this.video,this.ngScope_)})})})}dispose_(){this.registeredTargetElement_&&this.mqnVideoCssTriggerTargetCollection_.disposeTarget(this.id_,this.registeredTargetElement_),this.rl_.destroy()}},l7=function(){return{restrict:"A",controller:PD}},ID=l7;var RD=re(Ye());var LD=class{static get $inject(){return["$element","$attrs","$scope","$timeout","$window"]}constructor(e,r,n,s,o){this.$window=o,this.video=e[0],this.canplaythrough=!1,this.isPlaying=!1,this.inview=!1,this.offset=+r.mqnVideoInviewPlayTopOffset||0,this.playDelay=+r.mqnVideoInviewPlayDelay||0,this.playStartClass=r.mqnVideoInviewPlayStartClass,this.playInviewClass=r.mqnVideoInviewPlayInviewClass,this.playEndClass=r.mqnVideoInviewPlayEndClass,this.waitForScroll=St.evBypassEnabled()?!1:r.mqnVideoInviewPlayWaitForScroll=="true",this.$scope=n,(this.playStartClass||this.playEndClass||this.playInviewClass)&&(this.partialRoot=mt.getClosestMqnFrame(this.video).children[0]),this.init(),n.$on("$destroy",()=>{this.dispose_()})}init(){ht.elementInViewWatcherFirstChangeOnly(this.video,{threshold:this.offset},(n,s,o)=>{s.isIntersecting&&(this.inview=s.isIntersecting),this.runCheck(),window.setTimeout(()=>{this.$scope.$apply()})}),ht.elementInViewWatcherFirstChangeOnly(this.video,{},(n,s,o)=>{s.isIntersecting||(this.inview=s.isIntersecting),this.runCheck(),window.setTimeout(()=>{this.$scope.$apply()})}),window.addEventListener("scroll",()=>{window.setTimeout(()=>{this.hasScrolled=!0,this.runCheck(),this.$scope.$apply()})},{once:!0,passive:!0});let e=RD.is.firefox()?"canplay":"canplaythrough";this.video.addEventListener(e,()=>{this.canplaythrough=!0,this.runCheck()},{once:!0});let r=()=>{this.playEndClass&&this.partialRoot.classList.add(this.playEndClass)};this.video.addEventListener("ended",r),this.videoEndListener=()=>{this.video.removeEventListener("ended",r)}}runCheck(){this.waitForScroll&&!this.hasScrolled||(this.inview&&this.canplaythrough&&!this.isPlaying&&(this.playInviewClass&&this.partialRoot.classList.add(this.playInviewClass),this.playDelay&&window.setTimeout(()=>{this.video.pause(),this.video.currentTime=0}),window.setTimeout(()=>{let e=this.video.play();this.video.classList.add("play-start"),this.isPlaying=!0,e.then(()=>{this.playStartClass&&this.partialRoot.classList.add(this.playStartClass)}).catch(r=>{this.isPlaying=!1})},this.playDelay)),!this.inview&&this.canplaythrough&&this.isPlaying&&this.canReset()&&(this.isPlaying=!1,this.video.pause(),this.video.currentTime=0,this.playInviewClass&&this.partialRoot.classList.remove(this.playInviewClass),this.playStartClass&&this.partialRoot.classList.remove(this.playStartClass),this.playEndClass&&this.partialRoot.classList.remove(this.playEndClass)))}canReset(){return!this.video.hasAttribute("mqn-video-inview-no-reset")}dispose_(){this.videoEndListener&&this.videoEndListener()}},c7=function(){return{restrict:"A",controller:LD}},OD=c7;var DD=re(yt()),FD=class{static get $inject(){return["$element","$attrs","$scope"]}constructor(e,r,n){this.el=e[0],this.playing=!1,this.pauseVideo(),this.domWatcher=new DD.DomWatcher,this.domWatcher.add({element:this.el,on:"mouseenter",callback:()=>{this.playVideo()}}),this.domWatcher.add({element:this.el,on:"mouseleave",callback:()=>{this.pauseVideo()}}),n.$on("$destroy",()=>{this.dispose()})}playVideo(){this.el.play().then(()=>{}).catch(r=>{})}pauseVideo(){this.el.pause()}dispose(){this.domWatcher.dispose()}},h7=function(){return{restrict:"A",controller:FD}},ND=h7;var kD=class{static get $inject(){return["$element","$attrs","$scope","$timeout","$window"]}constructor(e,r,n,s,o){this.el=e[0],this.id=r.mqnVideoIntroLoop,this.loopEl=document.getElementById(this.id),this.loopVideos=[...this.loopEl.querySelectorAll("video")],this.el.addEventListener("play",()=>{this.el.style.opacity=1,this.loopEl.style.opacity=0}),this.el.addEventListener("ended",()=>{this.el.pause(),this.loopVideos.forEach(a=>{a.currentTime=0;var l=a.play();l.then(()=>{}).catch(c=>{})}),this.el.style.opacity=0,this.loopEl.style.opacity=1})}},u7=function(){return{restrict:"A",controller:kD}},VD=u7;function _i(t,e){return e===void 0&&(e=null),e!==null?ar(t)-ar(e):ar(t)}function wg(t,e){return e===void 0&&(e=null),_i(t,e)+er.fromElementOffset(t).height-er.fromElementOffset(e).height}function Sg(t,e){e===void 0&&(e=null);var r=e!==null?e.offsetHeight:ji.clientHeight;return _i(t,e)+t.offsetHeight/2-r/2}function Eg(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return-1*t.apply(void 0,e)}}var Hi=function(){function t(){}return t.DISTANCE_FROM_DOCUMENT_TOP=Eg(ar),t.DISTANCE_FROM_DOCUMENT_CENTER=Eg(Sg),t.DISTANCE_FROM_DOCUMENT_BOTTOM=Eg(wg),t.DOCUMENT_SCROLL=function(){return window.pageYOffset||Tt.scrollTop},t}();var f7=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n};function hh(t,e){return f7(t.slice(0,t.indexOf(e)),t.slice(t.indexOf(e)+1))}var Ko={condition:null,distanceCallbacks:[],percentCallbacks:[],getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_CENTER,startDistance:function(){return Number.NEGATIVE_INFINITY},endDistance:function(){return Number.POSITIVE_INFINITY},effects:[]},xg=new Pi,d7=function(){function t(e,r,n){this.distance=e,this.distanceAsPercent=r,this.clientHeight=ji.clientHeight,this.clientWidth=ji.clientWidth,this.lastRunValue=n}return t.prototype.shouldTriggerRun=function(){return this.lastRunValue===null||this.distance!==this.lastRunValue.distance||this.clientHeight!==this.lastRunValue.clientHeight||this.clientWidth!==this.lastRunValue.clientWidth},t.prototype.getRunRangeAsPercent=function(){var e=this.lastRunValue!==null?this.lastRunValue.distanceAsPercent:0;return ce.fromUnorderedValues(e,this.distanceAsPercent)},t.prototype.getRunRange=function(){var e=this.lastRunValue!==null?this.lastRunValue.distance:0;return ce.fromUnorderedValues(e,this.distance)},t}(),bi=function(){function t(e,r){var n=r===void 0?Ko:r,s=n.condition,o=s===void 0?Ko.condition:s,a=n.distanceCallbacks,l=a===void 0?Ko.distanceCallbacks:a,c=n.percentCallbacks,h=c===void 0?Ko.percentCallbacks:c,f=n.getDistanceFunction,u=f===void 0?Ko.getDistanceFunction:f,m=n.startDistance,d=m===void 0?Ko.startDistance:m,v=n.endDistance,p=v===void 0?Ko.endDistance:v,g=n.effects,y=g===void 0?Ko.effects:g;e===null&&ot.throw("ScrollEffect requires a valid HTMLElement as a target"),this.condition_=o,this.distanceCallbacks_=t.mapCallbacksFromCallbackOptions_(l),this.percentCallbacks_=t.mapCallbacksFromCallbackOptions_(h),this.target_=e,this.getDistanceFunction_=u,this.startDistance_=d,this.endDistance_=p,this.effects_=y,this.runValue_=null,this.destroyed_=!1,this.forceRun_=!1,this.init_()}return t.prototype.init_=function(){var e=this;this.effects_.forEach(function(r){return xg.get(r).push(e)}),document.readyState==="complete"?se.measure(function(){return e.triggerRun()}):window.addEventListener("load",function(){return se.measure(function(){return e.triggerRun()})}),se.scrollMeasure(function(){return e.handleScroll_()})},t.mapCallbacksFromCallbackOptions_=function(e){var r=e instanceof Pi?Array.from(e.entries()):e,n=r.map(function(s){var o=s[0],a=s[1];return o instanceof ce?[o,a]:o instanceof Array?[new ce(o[0],o[1]),a]:[new ce(o,o),a]});return new Pi(n)},t.prototype.handleScroll_=function(){var e=this;this.destroyed_||se.scrollMeasure(function(){e.triggerRun(),se.scrollCleanup(function(){return e.handleScroll_()})})},t.prototype.forceRun=function(){var e=this;this.forceRun_||(this.forceRun_=!0,this.triggerRun(),se.cleanup(function(){return e.forceRun_=!1}))},t.prototype.triggerRun=function(){this.updateRunValue_(),this.shouldRun_()&&(this.runEffects_(),this.runCallbacksForPosition_())},t.prototype.shouldRun_=function(){return this.forceRun_?!0:this.isConditionMet_()&&this.runValue_.shouldTriggerRun()},t.prototype.isConditionMet_=function(){return this.condition_===null||this.condition_()},t.prototype.getDistanceValue_=function(e){return typeof e=="number"?e:e(this.target_)},t.prototype.getStartDistance_=function(){return this.getDistanceValue_(this.startDistance_)},t.prototype.getEndDistance_=function(){return this.getDistanceValue_(this.endDistance_)},t.prototype.getDistanceRange_=function(){return new ce(this.getStartDistance_(),this.getEndDistance_())},t.getCallbacks_=function(e,r){var n=[],s=r.entries();return Jr(s,function(o){var a=o[0],l=o[1];a.hasOverlap(e)&&n.push.apply(n,l)}),n},t.prototype.updateRunValue_=function(){var e=this.getRunDistance_(),r=this.getDistanceRange_().getValueAsPercent(e),n=isNaN(r)?0:r;this.runValue_=new d7(e,n,this.runValue_)},t.prototype.runCallbacks_=function(e){var r=this,n=this.runValue_.lastRunValue,s=n!==null?n.distance:null,o=n!==null?n.distanceAsPercent:null;e.forEach(function(a){return a(r.target_,r.runValue_.distance,r.runValue_.distanceAsPercent,s,o)})},t.prototype.runCallbacksForPosition_=function(){var e=t.getCallbacks_(this.runValue_.getRunRangeAsPercent(),this.percentCallbacks_),r=t.getCallbacks_(this.runValue_.getRunRange(),this.distanceCallbacks_);this.runCallbacks_(e.concat(r))},t.prototype.runEffects_=function(){var e=this.effects_.map(function(r){return r.run.bind(r)});this.runCallbacks_(e)},t.prototype.getRunDistance_=function(){return this.getDistanceRange_().clamp(this.getDistanceFunction_(this.target_))},t.prototype.destroy=function(){var e=this;this.destroyed_=!0,this.effects_.forEach(function(r){hh(xg.get(r),e),xg.get(r).length===0&&(xg.delete(r),r.destroy())})},t}();var BD=.1,UD=function(){function t(e,r,n){var s=n===void 0?{}:n,o=s.playableTime,a=o===void 0?new ce(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY):o,l=s.activePercentages,c=l===void 0?new ce(0,1):l;this.getForwardsVideo_=e,this.getBackwardsVideo_=r,this.targetPercentages_=Ae.usingFunction(function(){return 0}),this.destroyed_=!1,this.wasPlayingForwards_=!0,this.playableTime_=a,this.activePercentages_=c,this.scroll_=Zi.getSingleton(this),this.render_()}return t.prototype.run=function(e,r,n){this.targetPercentages_.set(e,n)},t.getTargetTime_=function(e,r,n){var s=n.getOverlap(new ce(0,e.duration));return s!==null?s.getPercentAsValue(r):0},t.prototype.getReversePlayableTime_=function(e){return new ce(Math.max(0,e.duration-this.playableTime_.getMax()),Math.min(e.duration,e.duration-this.playableTime_.getMin()))},t.prototype.getAdjustedPercentage_=function(e){return this.activePercentages_.getValueAsPercent(e)},t.prototype.render_=function(){var e=this;this.destroyed_||se.mutate(function(){se.cleanup(function(){return e.render_()}),Array.from(e.targetPercentages_.entries()).forEach(function(r){var n=r[0],s=r[1],o=e.getAdjustedPercentage_(s),a=e.getForwardsVideo_(n),l=e.getBackwardsVideo_(n),c,h,f;if(!(isNaN(a.duration)||isNaN(l.duration))){var u=t.getTargetTime_(a,o,e.playableTime_),m=t.getTargetTime_(l,1-o,e.getReversePlayableTime_(l)),d=m-l.currentTime,v=d<-BD;if(v){if(f=u,c=a,h=l,c.currentTime<e.playableTime_.getMin()&&f===e.playableTime_.getMin())return}else f=m,c=l,h=a;if(v!==e.wasPlayingForwards_&&(c.currentTime=c.duration-h.currentTime),h.paused||h.pause(),isNaN(f)||isNaN(c.currentTime)||c.currentTime>=f)c.paused||c.pause();else if(c.readyState>=3){de(c,"opacity","1"),de(h,"opacity","0");var p=c.currentTime-f;Math.abs(p)<BD?c.currentTime=f:c.play()}h.currentTime=h.duration-c.currentTime,e.wasPlayingForwards_=v}})})},t.prototype.destroy=function(){this.destroyed_=!0,this.scroll_.destroy(this)},t}();var Tg=re(Ye()),kf={FORWARDS_VIDEO:j.mqnCssName("mqn2-afm"),BACKWARDS_VIDEO:j.mqnCssName("mqn2-afp"),BACKWARDS_VIDEO_NOT_READY:j.mqnCssName("mqn2-bf1")},p7=function(){return{restrict:"A",link:function(t,e,r){let n=Tg.is.defined(r.mqn2ScrubOnFramePositionMinimumPlayTime)?parseFloat(r.mqn2ScrubOnFramePositionMinimumPlayTime):0,s=Tg.is.defined(r.mqn2ScrubOnFramePositionActivePercentStart)?parseFloat(r.mqn2ScrubOnFramePositionActivePercentStart):0,o=Tg.is.defined(r.mqn2ScrubOnFramePositionActivePercentEnd)?parseFloat(r.mqn2ScrubOnFramePositionActivePercentEnd):1,a=e[0],l=mt.getClosestMqnFrame(a),c=()=>{if(!_t(a))return 0;let v=_i(l),p=Math.abs(window.innerHeight-l.offsetHeight),g;return window.innerHeight>l.offsetHeight?g=1-new ce(0,p).clamp(v)/p:g=Math.abs(new ce(-p,0).clamp(v)/p),g},h=a.querySelector(`.${kf.FORWARDS_VIDEO}`),f=a.querySelector(`.${kf.BACKWARDS_VIDEO}`);f.classList.add(kf.BACKWARDS_VIDEO_NOT_READY),f.classList.add(kf.BACKWARDS_VIDEO_NOT_READY);let u=()=>{f.classList.remove(kf.BACKWARDS_VIDEO_NOT_READY),f.currentTime=f.duration};f.addEventListener("loadedmetadata",u);let m=setInterval(()=>{f.readyState>=3&&(u(),clearInterval(m))},16),d=new bi(a,{getDistanceFunction:c,effects:[new UD(()=>h,()=>f,{playableTime:new ce(n,Number.MAX_VALUE),activePercentages:new ce(s,o)})],startDistance:0,endDistance:1});t.$on("$destroy",()=>d.destroy())}}},HD=p7;var qD=class{static get $inject(){return["$element","$attrs","$scope","mqnVideoCssTriggerTargetCollection"]}constructor(e,r,n,s){this.mqnVideoCssTriggerTargetCollection_=s,this.ids_=r.mqnVideoCssTriggersTargetIds.split(" "),this.el_=e[0],this.ids_.forEach(o=>{this.mqnVideoCssTriggerTargetCollection_.addTarget(o,this.el_)}),n.$on("$destroy",()=>this.dispose_())}dispose_(){this.ids_.forEach(e=>{this.mqnVideoCssTriggerTargetCollection_.disposeTarget(e,this.el_)})}},m7=function(){return{restrict:"A",scope:!1,controller:qD}},zD=m7;var g7="354x720",WD=class{static get $inject(){return["$element","$scope","$attrs","$window"]}constructor(e,r,n,s){this.$scope=r,this.el=e[0],this.jQuery=window.jQuery,this.partialType=null,this.isMarginRight=n.mqnGridWithDeviceImagesMetaOffset=="left";let o=this.jQuery(this.el).closest("."+j.mqnCssName("mqn2-aaa")).children().first();this.deviceEl,o&&(o.hasClass(j.mqnCssName("mqn2-ab6"))?(this.partialType="mqn2-grid-1x1",this.deviceEl=o.find("."+j.mqnCssName("mqn2-agj"))):o.hasClass(j.mqnCssName("mqn2-acb"))&&(this.partialType="mqn2-grid-tabbed",this.deviceEl=o.find(`.${j.mqnCssName("mqn2-aap")} .${j.mqnCssName("mqn2-ag8")}:first`))),n.mqnDeviceImageAspect!==""?this.aspect=n.mqnDeviceImageAspect.split("x"):this.aspect=g7.split("x"),this.aspect=this.aspect[0]/this.aspect[1],this.resizeDebouncer=null;let a=l=>{this.windowSize!==window.innerWidth&&(window.clearTimeout(this.resizeDebouncer),this.resizeDebouncer=window.setTimeout(()=>{this.calculate_()},300))};window.MQN_RESIZER?(window.MQN_RESIZER.addListener(a),this.windowListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(a)}):(s.addEventListener("resize",a),this.windowListener=()=>{s.removeEventListener("resize",a)}),r.$on("$destroy",()=>{this.dispose_()}),this.calculate_()}calculate_(){if(!Te.IS_MOBILE()&&this.deviceEl&&this.deviceEl[0]){let e=this.deviceEl[0].offsetHeight*this.aspect;this.partialType==="mqn2-grid-1x1"&&this.jQuery(this.el).closest("."+j.mqnCssName("mqn2-ab7")).hasClass(j.mqnCssName("mqn2-abc"))||this.partialType==="mqn2-grid-tabbed"&&!this.jQuery(this.el).closest("."+j.mqnCssName("mqn2-acb")).hasClass(j.mqnCssName("mqn2-acc"))||this.isMarginRight?this.el.style.marginRight=`${e/2}px`:this.el.style.marginLeft=`${e/2}px`,this.el.style.width="auto"}else this.jQuery(this.el).closest("."+j.mqnCssName("mqn2-ab7")).hasClass(j.mqnCssName("mqn2-abc"))?this.el.style.marginRight=null:this.el.style.marginLeft=null,this.el.style.width=null}dispose_(){this.windowListener&&this.windowListener()}},v7=function(){return{restrict:"A",controller:WD}},GD=v7;function Ut(t){return t.reduce(function(e,r){return e.concat(r)},[])}var y7=new Map([["black","#000000"],["silver","#c0c0c0"],["gray","#808080"],["white","#ffffff"],["maroon","#800000"],["red","#ff0000"],["purple","#800080"],["fuchsia","#ff00ff"],["green","#008000"],["lime","#00ff00"],["olive","#808000"],["yellow","#ffff00"],["navy","#000080"],["blue","#0000ff"],["teal","#008080"],["aqua","#00ffff"],["orange","#ffa500"],["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["blanchedalmond","#ffebcd"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["oldlace","#fdf5e6"],["olivedrab","#6b8e23"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["whitesmoke","#f5f5f5"],["yellowgreen","#9acd32"],["rebeccapurple","#663399"]]),wS=function(){function t(){}return t.get=function(e){return y7.get(e)},t}();function hs(t,e){for(var r=[];t.length;)r.push(t.slice(0,e)),t=t.slice(e);return r}function $D(t,e){return hs(t.split(""),e).map(function(r){return r.join("")})}function jD(t){return parseInt(t,16)}function Vf(t,e){var r=void 0,n=Number.NEGATIVE_INFINITY;return t.forEach(function(s){var o=e(s);n<o&&(r=s,n=o)}),r}function Ag(t,e){return Vf(Array.from(t),e)}var _7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b7=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},YD=function(t){_7(e,t);function e(r,n,s){r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=0);var o=t.call(this,r,n,s)||this;return o.red_=r,o.green_=n,o.blue_=s,o}return e.prototype.getRed=function(){return this.red_},e.prototype.getGreen=function(){return this.green_},e.prototype.getBlue=function(){return this.blue_},e.prototype.toNumbers=function(){return[this.red_,this.green_,this.blue_]},e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(this.bind.apply(this,b7([void 0],r)))},e}(co);var Bf=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},w7="0123456789abcdefABCDEF",Ys=function(){function t(e,r,n,s){e===void 0&&(e=0),r===void 0&&(r=0),n===void 0&&(n=0),s===void 0&&(s=1),this.rgb_=new YD(e,r,n),this.alpha_=s}return t.fromImageData=function(e){for(var r=e.data,n=[],s=0;s<r.length;s+=4){var o=r[s],a=r[s+1],l=r[s+2],c=r[s+3];n.push(new t(o,a,l,c))}return n},t.toImageData=function(e,r){var n=e.map(function(s){return s.toNumbers()});return new ImageData(new Uint8ClampedArray(Ut(n)),r.width,r.height)},t.fromStyleString=function(e){if(t.isHexValue_(e))return this.fromHex(e);if(e.slice(0,3)==="rgb")return this.fromRgb(e);if(wS.get(e))return this.fromHex(wS.get(e));console.error('Invalid string "'+e+'" provided to Color.fromStyleString')},t.fromString=function(e){return console.warn("Deprecating in favor of fromStyleString to add wider support for ICssStyleValueInstance"),this.fromStyleString(e)},t.fromHex=function(e){var r=e.split("#").slice(-1)[0];r.length!==3&&r.length!==6&&console.error("Invalid hexValue provided to Color");var n=r.length/3,s=$D(r,n),o=s.map(function(l){return l.length===2?l:""+l+l}),a=o.map(function(l){return jD(l)});return new(t.bind.apply(t,Bf([void 0],a)))},t.fromHexes=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.map(function(s){return e.fromHex(s)})},t.fromRgb=function(e){var r=e.split("(").slice(-1)[0].split(")")[0].split(","),n=r.map(function(l){return ws(l)}),s=n.slice(0,3).map(function(l){return parseInt(l)}),o=n[3],a=typeof o=="undefined"?1:parseFloat(o);return new(t.bind.apply(t,Bf([void 0],s,[a])))},t.fromElementBackgroundColor=function(e){return this.fromString(ut(e,"background-color"))},t.isHexValue_=function(e){return e[0]==="#"&&(e=e.slice(1)),e.split("").every(function(r){return w7.indexOf(r)!==-1})},t.prototype.getRGB=function(){return this.rgb_},t.prototype.getAlpha=function(){return this.alpha_},t.prototype.getColorWithHighestContrast=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Ag(r,function(s){return s.getRGB().subtract(e.getRGB()).getLength()})},t.prototype.toStyleString=function(){var e=Bf(this.getRGB().getValues().map(function(r){return Math.round(r)}),[this.alpha_]);return"rgba("+e.join(", ")+")"},t.prototype.getBrightness=function(){return 3*this.getRed()+4*this.getGreen()+this.getBlue()>>>3},t.prototype.getRed=function(){return this.rgb_.getRed()},t.prototype.getGreen=function(){return this.rgb_.getGreen()},t.prototype.getBlue=function(){return this.rgb_.getBlue()},t.prototype.toNumbers=function(){return Bf(this.rgb_.toNumbers(),[this.alpha_])},t.fromNumbers=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,Bf([void 0],e)))},t}();var S7=/^\-?((([0-9]*\.?[0-9]+)([a-zA-Z\%]*))|([a-zA-Z\%]+))$/,Ht=function(){function t(e,r){this.numericValue=e,this.symbol=r}return t.prototype.isNumber=function(){return this.symbol===null},t.prototype.isVariable=function(){return!this.isNumber()},t.fromString=function(e){var r=S7.exec(e);if(r===null)return ot.throw('Invalid variable value in "'+e+'"'),new t(0,"");var n=e[0]==="-"?-1:1,s=r[3]?parseFloat(r[3]):1,o=r[4]||r[5]||null;return new t(n*s,o)},t.prototype.toString=function(){var e=this.symbol===null?"":this.symbol;return""+this.numericValue+e},t.prototype.invert=function(){return new t(-this.numericValue,this.symbol)},t}();var Mg=function(){function t(){}return t.execute=function(e,r){return e.symbol===r.symbol||e.symbol===null||r.symbol===null?[new Ht(e.numericValue/r.numericValue,e.symbol||r.symbol)]:[e,t,r]},t}(),Cg=function(){function t(){}return t.execute=function(e,r){return e.symbol===r.symbol||e.symbol===null||r.symbol===null?[new Ht(e.numericValue*r.numericValue,e.symbol||r.symbol)]:[e,t,r]},t}(),al=function(){function t(){}return t.execute=function(e,r){return e.symbol===r.symbol?[new Ht(e.numericValue+r.numericValue,e.symbol)]:[e,t,r]},t}(),us=function(){function t(){}return t.execute=function(e,r){return e.symbol===r.symbol?[new Ht(e.numericValue-r.numericValue,e.symbol)]:[e,t,r]},t}();var Pg=new Map([["*",Cg],["/",Mg],["+",al],["-",us]]);var SS=kd(Pg);var XD=[[Mg,Cg],[al,us]];function ZD(t,e){for(var r=0;r<t.length;r++)e.has(t[r])&&(t[r]=e.get(t[r]));return t}function uh(t,e){return t.indexOf(e)!==-1}var E7=new RegExp(/^[A-Za-z0-9\.\-\s\+\*\/\%]*$/),Ig=function(){function t(e){this.pieces_=t.reduce_(e)}return t.fromString=function(e){E7.test(e)||ot.throw('Invalid formula "'+e+'", does not match regex');for(var r=e.replace(/ /g,""),n=ZD(r.split(""),Pg),s=[],o=0,a=0;a<n.length;){var l="";if(typeof n[a]=="string"){for(;typeof n[a]=="string";)l+=n[a],a++;s[o]=Ht.fromString(l)}else s[o]=n[a],a++;o++}return new t(s)},t.prototype.getPieces=function(){return this.pieces_},t.prototype.toString=function(){return this.getPieces().map(function(e){if(SS.has(e))return SS.get(e);if(e instanceof Ht)return e.toString()}).join(" ")},t.reduce_=function(e){return t.reduceWithExecution_(t.reduceWithNegation_(t.reduceFirstNegation_(e)))},t.reduceFirstNegation_=function(e){if(e.length>1&&e[0]===us){var r=e[1];if(!(r instanceof Ht))return ot.throw("Formulas should start with a Variable"),[];var n=e.slice(1);return n[0]=r.invert(),n}else return e},t.reduceWithNegation_=function(e){var r=e.length;if(r===0)return e;var n=e[0];if(n instanceof Ht||ot.throw("Formulas should start with a Variable"),r===1)return e;for(var s=[n],o=1,a=function(u){s[o]=u,o++},l=1;l<r;l++){var c=s[o-1],h=s[o-2],f=e[l];f instanceof Ht?c instanceof Ht?ot.throw("Formula does not support implicit multiplication."):c===us&&!(h instanceof Ht)?s[o-1]=f.invert():h instanceof Ht?a(f):ot.throw("Formulas must have a value between operators."):c instanceof Ht?a(f):f!==us?ot.throw("Formulas must have a value between operators."):!(h instanceof Ht)&&$i(h)?ot.throw("Formulas must have a value between operators."):a(f)}return s},t.reduceWithOperations_=function(e,r){var n=r.filter(function(m){return uh(e,m)});if(n.length===0)return e;var s=new Set(n);if(e.length===1)return e;e.length%2==0&&ot.throw("Cannot reduce with operation on an even number of pieces");for(var o=[e[0],e[1]],a=2,l=2;l<e.length;l+=2){var c=o[a-2],h=o[a-1],f=e[l];if(!(c instanceof Ht))return ot.throw("Found IOperation where a Variable was expected"),[];if(!(f instanceof Ht))return ot.throw("Found IOperation where a Variable was expected"),[];if(h instanceof Ht)return ot.throw("Found Variable where a IOperation was expected"),[];if(s.has(h)){var u=h.execute(c,f);u.length===1?(o.pop(),o.pop(),o[a-2]=u[0],a--):(o[a-2]=u[0],o[a-1]=u[1],o[a]=u[2],a++)}else o[a]=f,a++;l+1<e.length&&(o[a]=e[l+1],a++)}return o},t.reduceWithExecution_=function(e){return e.length===1?e:(e.length%2==0&&ot.throw("Cannot reduce with execution on an even number of pieces"),XD.reduce(function(r,n){return t.reduceWithOperations_(r,n)},e))},t.prototype.reduce=function(){return console.warn("Formula.reduce is deprecated. All formulas are now reduced at construction."),this},t}();var ES=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},wi=["px","%","vh","vw","vmin","vmax","em","rem"],at=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.values_=e}return t.fromVariables=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=new Ae(t.mapValuesBySymbol_.apply(t,e),Map,function(){return 0});return new(t.bind.apply(t,ES([void 0],wi.map(function(s){return n.get(s)}))))},t.mapValuesBySymbol_=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.map(function(n){return[n.symbol,n.numericValue]})},t.fromNumbers=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,ES([void 0],e)))},t.fromStyleString=function(e){for(var r=e.slice(0,4)==="calc"?e.slice(5,-1):e,n=Ig.fromString(r).getPieces(),s=[],o=n.length-1;o>=0;o--){var a=n[o];a===us?(s[o]=al,s[o+1]=s[o+1].invert()):!(a instanceof Ht)&&a!==al?ot.throw("CssCalcFormula currently only supports Add/Subtract"):s[o]=a}var l=s.filter(function(f){return uh(wi,f.symbol)}).filter(function(f){return f instanceof Ht}),c=wi.map(function(f){var u=l.find(function(m){return m.symbol===f});return u||new Ht(0,f)}),h=c.map(function(f){return f.numericValue});return new(t.bind.apply(t,ES([void 0],h)))},t.prototype.toNumbers=function(){return this.values_.slice()},t.prototype.toStyleString=function(){var e=kt(this.values_,wi).filter(function(r){var n=r[0],s=r[1];return n!==0}).map(function(r){return r.join("")});return e.length===0?"0px":e.length===1?e[0]:"calc("+e.join(" + ")+")"},t}();var Rg=function(){function t(e){this.value_=e}return t.fromNumbers=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new t(e[0])},t.fromStyleString=function(e){return new t(parseFloat(e))},t.prototype.toNumbers=function(){return[this.value_]},t.prototype.toStyleString=function(){return""+this.value_},t}();var Lg=new Map([["background-color",Ys],["background-position-x",at],["background-position-y",at],["border-color",Ys],["border-radius",at],["bottom",at],["color",Ys],["fill",Ys],["max-height",at],["height",at],["left",at],["margin-bottom",at],["margin-left",at],["margin-right",at],["margin-top",at],["opacity",Rg],["padding-bottom",at],["padding-left",at],["padding-right",at],["padding-top",at],["right",at],["stroke",Ys],["top",at],["max-width",at],["width",at]]);function xS(t,e){return Lg.get(t).fromStyleString(e)}function fs(t){if(t.indexOf("(")===-1&&t.indexOf(")")===-1)return"";if(t.indexOf("(")===-1&&t.indexOf(")")!==-1)return ot.throw("Value passed to getContentInFirstSetOfParentheses() has no opening parenthesis"),"";for(var e=t.indexOf("(")+1,r=1,n=e;r>0&&n<t.length;){var s=t[n];s===")"?r--:s==="("&&r++,n++}if(r>0)return ot.throw("Value passed to getContentInFirstSetOfParentheses() has uneven opening/closing parentheses"),"";var o=n-1;return t.slice(e,o)}var He=function(){function t(e,r){this.keyword_=e,this.values_=r}return t.styleStringToPlainNumbers=function(e){return t.styleStringToValues(e).map(function(r){return parseFloat(r)})},t.styleStringToValues=function(e){return fs(e).split(",").map(function(r){return ws(r)})},t.prototype.toNumbers=function(){return this.values_.slice()},t.prototype.toStyleString=function(){return this.keyword_+"("+this.values_.join(",")+")"},t}();var x7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QD=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},KD=function(t){x7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"matrix",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,QD([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,QD([void 0],He.styleStringToPlainNumbers(r))))},e.getDefaultValue=function(){return new e(1,0,0,1,0,0)},e.valuesLength=6,e}(He);var T7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JD=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},e2=function(t){T7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"matrix3d",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,JD([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,JD([void 0],He.styleStringToPlainNumbers(r))))},e.getDefaultValue=function(){return new e(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},e.valuesLength=16,e}(He);var A7=function(){return null};function Ft(t,e){e===void 0&&(e=A7);for(var r=new Array(t),n=0;n<t;n++)r[n]=e(n);return r}var M7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Og=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},Dg=wi.length,t2=function(t){M7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=this,o=r.length===Dg?Og(r,Ft(Dg,function(){return 0})):r;return s=t.call(this,"translate",o)||this,s}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,Og([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,Og([void 0],Ut(He.styleStringToValues(r).map(function(n){return at.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=hs(this.values_,Dg).map(function(n){return at.fromNumbers.apply(at,n)}).map(function(n){return n.toStyleString()});return this.keyword_+"("+r.join(",")+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,Og([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=Dg*2,e}(He);var C7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},r2=function(t){C7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"translateX",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,TS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,TS([void 0],at.fromStyleString(fs(r)).toNumbers())))},e.prototype.toStyleString=function(){var r=at.fromNumbers.apply(at,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,TS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=wi.length,e}(He);var P7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},i2=function(t){P7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"translateY",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,AS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,AS([void 0],at.fromStyleString(fs(r)).toNumbers())))},e.prototype.toStyleString=function(){var r=at.fromNumbers.apply(at,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,AS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=wi.length,e}(He);var I7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},n2=function(t){I7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"translateZ",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,MS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,MS([void 0],at.fromStyleString(fs(r)).toNumbers())))},e.prototype.toStyleString=function(){var r=at.fromNumbers.apply(at,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,MS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=wi.length,e}(He);var R7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},s2=wi.length,o2=function(t){R7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"translate3d",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,CS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,CS([void 0],Ut(He.styleStringToValues(r).map(function(n){return at.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=hs(this.values_,s2).map(function(n){return at.fromNumbers.apply(at,n)}).map(function(n){return n.toStyleString()});return this.keyword_+"("+r.join(",")+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,CS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=3*s2,e}(He);var L7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a2=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},l2=function(t){L7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=this,o=r.length==1?[r[0],r[0]]:r;return s=t.call(this,"scale",o)||this,s}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,a2([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,a2([void 0],He.styleStringToPlainNumbers(r))))},e.getDefaultValue=function(){return new e(1)},e.valuesLength=2,e}(He);var O7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c2=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},h2=function(t){O7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"scaleX",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,c2([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,c2([void 0],He.styleStringToPlainNumbers(r))))},e.getDefaultValue=function(){return new e(1)},e.valuesLength=1,e}(He);var D7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u2=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},f2=function(t){D7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"scaleY",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,u2([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,u2([void 0],He.styleStringToPlainNumbers(r))))},e.getDefaultValue=function(){return new e(1)},e.valuesLength=1,e}(He);var F7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d2=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},p2=function(t){F7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"scaleZ",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,d2([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,d2([void 0],He.styleStringToPlainNumbers(r))))},e.getDefaultValue=function(){return new e(1)},e.valuesLength=1,e}(He);var N7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m2=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},g2=function(t){N7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"scale3d",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,m2([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,m2([void 0],He.styleStringToPlainNumbers(r))))},e.prototype.toStyleString=function(){return this.keyword_+"("+this.values_.join(",")+")"},e.getDefaultValue=function(){return new e(1,1,1)},e.valuesLength=3,e}(He);var PS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},mr=["deg","rad","turn"],xt=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.values_=e}return t.fromVariables=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=new Ae(t.mapValuesBySymbol_.apply(t,e),Map,function(){return 0});return new(t.bind.apply(t,PS([void 0],mr.map(function(s){return n.get(s)}))))},t.mapValuesBySymbol_=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.map(function(n){return[n.symbol,n.numericValue]})},t.fromNumbers=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,PS([void 0],e)))},t.fromStyleString=function(e){var r=e.slice(0,4)==="calc"?e.slice(5,-1):e,n=Ig.fromString(r).getPieces(),s=n.filter(function(l){return uh(mr,l.symbol)}).filter(function(l){return l instanceof Ht}),o=mr.map(function(l){var c=s.find(function(h){return h.symbol===l});return c||new Ht(0,l)}),a=o.map(function(l){return l.numericValue});return new(t.bind.apply(t,PS([void 0],a)))},t.prototype.toNumbers=function(){return this.values_.slice()},t.prototype.toStyleString=function(){var e=kt(this.values_,mr).filter(function(r){var n=r[0],s=r[1];return n!==0}).map(function(r){return r.join("")});return e.length===0?"0":"calc("+e.join(" + ")+")"},t}();var k7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},v2=function(t){k7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"rotate",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,IS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,IS([void 0],Ut(He.styleStringToValues(r).map(function(n){return xt.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=xt.fromNumbers.apply(xt,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,IS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=mr.length,e}(He);var V7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},y2=function(t){V7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"rotateX",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,RS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,RS([void 0],Ut(He.styleStringToValues(r).map(function(n){return xt.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=xt.fromNumbers.apply(xt,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,RS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=mr.length,e}(He);var B7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},_2=function(t){B7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"rotateY",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,LS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,LS([void 0],Ut(He.styleStringToValues(r).map(function(n){return xt.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=xt.fromNumbers.apply(xt,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,LS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=mr.length,e}(He);var U7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},b2=function(t){U7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"rotateZ",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,OS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,OS([void 0],Ut(He.styleStringToValues(r).map(function(n){return xt.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=xt.fromNumbers.apply(xt,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,OS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=mr.length,e}(He);var H7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},w2=mr.length,S2=function(t){H7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"rotate3d",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,DS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,DS([void 0],Ut(He.styleStringToValues(r).map(function(n){return xt.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=hs(this.values_,w2).map(function(n){return xt.fromNumbers.apply(xt,n)}).map(function(n){return n.toStyleString()});return this.keyword_+"("+r.join(",")+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,DS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=4*w2,e}(He);var q7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fg=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},FS=mr.length,E2=function(t){q7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=this,o=r.length===FS?Fg(r,r):r;return s=t.call(this,"skew",o)||this,s}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,Fg([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,Fg([void 0],He.styleStringToPlainNumbers(r))))},e.prototype.toStyleString=function(){var r=hs(this.values_,FS).map(function(n){return xt.fromNumbers.apply(xt,n)}).map(function(n){return n.toStyleString()});return this.keyword_+"("+r.join(",")+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,Fg([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=FS*2,e}(He);var z7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},x2=function(t){z7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"skewX",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,NS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,NS([void 0],Ut(He.styleStringToValues(r).map(function(n){return xt.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=xt.fromNumbers.apply(xt,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,NS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=mr.length,e}(He);var W7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kS=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},T2=function(t){W7(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call(this,"skewY",r)||this}return e.fromNumbers=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new(e.bind.apply(e,kS([void 0],r)))},e.fromStyleString=function(r){return new(e.bind.apply(e,kS([void 0],Ut(He.styleStringToValues(r).map(function(n){return xt.fromStyleString(n)}).map(function(n){return n.toNumbers()})))))},e.prototype.toStyleString=function(){var r=xt.fromNumbers.apply(xt,this.values_).toStyleString();return this.keyword_+"("+r+")"},e.getDefaultValue=function(){return new(e.bind.apply(e,kS([void 0],Ft(e.valuesLength,function(){return 0}))))},e.valuesLength=mr.length,e}(He);var Ng=new Map([["matrix",KD],["matrix3d",e2],["translate",t2],["translateX",r2],["translateY",i2],["translateZ",n2],["translate3d",o2],["scale",l2],["scaleX",h2],["scaleY",f2],["scaleZ",p2],["scale3d",g2],["rotate",v2],["rotateX",y2],["rotateY",_2],["rotateZ",b2],["rotate3d",S2],["skew",E2],["skewX",x2],["skewY",T2]]);var A2=new Set(Array.from(Ng.keys()));var Uf=function(){function t(e){this.transformValues_=e}return t.prototype.getTransformValues=function(){return this.transformValues_.slice()},t.prototype.getTransformValueClasses=function(){return this.transformValues_.map(function(e){return e.constructor})},t.fromStyleString=function(e){for(var r=e,n=[];r.length>0;){var s=fs(r),o=r.indexOf(s),a=r.slice(0,o-1);A2.has(a)||ot.throw('Unsupported transform function "'+a+'" provided to Toolbox Transform.');var l=Ng.get(a),c=r.slice(0,o+s.length+1),h=l.fromStyleString(c);n.push(h),r=ws(r.slice(c.length))}return new t(n)},t.prototype.toStyleString=function(){return this.transformValues_.map(function(e){return e.toStyleString()}).join(" ")},t}();var M2=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},G7=ho.usingFunction($7);function $7(t){var e=di.apply(void 0,t.map(function(n){return n.valuesLength})),r=function(){function n(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];this.values_=s}return n.fromNumbers=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];return new(n.bind.apply(n,M2([void 0],s)))},n.prototype.toNumbers=function(){return this.values_.slice()},n.fromStyleString=function(s){return new(n.bind.apply(n,M2([void 0],Ut(Uf.fromStyleString(s).getTransformValues().map(function(o){return o.toNumbers()})))))},n.prototype.toStyleString=function(){var s=this.values_.slice();return t.reduce(function(o,a){var l=s.slice(0,a.valuesLength);s=s.slice(a.valuesLength);var c=a.fromNumbers.apply(a,l);return o+" "+c.toStyleString()},"")},n.valuesLength=e,n}();return r}function C2(t){return G7.get(t)}var P2=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},I2=function(){function t(e,r,n){this.cachedValue_=null,this.position_=e,this.property_=r,this.value_=n}return t.prototype.getPosition=function(){return this.position_},t.prototype.getProperty=function(){return this.property_},t.prototype.getValue=function(e){return this.cachedValue_!==null?this.cachedValue_:this.property_==="transform"?this.getTransformValue_(e):this.isDynamicValue()?(this.cachedValue_=xS(this.property_,this.getRawValue()),this.cachedValue_):xS(this.property_,this.getRawValue())},t.prototype.isDynamicValue=function(){return typeof this.value_=="string"},t.prototype.getRawValue=function(){return typeof this.value_=="string"?this.value_:this.value_()},t.prototype.setPosition=function(e){return new t(e,this.property_,this.value_)},t.isValidTweenableProperty_=function(e){return Lg.has(e)||e==="transform"},t.parseStyleMap_=function(e,r){return Array.from(r.entries()).filter(function(n){var s=n[0],o=n[1];return t.isValidTweenableProperty_(s)}).map(function(n){var s=n[0],o=n[1];return new t(e,s,o)})},t.parseConfig=function(e){var r=this.configToSortedStyleMaps_(e);return Ut(r.map(function(n){var s=n[0],o=n[1];return t.parseStyleMap_(s,o)}))},t.configToSortedStyleMaps_=function(e){var r=Ae.usingFunction(function(){return new Map});return e.forEach(function(n){var s=n[0],o=n[1],a=r.get(s),l=typeof o=="string"?Nl(o):o;l.forEach(function(c,h){return a.set(h,c)})}),Array.from(r.entries()).sort(function(n,s){return n[0]-s[0]})},t.getTransformClassesInOrder_=function(e){for(var r=e.map(function(f){return f.getTransformValueClasses()}),n=[],s=0;s<r.length;s++)for(var o=r[s],a=0;a<o.length;a++){var l=o[a];n.push(l);for(var c=0;c<r.length;c++){var h=r[c];h[0]===l&&(r[c]=h.slice(1))}}return n},t.prototype.getTransformValue_=function(e){for(var r=[this,e].sort(function(v,p){return v.getPosition()-p.getPosition()}),n=r.map(function(v){return Uf.fromStyleString(v.getRawValue())}),s=Uf.fromStyleString(this.getRawValue()),o=t.getTransformClassesInOrder_(n),a=C2(o),l=s.getTransformValues(),c=s.getTransformValueClasses(),h=[],f=0,u=0;u<o.length;){var m=o[u],d=c[f];m===d?(h=P2(h,l[f].toNumbers()),f++):h=P2(h,m.getDefaultValue().toNumbers()),u++}return a.fromNumbers.apply(a,h)},t}();function R2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return di.apply(void 0,t)/t.length}function L2(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.slice(1).reduce(function(r,n){return r-n},t[0])}function O2(t){return Object.getPrototypeOf(t)}var j7=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n};function Hf(t){var e=O2(t);return e?j7([e],Hf(e)):[]}var Y7=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n};function kg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kt.apply(void 0,t.map(function(r){var n=Hf(r);return Y7([r],n).reverse()})).reverse().find(function(r){return Zh.apply(void 0,r)})[0]}var Xs=function(){function t(){}return t.zipValues_=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return kt.apply(void 0,e.map(function(n){return n.toNumbers()}))},t.getClasses_=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.map(function(n){return n.constructor})},t.getSharedClass=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=kg.apply(void 0,this.getClasses_.apply(this,e));return n},t.add=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=this.zipValues_.apply(this,r).map(function(o){return di.apply(void 0,o)});return(e=this.getSharedClass.apply(this,r)).fromNumbers.apply(e,s)},t.subtract=function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=this.zipValues_.apply(this,r).map(function(o){return L2.apply(void 0,o)});return(e=this.getSharedClass.apply(this,r)).fromNumbers.apply(e,s)},t}();var qf=function(){function t(e,r){this.class_=kg(e.constructor,r.constructor),this.min_=e,this.max_=r,this.ranges_=kt(e.toNumbers(),r.toNumbers()).map(function(n){var s=n[0],o=n[1];return new ce(s,o)})}return t.prototype.zipRangeAndNumbers_=function(e){return kt(this.ranges_,e.toNumbers())},t.prototype.clamp=function(e){var r;return(r=this.class_).fromNumbers.apply(r,this.zipRangeAndNumbers_(e).map(function(n){var s=n[0],o=n[1];return s.clamp(o)}))},t.prototype.contains=function(e){return this.zipRangeAndNumbers_(e).reduce(function(r,n){var s=n[0],o=n[1];return s.contains(o)&&r},!0)},t.prototype.add=function(e){return new t(Xs.add(this.min_,e),Xs.add(this.max_,e))},t.prototype.subtract=function(e){return new t(Xs.subtract(this.min_,e),Xs.subtract(this.max_,e))},t.prototype.expand=function(e){return new t(Xs.subtract(this.min_,e),Xs.add(this.max_,e))},t.prototype.collapse=function(e){return new t(Xs.add(this.min_,e),Xs.subtract(this.max_,e))},t.prototype.getMin=function(){return this.min_},t.prototype.getMax=function(){return this.max_},t.prototype.getValueAsPercent=function(e){return R2.apply(void 0,this.zipRangeAndNumbers_(e).map(function(r){var n=r[0],s=r[1];return n.getValueAsPercent(s)}))},t.prototype.getPercentAsValue=function(e){var r;return(r=this.class_).fromNumbers.apply(r,this.ranges_.map(function(n){return n.getPercentAsValue(e)}))},t.prototype.getRanges=function(){return this.ranges_},t.prototype.getOverlap=function(e){var r,n,s=kt(this.ranges_,e.getRanges()).map(function(o){var a=o[0],l=o[1];return a.getOverlap(l)});return new t((r=this.class_).fromNumbers.apply(r,s.map(function(o){return o.getMin()})),(n=this.class_).fromNumbers.apply(n,s.map(function(o){return o.getMax()})))},t}();var X7=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},VS=function(){function t(e,r){this.positionRange_=new ce(e.getPosition(),r.getPosition()),this.keyframeA_=e,this.keyframeB_=r,this.getValueRange_=t.createGetValueRangeFunction_(e,r)}return t.prototype.containsPosition=function(e){return this.positionRange_.contains(e)},t.prototype.getValueAtPosition=function(e){var r;return this.positionRange_.getMin()===Number.NEGATIVE_INFINITY?r=0:this.positionRange_.getMax()===Number.POSITIVE_INFINITY?r=100:r=this.positionRange_.getValueAsPercent(e),this.getValueRange_().getPercentAsValue(r)},t.createGetValueRangeFunction_=function(e,r){if(e.isDynamicValue()||r.isDynamicValue())return function(){return new qf(e.getValue(r),r.getValue(e))};var n=new qf(e.getValue(r),r.getValue(e));return function(){return n}},t.getValueFromRanges=function(e,r){return r.find(function(n){return n.containsPosition(e)}).getValueAtPosition(e)},t.fromKeyframes=function(e){var r=e.sort(function(c,h){return c.getPosition()-h.getPosition()}),n=r[0],s=new t(n.setPosition(Number.NEGATIVE_INFINITY),n),o=r.slice(1).map(function(c,h){return new t(r[h],c)}),a=r.slice(-1)[0],l=new t(a,a.setPosition(Number.POSITIVE_INFINITY));return X7([s],o,[l])},t}();var D2=function(){function t(e){this.keyframePairsByProperty_=t.pairKeyframes_(e)}return t.pairKeyframes_=function(e){var r=this.mapKeyframesByProperty_(e),n=new Pi;return r.forEach(function(s,o){n.set(o,VS.fromKeyframes(s))}),n},t.mapKeyframesByProperty_=function(e){return e.reduce(function(r,n){return r.get(n.getProperty()).push(n),r},new Pi)},t.prototype.getPropertyValueMapFromPosition=function(e){var r=new Map;return this.keyframePairsByProperty_.forEach(function(n,s){r.set(s,VS.getValueFromRanges(e,n))}),r},t.fromKeyframesConfig=function(e){return new t(I2.parseConfig(e))},t}();var zf;(function(t){t[t.PERCENT=0]="PERCENT",t[t.PIXEL=1]="PIXEL"})(zf||(zf={}));var Vg={easingFunction:function(t){return t},keyframeStyle:zf.PERCENT,styleTarget:null},jt=function(){function t(e,r){var n=r===void 0?Vg:r,s=n.easingFunction,o=s===void 0?Vg.easingFunction:s,a=n.keyframeStyle,l=a===void 0?Vg.keyframeStyle:a,c=n.styleTarget,h=c===void 0?Vg.styleTarget:c;this.animation_=D2.fromKeyframesConfig(e),this.styleTarget_=h,this.cachedGetDistanceFn_=l===zf.PERCENT?function(f,u){return o(u)}:function(f,u){return f}}return t.prototype.run=function(e,r,n){var s=this.styleTarget_===null?e:this.styleTarget_;if(!!_t(s)){var o=this.cachedGetDistanceFn_(r,n),a=this.animation_.getPropertyValueMapFromPosition(o);se.anyMutate(function(){a.forEach(function(l,c){de(s,c,l.toStyleString())})})}},t.prototype.destroy=function(){},t}();var Wf=class{constructor(){this.resolve=()=>{},this.reject=()=>{},this.complete=!1,this.promise=new Promise((e,r)=>{this.resolve=n=>(this.complete=!0,e(n)),this.reject=n=>(this.complete=!0,r(n))})}getPromise(){return this.complete?new Promise(e=>{e()}):this.promise}};var Bg=class{static inview(e,r={},n){let s=null,o=null,a=null,l=!1,c=new Wf,h=()=>({changes:s,lastChange:o,inview:a,ready:l}),f=v=>{v.length>=1&&(s=v,o=v.slice(-1)[0],a=o.isIntersecting,l=!0,c.resolve()),n&&n(e,v.slice(-1)[0],m)},u=window.location.search.split("evBypass=")[1];if(u=u&&u.split("&")[0],u==="true")return window.setTimeout(()=>{n&&n(e,{isIntersecting:!0,isVisible:!0},()=>{}),c.resolve()}),{observer:null,dispose:()=>{},state:()=>({ready:!0,inview:!0}),readyPromise:c.getPromise()};let m=()=>{d&&d.unobserve(e),d&&d.disconnect(),s=[],o=null},d=new IntersectionObserver(f,r);return d.observe(e),{observer:d,dispose:m,state:h,readyPromise:c.getPromise()}}};var Jo=class{constructor(e){this.isReadWriteOnly=!1,this.callbacks=[],this.isDisposed=!1,this.raf_=null,this.frame=null,this.lastUpdateTime=0,this.fps=0,this.currentFps=0,this.isPlaying=!1,this.isRunningRaf=!1,this.callbacks=[],this.runCondition=null,this.delta=0,this.elaspedTime=0,this.startTime=0,e?this.watch(e):this.isReadWriteOnly=!0,window.DEGU_RAF_REGISTRY&&window.DEGU_RAF_REGISTRY.register(this)}watch(e){this.callbacks.push(e)}setReadWriteMode(e){this.isReadWriteOnly=e}preRead(e){window.DEGU_RAF_REGISTRY&&window.DEGU_RAF_REGISTRY.addOneTimePreRead({callback:e,raf:this})}read(e){window.DEGU_RAF_REGISTRY&&window.DEGU_RAF_REGISTRY.addOneTimeRead({callback:e,raf:this})}write(e){window.DEGU_RAF_REGISTRY&&window.DEGU_RAF_REGISTRY.addOneTimeWrite({callback:e,raf:this})}postWrite(e){window.DEGU_RAF_REGISTRY&&window.DEGU_RAF_REGISTRY.addOneTimePostWrite({callback:e,raf:this})}unwatch(e){this.callbacks=this.callbacks.filter(r=>r===e)}runWhen(e){this.runCondition=e}runWhenElementIsInview(e,r){return this.ev&&this.ev.dispose(),this.runCondition=null,this.ev=Bg.inview(e,r||{}),this.runWhen(()=>this.ev&&this.ev.state().inview),this.ev.readyPromise}setFps(e){this.fps=e}start(e=!1){!e&&this.isPlaying||(this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.animationLoop_(),this.isPlaying=!0)}stop(){this.isPlaying=!1,window.cancelAnimationFrame(this.raf_),this.isRunningRaf=!1}dispose(){this.ev&&this.ev.dispose(),this.callbacks=[],this.isDisposed=!0,this.stop(),window.DEGU_RAF_REGISTRY&&window.DEGU_RAF_REGISTRY.unregister(this)}getDelta(e){return e?this.delta/1e3:this.delta}getElapsedTime(){return this.elaspedTime}getStartTime(){return this.startTime}getCurrentFps(){return this.currentFps}animationLoop_(){if(!this.isRunningRaf){if(this.raf_=window.requestAnimationFrame(e=>{this.frame=e,this.isRunningRaf=!1,this.animationLoop_()}),this.isRunningRaf=!0,this.lastUpdateTime){let r=Date.now()-this.lastUpdateTime;this.delta=r,this.elaspedTime+=r/1e3;let n=this.fps===0?0:1e3/this.fps;this.currentFps=1e3/r,r>n&&(this.callbacks&&this.callbacks.forEach(s=>{let o=()=>{s(this.frame,this.lastUpdateTime,r,()=>{this.stop()})};this.runCondition?this.runCondition()&&o():o()}),this.lastUpdateTime=Date.now())}this.lastUpdateTime||(this.lastUpdateTime=Date.now())}}},ll=class{constructor(){this.flushScheduled=!1,this.preReads=[],this.reads=[],this.writes=[],this.postWrites=[],this.rafs=[]}static runRafCallbacks(e){for(;e.length;){let r=e.splice(0,1)[0];!r.raf.isDisposed&&(r.raf.isPlaying||r.raf.isReadWriteOnly)&&r.callback()}}start(){this.flushScheduled||(this.flushScheduled=!0,requestAnimationFrame(()=>{this.runRaf()}))}runRaf(){window.DEGU_RAF_REGISTRY_DEBUG&&console.log("Running raf",this.reads.length,this.writes.length),ll.runRafCallbacks(this.preReads),ll.runRafCallbacks(this.reads),ll.runRafCallbacks(this.writes),ll.runRafCallbacks(this.postWrites),this.flushScheduled=!1,(this.preReads.length||this.reads.length||this.writes.length||this.postWrites.length)&&this.start()}addOneTimePreRead(e){this.preReads.push(e),this.start()}addOneTimeRead(e){this.reads.push(e),this.start()}addOneTimeWrite(e){this.writes.push(e),this.start()}addOneTimePostWrite(e){this.postWrites.push(e),this.start()}getActiveRafCount(){return this.rafs.filter(e=>e.isPlaying).length}getRafCount(){return this.rafs.length}register(e){this.rafs.push(e)}unregister(e){this.rafs=this.rafs.filter(r=>r===e)}};window&&!window.DEGU_RAF_REGISTRY&&(window.DEGU_RAF_REGISTRY=new ll);function F2(t,e){let r=Object.prototype.toString.call(t).slice(8,-1).toLowerCase();return e===r}function Gf(t){return F2(t,"null")}function Z7(t){return F2(t,"undefined")}function $f(t){return!Z7(t)}function N2(){return k2()||V2()}function k2(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)||B2()}function V2(){return/Android/i.test(navigator.userAgent)}function B2(){return navigator.userAgent.toLowerCase().indexOf("macintosh")!==-1&&Boolean(navigator.maxTouchPoints)&&navigator.maxTouchPoints>2}function U2(){return performance.timing.loadEventEnd!==0}function H2(t,e){let r=0,n=s=>{let o=window.innerWidth;(!N2()||r!==o)&&(t(s),r=o)};return window.addEventListener("resize",n,e),()=>{window.removeEventListener("resize",n)}}var on=class{constructor(){this.watcherConfigs=[]}add(e){Array.isArray(e.on)?e.on.forEach(n=>{let s=Object.assign({},e);s.on=n,this.addSingleEvent(s)}):this.addSingleEvent(e)}addSingleEvent(e){let r=n=>{e.runWhen?e.runWhen()&&e.callback(n):e.callback(n)};if(e.listener=r,e.on==="smartResize")e.remover=H2(r,e.eventOptions||{});else if(e.on==="resize"&&e.element!==window){let n=new ResizeObserver(s=>{r(s)});n.observe(e.element),e.remover=()=>{n.unobserve(e.element)}}else if(e.on==="mutation"){let n=new MutationObserver(s=>{r(s)});n.observe(e.element,e.eventOptions),e.remover=()=>{n.disconnect()}}else e.element.addEventListener(e.on,r,e.eventOptions||{}),e.remover=()=>{e.element.removeEventListener(e.on,r,e.eventOptions||{})};this.watcherConfigs.push(e)}removeById(e){this.watcherConfigs=this.watcherConfigs.filter(r=>{if(r.id&&r.id===e){let n=r.remover;return n&&n(),!1}return r})}removeAll(){this.watcherConfigs.forEach(e=>{let r=e.remover;r&&r()}),this.watcherConfigs=[]}run(e){this.watcherConfigs.filter(n=>n.id&&n.id===e).forEach(n=>{n.callback()&&n.callback()})}dispose(){this.removeAll()}};function jf(...t){}var BS=class{constructor(e={}){this.currentY=0,this.targetY=0,this.raf=new Jo,this.beforeScrollCallback=e.beforeScrollCallback||jf,this.afterScrollCallback=e.afterScrollCallback||jf,this.domWatcher=new on,this.domWatcher.add({element:document,on:"wheel",eventOptions:{passive:!1,capture:!0},callback:this.wheelHandler.bind(this)})}getScrollElement(){return document.scrollingElement||document.documentElement}wheelHandler(e){e.preventDefault(),this.raf.read(()=>{this.targetY=this.getScrollElement().scrollTop+e.deltaY,this.raf.postWrite(()=>{this.beforeScrollCallback(),this.currentY!==this.targetY&&(this.getScrollElement().scrollTop=this.targetY,this.currentY=this.targetY),this.afterScrollCallback()})})}dispose(){this.domWatcher&&this.domWatcher.dispose(),this.raf&&this.raf.dispose()}};var q2=class{constructor(){this.fix=null,this.uses=new Set}init(){if(this.fix!==null)return;!window.URLSearchParams||window.location.host=="store.google.com"||console.log("JS Scroll Render Fix initialized"),this.fix=new BS({beforeScrollCallback:()=>uo.disposeNativeSmoothScroll(),afterScrollCallback:()=>uo.setupNativeSmoothScroll()})}dispose(){this.fix.dispose(),this.fix=null,!window.URLSearchParams||window.location.host=="store.google.com"||console.log("JS Scroll Render Fix disposed")}register(e){this.uses.add(e),this.init()}unregister(e){this.uses.delete(e),this.uses.size===0&&this.dispose()}},oi=class{constructor(){window.MQN_SCROLL_RENDER_FIX=window.MQN_SCROLL_RENDER_FIX||new q2,window.MQN_SCROLL_RENDER_FIX.register(this)}dispose(){window.MQN_SCROLL_RENDER_FIX.unregister(this)}};var eX="30px",z2=-55,tX={ENTER_START:-.1},rX=[[0,`opacity: 0; transform: translateY(${eX})`],[1,"opacity: 1; transform: translateY(0)"]],US={DIRECTIVE:"mqn2-section-breaker-header",OFFSET_PERCENT:"mqn2-section-breaker-header-offset-percent"},W2=class{static get $inject(){return["$scope","$element","$compile"]}constructor(e,r){this.container_=r[0],this.tweenTarget_=mt.getClosestMqnFrame(this.container_),this.scrollEffects_=[],this.renderFix=new oi,this.init_(),e.$on("$destroy",()=>this.dispose_())}init_(){this.container_.removeAttribute(US.DIRECTIVE);let e=this.container_.getAttribute(US.OFFSET_PERCENT),r=e!==null?+e*window.innerHeight:0;this.scrollEffects_=[new bi(this.tweenTarget_,{getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_TOP,startDistance:()=>window.innerHeight*tX.ENTER_START+z2+r,endDistance:z2+r,effects:[new jt(rX,{styleTarget:this.container_})]})]}dispose_(){this.renderFix.dispose(),this.scrollEffects_.forEach(e=>e.destroy()),this.container_.setAttribute(US.DIRECTIVE,"")}},iX=()=>({restrict:"A",controller:W2}),G2=iX;var MF=re(Et()),Nt=re(Ye()),CF=re(Ci()),rE=re(ua()),PF=re(yt()),IF=re(Vn());function ea(t,e){var r=new Set;return t.forEach(function(n){e.has(n)||r.add(n)}),r}function Ug(t,e){se.mutate(function(){e.forEach(function(r){return t.classList.add(r)})})}function Yf(t,e){se.mutate(function(){e.forEach(function(r){return t.classList.remove(r)})})}var Zf={};eT(Zf,{addDelegatedListener:()=>AF,addStyles:()=>Y2,addStylesToPage:()=>TF,appendAfter:()=>bF,aspect:()=>sF,copyBase64Image:()=>cF,createElementFromString:()=>eF,deleteImage:()=>hF,disableScrolling:()=>wF,dom:()=>Xf,event:()=>J2,fetchAndMakeImage:()=>oF,flushVideos:()=>uF,forceFocus:()=>pF,forceVOFocus:()=>mF,getAllTextNodes:()=>JS,getComputedStyle:()=>$S,getElementProgressPoint:()=>fX,getElementScrolledPercent:()=>qg,getFocusableElements:()=>XS,getScrollElement:()=>EF,getScrollTop:()=>jS,getScrollTopWithoutTransforms:()=>dF,getScrollYAtPercent:()=>dh,getStyle:()=>yF,isDisplayNone:()=>ZS,isDisplayNoneWithAncestors:()=>QS,isOverlapping:()=>xF,isVisibleOnScreen:()=>KS,makeBase64ImageFromBlob:()=>lF,makeImageFromBlob:()=>aF,pauseAllVideosInElement:()=>Q2,playAllVideosInElement:()=>WS,removeAllChildren:()=>rF,removeClassByPrefix:()=>_F,removeElement:()=>tF,removeNativeLazyImage:()=>dX,resetAllVideosInElement:()=>Z2,resetForceFocus:()=>YS,runAfterNotTopOfScreen:()=>nF,runAfterWindowLoad:()=>iF,setCssVariable:()=>zg,setCssVariables:()=>j2,setFocusableElementsToTabIndex:()=>gF,testDescendant:()=>X2,testVideoIsPlaying:()=>zS,unflushVideos:()=>fF,unorphan:()=>SF,unsetFocusableElementsToTabIndex:()=>vF,whenVideosLoaded:()=>GS,whenVideosLoadedInElement:()=>K2});function oX(t){return Object.is(t,-0)?0:t}function aX(t,e,r){return Math.min(Math.max(r,t),e)}function fh(t){return aX(0,1,oX(t))}function lX(t){return fh(t)}function HS(t,e,r){let n=lX(r);return(1-n)*t+n*e}function Hg(){return Date.now()}function qS(t,e){return e-t}function $2(t,e=0,r=100){let n=Hg(),s,o,a=new Promise((c,h)=>{s=c,o=h}),l=()=>{let c=qS(n,Hg());t()?s():e&&c>e?o("Wait until timed out"):setTimeout(l,r)};return l(),a}function cl(t,e){return Object.is(t,void 0)?e:t}function qg(t,e=0,r=0,n=!1,s=0){let o=t.getBoundingClientRect(),a;s?a=s:a=window.innerHeight;let c=(a-(o.top+e))/(o.height-e+r);return n?c:fh(c)}function fX(t,e,r=0,n=0,s=0,o=!1){let a=Math.abs(t.getBoundingClientRect().top-(e.getBoundingClientRect().top+e.offsetHeight*r))-n,l=Math.abs(dh(t,n,s,0,!0)-dh(t,n,s,1,!0)),c=a/l;return o?c:fh(c)}function dh(t,e=0,r=0,n,s=!0){let o=window.innerHeight,a=s?jS(t):dF(t),l=a-o+e,c=a-o+t.offsetHeight+r;return HS(l,c,n)}function zg(t,e,r){if(!t)throw new Error("You need specificy a valid element to apply a css variable");t.style.setProperty(e,String(r))}function j2(t,e){for(let r in e)t.style.setProperty(r,String(e[r]))}function Y2(t,e){for(let r in e)r.startsWith("--")&&zg(t,r,e[r]);Object.assign(t.style,e)}function X2(t,e){let r=t.parentNode;for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function zS(t){return!t.paused&&!t.ended&&t.readyState>2}function Z2(t){Array.from(t.querySelectorAll("video")).forEach(r=>{r.currentTime=0})}function Q2(t,e=!1){Array.from(t.querySelectorAll("video")).forEach(n=>{e&&(n.currentTime=0),n.pause()})}function WS(t,e=!1){Array.from(t.querySelectorAll("video")).forEach(n=>{e&&(n.currentTime=0),zS(n)||n.play().then(()=>{}).catch()})}function K2(t,e=1e4){let r=Array.from(t.querySelectorAll("video"));return GS(r,e)}function GS(t,e=1e4){let r=[];return t.forEach(n=>{let s=new Wf;r.push(s.getPromise()),$2(()=>n.readyState===4,e,10).then(()=>{s.resolve()})}),Promise.all(r)}function J2(t,e,r){let n=new CustomEvent(e,{detail:r});t.dispatchEvent(n)}function eF(t,e=!1){if(e){let r=document.createElement("div"),n=document.createRange().createContextualFragment(t);return r.appendChild(n),r.firstElementChild}else{let r=document.createElement("div");return r.innerHTML=t.trim(),r.firstChild}}function tF(t){t.parentNode.removeChild(t)}function rF(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function iF(t){window.setTimeout(()=>{U2()?t():window.addEventListener("load",()=>{t()},{once:!0})})}function nF(t){window.scrollY!==0?t():window.addEventListener("scroll",()=>{t()},{once:!0,passive:!0})}function sF(){return window.innerWidth/window.innerHeight}function $S(t){return window.getComputedStyle(t)}function oF(t){return new Promise(e=>{fetch(t).then(r=>r.blob()).then(r=>{let n=r,s=document.createElement("img");s.decoding="async",s.onload=()=>{e(s)},s.src=URL.createObjectURL(n)})})}function aF(t){return new Promise(e=>{let r=document.createElement("img");r.decoding="async",r.onload=()=>{r.onload=null,e(r)},r.src=URL.createObjectURL(t)})}function lF(t){return new Promise(e=>{let r=new FileReader;r.readAsDataURL(t),r.addEventListener("load",()=>{let n=document.createElement("img");n.src=r.result,n.onload=()=>{n.onload=null,e(n)}},{once:!0})})}function cF(t){return new Promise(e=>{let r=document.createElement("img");r.src=t.src,r.onload=()=>{r.onload=null,e(r)}})}function hF(t){t&&(t.src&&(t.src.startsWith("blob:")||t.src.startsWith("data:"))&&(URL.revokeObjectURL(t.src),t.src=""),t=null)}function uF(t,e=""){Array.from(t.querySelectorAll("video")).forEach(n=>{Array.from(n.querySelectorAll("source")).forEach(o=>{let a=o.getAttribute(e)||o.src;o.setAttribute("data-video-src",a),o.removeAttribute("src"),o=null}),n.load()})}function fF(t,e=!1){Array.from(t.querySelectorAll("video")).forEach(n=>{Array.from(n.querySelectorAll("source")).forEach(o=>{if(!o.hasAttribute("data-video-src"))return;let a=o.getAttribute("data-video-src");o.setAttribute("src",a)}),n.load()}),e||WS(t)}function jS(t,e=!1){return t?e&&t.offsetParent?t.getBoundingClientRect().top-t.offsetParent.getBoundingClientRect().top+window.scrollY:t.getBoundingClientRect().top+window.scrollY:0}function dF(t){let e=0;do e+=t.offsetTop,t=t.offsetParent;while(t);return e}function pF(t){YS();let e=t.getAttribute("tabindex");$f(e)&&!Gf(e)?t.setAttribute("forcetabindex",e):t.setAttribute("forcetabindex","none"),t.setAttribute("tabindex","-1"),t.focus()}function YS(){Array.from(document.querySelectorAll("[forcetabindex]")).forEach(e=>{let r=e.getAttribute("forcetabindex");$f(r)&&!Gf(r)&&r!=="none"?e.setAttribute("tabindex",r):e.removeAttribute("tabindex"),e.removeAttribute("forcetabindex")})}function mF(t,e=10,r=10){let n=e,s=r;t.setAttribute("tabindex","0"),t.blur();let o=0,a=window.setInterval(()=>{t.focus(),o++,o>=s&&window.clearInterval(a)},n)}function XS(t){return Array.from(t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))}function gF(t,e){XS(t).forEach(n=>{let s=n.tabIndex;n.hasAttribute("originalTabIndex")||n.setAttribute("originalTabIndex",s+""),n.tabIndex=e})}function vF(t){Array.from(t.querySelectorAll("[originalTabIndex]")).forEach(r=>{let n=r.getAttribute("originalTabIndex")||"";r.tabIndex=+n})}function yF(t){return window.getComputedStyle(t)}function ZS(t){return window.getComputedStyle(t).display==="none"}function QS(t){return ZS(t)?!0:t.parentElement?QS(t.parentElement):!1}function KS(t){return(n=>{let s=$S(n);return!(s.opacity!=="1"||s.visibility==="hidden"||s.display==="none")})(t)?t.parentElement?KS(t.parentElement):!0:!1}function _F(t,e){let r=new RegExp("\\b"+e+".*?\\b","g");return t.className=t.className.replace(r,""),t}function JS(t){let e,r=[],n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);for(;e=n.nextNode();)r.push(e);return r}function bF(t,e){e.parentNode.insertBefore(t,e.nextSibling)}function wF(){let t=r=>{r.preventDefault()},e=new on;return e.add({element:window,on:"wheel",callback:t,eventOptions:{passive:!1}}),e.add({element:window,on:"touchmove",callback:t,eventOptions:{passive:!1}}),()=>{e.dispose()}}function SF(t,e=!1){let r=JS(t);e&&(r=[r[r.length-1]]);let n="\xA0";r.forEach(s=>{s.nodeValue=s.nodeValue.replace(/\s+([^\s]*)\s*$/,n+"$1")})}function EF(){return document.scrollingElement||document.documentElement}function xF(t,e){if(t===e)return!1;let r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return!(r.right<n.left||r.left>n.right||r.bottom<n.top||r.top>n.bottom)}function TF(t){document.head.insertAdjacentHTML("beforeend",`<style>${t}</style>`)}function dX(t){Array.from(t.querySelectorAll("[loading=lazy]")).forEach(r=>{r.removeAttribute("loading")})}function AF(t,e,r){let n=s=>{s=s||window.event;let o=s.target||s.srcElement;o=o.nodeType===3?o.parentNode:o;do r(o,s),o.parentNode&&(o=o.parentNode);while(o.parentNode)};return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}var Xf={addDelegatedListener:AF,addStyles:Y2,addStylesToPage:TF,appendAfter:bF,aspect:sF,copyBase64Image:cF,createElementFromString:eF,deleteImage:hF,disableScrolling:wF,event:J2,fetchAndMakeImage:oF,flushVideos:uF,forceFocus:pF,forceVOFocus:mF,getAllTextNodes:JS,getComputedStyle:$S,getElementScrolledPercent:qg,getFocusableElements:XS,getScrollElement:EF,getScrollTop:jS,getScrollYAtPercent:dh,getStyle:yF,isDisplayNone:ZS,isDisplayNoneWithAncestors:QS,isOverlapping:xF,isVisibleOnScreen:KS,makeBase64ImageFromBlob:lF,makeImageFromBlob:aF,pauseAllVideosInElement:Q2,playAllVideosInElement:WS,removeClassByPrefix:_F,removeElement:tF,removeAllChildren:rF,resetAllVideosInElement:Z2,resetForceFocus:YS,runAfterNotTopOfScreen:nF,runAfterWindowLoad:iF,setCssVariable:zg,setCssVariables:j2,setFocusableElementsToTabIndex:gF,testDescendant:X2,testVideoIsPlaying:zS,unflushVideos:fF,unorphan:SF,unsetFocusableElementsToTabIndex:vF,whenVideosLoaded:GS,whenVideosLoadedInElement:K2};var eE=class extends Map{constructor(e=[],r=jf){super(e);this.defaultFunction=r}static usingFunction(e){return new this([],e)}get(e){if(this.has(e))return super.get(e);{let r=this.defaultFunction(e);return this.set(e,r),r}}};var tE=class{constructor(){this.callbacks=eE.usingFunction(()=>new Set)}on(e,r){this.callbacks.get(e).add(r)}dispatch(e,...r){this.callbacks.get(e).forEach(n=>n(...r))}off(e,r){let n=this.callbacks.get(e);n.delete(r),n.size===0&&this.callbacks.delete(e)}dispose(){let e=this.callbacks.values(),r=e.next();for(;!r.done;)r.value.clear(),r=e.next();this.callbacks.clear()}};var ai;(function(t){t.ANY_CHANGE="any",t.MOUSE="mouse",t.KEYBOARD="keyboard"})(ai||(ai={}));var Qf=class{constructor(){this.state=null,this.eventManager=new tE,this.listenerDisposers=[],this.addEvents("mousemove",this.setMouse.bind(this)),this.addEvents("mousedown",this.setMouse.bind(this)),this.addEvents("mouseup",this.setMouse.bind(this)),this.addEvents("touchmove",this.setMouse.bind(this)),this.addEvents("touchstart",this.setMouse.bind(this)),this.addEvents("touchend",this.setMouse.bind(this)),this.addEvents("keyup",this.setKeyboard.bind(this)),this.addEvents("keydown",this.setKeyboard.bind(this))}on(e,r){this.eventManager.on(e,r)}off(e,r){this.eventManager.on(e,r)}setKeyboard(){this.state!==ai.KEYBOARD&&(this.state=ai.KEYBOARD,this.eventManager.dispatch(ai.KEYBOARD),this.eventManager.dispatch(ai.ANY_CHANGE))}setMouse(){this.state!==ai.MOUSE&&(this.state=ai.MOUSE,this.eventManager.dispatch(ai.MOUSE),this.eventManager.dispatch(ai.ANY_CHANGE))}addEvents(e,r){document.addEventListener(e,r),this.listenerDisposers.push(()=>{document.removeEventListener(e,r)})}dispose(){this.eventManager.dispose(),this.listenerDisposers.forEach(e=>{e()})}};var Pn=class{constructor(e){this.debug=!1,this.keyboardModeOnly=!1,this.isUsingKeyboard=!1,this.element=e.element,this.watcher=new on,this.selector="data-scroll-to-on-focus",this.topProgressOffset=cl(e.topProgressOffset,0),this.bottomProgressOffset=cl(e.bottomProgressOffset,0),this.keyboardModeOnly=cl(e.keyboardModeOnly,!1),this.debug=cl(e.debug,!1),this.config=e,this.keyboardWatcher=new Qf,this.watchKeyboardEvents(),Array.from(this.element.querySelectorAll(`[${this.selector}]`)).forEach(n=>{this.watchElement(n)})}watchKeyboardEvents(){this.keyboardWatcher.on(ai.MOUSE,()=>{this.isUsingKeyboard=!1}),this.keyboardWatcher.on(ai.KEYBOARD,()=>{this.isUsingKeyboard=!0})}watchElement(e,r){$f(r)&&e.setAttribute(this.selector,r+""),this.config.setTabIndex&&(e.tabIndex=0),this.config.setAriaRole&&e.setAttribute("role",this.config.setAriaRole),this.watcher.add({element:e,on:"focus",callback:()=>{this.handleFocus(e)},eventOptions:{capture:!0}}),(this.config.mouseDown||this.debug)&&this.watcher.add({element:e,on:"mousedown",callback:()=>{this.handleFocus(e)}}),this.debug&&this.watcher.add({element:window,on:"scroll",callback:()=>{console.log("progress",qg(this.element,this.topProgressOffset,this.bottomProgressOffset))}})}updateOffset(e,r){this.topProgressOffset=e,this.bottomProgressOffset=r}handleFocus(e){if(this.keyboardModeOnly&&!this.isUsingKeyboard)return;let r=e.getAttribute(this.selector);this.debug&&(console.log("el"+e),console.log("targetPercent"+r)),r&&this.scrollTo(+r)}scrollTo(e){let r=dh(this.element,this.topProgressOffset,this.bottomProgressOffset,e);window.scrollTo(0,r)}dispose(){this.watcher&&this.watcher.dispose(),this.keyboardWatcher&&this.keyboardWatcher.dispose()}};var Zs=class{constructor(e){this.config=e,this.debug=!1,this.element=e.element,this.watcher=new on,this.selector="data-scroll-to-center-of-screen-on-focus",this.debug=cl(e.debug,!1),Array.from(this.element.querySelectorAll(`[${this.selector}]`)).forEach(n=>{e.setTabIndex&&(n.tabIndex=0),e.setAriaRole&&n.setAttribute("role",e.setAriaRole),this.watcher.add({element:n,on:"focus",callback:()=>{this.handleFocus(n)},eventOptions:{capture:!0}}),(e.mouseDown||this.debug)&&this.watcher.add({element:n,on:"mousedown",callback:()=>{this.handleFocus(n)}})})}handleFocus(e){let r=+e.getAttribute(this.selector),n=Gf(e.getAttribute("data-base-line"))?.5:+e.getAttribute("data-base-line");this.debug&&(console.log("el"+e),console.log("targetPercent"+r),console.log("targetBaseline"+n));let s=e.getBoundingClientRect(),o=s.top+n*s.height;o=window.scrollY+o;let a=o-r*window.innerHeight;window.scrollTo(0,a)}dispose(){this.watcher&&this.watcher.dispose()}};var RF=class{constructor(e){this.range_=new ce(+e.from,+e.to),this.class_=e.class,this.persistent_=!!e.persist}getCssClass(){return this.class_}contains(e){return this.range_.contains(e)}isPersistent(){return this.persistent_}},LF=class{constructor(e){this.rl_=se.getDestroyableInstance(),this.config=e,this.settings=Nt.func.setDefault(e.settings,{}),this.progressEase=Nt.func.setDefault(this.settings.progress_ease,.08),this.precision=Nt.func.setDefault(this.settings.precision,5),this.debug=Nt.func.setDefault(this.settings.debug,!1),this.addLerpDelta=Nt.func.setDefault(this.settings.addLerpDelta,!1),this.addLerpDeltaAbs=Nt.func.setDefault(this.settings.addLerpDeltaAbs,!1),this.allowOutOfRange=Nt.func.setDefault(this.settings.allowOutOfRange,!1),this.renderOutview=Nt.func.setDefault(this.settings.renderOutview,!1),this.element=e.element,this.direction=0,this.scrollToOnFocus=new Pn({element:this.element,debug:!1,setTabIndex:!0,setAriaRole:"region"}),this.scrollToCenterOfScreenOnFocus=new Zs({element:this.element,debug:!1,setTabIndex:!0,setAriaRole:"region"}),this.config.interpolations||(this.config.interpolations=[]);let r=this.config.class_triggers;this.cssClassTriggers=r?r.map(n=>new RF(n)):[],this.lastCssClassProgress=null,this.progress=0,this.easedProgress=0,this.rafProgress=new Nt.RafProgress,this.rafProgress.setPrecision(this.precision),this.rafProgress.watch(Nt.func.runOnceOnChange(this.progressLoop.bind(this))),this.config.interpolations=this.config.interpolations.map(n=>(n.progress=n.progress.map(s=>{if(s.ease)if(Nt.is.array(s.ease))s.easingFunction=IF.CubicBezier.makeEasingFunction(s.ease[0],s.ease[1],s.ease[2],s.ease[3]);else{let o=Nt.EASE[s.ease];o&&(s.easingFunction=o)}return s}),n)),this.interpolater=new CF.CssVarInterpolate(this.element,{interpolations:this.config.interpolations}),this.renderOutview&&(this.interpolater.renderOnlyWhenInview=!1)}setImmediateProgress(){this.interpolater.flush(),this.progress=this.getProgress(),this.rafProgress.easeTo(this.progress,1,Nt.EASE.linear)}getProgress(){let e=0,r=0,n=a=>{let l=1;return a.unit==="%"&&(l=this.element.offsetHeight),a.unit==="vh"?(l=window.innerHeight,l*(a.value/100)):l*a.value};Nt.is.string(this.settings.top)&&(e=n(rE.cssUnit.parse(this.settings.top)));let s=this.settings.top_relative_to||"";if(s==="bottom")e+=this.element.offsetHeight;else if(s.startsWith("[")&&s.endsWith("]")){let a=this.element.querySelector(s);a&&(e+=a.offsetTop)}Nt.is.string(this.settings.bottom)&&(r=n(rE.cssUnit.parse(this.settings.bottom)));let o=this.settings.bottom_relative_to||"";if(o==="top")r-=this.element.offsetHeight;else if(o==="top-position")r+=e-this.element.offsetHeight;else if(o.startsWith("[")&&o.endsWith("]")){let a=this.element.querySelector(o);if(a){let l=_i(a,this.element);r-=this.element.offsetHeight,r+=l+a.offsetHeight}}return this.scrollToOnFocus.updateOffset(e,r),Nt.dom.getElementScrolledPercent(this.element,e,r,this.allowOutOfRange)}onScroll(){this.rl_.measure(()=>{this.progress=this.getProgress(),this.rafProgress.easeTo(this.progress,this.progressEase,Nt.EASE.linear,this.allowOutOfRange)})}progressLoop(e,r){this.easedProgress=e,this.rl_.mutate(()=>this.interpolater.update(e)),this.direction=r;let n=null;(this.addLerpDelta||this.addLerpDeltaAbs)&&(n=this.rafProgress.getLerpDelta()),this.updateCssClassTriggers(),this.debug&&!St.isProd()&&(console.log("-----------------------"),console.log("css-parallax scroll progress",e,window.scrollY),this.addLerpDelta&&console.log("css-parallax scroll delta",n),this.addLerpDeltaAbs&&console.log("css-parallax scroll delta",Math.abs(n))),this.rl_.mutate(()=>{this.addLerpDelta&&Nt.dom.setCssVariable(this.element,"--lerp-delta",n),this.addLerpDeltaAbs&&Nt.dom.setCssVariable(this.element,"--lerp-delta-abs",`${Math.abs(n)}`)})}updateCssClassTriggers(){if(!this.cssClassTriggers)return;let e=Nt.mathf.roundToPrecision(this.easedProgress,3);e<=.01&&(e=0),e>=.99&&(e=1);let r=this.config.elementVisibility.state().ready&&!this.config.elementVisibility.state().inview;if(e===this.lastCssClassProgress)return;this.lastCssClassProgress=e;let n=new Set(this.getAllCssTriggerClasses_()),s=new Set(this.cssClassTriggers.filter(a=>!r||a.isPersistent()).filter(a=>a.contains(e)).map(a=>a.getCssClass())),o=ea(n,s);this.rl_.mutate(()=>{Ug(this.element,Array.from(s)),Yf(this.element,Array.from(o))})}removeAllActiveCssTriggers(){this.rl_.mutate(()=>{Yf(this.element,this.getAllCssTriggerClasses_())})}getAllCssTriggerClasses_(){return this.cssClassTriggers.map(e=>e.getCssClass())}dispose(){this.scrollToOnFocus&&this.scrollToOnFocus.dispose(),this.scrollToCenterOfScreenOnFocus&&this.scrollToCenterOfScreenOnFocus.dispose(),this.rl_.destroy(),this.rafProgress.dispose()}},OF=class{static get $inject(){return["$rootScope","$attrs","$element","$scope","$window"]}constructor(e,r,n,s){this.element=n[0],this.configurations=JSON.parse(r.mqnCssParallax),this.throttle=+r.mqnCssParallaxThrottle||0,this.parallaxers=[],this.elementVisibility=MF.elementVisibility.inview(this.element,{rootMargin:"1000px 500px 1000px 500px"}),this.configurations.forEach(o=>{o.element=this.element,o.elementVisibility=this.elementVisibility,this.parallaxers.push(new LF(o))}),this.domWatcher=new PF.DomWatcher,this.domWatcher.add({element:window,on:"scroll",callback:Nt.func.debounce(()=>{this.scrollAndInviewHandler()},this.throttle),runWhen:()=>this.elementVisibility.state().inview,eventOptions:{passive:!0}}),window.setTimeout(()=>{this.parallaxers.forEach(o=>o.setImmediateProgress())}),s.$on("$destroy",this.dispose.bind(this))}scrollAndInviewHandler(){this.parallaxers.forEach(e=>e.onScroll())}dispose(){this.parallaxers.forEach(e=>e.dispose()),this.domWatcher.dispose(),this.elementVisibility.dispose()}},pX=()=>({restrict:"A",controller:OF}),DF=pX;var FF=re(Et()),ph=re(Ye());var mX=function(){return{restrict:"A",link:function(t,e,r){if(ph.is.ios())return;let n=e[0],s=FF.elementVisibility.inview(n,{rootMargin:"250px"},()=>{s.state().ready&&(s.state().inview?Array.from(n.querySelectorAll("video source[data-video-src]")).map(c=>c.parentElement).filter(c=>_t(c,!0)).forEach(c=>ph.dom.unflushVideos(c.parentElement)):ph.dom.flushVideos(n,"mqn-lazyimage-src"))});t.$on("$destroy",()=>{s.dispose(),ph.dom.flushVideos(n,"mqn-lazyimage-src")})}}},NF=mX;var gX=function(){return{restrict:"A",link:function(t,e,r){this.el=e[0],this.if=r.mqn2WombatDataAttrsIf,this.ifExp=r.mqn2WombatDataAttrsIfExp,this.value=r.mqn2WombatDataAttrsValue,this.data=r.mqn2WombatDataAttrsData,this.if?this.el.setAttribute(this.data,this.value):this.ifExp&&t.$eval(this.ifExp)&&this.el.setAttribute(this.data,this.value)}}},kF=gX;function VF(){return{restrict:"A",scope:{mqnElementDimensions:"="},link:function(t,e,r){let n=t.mqnElementDimensions||{},s=e[0],o=se.getDestroyableInstance(),a=mt.getClosestMqnFrame(s),l=n.width,c=n.height,h=n["width-no-unit"],f=n["height-no-unit"],u=null,m=null,d=()=>{o.measure(()=>{o.cleanup(()=>d());let v=s.offsetWidth,p=s.offsetHeight;v!==u&&(u=v,l&&o.mutate(()=>de(a,l,`${v}px`)),h&&o.mutate(()=>de(a,h,`${v}`))),p!==m&&(m=p,c&&o.mutate(()=>de(a,c,`${p}px`)),f&&o.mutate(()=>de(a,f,`${p}`)))})};d(),t.$on("$destroy",()=>o.destroy())}}}function BF(){return{restrict:"A",scope:{mqnWindowAspectRatio:"=",mqnWindowAspectRatioAdjustedForGdnHeader:"="},link:function(t,e,r){let n=t.mqnWindowAspectRatio||{},s=t.mqnWindowAspectRatioAdjustedForGdnHeader||{},o=e[0],a=se.getDestroyableInstance(),l,c=()=>{a.measure(()=>{let f=window.innerWidth,u=window.innerHeight,m=f/u,d=document.body.offsetWidth;a.mutate(()=>{de(o,"--window-width",`${f}`),de(o,"--window-height",`${u}`),de(o,"--window-ratio",`${m}`),de(o,"--body-width",`${d}`)}),Object.keys(n).forEach(p=>{let g=n[p],y=1*(m>g);a.mutate(()=>de(o,`--${p}`,`${y}`))});let v=F1();Object.keys(s).forEach(p=>{let g=s[p],y=1*(v>g);a.mutate(()=>de(o,`--${p}`,`${y}`))})})},h=()=>{clearTimeout(l),l=setTimeout(c,100)};window.addEventListener("resize",h),c(),t.$on("$destroy",()=>{window.removeEventListener("resize",h),a.destroy()})}}}var vX=new Set([Vd,kn]),UF=function(){function t(e,r,n){var s=this;this.element_=e,this.inputHandler_=function(){return s.updateSliderStyle_()},this.backgroundColor_=t.processColorParams_(r),this.fillColor_=t.processColorParams_(n),this.lastValue_=null,this.destroyed_=!1}return t.processColorParams_=function(e){return e instanceof Ys?e.toStyleString():e},t.prototype.init=function(){!vX.has(Sr.getBrowser())||(this.element_.addEventListener("input",this.inputHandler_),this.renderLoop_())},t.prototype.renderLoop_=function(){var e=this;this.destroyed_||se.measure(function(){se.cleanup(function(){return e.renderLoop_()}),e.updateSliderStyle_()})},t.prototype.updateSliderStyle_=function(){var e=this,r=parseFloat(this.element_.value),n=parseFloat(this.element_.min)||0,s=parseFloat(this.element_.max)||100;if(!(this.lastValue_===r&&this.lastMin_===n&&this.lastMax_===s)){this.lastValue_=r,this.lastMin_=n,this.lastMax_=s;var o=new ce(n,s).getValueAsPercent(r)*100;se.anyMutate(function(){e.element_.style.background="linear-gradient("+("to right, "+e.fillColor_+" 0%,")+(e.fillColor_+" "+o+"%, ")+(e.backgroundColor_+" "+o+"%, ")+(e.backgroundColor_+" 100%)")})}},t.prototype.destroy=function(){this.element_.removeEventListener("input",this.inputHandler_),this.destroyed_=!0},t}();var HF=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.chromeRangeInputLowerFill_=new UF(e[0],"var(--range-input-background)","var(--range-input-fill)"),this.chromeRangeInputLowerFill_.init(),r.$on("$destroy",()=>this.dispose())}dispose(){this.chromeRangeInputLowerFill_.destroy()}},yX=function(){return{restrict:"A",controller:HF}},qF=yX;function zF(){return{restrict:"A",scope:{},link:function(t,e,r){let n=new oi;t.$on("$destroy",()=>n.dispose())}}}function Qs(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=void 0,s=Number.POSITIVE_INFINITY,o=e[0];return t.forEach(function(a){var l=o(a);if(s>l)n=a,s=l;else if(s===l&&e.length>1){for(var c=1,h=e[c];c<e.length&&h(n)===h(a);)h=e[c++];h(n)>h(a)&&(n=a)}}),n}function an(t,e){return e===void 0&&(e=null),!t||t===e?0:t.offsetTop+an(t.offsetParent,e)}var Wg=function(){function t(){this.counter_=0}return t.prototype.next=function(e){return this.counter_++,{value:this.counter_,done:this.counter_>=Number.POSITIVE_INFINITY}},t.prototype[Symbol.iterator]=function(){return this},t}();var _X=new Wg,bX=["a","input","select","textarea","button","object","[tabindex]","[mqn-tabindex]"],WF=bX.join(", ");function wX(t){let e=t?`${WF}, ${t}`:WF;return Array.from(document.querySelectorAll(e)).filter(n=>!n.hasAttribute("disabled")).filter(n=>!n.hasAttribute("tabindex")||+n.getAttribute("tabindex")!=-1).filter(n=>n.offsetWidth>0).filter(n=>n.offsetHeight>0).filter(n=>_t(n,!0))}var GF=class{constructor(){this.rl_=se.getDestroyableInstance(),this.focusedElement_=null,this.focusInHandler_=()=>this.update_(),document.addEventListener("focusin",this.focusInHandler_)}getLastFocusedElement(){return this.focusedElement_}update_(){this.rl_.measure(()=>{this.focusedElement_=document.activeElement})}dispose(){this.rl_.destroy(),document.removeEventListener("focusin",this.focusInHandler_)}},$F=class{constructor(e,r){this.group_=r,this.element_=e,this.uid_=_X.next().value,this.order_=+e.getAttribute("mqn-tabindex"),this.keyDownHandler_=n=>this.handleKeydown_(n),this.element_.setAttribute("mqn-tabindex-uid",this.uid_),document.addEventListener("keydown",this.keyDownHandler_)}handleKeydown_(e){if(this.group_.getFocusService().getLastFocusedElement()===this.element_&&e.keyCode===9){let n=e.shiftKey?this.group_.getPrevious(this):this.group_.getNext(this);e.preventDefault(),n?n.focus():this.focusNonGroupItem_(e)}}focusNonGroupItem_(e){se.measure(()=>{let r=wX(`[mqn-tabindex-uid="${this.uid_}"`),n=new Set(this.group_.getDisplayedItems().filter(c=>c!==this).map(c=>c.getElement())),s=r.filter(c=>!n.has(c)),o=e.shiftKey?-1:1,a=s.indexOf(this.element_),l=s[a+o];l&&l.focus()})}focus(){this.element_.focus()}getElement(){return this.element_}getOrder(){return this.order_}dispose(){document.removeEventListener("keydown",this.keyDownHandler_)}},jF=class{constructor(e){this.element_=e,this.items_=new Set,this.rl_=se.getDestroyableInstance(),this.focusService_=new GF,this.itemElements_=new Set(Array.from(e.querySelectorAll("[mqn-tabindex]"))),this.items_=Array.from(this.itemElements_).map(r=>new $F(r,this)),this.focusInHandler_=r=>this.handleFocusIn_(r),this.init_()}init_(){this.element_.addEventListener("focusin",this.focusInHandler_)}getFocusService(){return this.focusService_}handleFocusIn_(e){let r=this.focusService_.getLastFocusedElement(),n=e.target;this.itemElements_.has(r)||!this.itemElements_.has(n)||this.rl_.measure(()=>{let s=an(r),o=an(n);s<o?this.focusFirst():this.focusLast()})}getDisplayedItems(){return Array.from(this.items_.values()).filter(e=>_t(e.getElement(),!0)).filter(e=>window.getComputedStyle(e.getElement()).opacity!=="0")}register(e){this.items_.add(e)}getLastItem(){return Vf(this.getDisplayedItems(),e=>e.getOrder())}isLast(e){return e===this.getLastItem()}focusFirst(){Qs(this.getDisplayedItems(),e=>e.getOrder()).focus()}focusLast(){this.getLastItem().focus()}getNextItems_(e){return this.getDisplayedItems().filter(r=>r.getOrder()>e.getOrder())}getNext(e){return Qs(this.getNextItems_(e),r=>r.getOrder())}getPreviousItems_(e){return this.getDisplayedItems().filter(r=>r.getOrder()<e.getOrder())}getPrevious(e){return Vf(this.getPreviousItems_(e),r=>r.getOrder())}dispose(){this.rl_.destroy(),this.items_.forEach(e=>e.dispose()),this.focusService_.dispose()}};function iE(){return{restrict:"A",scope:{},link:(t,e,r)=>{let n=e[0],s=new jF(n);t.$on("$destroy",()=>s.dispose())}}}var YF=re(Ye()),SX=new Map([["portrait",Te.isPortrait],["landscape",Te.isLandscape],["desktop",Te.isDesktop],["desktop-tablet",Te.isDesktopOrTablet],["tablet-mobile",Te.isTabletOrMobile],["mobile",Te.isMobile]]),EX=()=>!0,XF=class{constructor(e){this.breakpointCheckFn_=SX.get(e.breakpoint)||EX,this.frame_=e.frame}getFrame(){return this.frame_}matchesBreakpoint(){return this.breakpointCheckFn_()}},ZF=class{static get $inject(){return["$element","$scope","mqnTemplateLottieElevatorService"]}constructor(e,r,n){this.element_=e[0],this.mqnTemplateLottieElevatorService_=n,this.rl_=se.getDestroyableInstance(),this.lastNode_=null,this.mouseDown_=!1,this.domWatcher_=new YF.DomWatcher;let s=JSON.parse(this.element_.getAttribute("mqn-scroll-lottie-elevator-on-focus"));this.selector_=s.selector,this.frames_=s.targetFrames.map(o=>new XF(o)),this.allFocusableElements_=new Set(Array.from(this.element_.querySelectorAll("*"))),r.$on("$destroy",()=>this.dispose()),this.init_()}init_(){this.domWatcher_.add({element:this.element_,on:"mousedown",callback:()=>this.mouseDown_=!0}),this.domWatcher_.add({element:window,on:"mouseup",callback:()=>this.mouseDown_=!1}),this.loop_()}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_());let e=window.getSelection();if(this.lastNode_!==e.focusNode&&(this.lastNode_=e.focusNode,!this.mouseDown_&&e.focusNode&&this.allFocusableElements_.has(e.focusNode.parentElement))){let r=this.frames_.find(n=>n.matchesBreakpoint());this.getLottieController_().scrollToFrame(r.getFrame())}})}getLottieController_(){let e=mt.getClosestMqnFrame(this.element_),n=Array.from(e.querySelectorAll(this.selector_)).find(s=>_t(s,!0));return this.mqnTemplateLottieElevatorService_.get(n)}dispose(){this.rl_.destroy(),this.domWatcher_.dispose()}};function nE(){return{restrict:"A",scope:{},controller:ZF}}function sE(t){let e=mt.getClosestMqnFrame(t);return e&&(e.getAttribute("mqn-tracking-id")||e.id)||""}function QF(){return{restrict:"A",scope:{},link:function(t,e,r){let n=e[0],s=sE(n),o=n.getAttribute("mqn-autotrack-gdn-links-selector")||"a",a=n.getAttribute("mqn-autotrack-gdn-links-event")||"module interaction",l=n.getAttribute("mqn-autotrack-gdn-links-category")||"module click",c=n.getAttribute("mqn-autotrack-gdn-links-action")||s,h=n.getAttribute("mqn-autotrack-gdn-links-label")||!1;Array.from(n.querySelectorAll(o)).forEach(u=>{let m=h||u.href||u.getAttribute("aria-label")||u.textContent;u.setAttribute("mqn-autotrack-event",a),u.setAttribute("mqn-autotrack-category",l),u.setAttribute("mqn-autotrack-action",c),u.setAttribute("mqn-autotrack-label",m)})}}}var KF=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.$element=e,this.element=e[0],this.scrollToCenterOfScreenOnFocus=new Zs({element:this.element,debug:!1,setTabIndex:!0,setAriaRole:"region"}),r.$on("$destroy",()=>{this.dispose_()})}dispose_(){this.scrollToCenterOfScreenOnFocus&&this.scrollToCenterOfScreenOnFocus.dispose()}},xX=function(){return{restrict:"A",controller:KF}},JF=xX;var Yt=re(Ye()),eN=re(yt()),oE=re(Ci()),aE=re(Vn()),tN=re(Bl());var rN=re(fa());var TX="https://storage.googleapis.com/mannequin/2018/exports/2019-08-21/at-move/data.json",AX=Yt.is.ipad()?1:.08,Gg=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.$window=s,this.$scope=n,this.$rootScope=e,this.$element=r,this.el=r[0],this.stickyParentElement=this.el.querySelector("[mqn-container]"),this.stickyChildElement=this.el.querySelector("[mqn-container-child]"),this.canvasContainerElement=this.el.querySelector("[canvas-container]"),this.loadingElement=this.el.querySelector("[loading]"),this.chapterContainerElement=this.el.querySelector("[chapters-container]"),this.groundElement=this.el.querySelector("[ground]"),this.chapterElements=Array.from(this.el.querySelectorAll("[chapter]")),this.subProgressCssInterpolater=new oE.CssVarInterpolate(this.stickyParentElement),this.mainProgressCssInterpolater=new oE.CssVarInterpolate(this.stickyParentElement),this.wombatImage=new mi(1),this.webpSupported=Yt.is.supportingWebp(),this.deviceSrcs=[],this.lottie=null,this.lottieFileLoaded=!1,this.domWatcher=new eN.DomWatcher,this.scrollToOnFocus=new Pn({element:this.stickyParentElement,mouseDown:!1,setTabIndex:!0}),n.$on("$destroy",()=>this.dispose_())}isJpgFallbackVersion(){return Yt.is.mobile()||Yt.is.safari()||this.isMobileViewport()}init(){this.deviceSrcs=JSON.parse(this.el.getAttribute("data-png-device")),this.deviceSrcs=this.deviceSrcs.map(s=>(s=this.wombatImage.appendFifeParams(s,this.webpSupported),s)),this.deviceMobileSrcs=JSON.parse(this.el.getAttribute("data-jpg-device-mobile")),this.deviceSrcs=Zt.addFifeUrlParamsToUrls(this.deviceSrcs),this.isJpgFallbackVersion()&&(this.deviceSrcs=JSON.parse(this.el.getAttribute("data-jpg-device")));let e=Yt.is.ipad()||St.reduceSequenceCount()?4:2,r=this.deviceSrcs[this.deviceSrcs.length-1];this.deviceSrcs=this.deviceSrcs.filter((s,o)=>o%e==0),this.deviceSrcs[this.deviceSrcs.length-1]=r;let n=this.deviceMobileSrcs[this.deviceMobileSrcs.length-1];this.deviceMobileSrcs=this.deviceMobileSrcs.filter((s,o)=>o%e==0),this.deviceMobileSrcs[this.deviceMobileSrcs.length-1]=n,this.setupLottie(),this.sequenceCanvas=new tN.WebGlImageSequence(this.canvasContainerElement,[{images:this.deviceSrcs,when:()=>!this.isMobileViewport()},{images:this.deviceMobileSrcs,when:()=>this.isMobileViewport()}],null,Yt.is.ipad()?1:void 0),St.evBypassEnabled()||St.turnOffLazyImage()?this.startLoading():Yt.dom.runAfterWindowLoad(()=>{Yt.dom.runAfterNotTopOfScreen(()=>{this.startLoading()})})}setupLottie(){Yt.is.mobile()||Yt.is.safari()||fetch(TX).then(e=>e.json()).then(e=>{this.lottieFileLoaded=!0,this.lottie=rN.default.loadAnimation({container:this.el.querySelector("[lottie-container]"),renderer:"canvas",loop:!0,autoplay:!1,animationData:e,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}})}).catch(e=>{console.error("Failed fetching lottie file",e),this.lottieFileLoaded=!1})}startLoading(){this.sequenceCanvas.load().then(()=>{this.loadingElement.classList.add("loaded"),this.el.classList.add("loaded"),this.canvasContainerElement.classList.add("loaded"),this.onAssetLoaded_()})}onAssetLoaded_(){this.rafProgress=new Yt.RafProgress(e=>{this.onEasedScroll(e)}),this.domWatcher.add({element:window,on:"smartResize",eventOptions:{passive:!0},callback:this.onResize.bind(this),id:"resize"}),this.domWatcher.add({element:window,on:"scroll",callback:this.onScroll.bind(this),eventOptions:{passive:!0},id:"scroll"}),this.domWatcher.run("resize"),this.domWatcher.run("scroll")}onScroll(){let e=Yt.dom.getElementScrolledPercent(this.stickyParentElement),r=this.stickyParentElement.offsetHeight,n=window.innerHeight/r,s=.9;this.progress=Yt.mathf.childProgress(e,n,s),this.rafProgress.easeTo(this.progress,AX,Yt.EASE.linear)}onEasedScroll(e){this.mainProgress=e;let r=Yt.mathf.childProgress(e,.1,1);if(this.isMobileViewport()){let n=Yt.mathf.lerp(.5,.8,r);this.sequenceCanvas.setSizingOptions({bottom:n,bottomNoClip:!0})}else{let n=Yt.mathf.lerp(0,.1,r);this.sequenceCanvas.setSizingOptions({bottom:n,bottomNoClip:!1})}if(this.sequenceCanvas.renderByProgress(r),!this.isJpgFallbackVersion()&&this.lottie&&this.lottie.totalFrames){let n=Yt.mathf.lerp(0,this.lottie.totalFrames,r)>>0;this.lottie.goToAndStop(n,!0)}this.subProgressCssInterpolater.update(r),this.mainProgressCssInterpolater.update(this.mainProgress)}onResize(){this.subProgressCssInterpolater.flush(),this.mainProgressCssInterpolater.flush(),this.calculateCssInterpolation(),this.domWatcher.run("scroll")}calculateCssInterpolation(){this.chapterContainerElement.style.top="";let e=window.innerHeight/2;this.groundElement.style.top=e+"px";let r=0,n=this.canvasContainerElement.offsetHeight*.4,s=0,o=this.canvasContainerElement.offsetHeight*.3,a=0;if(!this.isMobileViewport()){let l=this.sequenceCanvas.getImageSize(),c=Yt.mathf.calculateBackgroundContain({width:window.innerWidth,height:window.innerHeight},l),h={width:l.width*c,height:l.height*c};a=h.height-window.innerHeight/2-h.height/2}this.mainProgressCssInterpolater.setInterpolations({interpolations:[{id:"--chapter-1-opacity",progress:[{from:0,to:.1,start:1,end:0}]}]}),this.subProgressCssInterpolater.setInterpolations({interpolations:[{id:"--canvas-y",progress:[{from:0,to:.3,start:a+"px",end:a+"px"}]},{id:"--ground-y",progress:[{from:0,to:.3,start:r+"px",end:n+"px",easingFunction:aE.CubicBezier.makeEasingFunction(.2,.17,.83,.67)}]},{id:"--ground-y-mobile",progress:[{from:0,to:.3,start:s+"px",end:o+"px",easingFunction:aE.CubicBezier.makeEasingFunction(.2,.17,.83,.67)}]},{id:"--ground-opacity",progress:[{from:.2,to:.3,start:1,end:0}]},{id:"--chapter-2-opacity",progress:[{from:.25,to:.3,start:0,end:1},{from:.5,to:.55,start:1,end:0}]},{id:"--chapter-3-opacity",progress:[{from:.55,to:.6,start:0,end:1},{from:.9,to:.95,start:1,end:0}]},{id:"--chapter-4-opacity",progress:[{from:.95,to:1,start:0,end:1}]}]})}isMobileViewport(){return window.innerWidth<768}dispose_(){this.elementVisibility&&this.elementVisibility.dispose(),this.sequenceCanvas&&this.sequenceCanvas.dispose(),this.domWatcher&&this.domWatcher.dispose(),this.scrollToOnFocus&&this.scrollToOnFocus.dispose()}};var $g=class{static get $inject(){return["$element","$scope","$http"]}constructor(e,r,n){this.el=e[0],this.url=this.el.getAttribute("data-url"),this.$scope=r,this.$http=n,this.categories=[],this.categoryIdsToApps={},this.categoryIdsToLimits={}}init(e){this.categories=e;let r=Math.floor(new Date/1e3);this.$http.get(`${this.url}?c=${r}`).then(n=>{n.data.forEach(o=>{this.categoryIdsToApps[o.category]||(this.categoryIdsToApps[o.category]=[]),this.categoryIdsToApps[o.category].push(o)}),this.categories.forEach(o=>{o.apps=this.categoryIdsToApps[o.id]})})}getFilteredApps(e,r){return r.slice(0,this.categoryIdsToLimits[e]||6)}showMoreForCategory(e){this.categoryIdsToLimits[e]=(this.categoryIdsToLimits[e]||0)+36}hasMoreToShow(e,r){return this.getFilteredApps(e,r).length<r.length}};var lE={COLOR_CHANGE:650,IMAGE_CHANGE:2150,MOBILE_AUTO_INTERVAL:4e3},iN={ACTIVE_SLIDE:j.mqnCssName("mqn2-cgp"),ACTIVE_DOT:j.mqnCssName("mqn2-be3")},cE=class{constructor(e=null){this.maxLength_=e,this.next_=null}add(e){this.next_=this.maxLength_!==null?(e+this.maxLength_)%this.maxLength_:e}pop(){let e=this.next_;return this.next_=null,e}},nN=class{static get $inject(){return["$element","$scope","$timeout"]}constructor(e,r,n){this.element=e[0],this.ngScope_=r,this.ngTimeout_=n,this.destroyed_=!1,this.activeColor=0,this.previousColor=-1,this.activeSlide=0,this.previousSlide=-1,this.colorTransitionTimeout_=null,this.slideTransitionTimeout_=null,this.mobileSlideTransitionTimeout_=null;let s=parseInt(this.element.getAttribute("data-num-colors")),o=parseInt(this.element.getAttribute("data-num-slides"));this.colorQueue_=new cE(s),this.slideQueue_=new cE(o),this.startMobileTimeout_(),this.resizeHandler_=()=>this.startMobileTimeout_(),window.addEventListener("resize",this.resizeHandler_),r.$on("$destroy",()=>this.dispose())}transitionColor(){if(this.colorTransitionTimeout_!==null)return;let e=this.colorQueue_.pop();e!==null&&(this.previousColor=this.activeColor,this.activeColor=e,this.colorTransitionTimeout_=this.ngTimeout_(()=>{this.colorTransitionTimeout_=null,this.previousColor=-1;let r=this.element.querySelector(`.${iN.ACTIVE_SLIDE} .${iN.ACTIVE_DOT}`);r&&r.focus()},lE.COLOR_CHANGE))}transitionSlide(){if(this.slideTransitionTimeout_!==null)return;let e=this.slideQueue_.pop();e!==null&&(this.previousSlide=this.activeSlide,this.activeSlide=null,this.ngTimeout_(()=>this.activeSlide=e,0),this.ngTimeout_.cancel(this.mobileSlideTransitionTimeout_),this.slideTransitionTimeout_=this.ngTimeout_(()=>{this.slideTransitionTimeout_=null,this.transitionSlide(),this.startMobileTimeout_()},lE.IMAGE_CHANGE))}startMobileTimeout_(){this.ngTimeout_.cancel(this.mobileSlideTransitionTimeout_),this.mobileSlideTransitionTimeout_=this.ngTimeout_(()=>this.transitionIfMobile_(),lE.MOBILE_AUTO_INTERVAL)}transitionIfMobile_(){this.ngTimeout_.cancel(this.mobileSlideTransitionTimeout_),Te.isMobile()&&this.next()}setColor(e){this.colorQueue_.add(e),this.transitionColor()}setSlide(e){this.slideQueue_.add(e),this.transitionSlide()}next(){this.setSlide(this.activeSlide+1)}previous(){this.setSlide(this.activeSlide-1)}dispose(){window.removeEventListener("resize",this.resizeHandler_),this.ngTimeout_.cancel(this.colorTransitionTimeout_),this.ngTimeout_.cancel(this.slideTransitionTimeout_),this.ngTimeout_.cancel(this.mobileSlideTransitionTimeout_)}},sN=nN;var hE={COLOR_CHANGE:650,IMAGE_CHANGE:2150,MOBILE_AUTO_INTERVAL:4e3},MX={ACTIVE_DOT:j.mqnCssName("mqn2-be3")},uE=class{constructor(e=null){this.maxLength_=e,this.next_=null}add(e){this.next_=this.maxLength_!==null?(e+this.maxLength_)%this.maxLength_:e}pop(){let e=this.next_;return this.next_=null,e}},oN=class{static get $inject(){return["$element","$scope","$timeout"]}constructor(e,r,n){this.element=e[0],this.ngTimeout_=n,this.activeColor=0,this.previousColor=-1,this.activeImage=0,this.previousImage=-1,this.colorTransitionTimeout_=null,this.imageTransitionTimeout_=null,this.mobileImageTransitionTimeout_=null;let s=parseInt(this.element.getAttribute("data-num-colors")),o=parseInt(this.element.getAttribute("data-num-slides"));this.colorQueue_=new uE(s),this.imageQueue_=new uE(o),this.startMobileTimeout_(),this.resizeHandler_=()=>this.startMobileTimeout_(),window.addEventListener("resize",this.resizeHandler_),r.$on("$destroy",()=>this.dispose())}transitionColor(){if(this.colorTransitionTimeout_!==null)return;let e=this.colorQueue_.pop();e!==null&&(this.previousColor=this.activeColor,this.activeColor=e,this.colorTransitionTimeout_=this.ngTimeout_(()=>{this.colorTransitionTimeout_=null;let r=this.element.querySelector(`.${MX.ACTIVE_DOT}`);r&&r.focus()},hE.COLOR_CHANGE))}transitionImage(){if(this.imageTransitionTimeout_!==null)return;let e=this.imageQueue_.pop();e!==null&&(this.previousImage=this.activeImage,this.activeImage=null,this.ngTimeout_(()=>this.activeImage=e,0),this.ngTimeout_.cancel(this.mobileImageTransitionTimeout_),this.imageTransitionTimeout_=this.ngTimeout_(()=>{this.imageTransitionTimeout_=null,this.transitionImage(),this.startMobileTimeout_()},hE.IMAGE_CHANGE))}startMobileTimeout_(){this.ngTimeout_.cancel(this.mobileImageTransitionTimeout_),this.mobileImageTransitionTimeout_=this.ngTimeout_(()=>this.transitionIfMobile_(),hE.MOBILE_AUTO_INTERVAL)}transitionIfMobile_(){this.ngTimeout_.cancel(this.mobileImageTransitionTimeout_),Te.isMobile()&&this.next()}setColor(e){this.colorQueue_.add(e),this.transitionColor()}setImage(e){this.imageQueue_.add(e),this.transitionImage()}next(){this.setImage(this.activeImage+1)}previous(){this.setImage(this.activeImage-1)}dispose(){window.removeEventListener("resize",this.resizeHandler_),this.ngTimeout_.cancel(this.colorTransitionTimeout_),this.ngTimeout_.cancel(this.imageTransitionTimeout_),this.ngTimeout_.cancel(this.mobileImageTransitionTimeout_)}},aN=oN;var hl=class{constructor(e){this.xhr=new XMLHttpRequest,this.type=e,this.url="",this.postData={},this.onprogress=!1,this.timeout=3e4}onProgress(e){return this.onprogress=e,this}setTimeout(e){return this.timeout=e,this}setType(){try{this.xhr.responseType=this.type}catch(e){}}onreadystatechange(e,r){this.xhr.onreadystatechange=()=>{this.setType(),this.xhr.readyState===4&&(this.xhr.status===200?e(this.xhr):r(this.xhr))}}get(e){return this.url=e,this.onprogress&&(this.xhr.onprogress=this.onprogress),new Promise((r,n)=>{this.setType(),this.onreadystatechange(r,n),this.xhr.open("GET",e,!0),this.xhr.timeout=this.timeout,this.xhr.send()})}post(e,r){return this.url=e,this.postData=r,this.onprogress&&(this.xhr.onprogress=this.onprogress),new Promise((n,s)=>{this.setType(),this.onreadystatechange(n,s),this.xhr.open("POST",e,!0),this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xhr.timeout=this.timeout,this.xhr.send(r)})}};var mN=re(Nn()),HX=tu(),qX=pN(),gN=Fl(),zX={LOADED:"loaded"},ta={PROGRESS_BAR_ACTIVE:j.mqnCssName("mqn2-ci9"),CANVAS_ACTIVE:j.mqnCssName("mqn2-ci1"),COLOR_PICKER_LOADING:j.mqnCssName("mqn2-d41")},vN=!0,jg=class extends qX{constructor({canvas:e,progressBar:r,colorPicker:n,preload:s,sequenceCount:o,preloadCallback:a}){super();this.canvas=e,this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=vN,this.preloadCallback=a,this.PROGRESS_BAR_EASE_SPEED=.08,this.colorPicker=n,this.progressBar=r,this.progressBarCurrentPercent=0,this.progressBarTarget=0,this.progressBarRafManager=new mN.default(()=>{this.renderLoopProgressBar()}),this.sequenceCount=o;let l=this.canvas.getAttribute("data-src");this.sources=JSON.parse(e.getAttribute("data-src")),this.originalSources=JSON.parse(e.getAttribute("data-src"));let c=h=>{this.resizeCanvas()};window.MQN_RESIZER?(window.MQN_RESIZER.addListener(c),this.windowListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(c)}):($window.addEventListener("resize",c),this.windowListener=()=>{$window.removeEventListener("resize",c)}),this.images=[],this.imageData=[],this.totalImagesLoadedCount=0,this.loaded=!1,this.loading=!1,this.currentFrame=0,this.endingFrame=this.currentFrame,this.isExiting=!1,this.from=0,this.to=0,this.lastframe=0,this.isIE=gN.isIE()||gN.isIEorEdge(),this.resizeCanvas(),this.processSources_(),s&&this.loadAssets()}processSources_(){let e=window.devicePixelRatio||1,r=this.canvas.width*e;this.sources=this.originalSources.map(n=>HX.supportsWebp?n+"=v1-rw-w"+parseInt(r):n+"=v1-w"+parseInt(r))}playAnimation(e,r,n=.06){this.animating||this.canvas.parentElement.classList.add(ta.CANVAS_ACTIVE),this.startTime||(this.startTime=new Date);let s=this.from>this.to,o=1400,a=(new Date().getTime()-this.startTime.getTime())/o;if(a<1){let l=s?this.to-this.from:this.from-this.to,h=(f=>f)(a);this.current=this.from+l*h,this.animating=!0,this.render(Math.round(this.current)),this.endingFrame=this.currentFrame,this.animationFrame=requestAnimationFrame(()=>{r&&r(),this.playAnimation(e,r)})}else this.startTime=null,this.endingFrame=this.currentFrame,cancelAnimationFrame(this.animationFrame),this.animating=!1,window.setTimeout(()=>{e&&e()},10)}play(e,r,n){!n&&this.canvas.parentElement.classList.remove(ta.CANVAS_ACTIVE),this.from=this.normalizeFrame(e),this.to=this.normalizeFrame(r),this.current=this.from,this.currentFrame=this.from,this.endingFrame=this.from}resizeCanvas(){let e=window.devicePixelRatio||1;this.canvas.width=this.canvas.offsetWidth*e,this.canvas.height=this.canvas.offsetHeight*e,this.context.imageSmoothingEnabled=vN,this.render(this.currentFrame)}loadComplete_(){this.loaded=!0,this.loading=!1,this.preloadCallback&&this.preloadCallback(),this.emit(zX.LOADED),this.render(0)}loadAssets(e=0,r=179,n=[]){if(!this.loading)return this.loading=!0,new Promise((s,o)=>{this.loadImageAssets(e,r,n,s,o)})}renderLoopProgressBar(){this.progressBarTarget=Math.max(this.progressBarTarget,this.progressBarCurrentPercent),this.progressBarCurrentPercent+=(this.progressBarTarget-this.progressBarCurrentPercent)*this.PROGRESS_BAR_EASE_SPEED;let e=8,r=2*Math.PI*e,n=r*(1-this.progressBarCurrentPercent);this.progressBar.style.strokeDasharray=r,this.progressBar.style.strokeDashoffset=n,this.progressBarCurrentPercent>=.98&&this.stopProgressBar()}prepProgressBar(){this.isIE||this.progressBar.classList.add(ta.PROGRESS_BAR_ACTIVE),this.colorPicker.classList.add(ta.COLOR_PICKER_LOADING),this.progressBarCurrentPercent=0,this.progressBarTarget=0,this.progressBarRafManager.stop()}startProgressBar(){this.isIE||this.progressBar.classList.add(ta.PROGRESS_BAR_ACTIVE),this.colorPicker.classList.add(ta.COLOR_PICKER_LOADING),this.progressBarRafManager.start(),this.progressBarCurrentPercent=0}stopProgressBar(){this.progressBarRafManager.stop(),this.isIE||this.progressBar&&this.progressBar.classList.remove(ta.PROGRESS_BAR_ACTIVE),this.colorPicker&&this.colorPicker.classList.remove(ta.COLOR_PICKER_LOADING)}loadImageAssets(e,r,n,s,o){let a=0,l=[];this.sources.forEach((c,h)=>{h<e||h>r&&n.indexOf(h)==-1||l.push(new Promise((f,u)=>{this.fetchImg(c).then(m=>{a++,this.totalImagesLoadedCount++;let d=this.totalImagesLoadedCount/this.sources.length;this.progressBarTarget=d,this.imageData[h]=m,f()})}))}),Promise.all(l).then(()=>{s()})}createImageAssets(){return new Promise((e,r)=>{let n=[];this.imageData.forEach((s,o)=>{!s||n.push(new Promise((a,l)=>{this.createImage(s).then(c=>{this.images[o]=c,a()})}))}),Promise.all(n).then(()=>{this.loadComplete_(),e()})})}cleanup(){this.imageData=null}loadFrame(e){return new Promise((r,n)=>{this.loadImg(this.sources[e]).then(s=>{this.images[e]=s,this.render(e),r()})})}createImage(e){return new Promise(r=>{var n=document.createElement("img");n.onload=()=>{URL.revokeObjectURL(n.src),r(n)},n.src=URL.createObjectURL(e.response)})}loadImg(e){return new Promise(r=>{let n=()=>{new hl("blob").onProgress(s=>{}).get(e).then(s=>{this.createImage(s).then(o=>{r(o)})}).catch(s=>{console.warn(e,s),n()})};n()})}fetchImg(e){return new Promise(r=>{let n=()=>{new hl("blob").onProgress(s=>{}).get(e).then(s=>{r(s)}).catch(s=>{console.warn(e,s),n()})};n()})}normalizeFrame(e){let r=e;return e<0&&(r=e+this.sequenceCount),e>=this.sequenceCount&&(r=e-this.sequenceCount),r}render(e){if(this.currentFrame=this.normalizeFrame(e),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),!this.images[this.currentFrame])return;let r=this.images[this.currentFrame];this.context.drawImage(this.images[this.currentFrame],0,0,r.width,r.height,0,0,this.canvas.width,this.canvas.height)}dispose(){this.images=null,this.canvas=null,this.windowListener&&this.windowListener(),this.progressBarRafManager.stop()}};var yN=re(Nn()),_N=class{constructor({element:e,update:r,mouseOver:n,dragEnd:s,dragStart:o,invert:a,persistDrag:l}){this.el=e,this.friction=.93,this.dragging=!1,this.invert=a||!1,this.persistDrag=l||!1,this.enabled=!0,this.mouseOverMode=!0,this.addListeners(),this.gamma=0,this.hover={x:0,y:0},this.mouse={x:0,y:0},this.startPosition={x:0,y:0},this.position={x:0,y:0},this.previous={x:0,y:0},this.velocity={x:0,y:0},this.updateCallback=r,this.mouseOverUpdateCallback=n,this.dragStartCallback=o,this.dragEndCallback=s,this.rafManager=new yN.default(()=>{this.update()}),this.rafManager.start()}update(){this.dragging?(this.previous=this.position,this.persistDrag?this.position={x:this.mouse.x-this.startPosition.x,y:this.mouse.y-this.startPosition.y}:this.position=this.mouse,this.velocity.x=this.position.x-this.previous.x,this.velocity.y=this.position.y-this.previous.y):(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.friction,this.velocity.y*=this.friction),this.mouseOverMode?this.mouseOverUpdateCallback&&this.mouseOverUpdateCallback({mouse:this.mouse,hover:this.hover,gamma:this.gamma,position:this.position,velocity:this.velocity,previous:this.previous}):this.updateCallback&&this.updateCallback({mouse:this.mouse,hover:this.hover,gamma:this.gamma,position:this.position,velocity:this.velocity,previous:this.previous})}start(e){!this.enabled||(this.mouseOverMode=!1,this.move(e),this.dragging=!0,this.startPosition={x:this.mouse.x-this.position.x,y:this.mouse.y-this.position.y},this.dragStartCallback&&this.dragStartCallback({mouse:this.mouse,position:this.position,velocity:this.velocity,previous:this.previous}))}end(e){this.dragging=!1,this.dragEndCallback&&this.dragEndCallback({mouse:this.mouse,position:this.position,velocity:this.velocity,previous:this.previous})}move(e){let r=e.touches&&e.touches[0].clientX||e.x,n=e.touches&&e.touches[0].clientY||e.y;this.invert||(r=-r,n=-n),typeof r=="number"&&typeof n=="number"&&(this.mouse={x:r,y:n},this.hover={x:-r+window.innerWidth/2,y:-n+window.innerWidth/2})}deviceOrientation(e){var r=e.absolute,n=e.alpha,s=e.beta,o=e.gamma;this.gamma=o}enable(e){e?this.enabled=!0:(this.dragging=!1,this.enabled=!1,this.velocity={x:0,y:0},this.startPosition={x:0,y:0},this.position={x:0,y:0},this.mouse={x:0,y:0},this.previous={x:0,y:0})}addListeners(){this.el.addEventListener("mousedown",this.start.bind(this)),document.addEventListener("mousemove",this.move.bind(this)),document.addEventListener("mouseup",this.end.bind(this)),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this.deviceOrientation.bind(this),{passive:!0}),this.el.addEventListener("touchstart",this.start.bind(this),{passive:!0}),document.addEventListener("touchmove",this.move.bind(this),{passive:!0}),document.addEventListener("touchend",this.end.bind(this),{passive:!0})}removeListeners(){this.el.removeEventListener("mousedown",this.start.bind(this)),document.removeEventListener("mousemove",this.move.bind(this)),document.removeEventListener("mouseup",this.end.bind(this)),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.deviceOrientation.bind(this)),this.el.removeEventListener("touchstart",this.start.bind(this)),document.removeEventListener("touchmove",this.move.bind(this)),document.removeEventListener("touchend",this.end.bind(this))}dispose(){this.removeListeners(),this.rafManager.stop()}},bN=_N;var WX=Fl(),Yg={INTRO_START_FRAME:40,START_FRAME:40},GX=900;var wN=333,Xg=500,SN=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element=e[0],this.$scope=r;var n=navigator.userAgent.match(/iPad/i)!=null;if(n){this.element.style.display="none",this.disabled=!0;return}this.devicePrevious=null,this.colorPrevious=null,this.device=null,this.color=null,this.deviceDelayed=null,this.colorDelayed=null,this.grabbed=!1,this.deviceSchema=null,this.loading=!1,this.loaded=!1,this.transitioning=!1,this.transitioningDevice=!1,this.transitioningDevicePre=!1,this.intro=!1,this.introComplete=!1,this.frame=0,this.ready=!1,this.targetFrame=0,this.targetFrameInternal=0,r.$on("$destroy",()=>{this.dispose_()})}setup(e,r,n){this.disabled||(this.reverseDirection=!!n,this.viewer=document.getElementById(e),this.isMobile=window.DeviceOrientationEvent&&WX.isMobile(),this.deviceSchema=r,this.sequences={},window.setTimeout(()=>{this.deviceSchema.forEach(s=>{s.colors.forEach(o=>{let a=s.id,l=o.id,c=new jg({canvas:document.getElementById(`${a}-${l}`),progressBar:document.getElementById(`mqn-pixel2-3d-picker__loader--${a}-${l}`),colorPicker:document.getElementById(`mqn-pixel2-3d-picker__color-picker--${a}-${l}`),preload:!1,sequenceCount:o.sequence_count});this.sequences[`${a}${l}`]=c})}),this.inviewWatcher=ht.elementInViewWatcherFirstChangeOnly(this.element,{threshold:0,rootMargin:"0px 0px 0px 0px"},(s,o,a)=>{o.isIntersecting&&(this.init(),this.$scope.$apply(),a())})}),window.setTimeout(()=>{this.color=this.deviceSchema[0].colors[0].id,this.colorDelayed=this.color,this.device=this.deviceSchema[0].id,this.deviceDelayed=this.device,this.startIntro=!0,this.$scope.$apply()}))}init(){this.disabled||(this.setupDragger(),window.setTimeout(()=>{this.devicePrevious=this.device,this.colorPrevious=this.color,this.activeSequence=this.updateActiveSequence_(this.device,this.color),this.$scope.$apply()},GX))}setupDragger(){this.sensitivity=.2,this.hoverSensitivity=.02,this.gammaSensitivity=.8,this.isFirstHover=!0,this.elementDragger=new bN({element:this.viewer,invert:this.reverseDirection,persistDrag:!0,dragStart:()=>{this.grabbed=!0,this.$scope.$apply()},mouseOver:e=>{let r=this.getCurrentSequenceCount(),n=Math.round(e.hover.x*this.hoverSensitivity%r);if(n=Math.round(this.clamp(n,-15,15)%r),this.hoverFrame=n,this.isMobile){if(n=Math.round(this.clamp(e.gamma*this.gammaSensitivity,-15,15)%r),this.loading)return;this.hoverFrame=n}if(!this.activeSequence||this.activeSequence&&this.activeSequence.animating||this.activeSequence&&this.activeSequence.isExiting)return;this.targetFrame=n;let s=(this.targetFrame-this.targetFrameInternal)*.5;this.targetFrameInternal=this.targetFrameInternal+s,this.frame=Math.round(this.targetFrameInternal),this.frame=Math.min(r-1,Math.abs(this.normalizeDegree(this.frame))),this.activeSequence.loaded&&this.activeSequence.render(this.frame)},update:e=>{let r=this.getCurrentSequenceCount();if(!this.activeSequence||this.activeSequence&&this.activeSequence.animating||this.activeSequence&&this.activeSequence.isExiting)return;let n=Math.round(-e.position.x*this.sensitivity%r);this.frame=Math.min(r-1,Math.abs(this.normalizeDegree(n))),this.activeSequence.loaded&&this.activeSequence.render(this.frame)}})}clamp(e,r,n){return Math.min(Math.max(e,r),n)}normalizeDegree(e){let r=this.getCurrentSequenceCount();return e<0?r+e:e>=r?e-r:e}updateActiveSequence_(e,r){let n=this.sequences[e+r],s=this.activeSequence;s&&(this.activeSequence.isExiting=!0),this.transitioning=!0,this.devicePrevious!==e&&(this.transitioningDevice=!0,this.transitioningDevicePre=!0),this.introComplete&&(this.secondInteraction=!0);let o=this.introComplete?Yg.START_FRAME:Yg.INTRO_START_FRAME;if(this.elementDragger&&this.elementDragger.enable(!1),window.setTimeout(()=>{this.colorDelayed=this.color,this.deviceDelayed=this.device,this.$scope.$apply()},Xg),window.setTimeout(()=>{this.transitioningDevicePre=!1,this.$scope.$apply()},Xg),n.loaded)this.activeSequence=n,this.activeSequence.play(Yg.START_FRAME,0),window.setTimeout(()=>{this.activeSequence.playAnimation(()=>{this.isFirstHover=!0,this.elementDragger&&this.elementDragger.enable(!0),this.transitioning=!1,this.transitioningDevice=!1,s&&(s.isExiting=!1),this.$scope.$apply()},()=>{this.grabbed||(this.activeSequence.to=this.hoverFrame)})},Xg+wN);else{n.prepProgressBar(),window.setTimeout(()=>{this.loading=!0,this.loaded=!1,this.$scope.$apply()}),n.startProgressBar(),n.progressBarTarget=0,n.PROGRESS_BAR_EASE_SPEED=this.isMobile?.01:.08,n.currentFrame=Yg.START_FRAME;let l=this.getCurrentSequenceCount(),c=[];for(var a=0;a<17;a++)c.push(l-a);let h=this.isMobile?o:l;n.loadAssets(0,h,c).then(()=>{n.createImageAssets().then(()=>{this.loaded=!0,this.activeSequence=this.sequences[e+r],this.introComplete||(this.intro=!0),this.$scope.$apply(),window.setTimeout(()=>{this.ready=!0,this.$scope.$apply()},1300),n.play(o,0),window.setTimeout(()=>{n.playAnimation(()=>{if(this.isMobile){this.transitioningDevice=!1;let f=800;window.setTimeout(()=>{n.progressBarTarget=.65,n.PROGRESS_BAR_EASE_SPEED=.01},f/2),window.setTimeout(()=>{n.loadAssets(o+1,l-17).then(()=>{n.createImageAssets().then(()=>{n.progressBarTarget=1,n.PROGRESS_BAR_EASE_SPEED=.15,this.loading=!1,this.transitioning=!1,this.elementDragger&&this.elementDragger.enable(!0),this.introComplete||(this.introComplete=!0,this.intro=!1),n.cleanup(),this.$scope.$apply()})})},f),s&&(s.isExiting=!1),this.$scope.$apply()}else this.transitioning=!1,this.elementDragger&&this.elementDragger.enable(!0),this.transitioningDevice=!1,this.loading=!1,this.introComplete||(this.introComplete=!0,this.intro=!1),s&&(s.isExiting=!1),n.cleanup(),this.$scope.$apply()},()=>{this.grabbed||(this.activeSequence.to=this.hoverFrame)},this.grabbed?.08:.06)},Xg,wN)})})}}deviceHasColor(e,r){let n=!1;return this.deviceSchema.forEach(s=>{e==s.id&&s.colors.forEach(o=>{n||r==o.id&&(n=!0)})}),n}getDeviceSchema(e){let r=null;return this.deviceSchema.forEach(n=>{e==n.id&&(r=n)}),r}getCurrentDeviceSchema(){return this.getDeviceSchema(this.device)}getCurrentSequenceCount(){return this.getCurrentColorSchema().sequence_count}getColorSchema(e,r){if(this.disabled)return;let n=null;return this.deviceSchema.forEach(s=>{e==s.id&&s.colors.forEach(o=>{r==o.id&&(n=o)})}),n}getCurrentColorSchema(){return this.getColorSchema(this.device,this.color)}getCurrentColorDelayedSchema(){return!this.disabled&&this.getColorSchema(this.deviceDelayed,this.colorDelayed)}setDevice(e){this.loading||(this.colorPrevious=this.color,this.devicePrevious=this.device,this.device=e,this.deviceHasColor(this.device,this.color)||(this.color=this.getDeviceSchema(this.device).colors[0].id),this.updateActiveSequence_(this.device,this.color))}setColor(e){this.loading||(this.devicePrevious=this.device,this.colorPrevious=this.color,this.color=e,this.updateActiveSequence_(this.device,this.color))}dispose_(){this.inviewWatcher&&this.inviewWatcher.done(),this.elementDragger&&this.elementDragger.dispose();for(var e in this.sequences)this.sequences[e].dispose()}},EN=SN;var mE=re(dn());var xN=class{constructor(){}trackCarouselNavigationClick(e,r,n="click"){let s=mE.default.getClosestTrackingId(e),o=mt.getClosestMqnFrame(e),a=o.getAttribute("mqn-autotrack-product"),l=o.getAttribute("mqn-autotrack-partial-type");(n!=="prev"||n!=="next")&&(n=n+"-"+r);let c={event:"module interaction",eventCategory:"module click",eventAction:s,eventLabel:n,pageName:window.location.pathname,product:a,moduleName:s,moduleType:l,nonInteraction:"0"};mE.default.trackDataLayer(c)}},ul=new xN;var TN=re(Ye()),AN=class{constructor(e,r,n){this.sources=r,this.fifeCompression=n||"v1",this.images=[],this.loaded=!1,this.percentLoaded=0,this.loadedCount=0,this.totalCount=this.sources.length,this.device=e,this.webpSupported=TN.is.supportingWebp(),this.processSources_(),window.MQN_RESIZER&&window.MQN_RESIZER.addListener(this.resize.bind(this))}resize(){}processSources_(){let e=window.devicePixelRatio||1,r=window.innerWidth;this.device.canvasElement&&(r=this.device.canvasElement.offsetWidth);let n=this.device.image_size_multiplier||1,s=r*e*n;this.sources=this.sources.map(o=>this.webpSupported?o+`=${this.fifeCompression}-rw-w`+parseInt(s):o+`=${this.fifeCompression}-w`+parseInt(s)),this.sources=Zt.addFifeUrlParamsToUrls(this.sources)}loadAll(){return this.load(0,this.sources.length)}load(e,r){return new Promise((n,s)=>{let o=this.sources.splice(e,r),a=[];o.forEach(l=>{a.push(this.loadImg_(l,e)),e++}),Promise.all(a).then(()=>{n()})})}saveImage_(e,r){this.images[e]=r,this.percentLoaded=this.images.length/this.totalCount,this.percentLoaded==1&&(this.loaded=!0)}loadImg_(e,r,n=0){return new Promise(s=>{typeof this.images[r]!="undefined"&&s(),new hl("blob").onProgress(o=>{}).get(e).then(o=>{let a=document.createElement("img");a.onload=()=>{this.saveImage_(r,a),s()},a.src=URL.createObjectURL(o.response)}).catch(o=>{n++,n>=3?s():this.loadImg_(e,r,n)})})}getImage(e){return this.images[e]}dispose(){this.images&&this.images.forEach(e=>{URL.revokeObjectURL(e.src)})}},MN=AN;var CN=re(Nn()),PN=class{constructor(e,r){this.canvas=e,this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!0,this.imageLoader=r,this.raf=new CN.default(this.loop.bind(this)),this.index=null,window.MQN_RESIZER&&window.MQN_RESIZER.addListener(this.resize.bind(this)),this.resize()}resize(){let e=window.devicePixelRatio||1;this.canvas.width=this.canvas.offsetWidth*e,this.canvas.height=this.canvas.offsetHeight*e,this.context.imageSmoothingEnabled=!0,this.render(this.index)}loop(){}render(e){if(e==null)return;this.index=Math.round(e),this.context.clearRect(0,0,this.canvas.width,this.canvas.height);let r=this.imageLoader.getImage(this.index);r!=null&&this.context.drawImage(r,0,0,r.width,r.height,0,0,this.canvas.width,this.canvas.height)}normalizeFrame(e){let r=e;return e<0&&(r=e+this.sequenceCount),e>=this.sequenceCount&&(r=e-this.sequenceCount),r}},IN=PN;var RN=re(Nn()),LN=re(Et()),Kf={STATIC:"static",LEFT:"left",RIGHT:"right"},ON=class{constructor({element:e,update:r,friction:n,mouseOver:s,dragEnd:o,dragStart:a,invert:l,persistDrag:c,enabled:h}){this.el=e,this.friction=n||.93,this.dragging=!1,this.invert=l||!1,this.persistDrag=c||!1,this.enabled=h,this.mouseOverMode=!0,this.maxLeft=null,this.maxRight=null,this.gamma=0,this.hover={x:0,y:0},this.mouse={x:0,y:0},this.startPosition={x:0,y:0},this.position={x:0,y:0},this.previous={x:0,y:0},this.velocity={x:0,y:0},this.updateCallback=r,this.mouseOverUpdateCallback=s,this.dragStartCallback=a,this.dragEndCallback=o,this.rafManager=new RN.default(()=>{this.update()}),this.ev=LN.elementVisibility.inview(this.el,{rootMargin:"100px"},()=>{this.ev.state().ready&&this.ev.state().inview?(this.addListeners(),this.rafManager.start()):(this.rafManager.stop(),this.removeListeners())})}updateDragDirection_(){this.velocity.x==0&&(this.dragDirection=Kf.STATIC),this.previous.x<this.position.x&&(this.dragDirection=Kf.RIGHT),this.previous.x>this.position.x&&(this.dragDirection=Kf.LEFT)}unlock(){this.locked=!1}lock(){this.locked=!0,this.maxRight==null&&this.position.x>1&&(this.maxRight=this.position.x),this.maxLeft==null&&this.position.x<-1&&(this.maxLeft=this.position.x)}update(){let e=window.innerWidth,r=window.innerWidth/2;if(!this.enabled)return;let n=this.position;this.dragging?(this.persistDrag?this.position={x:this.mouse.x-this.startPosition.x,y:this.mouse.y-this.startPosition.y}:this.position=this.mouse,this.velocity.x=this.position.x-this.previous.x,this.velocity.y=this.position.y-this.previous.y):(this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.velocity.x*=this.friction,this.velocity.y*=this.friction),this.updateDragDirection_();let s=this.maxLeft,o=this.maxRight;s!==null&&this.position.x<s&&this.dragDirection==Kf.LEFT?(this.position.x=s+1,this.previous.x=s+1):o!==null&&this.position.x>o&&this.dragDirection==Kf.RIGHT?(this.position.x=o-1,this.previous.x=o-1):this.previous=this.position,this.mouseOverMode?this.mouseOverUpdateCallback&&this.mouseOverUpdateCallback({mouse:this.mouse,hover:this.hover,gamma:this.gamma,position:this.position,velocity:this.velocity,previous:this.previous,direction:this.dragDirection}):this.updateCallback&&this.updateCallback({mouse:this.mouse,hover:this.hover,gamma:this.gamma,position:this.position,velocity:this.velocity,previous:this.previous,direction:this.dragDirection})}start(e){!this.enabled||(this.mouseOverMode=!1,this.move(e),this.dragging=!0,this.startPosition={x:this.mouse.x-this.position.x,y:this.mouse.y-this.position.y},this.dragStartCallback&&this.dragStartCallback({mouse:this.mouse,position:this.position,velocity:this.velocity,previous:this.previous}))}end(e){!this.enabled||(this.dragging=!1,this.dragEndCallback&&this.dragEndCallback({mouse:this.mouse,position:this.position,velocity:this.velocity,previous:this.previous}))}move(e){if(!this.enabled)return;let r=e.touches&&e.touches[0].clientX||e.x,n=e.touches&&e.touches[0].clientY||e.y;this.invert||(r=-r,n=-n),typeof r=="number"&&typeof n=="number"&&(this.mouse={x:r,y:n},this.hover={x:-r+window.innerWidth/2,y:-n+window.innerWidth/2})}deviceOrientation(e){let r=e.absolute,n=e.alpha,s=e.beta,o=e.gamma;this.gamma=o}reset(){this.dragging=!1,this.velocity={x:0,y:0},this.startPosition={x:0,y:0},this.position={x:0,y:0},this.mouse={x:0,y:0},this.previous={x:0,y:0},this.mouseOverMode=!0}enable(e){e?this.enabled=!0:(this.enabled=!1,this.reset())}killVelocity(){this.velocity.x=0}addListeners(){this.el.addEventListener("mousedown",this.start.bind(this)),document.addEventListener("mousemove",this.move.bind(this)),document.addEventListener("mouseup",this.end.bind(this)),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this.deviceOrientation.bind(this),{passive:!0}),this.el.addEventListener("touchstart",this.start.bind(this),{passive:!0}),document.addEventListener("touchmove",this.move.bind(this),{passive:!0}),document.addEventListener("touchend",this.end.bind(this),{passive:!0})}removeListeners(){this.el.removeEventListener("mousedown",this.start.bind(this)),document.removeEventListener("mousemove",this.move.bind(this)),document.removeEventListener("mouseup",this.end.bind(this)),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.deviceOrientation.bind(this)),this.el.removeEventListener("touchstart",this.start.bind(this)),document.removeEventListener("touchmove",this.move.bind(this)),document.removeEventListener("touchend",this.end.bind(this))}dispose(){this.removeListeners(),this.rafManager.stop(),this.ev&&this.ev.dispose()}},DN=ON;var FN={fixDigits:(t,e)=>+parseFloat(t).toFixed(e),normalize:(t,e,r)=>(t-e)/(r-e),normalizeValueToPercent:(t,e,r)=>(t-e)/(r-e),normalizePercentToValue:(t,e,r)=>(r-e)*t+e,normalizeValue:(t,e)=>t<0?e+t:t>=e?t-e:t,circumference:t=>2*Math.PI*t,clamp:(t,e,r)=>Math.min(Math.max(t,e),r),clampAngle:(t,e=0,r,n,s=360)=>{let o=(s+r)/2,a;return t<=o?a=Math.min(Math.max(t,e),r):a=Math.min(s,Math.max(t,n)),a},lerp:(t,e,r)=>(r=r<0?0:r,r=r>1?1:r,t+(e-t)*r),convertFrameToDegree(t,e){return t*(360/e)},convertDegreeToFrame(t,e){return t*e/360},angleDistance(t,e,r){r||(r=Math.PI*2);let n=(e-t)%r;return 2*n%r-n},radian(t){return t*Math.PI/180},degree(t){return t*180/Math.PI},angleRadians(t,e,r,n){return Math.atan2(n-e,r-t)},angleDegree(t,e,r,n){return Math.atan2(n-e,r-t)*180/Math.PI},angleDegree360(t,e,r,n){let o=Math.atan((r-t)/(n-e))*180/Math.PI;return o*=2,o+=180,o},getElementTravelDistanceAsPercent(t){let e=t.getBoundingClientRect(),n=window.innerHeight-e.top;return FN.getPercent(n,e.height)}},sr=FN;var ik=re(rk()),{__extends:Kg,__assign:Kt,__rest:ra,__decorate:V0e,__param:B0e,__metadata:U0e,__awaiter:H0e,__generator:q0e,__exportStar:z0e,__createBinding:W0e,__values:G0e,__read:$0e,__spread:j0e,__spreadArrays:Y0e,__await:X0e,__asyncGenerator:Z0e,__asyncDelegator:Q0e,__asyncValues:K0e,__makeTemplateObject:J0e,__importStar:ebe,__importDefault:tbe,__classPrivateFieldGet:rbe,__classPrivateFieldSet:ibe}=ik.default;var nk=function(t,e){return function(r){return Math.max(Math.min(r,e),t)}},Jf=function(t){return t%1?Number(t.toFixed(5)):t},vE=/(-)?(\d[\d\.]*)/g,Jg=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,sk=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,Ct={test:function(t){return typeof t=="number"},parse:parseFloat,transform:function(t){return t}},yh=Kt(Kt({},Ct),{transform:nk(0,1)}),ed=Kt(Kt({},Ct),{default:1}),td=function(t){return{test:function(e){return typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1},parse:parseFloat,transform:function(e){return""+e+t}}},ds=td("deg"),fl=td("%"),it=td("px"),ok=td("vh"),ak=td("vw"),yE=Kt(Kt({},fl),{parse:function(t){return fl.parse(t)/100},transform:function(t){return fl.transform(t*100)}}),$X=function(t){return t.substring(t.indexOf("(")+1,t.lastIndexOf(")"))},jX=nk(0,255),_E=function(t){return t.red!==void 0},bE=function(t){return t.hue!==void 0};function YX(t){return $X(t).replace(/(,|\/)/g," ").split(/ \s*/)}var lk=function(t){return function(e){if(typeof e!="string")return e;for(var r={},n=YX(e),s=0;s<4;s++)r[t[s]]=n[s]!==void 0?parseFloat(n[s]):1;return r}},XX=function(t){var e=t.red,r=t.green,n=t.blue,s=t.alpha,o=s===void 0?1:s;return"rgba("+e+", "+r+", "+n+", "+o+")"},ZX=function(t){var e=t.hue,r=t.saturation,n=t.lightness,s=t.alpha,o=s===void 0?1:s;return"hsla("+e+", "+r+", "+n+", "+o+")"},wE=Kt(Kt({},Ct),{transform:function(t){return Math.round(jX(t))}});function SE(t,e){return t.startsWith(e)&&sk.test(t)}var _h={test:function(t){return typeof t=="string"?SE(t,"rgb"):_E(t)},parse:lk(["red","green","blue","alpha"]),transform:function(t){var e=t.red,r=t.green,n=t.blue,s=t.alpha,o=s===void 0?1:s;return XX({red:wE.transform(e),green:wE.transform(r),blue:wE.transform(n),alpha:Jf(yh.transform(o))})}},bh={test:function(t){return typeof t=="string"?SE(t,"hsl"):bE(t)},parse:lk(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,r=t.saturation,n=t.lightness,s=t.alpha,o=s===void 0?1:s;return ZX({hue:Math.round(e),saturation:fl.transform(Jf(r)),lightness:fl.transform(Jf(n)),alpha:Jf(yh.transform(o))})}},ev=Kt(Kt({},_h),{test:function(t){return typeof t=="string"&&SE(t,"#")},parse:function(t){var e="",r="",n="";return t.length>4?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),e+=e,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),Dr={test:function(t){return typeof t=="string"&&sk.test(t)||_E(t)||bE(t)},parse:function(t){return _h.test(t)?_h.parse(t):bh.test(t)?bh.parse(t):ev.test(t)?ev.parse(t):t},transform:function(t){return _E(t)?_h.transform(t):bE(t)?bh.transform(t):t}},EE="${c}",ck="${n}",QX=function(t){return typeof t=="number"?0:t},dl={test:function(t){if(typeof t!="string"||!isNaN(t))return!1;var e=0,r=t.match(vE),n=t.match(Jg);return r&&(e+=r.length),n&&(e+=n.length),e>0},parse:function(t){var e=t,r=[],n=e.match(Jg);n&&(e=e.replace(Jg,EE),r.push.apply(r,n.map(Dr.parse)));var s=e.match(vE);return s&&r.push.apply(r,s.map(Ct.parse)),r},createTransformer:function(t){var e=t,r=0,n=t.match(Jg),s=n?n.length:0;if(n)for(var o=0;o<s;o++)e=e.replace(n[o],EE),r++;var a=e.match(vE),l=a?a.length:0;if(a)for(var o=0;o<l;o++)e=e.replace(a[o],ck),r++;return function(c){for(var h=e,f=0;f<r;f++)h=h.replace(f<s?EE:ck,f<s?Dr.transform(c[f]):Jf(c[f]));return h}},getAnimatableNone:function(t){var e=dl.parse(t),r=dl.createTransformer(t);return r(e.map(QX))}};var Ks=function(){};var xE=0,hk=typeof window!="undefined"&&window.requestAnimationFrame!==void 0?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),r=Math.max(0,16.7-(e-xE));xE=e+r,setTimeout(function(){return t(xE)},r)},JX=function(t){var e=[],r=[],n=0,s=!1,o=0,a=new WeakSet,l=new WeakSet,c={cancel:function(h){var f=r.indexOf(h);a.add(h),f!==-1&&r.splice(f,1)},process:function(h){var f;if(s=!0,f=[r,e],e=f[0],r=f[1],r.length=0,n=e.length,n){var u;for(o=0;o<n;o++)u=e[o],u(h),l.has(u)===!0&&!a.has(u)&&(c.schedule(u),t(!0))}s=!1},schedule:function(h,f,u){f===void 0&&(f=!1),u===void 0&&(u=!1),Ks(typeof h=="function","Argument must be a function");var m=u&&s,d=m?e:r;a.delete(h),f&&l.add(h),d.indexOf(h)===-1&&(d.push(h),m&&(n=e.length))}};return c},eZ=40,uk=1/60*1e3,tv=!0,rd=!1,TE=!1,wh={delta:0,timestamp:0},rv=["read","update","preRender","render","postRender"],tZ=function(t){return rd=t},AE=rv.reduce(function(t,e){return t[e]=JX(tZ),t},{}),rZ=rv.reduce(function(t,e){var r=AE[e];return t[e]=function(n,s,o){return s===void 0&&(s=!1),o===void 0&&(o=!1),rd||nZ(),r.schedule(n,s,o),n},t},{}),Js=rv.reduce(function(t,e){return t[e]=AE[e].cancel,t},{}),iZ=function(t){return AE[t].process(wh)},fk=function(t){rd=!1,wh.delta=tv?uk:Math.max(Math.min(t-wh.timestamp,eZ),1),tv||(uk=wh.delta),wh.timestamp=t,TE=!0,rv.forEach(iZ),TE=!1,rd&&(tv=!1,hk(fk))},nZ=function(){rd=!0,tv=!0,TE||hk(fk)},ME=function(){return wh},qi=rZ;var In={};eT(In,{anticipate:()=>vk,backIn:()=>av,backInOut:()=>gk,backOut:()=>mk,bounceIn:()=>fZ,bounceInOut:()=>dZ,bounceOut:()=>lv,circIn:()=>LE,circInOut:()=>pk,circOut:()=>OE,createAnticipateEasing:()=>IE,createBackIn:()=>iv,createExpoIn:()=>PE,createMirroredEasing:()=>sZ,createReversedEasing:()=>CE,cubicBezier:()=>Sk,easeIn:()=>sv,easeInOut:()=>RE,easeOut:()=>ov,linear:()=>nv,mirrored:()=>Eh,reversed:()=>Sh});var dk=1.525,Sh=function(t){return function(e){return 1-t(1-e)}},Eh=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},CE=Sh,sZ=Eh,PE=function(t){return function(e){return Math.pow(e,t)}},iv=function(t){return function(e){return e*e*((t+1)*e-t)}},IE=function(t){var e=iv(t);return function(r){return(r*=2)<1?.5*e(r):.5*(2-Math.pow(2,-10*(r-1)))}},nv=function(t){return t},sv=PE(2),ov=Sh(sv),RE=Eh(sv),LE=function(t){return 1-Math.sin(Math.acos(t))},OE=Sh(LE),pk=Eh(OE),av=iv(dk),mk=Sh(av),gk=Eh(av),vk=IE(dk),oZ=4/11,aZ=8/11,lZ=9/10,cZ=4356/361,hZ=35442/1805,uZ=16061/1805,lv=function(t){var e=t*t;return t<oZ?7.5625*e:t<aZ?9.075*e-9.9*t+3.4:t<lZ?cZ*e-hZ*t+uZ:10.8*t*t-20.52*t+10.72},fZ=function(t){return 1-lv(1-t)},dZ=function(t){return t<.5?.5*(1-lv(1-t*2)):.5*lv(t*2-1)+.5},pZ=8,mZ=.001,gZ=1e-7,vZ=10,id=11,cv=1/(id-1),yZ=typeof Float32Array!="undefined",yk=function(t,e){return 1-3*e+3*t},_k=function(t,e){return 3*e-6*t},bk=function(t){return 3*t},wk=function(t,e,r){return 3*yk(e,r)*t*t+2*_k(e,r)*t+bk(e)},hv=function(t,e,r){return((yk(e,r)*t+_k(e,r))*t+bk(e))*t};function Sk(t,e,r,n){var s=yZ?new Float32Array(id):new Array(id),o=function(f,u,m){var d=0,v,p;do p=u+(m-u)/2,v=hv(p,t,r)-f,v>0?m=p:u=p;while(Math.abs(v)>gZ&&++d<vZ);return p},a=function(f,u){for(var m=0,d=0,v;m<pZ;++m){if(d=wk(u,t,r),d===0)return u;v=hv(u,t,r)-f,u-=v/d}return u},l=function(){for(var f=0;f<id;++f)s[f]=hv(f*cv,t,r)},c=function(f){for(var u=0,m=1,d=id-1,v=0,p=0,g=0;m!==d&&s[m]<=f;++m)u+=cv;return--m,v=(f-s[m])/(s[m+1]-s[m]),p=u+v*cv,g=wk(p,t,r),g>=mZ?a(f,p):g===0?p:o(f,u,u+cv)};l();var h=function(f){var u;return t===e&&r===n?u=f:f===0?u=0:f===1?u=1:u=hv(c(f),e,n),u};return h}var Ek=function(t){return typeof t=="number"};var DE=function(t){return function(e,r,n){return n!==void 0?t(e,r,n):function(s){return t(e,r,s)}}},_Z=function(t,e,r){return Math.min(Math.max(r,t),e)},uv=DE(_Z);var xk=function(t,e,r){var n=e-t;return n===0?1:(r-t)/n},xh=function(t,e,r){return-r*t+r*e+t};var FE=function(){return FE=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},FE.apply(this,arguments)},bZ=function(t,e,r){var n=t*t,s=e*e;return Math.sqrt(Math.max(0,r*(s-n)+n))},wZ=[ev,_h,bh],Tk=function(t){return wZ.find(function(e){return e.test(t)})},Ak=function(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."},NE=function(t,e){var r=Tk(t),n=Tk(e);Ks(!!r,Ak(t)),Ks(!!n,Ak(e)),Ks(r.transform===n.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var s=r.parse(t),o=n.parse(e),a=FE({},s),l=r===bh?xh:bZ;return function(c){for(var h in a)h!=="alpha"&&(a[h]=l(s[h],o[h],c));return a.alpha=xh(s.alpha,o.alpha,c),r.transform(a)}},SZ=function(t,e){return function(r){return e(t(r))}},kE=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(SZ)};function EZ(t,e){return Ek(t)?function(r){return xh(t,e,r)}:Dr.test(t)?NE(t,e):VE(t,e)}var Mk=function(t,e){var r=t.slice(),n=r.length,s=t.map(function(o,a){return EZ(o,e[a])});return function(o){for(var a=0;a<n;a++)r[a]=s[a](o);return r}};function Ck(t){for(var e=dl.parse(t),r=e.length,n=0,s=0,o=0,a=0;a<r;a++)n||typeof e[a]=="number"?n++:e[a].hue!==void 0?o++:s++;return{parsed:e,numNumbers:n,numRGB:s,numHSL:o}}var VE=function(t,e){var r=dl.createTransformer(e),n=Ck(t),s=Ck(e);return Ks(n.numHSL===s.numHSL&&n.numRGB===s.numRGB&&n.numNumbers>=s.numNumbers,"Complex values '"+t+"' and '"+e+"' too different to mix. Ensure all colors are of the same type."),kE(Mk(n.parsed,s.parsed),r)};var xZ=function(t){return t},BE=function(t){return t===void 0&&(t=xZ),DE(function(e,r,n){var s=r-n,o=-(0-e+1)*(0-t(Math.abs(s)));return s<=0?r+o:r-o})},TZ=BE(),AZ=BE(Math.sqrt),fv=function(t,e){return Ek(t)?t/(1e3/e):0},dv=function(t,e){return e?t*(1e3/e):0},MZ=function(t,e,r){var n=e-t;return((r-t)%n+n)%n+t},CZ=DE(MZ),Ibe=uv(0,1);var UE=function(t){var e=t.onRead,r=t.onRender,n=t.uncachedValues,s=n===void 0?new Set:n,o=t.useCache,a=o===void 0?!0:o;return function(l){l===void 0&&(l={});var c=ra(l,[]),h={},f=[],u=!1;function m(v,p){v.startsWith("--")&&(c.hasCSSVariable=!0);var g=h[v];h[v]=p,h[v]!==g&&(f.indexOf(v)===-1&&f.push(v),u||(u=!0,qi.render(d.render)))}var d={get:function(v,p){p===void 0&&(p=!1);var g=!p&&a&&!s.has(v)&&h[v]!==void 0;return g?h[v]:e(v,c)},set:function(v,p){if(typeof v=="string")m(v,p);else for(var g in v)m(g,v[g]);return this},render:function(v){return v===void 0&&(v=!1),(u||v===!0)&&(r(h,c,f),u=!1,f.length=0),this}};return d}},PZ=/([a-z])([A-Z])/g,IZ="$1-$2",pv=function(t){return t.replace(PZ,IZ).toLowerCase()},Pk=new Map,HE=new Map,Ik=["Webkit","Moz","O","ms",""],RZ=Ik.length,LZ=typeof document!="undefined",qE,Rk=function(t,e){return HE.set(t,pv(e))},OZ=function(t){qE=qE||document.createElement("div");for(var e=0;e<RZ;e++){var r=Ik[e],n=r==="",s=n?t:r+t.charAt(0).toUpperCase()+t.slice(1);if(s in qE.style||n){if(n&&t==="clipPath"&&HE.has(t))return;Pk.set(t,s),Rk(t,""+(n?"":"-")+pv(s))}}},DZ=function(t){return Rk(t,t)},Lk=function(t,e){e===void 0&&(e=!1);var r=e?HE:Pk;return r.has(t)||(LZ?OZ(t):DZ(t)),r.get(t)||t},FZ=["","X","Y","Z"],NZ=["translate","scale","rotate","skew","transformPerspective"],zE=NZ.reduce(function(t,e){return FZ.reduce(function(r,n){return r.push(e+n),r},t)},["x","y","z"]),kZ=zE.reduce(function(t,e){return t[e]=!0,t},{});function WE(t){return kZ[t]===!0}function VZ(t,e){return zE.indexOf(t)-zE.indexOf(e)}var BZ=new Set(["originX","originY","originZ"]);function UZ(t){return BZ.has(t)}var Ok=Kt(Kt({},Ct),{transform:Math.round}),HZ={color:Dr,backgroundColor:Dr,outlineColor:Dr,fill:Dr,stroke:Dr,borderColor:Dr,borderTopColor:Dr,borderRightColor:Dr,borderBottomColor:Dr,borderLeftColor:Dr,borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,size:it,top:it,right:it,bottom:it,left:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,rotate:ds,rotateX:ds,rotateY:ds,rotateZ:ds,scale:ed,scaleX:ed,scaleY:ed,scaleZ:ed,skew:ds,skewX:ds,skewY:ds,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,opacity:yh,originX:yE,originY:yE,originZ:it,zIndex:Ok,fillOpacity:yh,strokeOpacity:yh,numOctaves:Ok},GE=function(t){return HZ[t]},qZ=function(t,e){return e&&typeof t=="number"?e.transform(t):t},nd="scrollLeft",sd="scrollTop",Dk=new Set([nd,sd]),zZ=new Set([nd,sd,"transform"]),WZ={x:"translateX",y:"translateY",z:"translateZ"};function Fk(t){return typeof t=="function"}function GZ(t,e,r,n,s,o){o===void 0&&(o=!0);var a="",l=!1;r.sort(VZ);for(var c=r.length,h=0;h<c;h++){var f=r[h];a+=(WZ[f]||f)+"("+e[f]+") ",l=f==="z"?!0:l}return!l&&s?a+="translateZ(0)":a=a.trim(),Fk(t.transform)?a=t.transform(e,n?"":a):o&&n&&(a="none"),a}function $Z(t,e,r,n,s,o,a,l){e===void 0&&(e=!0),r===void 0&&(r={}),n===void 0&&(n={}),s===void 0&&(s={}),o===void 0&&(o=[]),a===void 0&&(a=!1),l===void 0&&(l=!0);var c=!0,h=!1,f=!1;for(var u in t){var m=t[u],d=GE(u),v=qZ(m,d);WE(u)?(h=!0,n[u]=v,o.push(u),c&&(d.default&&m!==d.default||!d.default&&m!==0)&&(c=!1)):UZ(u)?(s[u]=v,f=!0):(!zZ.has(u)||!Fk(v))&&(r[Lk(u,a)]=v)}return(h||typeof t.transform=="function")&&(r.transform=GZ(t,n,o,c,e,l)),f&&(r.transformOrigin=(s.originX||"50%")+" "+(s.originY||"50%")+" "+(s.originZ||0)),r}function $E(t){var e=t===void 0?{}:t,r=e.enableHardwareAcceleration,n=r===void 0?!0:r,s=e.isDashCase,o=s===void 0?!0:s,a=e.allowTransformNone,l=a===void 0?!0:a,c={},h={},f={},u=[];return function(m){return u.length=0,$Z(m,n,c,h,f,u,o,l),c}}function jZ(t,e){var r=e.element,n=e.preparseOutput,s=GE(t);if(WE(t))return s&&s.default||0;if(Dk.has(t))return r[t];var o=window.getComputedStyle(r,null).getPropertyValue(Lk(t,!0))||0;return n&&s&&s.test(o)&&s.parse?s.parse(o):o}function YZ(t,e,r){var n=e.element,s=e.buildStyles,o=e.hasCSSVariable;if(Object.assign(n.style,s(t)),o)for(var a=r.length,l=0;l<a;l++){var c=r[l];c.startsWith("--")&&n.style.setProperty(c,t[c])}r.indexOf(nd)!==-1&&(n[nd]=t[nd]),r.indexOf(sd)!==-1&&(n[sd]=t[sd])}var XZ=UE({onRead:jZ,onRender:YZ,uncachedValues:Dk});function ZZ(t,e){e===void 0&&(e={});var r=e.enableHardwareAcceleration,n=e.allowTransformNone,s=ra(e,["enableHardwareAcceleration","allowTransformNone"]);return XZ(Kt({element:t,buildStyles:$E({enableHardwareAcceleration:r,allowTransformNone:n}),preparseOutput:!0},s))}var Nk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),kk=.5,Vk=function(){return{style:{}}},jE=function(t,e){return it.transform(t*e)},QZ={x:0,y:0,width:0,height:0};function Bk(t,e,r){return typeof t=="string"?t:it.transform(e+r*t)}function KZ(t,e,r){return Bk(e,t.x,t.width)+" "+Bk(r,t.y,t.height)}var Uk={enableHardwareAcceleration:!1,isDashCase:!1};function JZ(t,e,r,n,s,o){e===void 0&&(e=QZ),n===void 0&&(n=$E(Uk)),s===void 0&&(s=Vk()),o===void 0&&(o=!0);var a=t.attrX,l=t.attrY,c=t.originX,h=t.originY,f=t.pathLength,u=t.pathSpacing,m=u===void 0?1:u,d=t.pathOffset,v=d===void 0?0:d,p=ra(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),g=n(p);for(var y in g)if(y==="transform")s.style.transform=g[y];else{var _=o&&!Nk.has(y)?pv(y):y;s[_]=g[y]}return(c!==void 0||h!==void 0||g.transform)&&(s.style.transformOrigin=KZ(e,c!==void 0?c:kk,h!==void 0?h:kk)),a!==void 0&&(s.x=a),l!==void 0&&(s.y=l),r!==void 0&&f!==void 0&&(s[o?"stroke-dashoffset":"strokeDashoffset"]=jE(-v,r),s[o?"stroke-dasharray":"strokeDasharray"]=jE(f,r)+" "+jE(m,r)),s}function eQ(t,e,r){r===void 0&&(r=!0);var n=Vk(),s=$E(Uk);return function(o){return JZ(o,t,e,s,n,r)}}var tQ=function(t){return typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()},rQ=function(t){try{return tQ(t)}catch(e){return{x:0,y:0,width:0,height:0}}},iQ=function(t){return t.tagName==="path"},nQ=UE({onRead:function(t,e){var r=e.element;if(t=Nk.has(t)?t:pv(t),WE(t)){var n=GE(t);return n&&n.default||0}else return r.getAttribute(t)},onRender:function(t,e){var r=e.element,n=e.buildAttrs,s=n(t);for(var o in s)o==="style"?Object.assign(r.style,s.style):r.setAttribute(o,s[o])}}),sQ=function(t){var e=rQ(t),r=iQ(t)&&t.getTotalLength?t.getTotalLength():void 0;return nQ({element:t,buildAttrs:eQ(e,r)})},oQ=UE({useCache:!1,onRead:function(t){return t==="scrollTop"?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,r=e===void 0?0:e,n=t.scrollLeft,s=n===void 0?0:n;return window.scrollTo(s,r)}}),YE=new WeakMap,aQ=function(t){return t instanceof HTMLElement||typeof t.click=="function"},lQ=function(t){return t instanceof SVGElement||"ownerSVGElement"in t},cQ=function(t,e){var r;return t===window?r=oQ(t):aQ(t)?r=ZZ(t,e):lQ(t)&&(r=sQ(t)),Ks(r!==void 0,"No valid node provided. Node must be HTMLElement, SVGElement or window."),YE.set(t,r),r},hQ=function(t,e){return YE.has(t)?YE.get(t):cQ(t,e)};function uQ(t,e){var r=typeof t=="string"?document.querySelector(t):t;return hQ(r,e)}var jr=uQ;var Hk=function(){function t(e){e===void 0&&(e={}),this.props=e}return t.prototype.applyMiddleware=function(e){return this.create(Kt({},this.props,{middleware:this.props.middleware?[e].concat(this.props.middleware):[e]}))},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.length===1?e[0]:kE.apply(void 0,e);return this.applyMiddleware(function(s){return function(o){return s(n(o))}})},t.prototype.while=function(e){return this.applyMiddleware(function(r,n){return function(s){return e(s)?r(s):n()}})},t.prototype.filter=function(e){return this.applyMiddleware(function(r){return function(n){return e(n)&&r(n)}})},t}(),qk=function(){function t(e,r){var n=e.middleware,s=e.onComplete,o=this;this.isActive=!0,this.update=function(a){o.observer.update&&o.updateObserver(a)},this.complete=function(){o.observer.complete&&o.isActive&&o.observer.complete(),o.onComplete&&o.onComplete(),o.isActive=!1},this.error=function(a){o.observer.error&&o.isActive&&o.observer.error(a),o.isActive=!1},this.observer=r,this.updateObserver=function(a){return r.update(a)},this.onComplete=s,r.update&&n&&n.length&&n.forEach(function(a){return o.updateObserver=a(o.updateObserver,o.complete)})}return t}(),zk=function(t,e,r){var n=e.middleware;return typeof t=="function"?new qk({middleware:n,onComplete:r},{update:t}):new qk({middleware:n,onComplete:r},t)},fQ=function(t){Kg(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.create=function(r){return new e(r)},e.prototype.start=function(r){r===void 0&&(r={});var n=!1,s={stop:function(){}},o=this.props,a=o.init,l=ra(o,["init"]),c=zk(r,l,function(){n=!0,s.stop()}),h=a(c);return s=h?Kt({},s,h):s,r.registerParent&&r.registerParent(s),n&&s.stop(),s},e}(Hk),ia=function(t){return new fQ({init:t})},dQ=function(t){Kg(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.subscribers=[],r}return e.prototype.complete=function(){this.subscribers.forEach(function(r){return r.complete()})},e.prototype.error=function(r){this.subscribers.forEach(function(n){return n.error(r)})},e.prototype.update=function(r){for(var n=0;n<this.subscribers.length;n++)this.subscribers[n].update(r)},e.prototype.subscribe=function(r){var n=this,s=zk(r,this.props);this.subscribers.push(s);var o={unsubscribe:function(){var a=n.subscribers.indexOf(s);a!==-1&&n.subscribers.splice(a,1)}};return o},e.prototype.stop=function(){this.parent&&this.parent.stop()},e.prototype.registerParent=function(r){this.stop(),this.parent=r},e}(Hk);var pQ=function(t){return Array.isArray(t)},mQ=function(t){var e=typeof t;return e==="string"||e==="number"},gQ=function(t){Kg(e,t);function e(r){var n=t.call(this,r)||this;return n.scheduleVelocityCheck=function(){return qi.postRender(n.velocityCheck)},n.velocityCheck=function(s){var o=s.timestamp;o!==n.lastUpdated&&(n.prev=n.current)},n.prev=n.current=r.value||0,mQ(n.current)?(n.updateCurrent=function(s){return n.current=s},n.getVelocityOfCurrent=function(){return n.getSingleVelocity(n.current,n.prev)}):pQ(n.current)?(n.updateCurrent=function(s){return n.current=s.slice()},n.getVelocityOfCurrent=function(){return n.getListVelocity()}):(n.updateCurrent=function(s){n.current={};for(var o in s)s.hasOwnProperty(o)&&(n.current[o]=s[o])},n.getVelocityOfCurrent=function(){return n.getMapVelocity()}),r.initialSubscription&&n.subscribe(r.initialSubscription),n}return e.prototype.create=function(r){return new e(r)},e.prototype.get=function(){return this.current},e.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},e.prototype.update=function(r){t.prototype.update.call(this,r),this.prev=this.current,this.updateCurrent(r);var n=ME(),s=n.delta,o=n.timestamp;this.timeDelta=s,this.lastUpdated=o,qi.postRender(this.scheduleVelocityCheck)},e.prototype.subscribe=function(r){var n=t.prototype.subscribe.call(this,r);return this.subscribers[this.subscribers.length-1].update(this.current),n},e.prototype.getSingleVelocity=function(r,n){return typeof r=="number"&&typeof n=="number"?dv(r-n,this.timeDelta):dv(parseFloat(r)-parseFloat(n),this.timeDelta)||0},e.prototype.getListVelocity=function(){var r=this;return this.current.map(function(n,s){return r.getSingleVelocity(n,r.prev[s])})},e.prototype.getMapVelocity=function(){var r={};for(var n in this.current)this.current.hasOwnProperty(n)&&(r[n]=this.getSingleVelocity(this.current[n],this.prev[n]));return r},e}(dQ),vQ=function(t,e){return new gQ({value:t,initialSubscription:e})},Wk=function(t){var e=t.getCount,r=t.getFirst,n=t.getOutput,s=t.mapApi,o=t.setProp,a=t.startActions;return function(l){return ia(function(c){var h=c.update,f=c.complete,u=c.error,m=e(l),d=n(),v=function(){return h(d)},p=0,g=a(l,function(y,_){var b=!1;return y.start({complete:function(){b||(b=!0,p++,p===m&&qi.update(f))},error:u,update:function(w){o(d,_,w),qi.update(v,!1,!0)}})});return Object.keys(r(g)).reduce(function(y,_){return y[_]=s(g,_),y},{})})}},yQ=Wk({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Object.keys(t).reduce(function(s,o){var a;return t[o][e]&&(r[0]&&r[0][o]!==void 0?s[o]=t[o][e](r[0][o]):s[o]=(a=t[o])[e].apply(a,r)),s},{})}},setProp:function(t,e,r){return t[e]=r},startActions:function(t,e){return Object.keys(t).reduce(function(r,n){return r[n]=e(t[n],n),r},{})}}),_Q=Wk({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.map(function(s,o){if(s[e])return Array.isArray(r[0])?s[e](r[0][o]):s[e].apply(s,r)})}},setProp:function(t,e,r){return t[e]=r},startActions:function(t,e){return t.map(function(r,n){return e(r,n)})}}),bQ=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _Q(t)},wQ=function(t){var e=Object.keys(t),r=function(o,a){return o!==void 0&&!t[a](o)},n=function(o){return e.reduce(function(a,l){return r(o[l],l)&&a.push(l),a},[])},s=function(o){return o&&e.some(function(a){return r(o[a],a)})};return{getVectorKeys:n,testVectorProps:s}},SQ=[it,fl,ds,ok,ak],XE=function(t){return SQ.find(function(e){return e.test(t)})},EQ=function(t){return Boolean(XE(t))},Gk=function(t,e){return t(e)},xQ=function(t){return function(e,r){return e[r]=e[r][t],e}},TQ=function(t,e,r){var n=r[0],s=e[n].map(function(o,a){var l=r.reduce(xQ(a),Kt({},e));return ZE(o)(t,l)});return bQ.apply(void 0,s)},AQ=function(t){return function(e,r){return e[r]=e[r][t],e}},MQ=function(t,e,r){var n=r[0],s=Object.keys(e[n]).reduce(function(o,a){var l=r.reduce(AQ(a),Kt({},e));return o[a]=ZE(e[n][a])(t,l),o},{});return yQ(s)},CQ=function(t,e){var r=e.from,n=e.to,s=ra(e,["from","to"]),o=XE(r)||XE(n),a=o.transform,l=o.parse;return t(Kt({},s,{from:typeof r=="string"?l(r):r,to:typeof n=="string"?l(n):n})).pipe(a)},$k=function(t){return function(e,r){var n=r.from,s=r.to,o=ra(r,["from","to"]);return e(Kt({},o,{from:0,to:1})).pipe(t(n,s))}},PQ=$k(NE),IQ=$k(VE),od=function(t,e){var r=wQ(e),n=r.testVectorProps,s=r.getVectorKeys,o=function(a){var l=n(a);if(!l)return t(a);var c=s(a),h=c[0],f=a[h];return ZE(f)(t,a,c)};return o},ZE=function(t){return typeof t=="number"?Gk:Array.isArray(t)?TQ:EQ(t)?CQ:Dr.test(t)?PQ:dl.test(t)?IQ:typeof t=="object"?MQ:Gk},RQ=function(t){return t===void 0&&(t={}),ia(function(e){var r=e.complete,n=e.update,s=t.velocity,o=s===void 0?0:s,a=t.from,l=a===void 0?0:a,c=t.power,h=c===void 0?.8:c,f=t.timeConstant,u=f===void 0?350:f,m=t.restDelta,d=m===void 0?.5:m,v=t.modifyTarget,p=0,g=h*o,y=Math.round(l+g),_=typeof v=="undefined"?y:v(y),b=qi.update(function(w){var S=w.delta;p+=S;var E=-g*Math.exp(-p/u),x=E>d||E<-d,T=x?_+E:_;n(T),x||(Js.update(b),r())},!0);return{stop:function(){return Js.update(b)}}})},LQ=od(RQ,{from:Ct.test,modifyTarget:function(t){return typeof t=="function"},velocity:Ct.test}),OQ=function(t){return t===void 0&&(t={}),ia(function(e){var r=e.update,n=e.complete,s=t.velocity,o=s===void 0?0:s,a=t.from,l=a===void 0?0:a,c=t.to,h=c===void 0?0:c,f=t.stiffness,u=f===void 0?100:f,m=t.damping,d=m===void 0?10:m,v=t.mass,p=v===void 0?1:v,g=t.restSpeed,y=g===void 0?.01:g,_=t.restDelta,b=_===void 0?.01:_,w=o?-(o/1e3):0,S=0,E=h-l,x=l,T=x,A=qi.update(function(P){var z=P.delta;S+=z;var V=d/(2*Math.sqrt(u*p)),L=Math.sqrt(u/p)/1e3;if(T=x,V<1){var O=Math.exp(-V*L*S),k=L*Math.sqrt(1-V*V);x=h-O*((w+V*L*E)/k*Math.sin(k*S)+E*Math.cos(k*S))}else{var O=Math.exp(-L*S);x=h-O*(E+(w+L*E)*S)}o=dv(x-T,z);var X=Math.abs(o)<=y,R=Math.abs(h-x)<=b;X&&R?(x=h,r(x),Js.update(A),n()):r(x)},!0);return{stop:function(){return Js.update(A)}}})},DQ=od(OQ,{from:Ct.test,to:Ct.test,stiffness:Ct.test,damping:Ct.test,mass:Ct.test,velocity:Ct.test}),FQ=function(t){var e=t.from,r=e===void 0?0:e,n=t.velocity,s=n===void 0?0:n,o=t.min,a=t.max,l=t.power,c=l===void 0?.8:l,h=t.timeConstant,f=h===void 0?700:h,u=t.bounceStiffness,m=u===void 0?500:u,d=t.bounceDamping,v=d===void 0?10:d,p=t.restDelta,g=p===void 0?1:p,y=t.modifyTarget;return ia(function(_){var b=_.update,w=_.complete,S=vQ(r),E,x=!1,T=function(k){return o!==void 0&&k<=o},A=function(k){return a!==void 0&&k>=a},P=function(k){return T(k)||A(k)},z=function(k,X){return T(k)&&X<0||A(k)&&X>0},V=function(k,X){E&&E.stop(),E=k.start({update:function(R){return S.update(R)},complete:function(){if(X){X();return}w()}})},L=function(k){x=!0,V(DQ(Kt({},k,{to:T(k.from)?o:a,stiffness:m,damping:v,restDelta:g})))};if(S.subscribe(function(k){b(k);var X=S.getVelocity();E&&!x&&z(k,X)&&L({from:k,velocity:X})}),P(r))L({from:r,velocity:s});else if(s!==0){var O=LQ({from:r,velocity:s,timeConstant:f,power:c,restDelta:P(r)?20:g,modifyTarget:y});V(O,function(){var k=S.get();P(k)?L({from:k,velocity:S.getVelocity()}):w()})}else w();return{stop:function(){return E&&E.stop()}}})},swe=od(FQ,{from:Ct.test,velocity:Ct.test,min:Ct.test,max:Ct.test,damping:Ct.test,stiffness:Ct.test,modifyTarget:function(t){return typeof t=="function"}});var NQ=function(t){var e=t.from,r=e===void 0?0:e,n=t.to,s=n===void 0?1:n,o=t.ease,a=o===void 0?nv:o,l=t.reverseEase,c=l===void 0?!1:l;return c&&(a=CE(a)),ia(function(h){var f=h.update;return{seek:function(u){return f(u)}}}).pipe(a,function(h){return xh(r,s,h)})},jk=od(NQ,{ease:function(t){return typeof t=="function"},from:Ct.test,to:Ct.test}),kQ=uv(0,1),Yr=function(t){return t===void 0&&(t={}),ia(function(e){var r=e.update,n=e.complete,s=t.duration,o=s===void 0?300:s,a=t.ease,l=a===void 0?ov:a,c=t.flip,h=c===void 0?0:c,f=t.loop,u=f===void 0?0:f,m=t.yoyo,d=m===void 0?0:m,v=t.repeatDelay,p=v===void 0?0:v,g=t.from,y=g===void 0?0:g,_=t.to,b=_===void 0?1:_,w=t.elapsed,S=w===void 0?0:w,E=t.flipCount,x=E===void 0?0:E,T=t.yoyoCount,A=T===void 0?0:T,P=t.loopCount,z=P===void 0?0:P,V=jk({from:y,to:b,ease:l}).start(r),L=0,O,k=!1,X=function(oe){oe===void 0&&(oe=!1);var N;N=[b,y],y=N[0],b=N[1],V=jk({from:y,to:b,ease:l,reverseEase:oe}).start(r)},R=function(){var oe=k&&S>o+p;return oe?oe&&!u&&!h&&!d?!0:(S=o-(S-p),u&&z<u?(z++,!1):h&&x<h?(x++,X(),!1):d&&A<d?(A++,X(A%2!=0),!1):!0):!1},U=function(){L=kQ(xk(0,o,S)),V.seek(L)},q=function(){k=!0,O=qi.update(function(oe){var N=oe.delta;S+=N,U(),R()&&(Js.update(O),n&&qi.update(n,!1,!0))},!0)},Z=function(){k=!1,O&&Js.update(O)};return q(),{isActive:function(){return k},getElapsed:function(){return uv(0,o,S)},getProgress:function(){return L},stop:function(){Z()},pause:function(){return Z(),this},resume:function(){return k||q(),this},seek:function(oe){return S=xh(0,o,oe),qi.update(U,!1,!0),this},reverse:function(){return X(),this}}})};var VQ=function(t){return t===void 0&&(t={}),ia(function(e){var r=e.complete,n=e.update,s=t.acceleration,o=s===void 0?0:s,a=t.friction,l=a===void 0?0:a,c=t.velocity,h=c===void 0?0:c,f=t.springStrength,u=t.to,m=t.restSpeed,d=m===void 0?.001:m,v=t.from,p=v===void 0?0:v,g=p,y=qi.update(function(_){var b=_.delta,w=Math.max(b,16);if(o&&(h+=fv(o,w)),l&&(h*=Math.pow(1-l,w/100)),f!==void 0&&u!==void 0){var S=u-g;h+=S*fv(f,w)}g+=fv(h,w),n(g);var E=d!==!1&&(!h||Math.abs(h)<=d);E&&(Js.update(y),r())},!0);return{set:function(_){return g=_,this},setAcceleration:function(_){return o=_,this},setFriction:function(_){return l=_,this},setSpringStrength:function(_){return f=_,this},setSpringTarget:function(_){return u=_,this},setVelocity:function(_){return h=_,this},stop:function(){return Js.update(y)}}})},owe=od(VQ,{acceleration:Ct.test,friction:Ct.test,velocity:Ct.test,from:Ct.test,to:Ct.test,springStrength:Ct.test});var Yk=function(t,e,r){return ia(function(n){var s=n.update,o=e.split(" ").map(function(a){return t.addEventListener(a,s,r),a});return{stop:function(){return o.forEach(function(a){return t.removeEventListener(a,s,r)})}}})},QE=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},Xk=function(t,e){return e===void 0&&(e=QE()),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e},Zk=[QE()],BQ=!1;typeof document!="undefined"&&(Qk=function(t){var e=t.touches;BQ=!0;var r=e.length;Zk.length=0;for(var n=0;n<r;n++){var s=e[n];Zk.push(Xk(s))}},Yk(document,"touchstart touchmove",{passive:!0,capture:!0}).start(Qk));var Qk;var UQ=QE(),HQ=!1;typeof document!="undefined"&&(Kk=function(t){HQ=!0,Xk(t,UQ)},Yk(document,"mousedown mousemove",!0).start(Kk));var Kk;var qQ={EASE:In.cubicBezier(.1,0,.2,1),INOUT:In.easeInOut,IN:In.cubicBezier(1,0,.4,1)},Rn=qQ;var Jk={CTA_ACTIVE:"active"},e3=class{constructor({device:e,previousDevice:r}){this.device=e,this.previousDevice=r}run(){return new Promise((e,r)=>{se.mutate(()=>{this.device.rootElement.style.backgroundColor=this.device.background_color});let n=200;window.setTimeout(()=>{if(window.setTimeout(()=>{e()},1200),this.device.ctaElement&&Yr({from:{opacity:0},to:{opacity:1},ease:Rn.IN,duration:10}).start({update:s=>jr(this.device.ctaElement).set(s),complete:()=>{this.device.ctaElement.classList.add(Jk.CTA_ACTIVE)}}),this.previousDevice&&this.previousDevice.ctaElement&&Yr({from:{opacity:1},to:{opacity:0},ease:Rn.IN,duration:10}).start({update:s=>jr(this.previousDevice.ctaElement).set(s),complete:()=>{this.previousDevice.ctaElement.classList.remove(Jk.CTA_ACTIVE)}}),window.setTimeout(()=>{Yr({from:{opacity:0,y:"150px"},to:{opacity:1,y:"0px"},ease:Rn.IN,duration:500}).start({update:s=>jr(this.device.canvasElement).set(s)})},700),this.device.titleInnerElement){this.device.titleInnerElement.style.opacity=1;let s="";Yr({from:"100%",to:"0%",duration:500,ease:Rn.IN}).start({update:o=>{s=`polygon(0 ${o}, 100% ${o}, 100% 100%, 0% 100%)`,se.mutate(()=>{this.device.titleInnerElement.style.clipPath=s})},complete:()=>{window.setTimeout(()=>{Yr({from:"100%",to:"0%",duration:500,ease:Rn.IN}).start({update:o=>{s=`polygon(0 0, 100% 0, 100% ${o}, 0% ${o})`,se.mutate(()=>{this.device.titleInnerElement.style.clipPath=s})}})},200),window.setTimeout(()=>{this.device.titleInnerElement.style.opacity=0},701)}})}},n)})}},t3=e3;var r3=class{constructor({root:e,device:r,icon:n}){this.root=e,this.device=r,this.icon=n,this.started=!1}in(e){return new Promise((r,n)=>{if(!e||this.started){r();return}if(this.started=!0,se.mutate(()=>{this.device.rootElement.style.backgroundColor=this.device.background_color,this.root.classList.add("active")}),!this.device.config.add3dAnimation){r();return}this.device.config.add3dAnimation&&Yr({from:{opacity:0,y:"100px"},to:{opacity:1,y:"0px"},ease:Rn.EASE,duration:600}).start({update:s=>jr(this.icon).set(s),complete:()=>{r()}})})}out(){window.setTimeout(()=>{let e=100,r=0;this.device.dotElements.forEach(s=>{window.setTimeout(()=>{Yr({from:{opacity:0,y:"30px"},to:{opacity:1,y:"0px"},ease:Rn.IN,duration:300}).start({update:o=>jr(s).set(o)})},r),r+=e});let n=this.root.querySelector("[mqn-cta-group]");window.setTimeout(()=>{Yr({from:{opacity:0,y:"30px"},to:{opacity:1,y:"0px"},ease:Rn.IN,duration:300}).start({update:s=>jr(n).set(s)})},r+e)},400),this.device.config.add3dAnimation&&Yr({from:{opacity:1,y:"0%"},to:{opacity:0,y:"-300px"},ease:Rn.IN,duration:600}).start({update:e=>jr(this.icon).set(e),complete:()=>{this.icon.style.display="none"}})}},i3=r3;var n3=class{constructor({device:e}){this.device=e}run(){return new Promise((e,r)=>{Yr({from:{opacity:1},to:{opacity:0},ease:In.easeInOut,duration:300}).start({update:n=>jr(this.device.canvasElement).set(n),complete:e})})}},s3=n3;var c3=re(Nn());var o3=re(Nn());var a3=class{constructor({dotsElement:e}){this.dotsElement=e,this.raf=new o3.default(this.loop_.bind(this)),this.rl_=se.getDestroyableInstance(),this.device,this.target=0,this.current=0}setActive(e){this.device!==e&&this.exit(this.device),this.device=e,this.device.imageLoader.loaded?this.enterWithoutLoading():(this.target=0,this.current=0,this.raf.start())}loop_(){this.updateProgressBar_()}enterWithoutLoading(){Yr({from:{opacity:0},to:{opacity:1},ease:In.easeInOut,duration:300}).start({update:e=>jr(this.device.dotCircleElement).set(e)})}updateProgressBar_(){let e=this.device.imageLoader,r=this.device.dotCircleElement;this.target=e.percentLoaded,this.current+=(this.target-this.current)*.3;let n=8,s=sr.circumference(n)*(1-this.current);this.current>=.99&&this.raf.stop(),this.rl_.mutate(()=>{r.style.strokeDasharray=sr.circumference(n),r.style.strokeDashoffset=s,r.style.stroke=this.device.dot_border_color})}exit(e){!e||Yr({from:{opacity:1},to:{opacity:0},ease:In.easeInOut,duration:300}).start({update:r=>jr(e.dotCircleElement).set(r)})}dispose(){this.raf.stop(),this.rl_.destroy()}},l3=a3;var KE=Fl(),h3=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.element=r[0],this.rl_=se.getDestroyableInstance(),this.$scope=n,this.isMobile=window.DeviceOrientationEvent&&KE.isMobile(),this.isMobileWidth,this.isIE=KE.isIE()||KE.isIEorEdge(),this.devices,this.started=!1,this.frame=0,this.currentDegree=0,this.targetDegree=0,this.lerpSpeed=.4,this.hoverOffset=null,this.rotationSequence_,this.rotationSequenceIndex_=0,this.rotationSequenceCompleteCallback,this.index=null,this.resize(),window.MQN_RESIZER&&window.MQN_RESIZER.addListener(this.resize.bind(this)),this.raf=new c3.default(this.loop_.bind(this)),this.dotsController=new l3({dotsElement:this.element.querySelector("[mqn-dots]")}),n.$on("$destroy",()=>{this.dispose_()})}init(e,r){this.devices=e,this.config=r,this.devices.forEach(n=>{if(n.rootElement=this.element,n.deviceElement=this.element.querySelector(`[mqn-device-${n.id}]`),n.dotCircleElement=this.element.querySelector(`[mqn-dot-circle-${n.id}]`),n.dotElements=Array.from(this.element.querySelectorAll("[mqn-dot]")),n.canvasElement=this.element.querySelector(`[mqn-device-canvas-${n.id}]`),n.ctaElement=this.element.querySelector(`[mqn-cta-${n.id}]`),n.titleElement=this.element.querySelector(`[mqn-title-${n.id}]`),n.titleInnerElement=this.element.querySelector(`[mqn-title-inner-${n.id}]`),n.imageSources=JSON.parse(n.canvasElement.getAttribute("data-src")),n.config=this.config,n.skip_frames){let s=n.sequence_count;n.sequence_count=Math.floor(n.sequence_count/n.skip_frames);let o=s/n.sequence_count,a=0,l=null,c=[];for(;a<s;){let h=Math.floor(a);a+=o,l!==h&&(c.push(n.imageSources[h]),l=h)}n.imageSources=c}n.reverseSource&&(n.imageSources=n.imageSources.reverse()),n.imageLoader=new MN(n,n.imageSources,n.fife_compression),n.renderer=new IN(n.canvasElement,n.imageLoader)}),this.introInstance=new i3({root:this.element,device:this.devices[0],icon:this.element.querySelector("[mqn-3d-icon]")}),r.loadOnEvent?this.$scope.$on(r.loadOnEvent,(n,s)=>{this.preload()}):window.addEventListener("scroll",this.preload.bind(this),{passive:!0,once:!0}),r.startOnEvent?this.$scope.$on(r.startOnEvent,(n,s)=>{this.start()}):ht.elementInViewWatcherFirstChangeOnly(this.element,{threshold:.1},(n,s,o)=>{s.isIntersecting&&(this.start(),o())}),r.exitOnEvent&&this.$scope.$on(r.exitOnEvent,(n,s)=>{this.started=!1})}preload(){this.dotsController.setActive(this.devices[0]),this.devices[0].imageLoader.loadAll(),this.introInstance.in(!0)}start(){this.started||(this.raf.start(),this.loadOnScroll&&window.removeEventListener("scroll",this.preload.bind(this)),this.setupDragger_(),this.enter(0),this.started=!0)}updateContainerHeight_(){this.rl_.mutate(()=>{let e=this.element.querySelector("[mqn-canvas-sizer]");this.element.style.height=`${e.offsetHeight}px`})}resize(){this.isMobileWidth=window.innerWidth<768,this.updateContainerHeight_(),this.config&&this.setSensitivities_()}setSensitivities_(){this.sensitivity=this.config.sensitivity||.2,this.hoverSensitivity=this.config.hoverSensitivity||.02,this.gammaSensitivity=this.config.gammaSensitivity||.8,this.isMobileWidth&&(this.sensitivity=this.config.mobileSensitivity||this.sensitivity)}getActiveDevice(){return this.index!==null&&this.devices[this.index]}setupDragger_(){this.setSensitivities_(),this.elementDragger=new DN({element:this.config.dragBody?document.body:this.element,invert:!0,persistDrag:!0,enabled:!1,mouseOver:e=>this.handleMouseOverUpdates_(e),update:e=>this.handleDraggerUpdates_(e),maxLeft:this.config.maxLeft,maxRight:this.config.maxRight})}handleMouseOverUpdates_(e){let r=this.getActiveDevice();if(!r||this.rotationSequence_)return;this.lerpSpeed=this.config.hoverLerpSpeed||.4;let n=r.imageLoader.totalCount-1,s=this.config.hoverInvert?-e.hover.x:e.hover.x,o=Math.round(s*this.hoverSensitivity%n);this.isMobile&&(s=this.config.hoverInvert?-e.gamma:e.gamma,o=Math.round(s*this.gammaSensitivity%n));let a=sr.normalizeValue(o,n),l=sr.convertFrameToDegree(a,n),c=this.config.hoverRange||15;l=sr.clampAngle(l,0,c,360-c),this.hoverOffset=l,r.startCenter&&(l+=180),this.setDeviceRotationTo(l)}handleDraggerUpdates_(e){let r=this.getActiveDevice();if(!r||this.rotationSequence_)return;this.lerpSpeed=this.config.lerpSpeed||.4;let n=r.imageLoader.totalCount-1,s=this.config.invert?e.position.x:-e.position.x,o=Math.round(s*this.sensitivity%n),a=sr.normalizeValue(o,n),l=sr.convertFrameToDegree(a,n);r.startCenter&&(l-=180),this.hoverOffset!==null&&(l+=this.hoverOffset),this.setDeviceRotationTo(l)}loop_(){if(!this.getActiveDevice())return;this.updateDeviceRotation_();let r=sr.degree(Math.abs(sr.angleDistance(sr.radian(this.currentDegree),sr.radian(this.targetDegree))));if(this.rotationSequence_&&sr.fixDigits(sr.degree(r),2)<=.01){let n=this.rotationSequence_[this.rotationSequenceIndex_];if(!n)this.rotationSequenceCompleteCallback();else{let s=n.degree;this.lerpSpeed=n.lerpSpeed,this.setDeviceRotationTo(s),this.rotationSequenceIndex_++}}}playRotationAnimation(e){return new Promise((r,n)=>{this.rotationSequence_=e,this.rotationSequenceIndex_=0,this.elementDragger.enable(!1),this.rotationSequenceCompleteCallback=()=>{this.rotationSequence_=null,this.rotationSequenceCompleteCallback=null,this.rotationSequenceIndex_=0,this.elementDragger.enable(!0),r()}})}setDeviceRotationTo(e,r){e=e<=-1?360+e:e,e=e>360?e-360:e;let n=e-this.currentDegree;e!=this.currentDegree&&(this.targetDegree=e,this.lerpSpeed=r||this.lerpSpeed)}updateDeviceRotation_(){let e=this.getActiveDevice(),r=e.imageLoader.totalCount-1,n=this.currentDegree,s=sr.degree(sr.angleDistance(sr.radian(this.currentDegree),sr.radian(this.targetDegree)));this.currentDegree=this.currentDegree+s*this.lerpSpeed,this.currentDegree=sr.normalizeValue(this.currentDegree,360),this.frame=sr.convertDegreeToFrame(this.currentDegree,r);let o=sr.normalizeValue(this.frame,r),a=Math.abs(Math.round(e.renderer.index-o));this.config.infinite?e.renderer.render(o):a<r-10?(e.renderer.render(o),this.elementDragger.unlock()):this.elementDragger.lock()}handleClick(e){ul.trackCarouselNavigationClick(this.element,e),this.enter(e)}enter(e){if(e==this.index)return;let r=this.getActiveDevice(),n=this.index==null;n&&(this.devices.forEach(s=>{s.renderer.resize()}),this.resize()),this.element.classList.add("transitioning"),this.elementDragger.enable(!1),this.exit_(this.index).then(()=>{this.introInstance.in(n).then(()=>{let s=this.lerpSpeed;this.lerpSpeed=s,this.index=e;let o=this.getActiveDevice();this.dotsController.setActive(o),this.setDeviceRotationTo(0,1),o.imageLoader.loadAll().then(()=>{if(o.startCenter){let a=o.imageLoader.totalCount-1;this.frame=a/2,this.targetDegree=180,this.currentDegree=180}n&&this.introInstance.out(),new t3({device:o,previousDevice:r}).run().then(()=>{if(this.element.classList.remove("transitioning"),!(o.sequence_count<=1)){if(o.noIntro){this.elementDragger.enable(!0);return}o.introAnimation?this.playRotationAnimation(o.introAnimation):this.playRotationAnimation([{degree:0,lerpSpeed:.6},{degree:20,lerpSpeed:.6},{degree:-20,lerpSpeed:.6}])}})})})})}exit_(e){return new Promise((r,n)=>{let s=this.devices[e];if(e==null||!s){r();return}new s3({device:s}).run().then(()=>{r()})})}dispose_(){this.devices&&this.devices.forEach(e=>{e.imageLoader.dispose()}),this.dotsController.dispose(),this.elementDragger&&this.elementDragger.dispose(),this.rl_.destroy(),this.raf.stop()}},u3=h3;var JE=re(dn());var ex=re(Ye());var f3=class{static get $inject(){return["$rootScope","$element","$scope","$compile","$window"]}constructor(e,r,n,s,o){this.el=r[0],this.$element=r,this.$window=o,this.initialized=!1,this.gallery=null,this.slick=null,this.index=0,this.jQuery=window.jQuery,this.$scope=n,this.$compile=s,this.$rootScope=e,this.options=null,this.id=null,this.autoplay=null,this.inview=!1,this.inviewInit=!1,this.paused=!1,this.inviewImages=!1,this.READY_CLASS=j.mqnCssName("mqn2-bcs"),this.PAUSE_CLASS=j.mqnCssName("mqn2-bkv"),this.deepLinked=!1,this.INVIEW_POSITION_EVENT_CLASS=j.mqnCssName("mqn2-c47"),this.INVIEW_EVENT_CLASS=j.mqnCssName("mqn2-c46"),this.slidesData=null,this.timer=null,this.elapsedTime=null,this.keyboardNavigationWatcher=new Qf,n.$on("$destroy",()=>{this.dispose_()})}preInit_(){}init(e){this.preInit_&&this.preInit_();let r=document.getElementById(e.galleryRootId);if(!this.el)return;r||(r=this.el.querySelector(["[mqn-slick-gallery]"])),this.waitForEvent=e.waitForEvent,this.delayStartDuration=e.delayStartDuration||0,this.delayStartOnlyDesktop=e.delayStartOnlyDesktop,this.restartOnOutView=e.restartOnOutView||!0,this.removeSlickAria=e.removeSlickAria,this.index=0,this.options=e,this.id=this.options.id,this.autoplay=e.autoplay,this.gallery=this.jQuery(r),this.slidesData=e.slides||!1;let n=this.jQuery(this.el).closest(`.${j.mqnCssName("mqn2-aaa")}`),s=null;if(n&&(s=n.attr("id")),s){let a=new URL(window.location.href).searchParams.get(s);a&&(this.deepLinked=!0,this.index=parseInt(a-1),this.autoplay=!1,this.$window.onload=()=>{let l=this.jQuery(`#${s}`).offset(),c=0;if(l){c=parseInt(l.top);let h=document.querySelector("[pdp-bar]");h&&(c-=h.offsetHeight)}window.setTimeout(()=>{this.jQuery("html, body").scrollTop(c)})})}window.setTimeout(()=>this.createSlick_()),this.options.isInModal&&this.$scope.$on("MQN2_MODAL_INIT",()=>{window.setTimeout(()=>{this.slick.reinit(),this.$scope.$$phase||this.$scope.$apply()})}),this.keyboardNavigationWatcher.on(ai.KEYBOARD,()=>{this.autoplay&&this.pause(this.index),this.autoplay=!1})}getSetupDelayStartDuration_(){let e=this.delayStartDuration||0;return this.delayStartOnlyDesktop&&!Te.IS_DESKTOP()&&(e=0),e}pause(e){if(ex.is.defined(e)&&+e!=+this.index||this.paused)return;this.clearNextTimer();let r=new Date;this.timer&&(this.elapsedTime+=r.getTime()-this.timer.getTime()),this.paused=!0,this.gallery.slick("slickPause"),this.el.classList.add(this.PAUSE_CLASS)}unpause(e){if(ex.is.defined(e)&&+e!=+this.index||!this.paused)return;this.paused=!1,this.timer=new Date,this.clearNextTimer();let r=this.slick.options.autoplaySpeed-this.elapsedTime;this.runNext(r),this.el.classList.remove(this.PAUSE_CLASS)}runNext(e){this.clearNextTimer(),!!this.autoplay&&(e||(e=+this.options.autoplaySpeed),this.nextTimeout=window.setTimeout(()=>{this.gallery.slick("slickNext")},e))}clearNextTimer(){window.clearTimeout(this.nextTimeout)}start(e){this.deepLinked?this.gallery.slick("slickGoTo",this.index):(this.gallery.slick("slickGoTo",0,!0),window.setTimeout(()=>{this.el.classList.add(this.INVIEW_POSITION_EVENT_CLASS),this.index=0,this.$scope.$apply(),this.paused=!1,this.elapsedTime=0,this.timer=new Date,this.gallery.slick("slickGoTo",this.index),this.autoplay&&this.runNext()},e))}setupInview_(){let e=this.getSetupDelayStartDuration_();this.gallery.slick("slickPause",this.index),this.el.classList.remove(this.INVIEW_POSITION_EVENT_CLASS),this.el.classList.remove(this.INVIEW_EVENT_CLASS),this.waitForEvent&&this.$scope.$on("mqn-inview-in",(r,n)=>{n.inview&&this.waitForEvent?this.start(0):(this.gallery.slick("slickPause",this.index),this.clearNextTimer(),this.el.classList.remove(this.INVIEW_POSITION_EVENT_CLASS)),window.setTimeout(()=>{this.$scope.$apply()}),!this.inviewInit&&n.inview&&(this.trackCarouselAnalyticsEvent(this.index),this.inviewInit=!0)}),this.inviewDipose=ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:0},(r,n,s)=>{if(this.inview=n.isIntersecting,(!this.inview||e)&&!this.deepLinked&&(this.gallery.slick("slickGoTo",0),this.gallery.slick("slickPause",0),this.clearNextTimer(),this.waitForEvent&&this.el.classList.remove(this.INVIEW_POSITION_EVENT_CLASS),!this.waitForEvent&&this.el.classList.remove(this.INVIEW_EVENT_CLASS),this.index=0,window.setTimeout(()=>{this.stopVideos_()})),this.inview){let o=this.slick.$slides[this.index];this.playVideoInSlide_(o)}this.inview&&!this.waitForEvent&&(this.el.classList.add(this.INVIEW_EVENT_CLASS),this.start(e)),window.setTimeout(()=>{this.$scope.$apply()}),!this.inviewInit&&this.inview&&(this.trackCarouselAnalyticsEvent(this.index),this.inviewInit=!0),this.$rootScope.$broadcast("MQN_SLICK_INVIEW",{id:this.id,ctrl:this,inview:this.inview})}).done,this.inviewImagesDipose=ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:0,rootMargin:"0px 0px 300% 0px"},(r,n,s)=>{this.inviewImages=n.isIntersecting,n.isIntersecting&&s(),this.$scope.$apply()}).done}createSlick_(){this.initialized||(this.timer=new Date,this.gallery.on("init",(e,r,n)=>{this.stopVideos_(),window.setTimeout(()=>{this.slick=r,this.initialized=!0,this.deepLinked||(this.index=r.currentSlide),this.slideCount=r.slideCount,this.updateSlideData_(),this.recompileClonedSlides_(),this.setupInview_(),this.elapsedTime=0,this.timer=new Date,this.gallery.slick("slickPause");let s=r.$slides[this.index];this.stopVideos_(s),this.$scope.$apply(),this.$rootScope.$broadcast("MQN_SLICK_INITIALIZED",{id:this.id,ctrl:this})})}),this.gallery.on("beforeChange",(e,r,n)=>{window.setTimeout(()=>{this.clearNextTimer(),this.slick=r,this.index=r.currentSlide;let s=r.$slides[this.index];this.trackCarouselAnalyticsEvent(this.index),this.updateSlideData_(),this.playVideoInSlide_(s),this.elapsedTime=0,this.timer=new Date,s=r.$slides[this.index],this.stopVideos_(s),this.recompileClonedSlides_(),this.$scope.$apply(),this.fixSlickAccessibility(),this.$rootScope.$broadcast("MQN_SLICK_BEFORE_CHANGE",{id:this.id,ctrl:this})})}),this.gallery.on("afterChange",(e,r)=>{this.autoplay&&!this.paused&&this.runNext(),!this.infinite&&this.isLast()&&(this.index=r.currentSlide,this.autoplay=!1,this.clearNextTimer(),this.gallery.slick("slickPause")),this.$rootScope.$broadcast("MQN_SLICK_AFTER_CHANGE",{id:this.id,ctrl:this})}),this.options.autoplay=!1,this.options.rows||(this.options.rows=0),this.gallery.not(".slick-initialized").slick(this.options),this.gallery.addClass(this.READY_CLASS),this.postCreateSlick_&&this.postCreateSlick_())}postCreateSlick_(){}updateSlideData_(){this.currentSlide=this.slidesData[this.index]}trackCarouselAnalyticsEvent(e){}playVideoInSlide_(e){if(this.options.no_video_control)return;[...e.querySelectorAll("video")].forEach(n=>{n.hasAttribute("mqn-video-slick-no-play")||(n.currentTime=0,this.isPlaying(n)||n.play().then(()=>{}).catch(o=>{}))})}stopVideos_(e){if(this.options.no_video_control)return;let r=e?[...e.querySelectorAll("video")]:[];[...this.el.querySelectorAll("video")].forEach(s=>{r.includes(s)||s.hasAttribute("mqn-video-slick-no-stop")||window.setTimeout(()=>{s.currentTime=0,s.pause()},100)})}isPlaying(e){return!e.paused&&!e.ended&&e.readyState>2}recompileClonedSlides_(){this.cloned=[...this.el.querySelectorAll(".slick-cloned:not(.slick-cloned-lazycomplete)")],this.cloned.forEach(e=>{this.$compile(e)(this.$scope),e.classList.add("slick-cloned-lazyimagecomplete")})}fixSlickAccessibility(){this.removeSlickAria&&Array.from(this.slick.$slides).forEach(e=>{e.setAttribute("aria-hidden",!1)})}canLoadImages(){return this.inviewImages&&this.initialized}getCurrentSlideIndex(){if(!!this.galleryEl)return this.gallery.slick("slickCurrentSlide")}goToIndex(e,r="click",n=!1){if(+e!==this.index)return this.clearNextTimer(),this.gallery.hasClass("slick-initialized")&&(this.clearNextTimer(),this.gallery.slick("slickPause"),this.gallery.slick("slickGoTo",e),r&&this.triggerClickEvent(r),window.setTimeout(()=>this.$scope.$apply())),!0}next(){this.gallery.hasClass("slick-initialized")&&(this.clearNextTimer(),this.gallery.slick("slickPause"),this.gallery.slick("slickNext"),this.triggerClickEvent("next"),window.setTimeout(()=>this.$scope.$apply()))}prev(){this.gallery.hasClass("slick-initialized")&&(this.clearNextTimer(),this.gallery.slick("slickPause"),this.gallery.slick("slickPrev"),this.triggerClickEvent("prev"),window.setTimeout(()=>this.$scope.$apply()))}triggerClickEvent(e="click"){let r=this.gallery.slick("slickCurrentSlide"),n=JE.default.getClosestTrackingId(this.el),s=mt.getClosestMqnFrame(this.el),o=s.getAttribute("mqn-autotrack-product"),a=s.getAttribute("mqn-autotrack-partial-type");(e!=="prev"||e!=="next")&&(e=e+"-"+r);let l={event:"module interaction",eventCategory:"module click",eventAction:n,eventLabel:e,pageName:window.location.pathname,product:o,moduleName:n,moduleType:a,nonInteraction:"0"};JE.default.trackDataLayer(l)}isFirst(){if(!this.slick||this.slick.options.infinite)return!1;let e=this.gallery.slick("slickCurrentSlide"),r=this.slick.options.slidesToScroll||1;return r>1?Math.floor(e/r)==0:e==0}isLast(){if(!this.slick||this.slick.options.infinite)return!1;let e=this.gallery.slick("slickCurrentSlide"),r=this.slick.options.slidesToScroll||1;if(r>1){let n=Math.floor(e/r),s=Math.ceil(this.slick.slideCount/r);return n==s-1}return e==this.slick.slideCount-1}dispose_(){this.inviewDispose&&this.inviewDipose(),this.inviewImagesDispose&&this.inviewImagesDipose(),this.keyboardNavigationWatcher&&this.keyboardNavigationWatcher()}},Th=f3;var d3=class extends Th{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){super(e,r,n,s);this.initialCategory="all",this.category="all",this.data={}}init(e,r,n){r&&(this.initialCategory=r),n&&(this.data=n),super.init(e)}setCategory(e){this.category=e;let r=this.options.slidesToShow||5,n=0;this.gallery.slick("slickUnfilter"),this.gallery.slick("slickGoTo",0,!0),this.gallery.slick("slickFilter",(s,o)=>{var a=e==="all"||e===o.dataset.category;return this.removeInviewAttrs(o),a&&n<r&&(this.addInviewAttrs(o,n),n+=1),a})}removeInviewAttrs(e){for(var r=[],n=e.attributes.length,s=0;s<n;s++){var o=e.attributes[s];o.name.startsWith("mqn-app-garden-inview")&&r.push(o.name)}r.forEach(a=>{e.removeAttribute(a)})}addInviewAttrs(e,r){e.setAttribute("mqn-app-garden-inview",""),e.setAttribute("mqn-app-garden-inview-offset",r)}getCategoryCtaUrl(){let e=this.data.tabs,r="";for(let n=0;n<e.length;n++){let s=e[n];if(s.title===this.category){r=s.cta_url;break}}return r}postCreateSlick_(){this.setCategory(this.initialCategory)}},mv=d3;var br={SHOWMORE:j.mqnCssName("mqn2-bii"),SHOWMORE_OPEN:j.mqnCssName("mqn2-bik"),SHOWMORE_HIDDEN:j.mqnCssName("mqn2-bil"),CAROUSEL:j.mqnCssName("mqn2-big"),CAROUSEL_OPEN:j.mqnCssName("mqn2-bih"),CARD_ACTIVE:j.mqnCssName("mqn2-b5c")},zQ=5,p3=class extends mv{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){super(e,r,n,s);this.el_=r[0]}setCategory(e){this.el_.querySelector("."+br.SHOWMORE).classList.contains(br.SHOWMORE_OPEN)?window.setTimeout(()=>{super.setCategory(e),this.showHideShowMoreButton(),this.$rootScope.$emit("mqnRunEqualSize")},1e3):(super.setCategory(e),this.showHideShowMoreButton(),this.$rootScope.$emit("mqnRunEqualSize")),this.el_.querySelector("."+br.SHOWMORE).classList.remove(br.SHOWMORE_OPEN),this.el_.querySelector("."+br.CAROUSEL).classList.remove(br.CAROUSEL_OPEN)}showHideShowMoreButton(){window.setTimeout(()=>{document.querySelectorAll(`.${br.CAROUSEL} .${br.CARD_ACTIVE}`).length>zQ?this.el_.querySelector("."+br.SHOWMORE).classList.remove(br.SHOWMORE_HIDDEN):this.el_.querySelector("."+br.SHOWMORE).classList.add(br.SHOWMORE_HIDDEN)},100)}toggleShowMore(e){e.currentTarget.classList.contains(br.SHOWMORE_OPEN)?(e.currentTarget.classList.remove(br.SHOWMORE_OPEN),this.el_.querySelector("."+br.CAROUSEL).classList.remove(br.CAROUSEL_OPEN)):(e.currentTarget.classList.add(br.SHOWMORE_OPEN),this.el_.querySelector("."+br.CAROUSEL).classList.add(br.CAROUSEL_OPEN))}},m3=p3;var pl={READY_CLASS:j.mqnCssName("mqn2-bcs"),PAUSE_CLASS:j.mqnCssName("mqn2-bkv"),FIRST_SLIDE_CLASS:j.mqnCssName("mqn2-bkq")},g3=class{static get $inject(){return["$rootScope","$element","$scope","$compile","$window"]}constructor(e,r,n,s,o){this.el=r[0],this.rl_=se.getDestroyableInstance(),this.$element=r,this.$window=o,this.initialized=!1,this.gallery=null,this.slick=null,this.index=0,this.jQuery=window.jQuery,this.$scope=n,this.$compile=s,this.$rootScope=e,this.options=null,this.id=null,this.inview=!1,this.paused=!1,this.inviewImages=!1,this.previousSlide=null,this.slidesData=null,n.$on("$destroy",()=>this.dispose_())}init(e){let r=document.getElementById(e.galleryRootId);!this.el||(this.el.classList.add(pl.FIRST_SLIDE_CLASS),r||(r=this.el.querySelector(["[mqn-slick-gallery]"])),this.index=0,this.options=e,this.id=this.options.id,this.options.autoplay=!1,this.options.swipe=!1,this.options.rows=0,this.options.repeat=this.options.repeat,this.options.disablePause=this.options.disablePause,this.gallery=this.jQuery(r),this.paused=!0,this.slidesData=e.slides||!1,window.setTimeout(()=>this.createSlick_()))}stop(e){if(this.paused)return;this.clearNextTimer(),this.paused=!0,this.gallery.slick("slickPause"),this.rl_.mutate(()=>this.el.classList.add(pl.PAUSE_CLASS));let r=new Date;if(this.timer&&(this.elapsedTime+=r.getTime()-this.timer.getTime()),!e){let n=this.slick.$slides[this.index];this.pauseVideos(n)}}unpause(e){this.paused=!1,this.rl_.mutate(()=>this.el.classList.remove(pl.PAUSE_CLASS)),e||[...this.slick.$slides[this.index].querySelectorAll("video")].forEach(s=>{this.isPlaying(s)||s.play().then(()=>{}).catch(a=>{})}),this.timer=new Date,this.runNext(this.elapsedTime)}pauseVideos(e,r){[...e.querySelectorAll("video")].forEach(s=>{r&&(s.currentTime=0),s.pause()})}playVideos(e,r){[...e.querySelectorAll("video")].forEach(s=>{r&&(s.currentTime=0),this.isPlaying(s)||s.play().then(()=>{}).catch(a=>{})})}resetVideos(e){[...e.querySelectorAll("video")].forEach(n=>{n.currentTime=0})}start(){this.play(0),window.setTimeout(()=>{this.playVideos(this.slick.$slides[0],!0)})}play(e=0,r,n){e>=this.slideCount&&(e=0),this.paused=!1,this.rl_.mutate(()=>this.el.classList.remove(pl.PAUSE_CLASS)),this.updateActiveStyle_(),this.gallery.slick("slickGoTo",e,n),r||(this.elapsedTime=0,this.timer=new Date,this.runNext())}forcePlayVideos(e){let r=this.slick.$slides[e];this.playVideos(r,!0)}stopAtFirstVideoFrame(e,r){e>=this.slideCount&&(e=0),this.clearNextTimer(),this.play(e,!0,r);let n=this.slick.$slides[e];window.setTimeout(()=>{this.stop(),this.pauseVideos(n,!0)})}runNext(e=0){this.clearNextTimer();let r=this.slidesData[this.index].duration||+this.options.autoplaySpeed,n=r-e;Array.from(this.el.querySelectorAll("[mqn-line]")).forEach(o=>{o.style.animationDuration=r+"ms"}),this.nextTimeout=window.setTimeout(()=>{this.options.repeat?this.play(this.index):this.play(this.index+1)},n)}clearNextTimer(){window.clearTimeout(this.nextTimeout)}setupInview_(){this.gallery.slick("slickPause",this.index),this.inviewDipose=ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:0},(e,r,n)=>{this.inview=r.isIntersecting,this.inview||(this.play(0,!1,!0),this.stop(),this.updateIndex_(0),this.$scope.$apply()),this.$rootScope.$broadcast("MQN_SLICK_INVIEW",{id:this.id,ctrl:this,inview:this.inview,el:this.el})}).done,this.inviewImagesDipose=ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:0,rootMargin:"0px 0px 300% 0px"},(e,r,n)=>{this.inviewImages=r.isIntersecting,r.isIntersecting&&n(),this.$scope.$apply()}).done}createSlick_(){this.initialized||(this.gallery.on("init",this.slickInit.bind(this)),this.gallery.on("beforeChange",this.slickBeforeChange.bind(this)),this.gallery.on("afterChange",this.slickAfterChange.bind(this)),this.gallery.not(".slick-initialized").slick(this.options))}slickInit(e,r,n){window.setTimeout(()=>{this.slick=r,this.initialized=!0,this.updateIndex_(0),this.slideCount=r.slideCount,this.recompileClonedSlides_(),this.setupInview_(),this.gallery.slick("slickPause"),this.$scope.$apply(),this.rl_.mutate(()=>{this.el.classList.add(pl.READY_CLASS),this.gallery.addClass(pl.READY_CLASS)}),this.$rootScope.$broadcast("MQN_SLICK_INITIALIZED",{id:this.id,ctrl:this})})}slickBeforeChange(e,r,n,s){this.slick=r,this.updateIndex_(s),this.recompileClonedSlides_(),this.previousSlide=this.slick.$slides[n];let o=this.slick.$slides[s];this.pauseVideos(this.previousSlide),this.pauseVideos(o),this.updateActiveStyle_(),window.setTimeout(()=>{this.$scope.$apply(),this.$rootScope.$broadcast("MQN_SLICK_BEFORE_CHANGE",{id:this.id,ctrl:this,currentSlide:n,nextSlide:s})})}slickAfterChange(e,r,n){this.updateIndex_(r.currentSlide),this.resetVideos(this.previousSlide);let s=r.$slides[this.index];this.playVideos(s,!0),window.setTimeout(()=>{this.$scope.$apply(),this.$rootScope.$broadcast("MQN_SLICK_AFTER_CHANGE",{id:this.id,ctrl:this})})}isPlaying(e){return!e.paused&&!e.ended&&e.readyState>2}updateActiveStyle_(){let e=this.slick.$slides[this.index];this.rl_.mutate(()=>{this.el.classList.remove(pl.FIRST_SLIDE_CLASS);let r=Array.from(this.el.querySelectorAll("[mqn-tab]"));[...Array.from(this.slick.$slides),...r].forEach(o=>{o.classList.remove("active"),o.classList.remove("tab-active")}),this.rl_.mutate(()=>e.classList.add("active")),window.setTimeout(()=>{e.classList.add("tab-active");let o=this.el.querySelector(`[mqn-tab-${this.index}]`);o&&o.classList.add("tab-active")},1)})}updateIndex_(e){this.index=e;let r=this.slidesData[e];this.currentSlide=r,this.rl_.mutate(()=>this.el.setAttribute("carousel-index",this.index))}recompileClonedSlides_(){Array.from(this.el.querySelectorAll(".slick-cloned:not(.slick-cloned-lazycomplete)")).forEach(r=>{this.$compile(r)(this.$scope),r.classList.add("slick-cloned-lazyimagecomplete")})}getCurrentSlideIndex(){return this.index}handleMouseOut(e){this.preventMouseEvent||this.disablePause||this.index==e&&this.unpause(!0)}handleMouseMove(e){this.preventMouseEvent||this.disablePause||(this.debounceMouseOver--,!(this.debounceMouseOver&&this.debounceMouseOver>0)&&this.index==e&&this.stop(!0))}handleClick(e){this.index==e||this.preventMouseEvent||(ul.trackCarouselNavigationClick(this.el,e),this.preventMouseEvent=!0,this.play(e),window.setTimeout(()=>{this.preventMouseEvent=!1,this.debounceMouseOver=10},500))}goToNext(){this.play(this.index+1)}goToPrev(){this.play(this.index-1)}canLoadImages(){return this.inviewImages&&this.initialized}dispose_(){this.inviewDispose&&this.inviewDipose(),this.inviewImagesDispose&&this.inviewImagesDipose(),this.rl_.destroy()}},v3=g3;var Ah={DAY:60*60*24,HOUR:3600,MINUTE:60,SECOND:1},tx=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element=e[0],this.$scope=r,this.time=0,this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.ready=!1,this.complete=!1,this.interval_=null,this.timestampOffset_=0,r.$on("$destroy",()=>this.dispose())}init(e){this.time=e.time;let r=this.getDebugTimestamp_();r>0&&(this.timestampOffset_=this.divideIntegers(new Date().getTime(),1e3)-r),this.tick(),this.start()}start(){this.interval_=window.setInterval(()=>this.tick(),1e3)}stop(){this.interval_&&(window.clearInterval(this.interval_),this.interval_=null)}tick(){let e=this.time-this.getTimestamp();e<0&&(e=0,this.complete=!0,this.stop()),this.days=this.divideIntegers(e,Ah.DAY),e-=this.days*Ah.DAY,this.hours=this.divideIntegers(e,Ah.HOUR),e-=this.hours*Ah.HOUR,this.minutes=this.divideIntegers(e,Ah.MINUTE),e-=this.minutes*Ah.MINUTE,this.seconds=e,this.$scope.$$phase||this.$scope.$apply()}divideIntegers(e,r){return e/r>>0}pad(e,r){let n=e+"";return n.length>=r?n:"0".repeat(r-n.length)+e}getTimestamp(){return this.divideIntegers(new Date*1,1e3)-this.timestampOffset_}getDebugTimestamp_(){if(window.URLSearchParams&&window.location.search){let e=new window.URLSearchParams(window.location.search),r=e.get("debugCountdown")*1;if(r)return r;let n=e.get("fcd");if(n&&n.length==16){let s=this.parseDateString_(n);return this.divideIntegers(s.getTime(),1e3)}}return 0}parseDateString_(e){let r=e.split(/[^0-9]/).map(n=>parseInt(n));return new Date(r[0],r[1]-1,r[2],r[3],r[4])}dispose(){this.stop()}};var y3=class{static get $inject(){return["$element","$scope","$interval"]}constructor(e,r,n){if(this.el=e[0],this.$scope=r,this.$interval=n,this.dataTransfer=null,!performance.getEntriesByType||performance.setResourceTimingBufferSize)return;this.init();function s(){console.log("Exceeded performance buffer.")}performance.setResourceTimingBufferSize(700),performance.onresourcetimingbufferfull=s}formatBytes(e,r=2){if(e===0)return"0 Bytes";let n=1024,s=r<0?0:r,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,a)).toFixed(s))+" "+o[a]}init(){this.$interval(()=>{this.dataTransfer=this.formatBytes(this.getDataTransfer())},4e3)}getDataTransfer(){let e=performance.getEntriesByType("resource"),r=0;return e.forEach(n=>{r+=n.decodedBodySize}),r}},_3=y3;function b3(t){let e=t.querySelector("[mqn-equal-height-variable]");return e||t}var gv=class{constructor(e,r,n,s){this.root=e,this.selector=r,this.elements=[],this.setToShortest=n,this.breakpoint=s,this.rl_=se.getDestroyableInstance()}forEachElement(e){this.elements.forEach(r=>e(r))}run(){if(this.breakpoint){let e=this.breakpoint.startsWith(">"),r=+this.breakpoint.substring(1);if(e&&r>=window.innerWidth){this.removeEqualHeights();return}if(!e&&r<=window.innerWidth){this.removeEqualHeights();return}}if(document.querySelector(".mqn2-body").classList.contains("mqn2-body--isIOS-legacy")){this.removeEqualHeights();return}this.setToShortest?this.setToShortestElement():this.setToTallestElement()}setToTallestElement(){this.rl_.measure(()=>{if(this.elements=[...this.root.querySelectorAll(this.selector)],this.elements.length==1)return;let e=0;this.forEachElement(r=>{let n=b3(r);e=Math.max(n.offsetHeight,e)}),this.forEachElement(r=>{this.rl_.anyMutate(()=>{r.style.minHeight=e+"px"})})})}setToShortestElement(){this.rl_.measure(()=>{if(this.elements=[...this.root.querySelectorAll(this.selector)],this.elements.length==1)return;let e=1e4;this.forEachElement(r=>{let n=b3(r);e=Math.min(n.offsetHeight,e)}),this.forEachElement(r=>{this.rl_.anyMutate(()=>{r.style.maxHeight=e+"px"})})})}removeEqualHeights(){this.rl_.measure(()=>{this.elements=[...this.root.querySelectorAll(this.selector)],this.forEachElement(e=>{this.rl_.anyMutate(()=>{e.style.maxHeight="",e.style.minHeight=""})})})}dispose(){this.elements=null,this.rl_.destroy()}};var w3=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.$scope=n,this.$rootScope=e,this.equalizeInstances=[],this.windowResizeListener=null,this.windowInnerWidth=null,this.$rootScope.$on("mqnRunEqualSize",()=>this.run(!0)),n.$on("$destroy",()=>this.dispose_())}setupResizing_(){this.resizeDebouncer=null;let e=r=>{window.clearTimeout(this.resizeDebouncer),this.resizeDebouncer=window.setTimeout(()=>this.run(),300)};window.MQN_RESIZER?(window.MQN_RESIZER.addListener(e),this.windowResizeListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(e)}):($window.addEventListener("resize",e,{passive:!0}),this.windowResizeListener=()=>$window.removeEventListener("resize",e))}init(e,r){this.postScanCssClass=r,window.setTimeout(()=>{e.forEach(n=>{let s=n,o=null,a=null;n instanceof Array&&(s=n[0],a=n[1],o=n[2],o==="mobile"?o="<"+Te.TABLET:o==="tablet"&&(o="<"+Te.DESKTOP));let l=new gv(this.el,s,a,o);this.equalizeInstances.push(l)}),this.run(),this.$scope.$emit("MQN2_EQUAL_HEIGHTS_INITIALIZED"),this.setupResizing_()})}run(e=!1){if(this.windowInnerWidth===window.innerWidth&&!e)return;this.windowInnerWidth=window.innerWidth;let r="mqn-equal-height-ready";this.el.removeAttribute(r),this.el.classList.add("equal-height-calculating"),window.setTimeout(()=>{this.equalizeInstances.forEach(n=>n.run()),window.setTimeout(()=>{this.el.classList.remove("equal-height-calculating"),this.el.setAttribute(r,!0)},30)})}dispose_(){this.windowResizeListener&&this.windowResizeListener(),this.equalizeInstances.forEach(e=>e.dispose()),this.equalizeInstances=null}},S3=w3;var mSe=tu(),E3=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.$scope=n,this.$rootScope=e,this.el=r[0],this.data=null,this.inviewWatcher=null,this.inview=!1,this.toggleState=null,this.query="",n.$on("$destroy",()=>{this.dispose_()})}init(e,r){window.setTimeout(()=>{this.data=e,this.$scope.$apply(),window.setTimeout(()=>{this.$rootScope.$broadcast("MQN2_PARALLAX_CALCULATE"),this.$rootScope.$broadcast("MQN2_PARALLAX_UPDATE")})},1e3),this.inviewWatcher=ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:0,rootMargin:"0px 0px 300% 0px"},(n,s,o)=>{s.isIntersecting&&(this.inview=!0,this.$scope.$apply(),o())})}clearQuery(){this.query=""}toggle(e){this.toggleState=this.toggleState==e?null:e,this.clearQuery(),window.setTimeout(()=>{this.$scope.$apply()})}dispose_(){this.inviewWatcher&&this.inviewWatcher.done()}},x3=E3;var T3=re(Et()),A3=re(yt()),Fr=re(Ye()),M3=re(Ci()),vv=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.$element=r,this.el=r[0],this.deviceEndScale=1,this.videoPlayed=!1,this.elements={sticky_parent:this.el.querySelector("[parent]"),sticky_child:this.el.querySelector("[child]"),deviceContainer:this.el.querySelector("[device-container]"),device:this.el.querySelector("[device]"),chapter:this.el.querySelector("[chapter]"),video1:this.el.querySelector("[video1]"),video2:this.el.querySelector("[video2]")},this.interpolationsConfig=JSON.parse(this.el.getAttribute("data-interpolations")),this.boxScaleX=+this.el.getAttribute("data-box-scale-x"),this.boxScaleY=+this.el.getAttribute("data-box-scale-y"),this.videoStartPoint=+this.el.getAttribute("data-video-start")||.3,this.ev=T3.elementVisibility.inview(this.el,{rootMargin:"100px"}),this.cssVarInterpolater=new M3.CssVarInterpolate(this.el),this.rafProgress=new Fr.RafProgress,this.rafProgress.easeTo(this.getProgress(),1,Fr.EASE.Linear),this.rafProgress.watch(this.onProgressUpdate.bind(this)),this.domWatcher=new A3.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:this.onResize.bind(this),eventOptions:{passive:!0},id:"resize"});let o=(this.isSlowDevice(),0);this.domWatcher.add({element:window,on:"scroll",callback:Fr.func.throttle(a=>{this.onScroll()},o),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0}}),this.domWatcher.run("resize"),this.domWatcher.run("scroll"),n.$on("$destroy",()=>this.dispose())}isSlowDevice(){return Fr.is.safari()}getProgress(){return Fr.dom.getElementScrolledPercent(this.elements.sticky_parent,window.innerHeight*.7)}onScroll(){this.rafProgress.easeTo(this.getProgress(),this.isSlowDevice()?1:.16,Fr.EASE.Linear)}onResize(){this.positionDeviceContainer(),this.setInterpolations(),window.setTimeout(()=>{this.cssVarInterpolater.flush(),this.forceProgressUpdate()})}setInterpolations(){let e={width:this.elements.device.offsetWidth,height:this.elements.device.offsetHeight};window.innerWidth>=768?(e.width*=this.boxScaleX||.8,e.height*=this.boxScaleY||.7):(e.width*=.8,e.height*=.7);let r=Fr.mathf.calculateBackgroundCover({width:this.elements.sticky_child.offsetWidth,height:this.elements.sticky_child.offsetHeight},e),n=r.height-e.height,s=Math.max(0,r.height-this.elements.sticky_child.offsetHeight),o=[{id:"--device-scale",progress:[{from:.3,to:1,start:r.scalar,end:this.deviceEndScale}]},{id:"--device-y",progress:[{from:.3,to:1,start:-s+"px",end:"0px"}]},{id:"--video-opacity",progress:[{from:this.videoStartPoint,to:this.videoStartPoint+.1,start:0,end:1}]},{id:"--chapter-y",progress:[{from:.9,to:1,start:n+"px",end:"0px"}]},{id:"--chapter-y-mobile",progress:[{from:.9,to:1,start:"30px",end:"0px"}]}];o=o.concat(this.interpolationsConfig),this.cssVarInterpolater.setInterpolations({interpolations:o})}positionDeviceContainer(){let e=this.elements.device.offsetHeight,r=this.elements.device.offsetWidth,n=this.elements.chapter.offsetHeight,s=this.elements.sticky_child.offsetHeight;this.elements.device.style.top="",this.elements.chapter.style.marginBottom="",this.deviceEndScale=1;let o={width:this.elements.deviceContainer.offsetWidth,height:s-n},a=Fr.mathf.calculateBackgroundContain(o,{width:r,height:e});if(this.deviceEndScale=a,e+n-s<=0){let c=(window.innerHeight-e-n)/2;this.elements.chapter.style.marginBottom=c+"px"}}forceProgressUpdate(){this.onProgressUpdate(this.progress)}onProgressUpdate(e,r){this.progress=e,this.cssVarInterpolater.update(e);let n=this.videoStartPoint;e>=n&&!this.videoPlayed&&this.ev.state().ready&&this.ev.state().inview&&this.playVideo(),e<n&&this.videoPlayed&&this.resetVideo()}playVideo(){this.videoPlayed=!0,window.clearTimeout(this.playLoopVideoTimeout);let e="video.mobile-video video.desktop-video";Fr.dom.whenVideosLoaded([...this.el.querySelectorAll(e)]).then(()=>{!this.videoPlayed||Fr.dom.playAllVideosInElement(this.el,!0)})}resetVideo(){Fr.dom.pauseAllVideosInElement(this.el,!0),window.clearTimeout(this.playLoopVideoTimeout),this.videoPlayed=!1}dispose(){this.domWatcher.dispose(),this.ev.dispose()}};var C3=re(Et()),Ch=re(Ye());var yv=re(dn()),Mh=(t,e="click",r)=>{let n=(0,yv.getClosestTrackingId)(t),s=mt.getClosestMqnFrame(t);if(!s)return;let o=s.getAttribute("mqn-autotrack-product"),a=s.getAttribute("mqn-autotrack-partial-type");(e!=="prev"||e!=="next")&&(e=e+"-"+r);let l={event:"module interaction",eventCategory:"module click",eventAction:n,eventLabel:e,pageName:window.location.pathname,product:o,moduleName:n,moduleType:a,nonInteraction:"0"};(0,yv.trackDataLayer)(l)};function rx(){return Tt}var WQ=5e3,ix={PAUSED:j.mqnCssName("mqn2-gx8"),TAB_BUTTON:j.mqnCssName("mqn2-g5o")},nx=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.index=0,this.ev=C3.elementVisibility.inview(this.el,{}),this.rl_=se.getDestroyableInstance(),this.domWatcher_=new Ch.DomWatcher,this.allFocusableElements_=new Set(Array.from(this.el.querySelectorAll("*"))),this.tabButtons_=Array.from(this.el.querySelectorAll(`.${ix.TAB_BUTTON}`)),this.paused_=!1,this.runNextAutoplay=null,this.previousIndex=0,this.drawerMediaItems=Array.from(this.el.querySelectorAll("[drawer-media-item]")),this.autoplayDuration=WQ,this.scheduleNext(),this.init_(),r.$on("$destroy",()=>this.dispose_())}init_(){this.domWatcher_.add({element:this.el,on:"mousedown",callback:()=>this.mouseDown_=!0}),this.domWatcher_.add({element:window,on:"mouseup",callback:()=>this.mouseDown_=!1}),this.tabButtons_.forEach(e=>{this.domWatcher_.add({element:e,on:"focus",callback:()=>{this.mouseDown_||this.pauseAutoplay()}})}),this.loop_()}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_());let e=window.getSelection();this.lastNode_!==e.focusNode&&(this.lastNode_=e.focusNode,!this.mouseDown_&&e.focusNode&&this.allFocusableElements_.has(e.focusNode.parentElement)?this.pauseAutoplay():this.resumeAutoplay())})}pauseAutoplay(){window.clearTimeout(this.runNextAutoplay),this.rl_.mutate(()=>{this.paused_=!0,gn(this.el,ix.PAUSED)})}resumeAutoplay(){this.rl_.mutate(()=>{this.paused_=!1,vn(this.el,ix.PAUSED),this.scheduleNext()})}scheduleNext(){this.paused_||(this.runNextAutoplay=window.setTimeout(()=>{this.goTo(this.index+1,{isAutoplay:!0})},this.autoplayDuration))}setAutoplayDuration(e){this.autoplayDuration=e}goTo(e,r){let n=r||{};window.clearTimeout(this.runNextAutoplay);let s=rx().scrollTop,o=()=>{document.removeEventListener("scroll",o),rx().scrollTop=s};document.addEventListener("scroll",o),this.previousIndex=this.index,this.index=Ch.mathf.wrap(e,0,this.drawerMediaItems.length),Ch.dom.playAllVideosInElement(this.drawerMediaItems[this.index]),n.isAutoplay||this.ev.state().inview&&Mh(this.el,"tab",this.index),this.scheduleNext(),this.$scope.$$phase||this.$scope.$apply()}dispose_(){this.ev.dispose()}};var P3=class{static get $inject(){return["$scope"]}constructor(e){this.expanded_=!1,e.$on("$destroy",()=>this.dispose_())}isExpanded(){return this.expanded_}toggleExpansion(){this.expanded_=!this.expanded_}dispose_(){}},I3=P3;var R3=class{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){this.initialized=!1,this.$element=r,this.element=r[0],this.$rootScope=e,this.content=this.element.querySelector("[mqn-modal-root-content]"),this.$compile=s,this.$scope=n;let o=window.pageYOffset||document.documentElement.scrollTop;this.preloadModalImmediateImages_(),o==0&&!St.turnOffLazyImage()?window.addEventListener("scroll",()=>{this.preloadModalImages_()},{once:!0,passive:!0}):this.preloadModalImages_()}fireInit(e=500,r){window.setTimeout(()=>{this.$rootScope.$broadcast("MQN2_MODAL_INIT",r)},e)}fireClose(e=500,r){window.setTimeout(()=>{this.$rootScope.$broadcast("MQN2_MODAL_CLOSE",r)},e)}getImageUrl_(e){let r=e.getAttribute("mqn-lazyimage-src")||e.getAttribute("mqn-lazyimage-background-src"),n=e.getAttribute("mqn-lazyimage-google-image-webp-fallback");return!n||Vl()?r:r+"-"+n}preloadModalImmediateImages_(){let r=Array.from(this.element.querySelectorAll("[mqn-modal-preload-immediate]")).map(n=>this.getImageUrl_(n));this.preloadImages_(r)}preloadModalImages_(){let r=Array.from(this.element.querySelectorAll("[mqn-modal-preload]")).map(n=>this.getImageUrl_(n));this.preloadImages_(r)}preloadImages_(e){e=Zt.addFifeUrlParamsToUrls(e),e.forEach(r=>{let n=new Image;n.src=r})}init(e){if(this.ready){this.fireInit(1,e);return}this.scroller=document.querySelector(".ak-modal-content"),this.content.removeAttribute("ng-non-bindable"),this.ready=!0,window.setTimeout(()=>{this.$compile(this.$element.contents())(this.$scope),this.fireInit(10,e),this.$scope.$apply()})}closeImminent(e){window.setTimeout(()=>{this.$rootScope.$broadcast("MQN2_MODAL_CLOSE_IMMINENT",e)})}close(e){this.fireClose(1,e)}},L3=R3;var O3=class{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){this.el=r[0],this.initialized=!1}},D3=O3;var F3="connect",N3=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.initialized=!1,n.$on("MQN_SLICK_INITIALIZED",this.slickInitialized.bind(this)),n.$on("MQN_SLICK_INVIEW",this.slickInview.bind(this))}slickInitialized(e,r){this.initialized||r.id!==F3||(this.slickCtrl=r.ctrl,this.initialized=!0)}slickInview(e,r){r.id===F3&&(r.inview?this.slickCtrl.start():this.slickCtrl.stop())}},k3=N3;var V3="facematch",B3=class{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){this.el=r[0],this.initialized=!1,n.$on("MQN_SLICK_INITIALIZED",this.slickInitialized.bind(this)),n.$on("MQN_SLICK_INVIEW",this.slickInview.bind(this))}slickInitialized(e,r){this.initialized||r.id!==V3||(this.slickCtrl=r.ctrl,this.initialized=!0)}slickInview(e,r){r.id===V3&&(r.inview?this.slickCtrl.start():this.slickCtrl.stop())}},U3=B3;var H3=re(Et()),GQ="home",_v={INVIEW:j.mqnCssName("mqn2-cbw"),STICKY:j.mqnCssName("mqn2-cbn"),DISCLAIMER:j.mqnCssName("mqn2-cbz")},q3=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.initialized=!1,n.$on("MQN_SLICK_INITIALIZED",this.slickInitialized.bind(this)),window.MQN_RESIZER&&window.MQN_RESIZER.addListener(this.resize.bind(this)),this.watcher_=ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:.2,rootMargin:"0px 0px 0px 0px"},(s,o,a)=>{o.isIntersecting?this.el.classList.add(_v.INVIEW):this.el.classList.remove(_v.INVIEW)}),ht.elementInViewWatcherFirstChangeOnly(this.el.querySelector("[mqn-section-2]"),{threshold:.7,rootMargin:"0px 0px 0px 0px"},(s,o,a)=>{!this.initialized||o.isIntersecting&&(this.slickCtrl.start(),this.oneTimeEvLoad&&this.oneTimeEvLoad.dispose())}),ht.elementInViewWatcherFirstChangeOnly(this.el.querySelector("[mqn-section-2]"),{threshold:0,rootMargin:"0px 0px 0px 0px"},(s,o,a)=>{!this.initialized||o.isIntersecting||(this.slickCtrl.stop(),this.slickCtrl.stopAtFirstVideoFrame(0,!0))}),this.setupParallax(),this.resize()}dispose_(){this.watcher_.done()}resize(){this.fixStickyChildHeight()}slickInitialized(e,r){this.initialized||r.id!==GQ||(this.initialized=!0,this.slickCtrl=r.ctrl,this.oneTimeEvLoad=H3.elementVisibility.inview(this.el.querySelector("[mqn-section-2]"),{threshold:0},(n,s,o)=>{s.isIntersecting&&(this.slickCtrl.start(),o())}))}fixStickyChildHeight(){let e=this.el.querySelector("[mqn-section-2]"),r=this.el.querySelector(`.${_v.STICKY}`);r.style.height=e.offsetHeight+"px"}createImageEffects(e=1){let r="transform: translateX(0) translateY(0)";return[{num:1,style:[`transform: translateX(-2.5vw) translateY(${-6*e}vh);`,r]},{num:2,style:[`transform: translateX(2vw) translateY(${-10*e}vw);`,r]},{num:3,style:[`transform: translateX(6vw) translateY(${-5*e}vw)`,r]},{num:4,style:[`transform: translateX(20vw) translateY(${-17*e}vh);`,r]},{num:5,style:[`transform: translateX(17vw) translateY(${8*e}vh);`,r]},{num:6,style:[`transform: translateX(16vw) translateY(${-12*e}vh);`,r]},{num:7,style:[`transform: translateX(-5vw) translateY(${35*e}vh);`,r]},{num:8,style:[`transform: translateX(-1vw) translateY(${40*e}vh);`,r]},{num:9,style:[`transform: translateX(-6vw) translateY(${14*e}vh);`,r]},{num:10,style:[`transform: translateX(-10vw) translateY(${35*e}vh);`,r]},{num:11,style:[`transform: translateX(-8vw) translateY(${42*e}vh);`,r]},{num:12,style:[`transform: translateX(-5vw) translateY(${27*e}vh);`,r]},{num:13,style:[`transform: translateX(1vw) translateY(${40*e}vh);`,r]},{num:14,style:[`transform: translateX(-10vw) translateY(${12*e}vh);`,r]}].map(s=>{let o=this.el.querySelector("[mqn2-section2-image-"+s.num+"]");return new jt([[0,s.style[0]],[1,s.style[1]]],{styleTarget:o})})}setupParallax(){let e=this.el.querySelector("[mqn-section-2]"),r=this.el.querySelector("[mqn-section-2-inner]"),n=this.el.querySelector("[mqn-fade-header-1]"),s=this.el.querySelector("[mqn-image-rows]"),o="transform: translateY(-50%); margin-top: 0;",a="transform: translateY(0px)",l="transform: translateY(-50vh); margin-top: 200px;",c="transform: translateY(-29vw);",h="transform: translateY(10vh)",f="transform: translateY(0%);",u="opacity: 1;",m="opacity: 0.5;",d=[new jt([[0,a],[1,c]],{styleTarget:n})],v=[new jt([[0,o],[1,l]],{styleTarget:n})],p=[new jt([[0,h],[1,f]],{styleTarget:r}),new jt([[0,h],[1,f]],{styleTarget:this.el.querySelector("[mqn-device]")}),new jt([[0,u],[1,m]],{styleTarget:s})];new bi(e,{startDistance:()=>-e.offsetHeight*.1,endDistance:0,getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_TOP,condition:()=>Te.isDesktop(),effects:[new jt([[0,"opacity: 0"],[1,"opacity: 1"]],{styleTarget:this.el.querySelector(`.${_v.DISCLAIMER}`)})]}),new bi(e,{startDistance:()=>-e.offsetHeight*.9,endDistance:()=>-e.offsetHeight*.1,getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_TOP,condition:()=>Te.isDesktopOrTablet(),effects:[...this.createImageEffects(),...p,...d]}),new bi(e,{startDistance:()=>-e.offsetHeight*.9,endDistance:()=>-e.offsetHeight*-.01,getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_TOP,condition:()=>Te.isMobile(),effects:[...this.createImageEffects(1.4),...p,...v]})}},z3=q3;var sx="photos",W3={DARK_THEME:j.mqnCssName("mqn2-cc7")},G3=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.rl_=se.getDestroyableInstance(),this.scrollEffect=[],this.$scope=n,this.parent=this.el.querySelector("[mqn-sticky-parent]"),this.child=this.el.querySelector("[mqn-sticky-child]"),this.images=this.el.querySelector("[mqn-images]"),this.imagesInner=this.el.querySelector("[mqn-images-inner]"),this.darkTheme=!1,this.slickCtrl=null,n.$on("MQN_SLICK_INITIALIZED",this.slickInitialized.bind(this)),n.$on("MQN_SLICK_INVIEW",this.slickInview.bind(this)),n.$on("MQN_SLICK_BEFORE_CHANGE",this.slickBeforeChange.bind(this)),n.$on("destroy",()=>this.dispose_())}setDarkTheme(e){this.rl_.anyMutate(()=>{this.darkTheme=e,e?this.el.classList.add(W3.DARK_THEME):this.el.classList.remove(W3.DARK_THEME)})}slickInview(e,r){r.id===sx&&(r.inview?this.slickCtrl.start():(this.slickCtrl.stopAtFirstVideoFrame(0,!0),this.rl_.anyMutate(()=>{this.el.classList.remove(j.mqnCssName("mqn2-cce"))})))}slickInitialized(e,r){this.initialized||r.id!==sx||(this.initialized=!0,this.slickCtrl=r.ctrl,this.inviewDipose=ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:.2},(n,s,o)=>{this.inview=s.isIntersecting,this.inview&&this.rl_.anyMutate(()=>{this.el.classList.add(j.mqnCssName("mqn2-cce"))})}))}slickBeforeChange(e,r){if(r.id!==sx)return;let n=r.ctrl;this.slickCtrl=n,this.setDarkTheme(n.currentSlide.theme==="dark-theme"),window.setTimeout(()=>{this.$scope.$apply()})}isMobile(){return window.innerWidth<768}dispose_(){this.rl_.destroy()}},$3=G3;function j3(t){return new Promise(function(e,r){var n=new Image;n.addEventListener("load",function(){return e(n)},{once:!0}),n.addEventListener("error",function(){return r(n)},{once:!0}),n.src=t})}function ox(t,e){e.forEach(function(r,n){return t.style.setProperty(n,r)})}var Y3=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},$Q=2147483647/2,X3=`
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
`,jQ=function(){function t(e,r,n,s){this.desiredFrame=e,this.backFrame=r,this.frontFrame=n,this.distanceAsPercent=s}return t}(),ax=Sr.getBrowser(),Z3=function(){function t(e,r,n){var s=n===void 0?{}:n,o=s.createFrameFunction,a=o===void 0?function(){return document.createElement("div")}:o,l=s.startLoadingImmediately,c=l===void 0?!0:l,h=s.loadImageFunction,f=h===void 0?j3:h,u=s.framesToInterpolate,m=u===void 0?0:u,d=s.maximumLoadingThreads,v=d===void 0?12:d,p=s.zIndexCap,g=p===void 0?$Q:p;this.backupFrames_=new Pi,this.lastState_=null,this.lastTargetFrame_=null,this.imageUrlsInOrder_=e,this.frameElements_=e.map(function(y,_){return a(_)}),this.imageUrlIndicesToLoadInOrder_=t.generateFrameLoadOrder(e.length),this.imagesLoaded_=0,this.loadedImageUrls_=new Set,this.container_=r,this.loadingPaused_=!c,this.displayedFrameElementIndices_=new Set,this.zIndex_=1,this.loadImageFunction_=f,this.numberOfFramesToInterpolate_=m,this.maximumParallelImageRequests_=v,this.currentParallelImageRequests_=0,this.zIndexCap_=g,this.init_()}return t.prototype.stopLoading=function(){this.loadingPaused_=!0},t.prototype.startLoading=function(){this.loadingPaused_=!1,this.areAllLoadingThreadsInUse_()||this.loadNextImage_()},t.prototype.areAllLoadingThreadsInUse_=function(){return this.currentParallelImageRequests_>=this.maximumParallelImageRequests_},t.prototype.init_=function(){this.setupFrames_(),this.startLoadingImagesWhenReady_()},t.prototype.startLoadingImagesWhenReady_=function(){var e=this;document.readyState==="complete"?this.startLoadingImages_():window.addEventListener("load",function(){return e.startLoadingImages_()})},t.prototype.setupFrames_=function(){var e=this,r=ax===mn?X3:X3+"; display: none;",n=Nl(r);this.frameElements_.forEach(function(s){ox(s,n),e.container_.appendChild(s)})},t.prototype.startLoadingImages_=function(){this.loadNextImage_()},t.prototype.loadNextImage_=function(){if(!(this.imagesLoaded_>=this.imageUrlIndicesToLoadInOrder_.length)&&!this.loadingPaused_){var e=this.imageUrlIndicesToLoadInOrder_[this.imagesLoaded_];this.loadImage_(e)}},t.prototype.loadImage_=function(e){var r=this,n=this.imageUrlsInOrder_[e];return this.currentParallelImageRequests_++,this.loadImageFunction_(n).then(function(s){if(r.currentParallelImageRequests_--,r.loadedImageUrls_.add(r.getImageUrl_(e)),ox(r.frameElements_[e],new Map([r.getBackgroundImageStyle_(e)])),r.lastState_){var o=r.lastState_.desiredFrame;o===e?(r.updateWithLoadedFrame_(o),r.lastState_=null):r.requiresUpdateForNewFrame_(e)&&r.updateWithInterpolatedFrame_(r.lastState_.distanceAsPercent,o)}r.imagesLoaded_++,r.loadNextImage_()},function(){r.currentParallelImageRequests_--,r.imagesLoaded_++,r.loadNextImage_()})},t.prototype.requiresUpdateForNewFrame_=function(e){var r=e*(this.numberOfFramesToInterpolate_+1);return e===0||e===this.imageUrlsInOrder_.length||this.lastState_.backFrame<r&&r<this.lastState_.desiredFrame||this.lastState_.desiredFrame<r&&r<this.lastState_.frontFrame},t.generateFrameLoadOrder=function(e){for(var r=[],n=1;n<e-1;n++)r.push(n);return Y3([0,e-1],this.generateFrameLoadOrderLoop_(r))},t.generateFrameLoadOrderLoop_=function(e){if(e.length<=1)return e;var r=Math.floor((e.length-1)/2),n=e.slice(0,r),s=e.slice(r+1);return Y3([e[r]],Ut(kt(this.generateFrameLoadOrderLoop_(n),this.generateFrameLoadOrderLoop_(s))))},t.prototype.getPreviousLoadedImageUrlIndex_=function(e){return this.getClosestFrame_(this.getPreviousLoadedImageUrlIndices_(e),e)},t.prototype.getPreviousLoadedImageUrlIndices_=function(e){return this.getLoadedImageUrlIndicesByCondition_(function(r){return r<e})},t.prototype.getNextLoadedImageUrlIndex_=function(e){return this.getClosestFrame_(this.getNextLoadedImageUrlIndices_(e),e)},t.prototype.getClosestFrame_=function(e,r){return Qs(e,function(n){return Math.abs(r-n)})},t.prototype.getNextLoadedImageUrlIndices_=function(e){return this.getLoadedImageUrlIndicesByCondition_(function(r){return r>e})},t.prototype.getLoadedImageUrlIndices_=function(){var e=this;return Array.from(new Set(Array.from(this.loadedImageUrls_).map(function(r){return e.getImageUrlIndex_(r)})))},t.prototype.getLoadedImageUrlIndicesByCondition_=function(e){return this.getLoadedImageUrlIndices_().filter(e)},t.prototype.run=function(e,r,n){var s=this,o=this.numberOfFramesToInterpolate_+1,a=this.imageUrlsInOrder_.length*o-1,l=Math.round(new ce(0,a).getPercentAsValue(n)),c=this.getNonInterpolatedFrame_(l);if(this.resetZIndexes_(),this.lastTargetFrame_!==l){var h=this.isInterpolatedFrame_(l)?null:this.getLoadedImageUrlForIndex_(c);h!==null?this.updateWithLoadedFrame_(c):this.updateWithInterpolatedFrame_(n,l)}se.cleanup(function(){return s.lastTargetFrame_=l})},t.prototype.hasLoadedImageUrlForIndex_=function(e){return this.getLoadedImageUrlForIndex_(e)!==null},t.prototype.getLoadedImageUrlForIndex_=function(e){var r=this,n=this.imageUrlsInOrder_[e];if(this.loadedImageUrls_.has(n))return n;var s=this.backupFrames_.get(e).find(function(o){return r.loadedImageUrls_.has(o)});return s||null},t.prototype.getNonInterpolatedFrame_=function(e){return e/(this.numberOfFramesToInterpolate_+1)},t.prototype.isInterpolatedFrame_=function(e){return e%(this.numberOfFramesToInterpolate_+1)!=0},t.prototype.resetZIndexes_=function(){if(!(this.zIndex_<this.zIndexCap_)){var e=this.zIndex_-4;this.zIndex_=4,this.frameElements_.forEach(function(r){var n=Math.max(0,parseInt("0"+r.style.zIndex)-e);se.anyMutate(function(){r.style.zIndex=""+n})})}},t.prototype.updateWithLoadedFrame_=function(e){this.lastState_=null,this.clearFrames_(new Set([e])),this.setFrameStyle_(e,"1")},t.prototype.getBackgroundImageStyle_=function(e){return["background-image","url("+this.imageUrlsInOrder_[e]+")"]},t.prototype.getImageUrl_=function(e){return this.imageUrlsInOrder_[e]},t.prototype.getImageUrlIndex_=function(e){var r=this,n=this.imageUrlsInOrder_.indexOf(e);return n!==-1?n:Array.from(this.backupFrames_.keys()).find(function(s){return r.backupFrames_.get(s).indexOf(e)!==-1})},t.prototype.clearFrames_=function(e){var r=this;if(e===void 0&&(e=null),ax!==mn){var n;e?n=ea(this.displayedFrameElementIndices_,e):n=this.displayedFrameElementIndices_,se.anyMutate(function(){n.forEach(function(s){r.frameElements_[s].style.opacity="0",r.frameElements_[s].style.display="none"})})}},t.prototype.setFrameStyle_=function(e,r){var n=this;typeof e!="undefined"&&se.anyMutate(function(){n.displayedFrameElementIndices_.add(e),n.frameElements_[e].style.opacity=r,ax===mn?n.frameElements_[e].style.zIndex=""+ ++n.zIndex_:n.frameElements_[e].style.display="block"})},t.prototype.updateWithInterpolatedFrame_=function(e,r){var n=this.getNonInterpolatedFrame_(r),s=this.getNextLoadedImageUrlIndex_(n),o=this.getPreviousLoadedImageUrlIndex_(n),a=this.getFrontFrameCrossfadeOpacity_(e,s,o);this.clearFrames_(new Set([o,s])),this.updateBackFrameWithMissingFrame_(o),this.updateFrontFrameWithMissingFrame_(s,a),this.lastState_=new jQ(r,o,s,e)},t.prototype.getFrontFrameCrossfadeOpacity_=function(e,r,n){var s=r/this.imageUrlsInOrder_.length,o=n/this.imageUrlsInOrder_.length,a=new ce(o,s);return a.getValueAsPercent(e)},t.prototype.updateBackFrameWithMissingFrame_=function(e){this.setFrameStyle_(e,"1")},t.prototype.updateFrontFrameWithMissingFrame_=function(e,r){this.setFrameStyle_(e,""+r)},t.prototype.replaceFramesInPlace=function(e){var r=this;e.length!==this.imageUrlsInOrder_.length&&ot.throw("Can only replaceFramesInPlace if frame count is constant"),this.imageUrlsInOrder_.forEach(function(n,s){r.loadedImageUrls_.has(n)&&r.backupFrames_.get(s).push(n)}),this.imageUrlsInOrder_=e,this.imagesLoaded_=0,this.startLoadingImagesWhenReady_()},t.prototype.destroy=function(){var e=this;this.loadedImageUrls_.clear(),this.backupFrames_.clear(),this.frameElements_.forEach(function(r){return e.container_.removeChild(r)})},t}();var Q3=re(Ye()),YQ=Sr.getBrowser()===mn,bv=class{constructor(){this.width=window.innerWidth,this.pixelRatio=window.devicePixelRatio}equals(e){return this.width===e.width&&this.pixelRatio===e.pixelRatio}getSuggestedFifeWidth(){return YQ||Q3.is.ipad()?Math.round(this.width):Math.round(this.width*this.pixelRatio)}};function XQ(t){function e(s){let o="";for(let a=s.length-1;a>=0;a--)o+=s[a];return o}let r=e(t).split("/")[0],n=r.split("=")[0];return r===n?null:e(n)}function ZQ(t){return t[0]==="w"&&!isNaN(t.slice(1))}function K3(t){if(!Ul(t))return t;let e=new bv,r=XQ(t),n=t,s=new Set;r!==null?s=new Set(r.split("-")):n.slice(-1)[0]!=="="&&(n=`${n}=`),Vl()&&(s.has("rw")||(n.slice(-1)[0]==="="?n=`${n}rw`:n=`${n}-rw`));let o=Array.from(s.values()).find(ZQ),a=`w${e.getSuggestedFifeWidth()}`;return o?n=n.replace(o,a):n.slice(-1)[0]==="="?n=`${n}${a}`:n=`${n}-${a}`,n}var lx=class extends Z3{constructor(e,r,n={}){let s=e.map(o=>K3(o));super(s,r,Object.assign({zIndexCap:50},n));this.lastWindowValues=new bv,this.rawFrames=e,this.mqn2TrackWindowChanges_()}mqn2TrackWindowChanges_(){se.measure(()=>{se.cleanup(()=>this.mqn2TrackWindowChanges_());let e=new bv;if(!e.equals(this.lastWindowValues)){let r=this.rawFrames.map(n=>K3(n));this.replaceFramesInPlace(r),this.lastWindowValues=e}})}};var QQ=new mi({multiplier:1}),J3=class{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){this.renderFix=new oi,this.el=r[0],this.images_=JSON.parse(this.el.getAttribute("data-desktop-frames")),this.scrollContainer_=this.el.querySelector("[mqn-container]"),this.frame_=this.el.querySelector("[mqn-speaker-frame]"),this.chapter_=this.el.querySelector("[mqn-chapter]"),this.chapterInner_=this.el.querySelector("[mqn-chapter-inner]"),this.button1_=this.el.querySelector("[mqn-button-1]"),this.button2_=this.el.querySelector("[mqn-button-2]"),this.backgrounds=Array.from(document.querySelectorAll("[mqn-background-color-shift]")),this.images_=this.images_.map(c=>QQ.processImage(c)),this.frameEffect=new lx(this.images_,this.frame_,{startLoadingImmediately:!1}),window.scrollY>0?this.frameEffect.startLoading():window.addEventListener("scroll",()=>{this.frameEffect.startLoading()},{once:!0});let o={startDistance:()=>120,endDistance:()=>this.scrollContainer_.offsetHeight*.5,getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_TOP},a=Object.assign({effects:[this.frameEffect,new jt([[.2,"opacity: 0; transform: translateY(60px);"],[.3,"opacity: 1; transform: translateY(0px);"],[.6,"opacity: 1; transform: translateY(0px);"],[.8,"opacity: 0; transform: translateY(-60px);"]],{styleTarget:this.button1_}),new jt([[0,"opacity: 0;"],[.8,"opacity: 0; transform: translateY(60px);"],[.9,"opacity: 1; transform: translateY(0px);"]],{styleTarget:this.button2_})],condition:()=>window.innerWidth>=768},o);this.desktopScrollEffect_=new bi(this.scrollContainer_,a);let l=Object.assign({effects:[this.frameEffect,new jt([[.2,"opacity: 0; transform: translateY(30px);"],[.3,"opacity: 1; transform: translateY(0px);"],[.5,"opacity: 1; transform: translateY(0px);"],[.7,"opacity: 0; transform: translateY(-30px);"]],{styleTarget:this.button1_}),new jt([[.2,"opacity: 0; transform: translateY(30px);"],[.3,"opacity: 1; transform: translateY(0px);"],[.5,"opacity: 1; transform: translateY(0px);"],[.7,"opacity: 0; transform: translateY(-30px);"]],{styleTarget:this.button1_}),new jt([[.2,"opacity: 0; transform: translateY(30px);"],[.3,"opacity: 1; transform: translateY(0px);"],[.5,"opacity: 1; transform: translateY(0px);"],[.7,"opacity: 0; transform: translateY(-30px);"]],{styleTarget:this.button1_}),new jt([[0,"opacity: 0;"],[.8,"opacity: 0; transform: translateY(30px);"],[.9,"opacity: 1; transform: translateY(0px);"]],{styleTarget:this.button2_})],condition:()=>window.innerWidth<768},o);this.mobileScrollEffect_=new bi(this.scrollContainer_,l),this.scrollEffect_=new bi(this.scrollContainer_,{startDistance:()=>-window.innerHeight*.6,endDistance:()=>this.scrollContainer_.offsetHeight*.3,getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_TOP,percentCallbacks:[[.15,[(c,h,f,u,m)=>{Math.sign(h-u)===1?this.frame_.classList.add("active"):this.frame_.classList.remove("active")}]]],effects:[new jt([[0,"background-color: #191818"],[.12,"background-color: #F7F5F4"]],{styleTarget:this.backgrounds[0]}),new jt([[0,"background-color: #191818"],[.12,"background-color: #F7F5F4"]],{styleTarget:this.backgrounds[1]}),new jt([[.3,"opacity: 0; transform: translateY(30px)"],[.35,"opacity: 1; transform: translateY(0)"]],{styleTarget:this.chapterInner_}),new jt([[.5,"opacity: 1"],[.6,"opacity: 0"]],{styleTarget:this.chapter_}),new jt([[0,"transform: scale(0.97);"],[.3,"transform: scale(1);"],[.6,"transform: scale(1);"],[1,"transform: translateY(10vh)"]],{styleTarget:this.frame_})]}),n.$on("$destroy",()=>{this.dispose_()})}dispose_(){this.renderFix.dispose(),this.mobileScrollEffect_.destroy(),this.desktopScrollEffect_.destroy(),this.scrollEffect_.destroy()}},eV=J3;function Si(t,e){var r=parseFloat(ut(t,e));return isNaN(r)?1:r}function tV(t){return Si(t,"opacity")}function Ph(t){return t===void 0&&(t=null),t?t.offsetHeight:ji.clientHeight}function rV(t,e){e===void 0&&(e=null);var r=_i(t,e),n=Ph(e),s=new ce(0,n),o=s.clamp(r),a=s.clamp(r+t.offsetHeight);return a-o}function wv(t,e){return e===void 0&&(e=null),e!==null?kl(t)-kl(e):kl(t)}function Sv(t,e){e===void 0&&(e=null);var r=wv(t,e),n=e?e.offsetWidth:Tt.clientWidth,s=new ce(0,n),o=s.clamp(r),a=s.clamp(r+t.offsetWidth);return a-o}function iV(t,e){return e===void 0&&(e=null),new er(Sv(t,e),rV(t,e))}function nV(t){return _t(t)&&ut(t,"visibility")!=="hidden"}function sV(t,e,r){if(e===void 0&&(e=null),r===void 0&&(r=!1),!nV(t))return 0;var n=r?tV(t):1;return iV(t,e).getArea()*n}function oV(t,e,r){return e===void 0&&(e=null),r===void 0&&(r=!1),sV(t,e,r)>0}function Ev(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new Set;return t.forEach(function(n){n.forEach(function(s){r.add(s)})}),r}var KQ=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},Ih=function(){function t(){this.syncedCarousels_=[]}return t.getSingleton=function(){return this.singleton_=this.singleton_||new this},t.prototype.getSetForCarousel_=function(e){return this.syncedCarousels_.find(function(r){return r.has(e)})},t.prototype.syncCarousels=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=[],s=[new Set(e)];this.syncedCarousels_.forEach(function(o){e.find(function(a){return o.has(a)})?s.push(o):n.push(o)}),this.syncedCarousels_=KQ(n,[Ev.apply(void 0,s)])},t.prototype.transitionToIndex=function(e,r){var n=this.getSetForCarousel_(e);!n||n.forEach(function(s){s!==e&&s.transitionToIndex(r,!0)})},t.prototype.destroyCarousel=function(e){this.syncedCarousels_.forEach(function(r){return r.delete(e)}),this.syncedCarousels_=this.syncedCarousels_.filter(function(r){return r.size>0})},t.prototype.destroy=function(){this.syncedCarousels_=[]},t.singleton_=null,t}();var aV=function(){function t(){this.activeSlides_=new Map}return t.prototype.init=function(e,r){this.activeSlides_.set(r,e)},t.prototype.getActiveSlide=function(e){return this.activeSlides_.get(e)},t.prototype.transition=function(e,r){this.activeSlides_.set(r,e)},t.prototype.hasTransitionedTo=function(e,r){return this.activeSlides_.get(r)===e},t.prototype.renderLoop=function(e){},t}();function lV(t,e){var r=(t.length-1)/2;return r%2==0?r:e?Math.ceil(r):Math.floor(r)}function cV(t,e,r,n){for(var s=[],o=t.length,a=e;s.length<r;)a=(a+n+o)%o,n>0?s.push(t[a]):s.unshift(t[a]);return s}function cx(t,e,r){r===void 0&&(r=!0);var n=lV(t,!r),s=lV(t,r),o=t.indexOf(e),a=cV(t,o,n,-1),l=cV(t,o,s,1);return[a,l]}var JQ=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},eK=new aV,hV=Symbol("interaction"),hx=Object.freeze({ACTIVE_SLIDE:"active",BEFORE_SLIDE:"before",AFTER_SLIDE:"after"}),tK=function(){function t(e,r){r===void 0&&(r=!1),this.element_=e,this.drivenBySync_=r}return t.prototype.getElement=function(){return this.element_},t.prototype.isDrivenBySync=function(){return this.drivenBySync_},t}(),ux=function(){function t(e,r,n){var s=this,o=n===void 0?{}:n,a=o.condition,l=a===void 0?function(){return!0}:a,c=o.onTransitionCallbacks,h=c===void 0?[]:c,f=o.onDestroyCallbacks,u=f===void 0?[]:f,m=o.activeCssClass,d=m===void 0?hx.ACTIVE_SLIDE:m,v=o.beforeCssClass,p=v===void 0?hx.BEFORE_SLIDE:v,g=o.afterCssClass,y=g===void 0?hx.AFTER_SLIDE:g,_=o.allowLooping,b=_===void 0?!0:_,w=o.transition,S=w===void 0?eK:w;r.length<1&&ot.throw("Cannot start carousel without slides"),this.activeCssClass_=d,this.beforeCssClass_=p,this.afterCssClass_=y,this.allowLooping_=b,this.condition_=l,this.container_=e,this.lastActiveSlide_=null,this.onTransitionCallbacks_=h,this.onDestroyCallbacks_=u,this.slides_=r,this.transition_=S,this.transitionTarget_=null,this.interactions_=[],this.destroyed_=!1,this.disabled_=!1,this.renderLoopCallback_=null,this.slideCssClasses_=Ae.usingFunction(function(){return new Set}),this.activeCssClassSet_=new Set([d]),this.beforeCssClassMap_=Ae.usingFunction(function(E){return new Set([s.beforeCssClass_,s.beforeCssClass_+"--"+E])}),this.afterCssClassMap_=Ae.usingFunction(function(E){return new Set([s.afterCssClass_,s.afterCssClass_+"--"+E])}),this.init_()}return t.prototype.allowsLooping=function(){return this.allowLooping_},t.prototype.getLastActiveSlide=function(){return this.lastActiveSlide_},t.prototype.clearTransitionTarget_=function(){this.transitionTarget_=null},t.prototype.transitionToSlide=function(e,r){r===void 0&&(r=!1),!this.isBeingInteractedWith()&&(this.transitionTarget_=new tK(e,r))},t.prototype.init_=function(){this.transition_.init(this.getSlides()[0],this),this.render_()},t.prototype.isTransitioning=function(){return this.transitionTarget_!==null},t.prototype.isBeingInteractedWith=function(e){return e===void 0&&(e=null),this.interactions_.length>0&&(!Il(e)||this.interactions_.indexOf(e)!==-1)},t.prototype.isIdle=function(){return!this.isTransitioning()&&!this.isBeingInteractedWith()},t.prototype.render_=function(){var e=this;this.destroyed_||(this.renderLoopCallback_=se.measure(function(){if(se.cleanup(function(){return e.render_()}),!(e.disabled_||!e.condition_())){var r=e.handleTransition_();e.transition_.renderLoop(e);var n=e.getActiveSlide();n!==e.lastActiveSlide_&&(e.lastActiveSlide_=n,e.onTransitionCallbacks_.forEach(function(s){return s(e)}),n&&(e.renderLoopCallback_=se.mutate(function(){return e.updateClasses_(n)})),r&&Ih.getSingleton().transitionToIndex(e,e.getSlideIndex(n)))}}))},t.prototype.updateClasses_=function(e){var r=this,n=this.getSlidesBefore(e),s=this.getSlidesAfter(e),o=function(a,l){var c=r.slideCssClasses_.get(a),h=ea(c,l);r.slideCssClasses_.set(a,l),Yf(a,Array.from(h)),Ug(a,Array.from(l))};o(e,this.activeCssClassSet_),n.reverse().forEach(function(a,l){o(a,r.beforeCssClassMap_.get(l))}),s.forEach(function(a,l){o(a,r.afterCssClassMap_.get(l))})},t.prototype.handleTransition_=function(){if(this.isTransitioning()){var e=this.transition_.hasTransitionedTo(this.transitionTarget_.getElement(),this),r=!this.transitionTarget_.isDrivenBySync();return e?this.transitionTarget_=null:this.transition_.transition(this.transitionTarget_.getElement(),this),r}else return!0},t.prototype.getActiveSlide=function(){return this.transition_.getActiveSlide(this)},t.prototype.getActiveClass=function(){return this.activeCssClass_},t.prototype.getActiveSlideIndex=function(){return this.getSlideIndex(this.getActiveSlide())},t.prototype.getFirstSlide=function(){return this.slides_[0]},t.prototype.getLastSlide=function(){return this.slides_[this.slides_.length-1]},t.prototype.getSlideIndex=function(e){return this.getSlides().indexOf(e)},t.prototype.getSlidesBetween=function(e,r){return this.getSlides().slice(this.getSlideIndex(e)+1,this.getSlideIndex(r))},t.prototype.getContainer=function(){return this.container_},t.prototype.getSlides=function(){return JQ(this.slides_)},t.prototype.getVisibleSlides=function(){var e=this;return this.getSlides().filter(function(r){return oV(r,e.getContainer())})},t.prototype.getSlidesBefore=function(e){return this.allowsLooping()?cx(this.getSlides(),e,!0)[0]:this.getSlides().slice(0,this.getSlides().indexOf(e))},t.prototype.getSlidesAfter=function(e){return this.allowsLooping()?cx(this.getSlides(),e,!0)[1]:this.getSlides().slice(this.getSlides().indexOf(e)+1)},t.prototype.next=function(){this.transitionSlidesBy(1)},t.prototype.previous=function(){this.transitionSlidesBy(-1)},t.prototype.startInteraction=function(e){e===void 0&&(e=hV),this.clearTransitionTarget_(),this.interactions_.push(e)},t.prototype.endInteraction=function(e){e===void 0&&(e=hV),this.interactions_=hh(this.interactions_,e)},t.prototype.getCurrentTransitionTarget_=function(){return this.isTransitioning()?this.transitionTarget_.getElement():this.getActiveSlide()},t.prototype.transitionSlidesBy=function(e){var r=this.getSlides().indexOf(this.getCurrentTransitionTarget_())+e;this.transitionToIndex(r)},t.prototype.transitionToIndex=function(e,r){r===void 0&&(r=!1),r||Ih.getSingleton().transitionToIndex(this,e);var n=this.getClampedIndex_(e);this.transitionToSlide(this.getSlideByIndex(n),r)},t.prototype.getClampedIndex_=function(e){var r=this.getSlides().length;if(this.allowsLooping()){var n=e%r;return(n+r)%r}else return new ce(0,r-1).clamp(e)},t.prototype.transitionToSlideByIndex=function(e){console.warn("transitionToSlideByIndex is deprecated, please use transitionToIndex"),this.transitionToIndex(e)},t.prototype.onTransition=function(e){this.onTransitionCallbacks_.push(e)},t.prototype.onDestroy=function(e){this.onDestroyCallbacks_.push(e)},t.prototype.getSlideByIndex=function(e){return this.slides_[e]},t.prototype.enable=function(){this.disabled_=!1},t.prototype.disable=function(){this.disabled_=!0},t.prototype.destroy=function(){var e=this;this.destroyed_=!0,this.renderLoopCallback_&&se.clear(this.renderLoopCallback_),Ih.getSingleton().destroyCarousel(this),this.onDestroyCallbacks_.forEach(function(r){return r(e)})},t}();var Rh=function(){function t(e){this.target_=e}return t.prototype.getTarget=function(){return this.target_},t.createWatcher=function(e){return Pl},t}();var rK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xv=function(t){rK(e,t);function e(r,n,s){var o=t.call(this,r)||this;return o.element_=n,o.delta_=s,o}return e.prototype.getDelta=function(){return this.delta_},e.prototype.getElement=function(){return this.element_},e}(Rh);var iK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tv=function(t){iK(e,t);function e(r,n,s){var o=t.call(this,r)||this;return o.delta_=n,o.endVelocity_=s,o}return e.prototype.getDelta=function(){return this.delta_},e.prototype.getEndVelocity=function(){return this.endVelocity_},e}(Rh);var nK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Av=function(t){nK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Rh);var sK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uV=function(t){sK(e,t);function e(r,n){r===void 0&&(r=[]),n===void 0&&(n=Map);var s=t.call(this)||this;return s.replaceInnerMap(new Pi(r,n)),s}return e}(pn);var oK=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},aK=function(){function t(e,r,n,s){this.target_=e,this.EventClass_=r,this.callback_=n,this.destroy_=s}return Object.defineProperty(t.prototype,"target",{get:function(){return this.target_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"EventClass",{get:function(){return this.EventClass_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"callback",{get:function(){return this.callback_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroy",{get:function(){return this.destroy_},enumerable:!1,configurable:!0}),t}();function lK(t){var e=t.constructor;return oK([e],Hf(e))}var cK=new Wg,hK=function(){function t(){this.listeners_=new uV,this.uidsToCallbackGroups_=new Map}return t.prototype.addListener=function(e,r,n){var s=r.createWatcher(e),o=new aK(e,r,n,s);this.listeners_.get([e,r]).push(o);var a=cK.next().value;return this.uidsToCallbackGroups_.set(a,o),a},t.prototype.removeListener=function(e){var r=this.uidsToCallbackGroups_.get(e);if(typeof r!="undefined"){this.uidsToCallbackGroups_.delete(e),r.destroy();var n=this.listeners_.get([r.target,r.EventClass]);n.splice(n.indexOf(r),1)}},t.prototype.getCallbacks=function(e,r){return this.listeners_.get([e,r])},t.prototype.dispatchEvent=function(e){var r=this;lK(e).forEach(function(n){r.getCallbacks(e.getTarget(),n).forEach(function(s){return s.callback(e)})})},t}(),eo=new hK;function ps(t,e){return e===void 0&&(e=null),wv(t,e)+t.offsetWidth/2-(e!==null?e.offsetWidth:Tt.clientWidth)/2}var Lh=function(){function t(){var e=this;this.cleanMatrix_=Ae.usingFunction(function(r){return Ll.fromElementTransform(r)}),this.alteredMatrix_=Ae.usingFunction(function(r){return e.cleanMatrix_.get(r)}),this.init_()}return t.prototype.init_=function(){this.renderLoop_()},t.prototype.getCleanMatrix=function(e){return this.cleanMatrix_.get(e)},t.prototype.getAlteredMatrix=function(e){return this.alteredMatrix_.get(e)},t.prototype.getAlteredXTranslation=function(e){return this.getAlteredMatrix(e).getTranslateX()-this.getCleanMatrix(e).getTranslateX()},t.prototype.getAlteredYTranslation=function(e){return this.getAlteredMatrix(e).getTranslateY()-this.getCleanMatrix(e).getTranslateY()},t.prototype.translate=function(e,r){this.alteredMatrix_.set(e,this.alteredMatrix_.get(e).translate(r))},t.prototype.renderLoop_=function(){var e=this;se.anyMutate(function(){var r=e.alteredMatrix_.entries();Jr(r,function(n){var s=n[0],o=n[1];o.applyToElementTransform(s)}),se.anyCleanup(function(){e.cleanMatrix_.clear(),e.alteredMatrix_.clear(),e.renderLoop_()})})},t.getSingleton=function(){return this.singleton_=this.singleton_||new this},t.singleton_=null,t}();function to(t,e){Lh.getSingleton().translate(t,e)}function Ei(t,e){return t<0?e+t%e:t%e}var uK=new ce(0,1),fK=4,dK=.001,pK=1e-7,mK=10,ad=11,Mv=1/(ad-1),gK=typeof Float32Array=="function";function fV(t,e){return 1-3*e+3*t}function dV(t,e){return 3*e-6*t}function pV(t){return 3*t}function Cv(t,e,r){return((fV(e,r)*t+dV(e,r))*t+pV(e))*t}function mV(t,e,r){return 3*fV(e,r)*t*t+2*dV(e,r)*t+pV(e)}function vK(t,e,r,n,s){var o,a,l=0;do a=e+(r-e)/2,o=Cv(a,n,s)-t,o>0?r=a:e=a;while(Math.abs(o)>pK&&++l<mK);return a}function yK(t,e,r,n){for(var s=0;s<fK;++s){var o=mV(e,r,n);if(o===0)return e;var a=Cv(e,r,n)-t;e-=a/o}return e}function _K(t){return t}function gV(t,e,r,n){if(0<=t&&t<=1&&0<=r&&r<=1||ot.throw("bezier x values must be in [0, 1] range"),t===e&&r===n)return _K;for(var s=gK?new Float32Array(ad):new Array(ad),o=0;o<ad;++o)s[o]=Cv(o*Mv,t,r);function a(l){for(var c=0,h=1,f=ad-1;h!==f&&s[h]<=l;++h)c+=Mv;--h;var u=(l-s[h])/(s[h+1]-s[h]),m=c+u*Mv,d=mV(m,t,r);return d>=dK?yK(l,m,t,r):d===0?m:vK(l,c,c+Mv,t,r)}return function(c){return c===0?0:c===1?1:Cv(a(c),e,n)}}var zi=function(){function t(e,r,n,s){this.calcFunction_=gV(e,r,n,s)}return t.prototype.getAdjustedPercent=function(e){return this.calcFunction_(uK.clamp(e))},t.prototype.asFunction=function(){return this.calcFunction_},t.getFunction=function(e,r,n,s){return gV(e,r,n,s)},t}();var vV=function(){function t(){}return t.EASES_IN_OUT_SINE=zi.getFunction(.445,.05,.55,.95),t.EASE_IN_SINE=zi.getFunction(.47,0,.745,.715),t.EASE_OUT_SINE=zi.getFunction(.39,.575,.565,1),t}();var bK=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},Pv=function(){function t(){this.syncedDraggables_=[]}return t.getSingleton=function(){return this.singleton_=this.singleton_||new this},t.prototype.getSetForDraggable_=function(e){return this.syncedDraggables_.find(function(r){return r.has(e)})},t.prototype.syncDraggables=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=[],s=[new Set(e)];this.syncedDraggables_.forEach(function(o){e.find(function(a){return o.has(a)})?s.push(o):n.push(o)}),this.syncedDraggables_=bK(n,[Ev.apply(void 0,s)])},t.prototype.renderDrag=function(e,r){var n=this.getSetForDraggable_(e);n||to(e.getElement(),r),n.forEach(function(s){to(s.getElement(),r)})},t.prototype.destroyDraggable=function(e){this.syncedDraggables_.forEach(function(r){return r.delete(e)}),this.syncedDraggables_=this.syncedDraggables_.filter(function(r){return r.size>0})},t.prototype.destroy=function(){this.syncedDraggables_=[]},t.singleton_=null,t}();var Iv=function(){function t(){}return t.prototype.constrain=function(e,r){return console.warn("constrain is not overridden from base case"),r},t.applyConstraints=function(e,r,n){return n.reduce(function(s,o){return o.constrain(e,s)},r)},t}();var yV=function(){function t(){}return t.prototype.constrain=function(e){return new ke(e.x,0)},t}();var wK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SK=new yV,Rv=function(t){wK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.constrain=function(r,n){return SK.constrain(n)},e}(Iv);function Lv(t){return di.apply(void 0,t.map(function(e){return e.offsetWidth}))}var EK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_V=function(t){EK(e,t);function e(r){var n=t.call(this)||this;return n.container_=r.getContainer(),n.slides_=r.getSlides(),n}return e.prototype.constrain=function(r,n){var s=this.container_.offsetWidth/2,o=Lv(this.slides_),a=this.slides_.slice(-1)[0].offsetWidth,l=a/2,c=this.slides_[0].offsetWidth/2,h=s-o+l,f=s-c,u=ke.fromElementTransform(r.getElement()).x,m=u+n.getX(),d=new ce(h,f).clamp(m),v=d-u;return new ke(v,n.getY())},e}(Iv);var I=function(){function t(){}return t.INTERACT=Symbol("interact"),t.TOUCH=Symbol("touch"),t.CURSOR_DOWN=Symbol("cursor down"),t.CURSOR_MOVE=Symbol("cursor move"),t.CURSOR_UP=Symbol("cursor up"),t.ABORT=Symbol("abort"),t.AFTERPRINT=Symbol("afterprint"),t.ANIMATIONEND=Symbol("animationend"),t.ANIMATIONITERATION=Symbol("animationiteration"),t.ANIMATIONSTART=Symbol("animationstart"),t.APPINSTALLED=Symbol("appinstalled"),t.AUDIOPROCESS=Symbol("audioprocess"),t.AUDIOEND=Symbol("audioend"),t.AUDIOSTART=Symbol("audiostart"),t.BEFOREPRINT=Symbol("beforeprint"),t.BEFOREUNLOAD=Symbol("beforeunload"),t.BEGIN_EVENT=Symbol("beginEvent"),t.BLOCKED=Symbol("blocked"),t.BLUR=Symbol("blur"),t.BOUNDARY=Symbol("boundary"),t.CACHED=Symbol("cached"),t.CANPLAY=Symbol("canplay"),t.CANPLAYTHROUGH=Symbol("canplaythrough"),t.CHANGE=Symbol("change"),t.CHARGINGCHANGE=Symbol("chargingchange"),t.CHARGINGTIMECHANGE=Symbol("chargingtimechange"),t.CHECKING=Symbol("checking"),t.CLICK=Symbol("click"),t.CLOSE=Symbol("close"),t.COMPLETE=Symbol("complete"),t.THE=Symbol("The"),t.COMPOSITIONEND=Symbol("compositionend"),t.COMPOSITIONSTART=Symbol("compositionstart"),t.COMPOSITIONUPDATE=Symbol("compositionupdate"),t.CONTEXTMENU=Symbol("contextmenu"),t.COPY=Symbol("copy"),t.CUT=Symbol("cut"),t.DBLCLICK=Symbol("dblclick"),t.DEVICECHANGE=Symbol("devicechange"),t.DEVICELIGHT=Symbol("devicelight"),t.DEVICEMOTION=Symbol("devicemotion"),t.DEVICEORIENTATION=Symbol("deviceorientation"),t.DEVICEPROXIMITY=Symbol("deviceproximity"),t.DISCHARGINGTIMECHANGE=Symbol("dischargingtimechange"),t.DOMACTIVATE=Symbol("DOMActivate"),t.DOMATTRIBUTE_NAME_CHANGED=Symbol("DOMAttributeNameChanged"),t.DOMATTR_MODIFIED=Symbol("DOMAttrModified"),t.DOMCHARACTER_DATA_MODIFIED=Symbol("DOMCharacterDataModified"),t.DOMCONTENT_LOADED=Symbol("DOMContentLoaded"),t.DOMELEMENT_NAME_CHANGED=Symbol("DOMElementNameChanged"),t.DOMFOCUS_IN=Symbol("DOMFocusIn"),t.DOMFOCUS_OUT=Symbol("DOMFocusOut"),t.DOMNODE_INSERTED=Symbol("DOMNodeInserted"),t.DOMNODE_INSERTED_INTO_DOCUMENT=Symbol("DOMNodeInsertedIntoDocument"),t.DOMNODE_REMOVED=Symbol("DOMNodeRemoved"),t.DOMNODE_REMOVED_FROM_DOCUMENT=Symbol("DOMNodeRemovedFromDocument"),t.DOMSUBTREE_MODIFIED=Symbol("DOMSubtreeModified"),t.DOWNLOADING=Symbol("downloading"),t.DRAG=Symbol("drag"),t.DRAGEND=Symbol("dragend"),t.DRAGENTER=Symbol("dragenter"),t.DRAGLEAVE=Symbol("dragleave"),t.DRAGOVER=Symbol("dragover"),t.DRAGSTART=Symbol("dragstart"),t.DROP=Symbol("drop"),t.DURATIONCHANGE=Symbol("durationchange"),t.EMPTIED=Symbol("emptied"),t.END=Symbol("end"),t.ENDED=Symbol("ended"),t.END_EVENT=Symbol("endEvent"),t.ERROR=Symbol("error"),t.FOCUS=Symbol("focus"),t.FOCUSIN=Symbol("focusin"),t.FOCUSOUT=Symbol("focusout"),t.FULLSCREENCHANGE=Symbol("fullscreenchange"),t.FULLSCREENERROR=Symbol("fullscreenerror"),t.GAMEPADCONNECTED=Symbol("gamepadconnected"),t.GAMEPADDISCONNECTED=Symbol("gamepaddisconnected"),t.GOTPOINTERCAPTURE=Symbol("gotpointercapture"),t.HASHCHANGE=Symbol("hashchange"),t.LOSTPOINTERCAPTURE=Symbol("lostpointercapture"),t.INPUT=Symbol("input"),t.INVALID=Symbol("invalid"),t.KEYDOWN=Symbol("keydown"),t.KEYPRESS=Symbol("keypress"),t.KEYUP=Symbol("keyup"),t.LANGUAGECHANGE=Symbol("languagechange"),t.LEVELCHANGE=Symbol("levelchange"),t.LOAD=Symbol("load"),t.LOADEDDATA=Symbol("loadeddata"),t.LOADEDMETADATA=Symbol("loadedmetadata"),t.LOADEND=Symbol("loadend"),t.LOADSTART=Symbol("loadstart"),t.MARK=Symbol("mark"),t.MESSAGE=Symbol("message"),t.MESSAGEERROR=Symbol("messageerror"),t.MOUSEDOWN=Symbol("mousedown"),t.MOUSEENTER=Symbol("mouseenter"),t.MOUSELEAVE=Symbol("mouseleave"),t.MOUSEMOVE=Symbol("mousemove"),t.MOUSEOUT=Symbol("mouseout"),t.MOUSEOVER=Symbol("mouseover"),t.MOUSEUP=Symbol("mouseup"),t.NOMATCH=Symbol("nomatch"),t.NOTIFICATIONCLICK=Symbol("notificationclick"),t.NOUPDATE=Symbol("noupdate"),t.OBSOLETE=Symbol("obsolete"),t.OFFLINE=Symbol("offline"),t.ONLINE=Symbol("online"),t.OPEN=Symbol("open"),t.ORIENTATIONCHANGE=Symbol("orientationchange"),t.PAGEHIDE=Symbol("pagehide"),t.PAGESHOW=Symbol("pageshow"),t.PASTE=Symbol("paste"),t.PAUSE=Symbol("pause"),t.POINTERCANCEL=Symbol("pointercancel"),t.POINTERDOWN=Symbol("pointerdown"),t.POINTERENTER=Symbol("pointerenter"),t.POINTERLEAVE=Symbol("pointerleave"),t.POINTERLOCKCHANGE=Symbol("pointerlockchange"),t.POINTERLOCKERROR=Symbol("pointerlockerror"),t.POINTERMOVE=Symbol("pointermove"),t.POINTEROUT=Symbol("pointerout"),t.POINTEROVER=Symbol("pointerover"),t.POINTERUP=Symbol("pointerup"),t.PLAY=Symbol("play"),t.PLAYING=Symbol("playing"),t.POPSTATE=Symbol("popstate"),t.PROGRESS=Symbol("progress"),t.PUSH=Symbol("push"),t.PUSHSUBSCRIPTIONCHANGE=Symbol("pushsubscriptionchange"),t.RATECHANGE=Symbol("ratechange"),t.READYSTATECHANGE=Symbol("readystatechange"),t.REPEAT_EVENT=Symbol("repeatEvent"),t.RESET=Symbol("reset"),t.RESIZE=Symbol("resize"),t.RESOURCETIMINGBUFFERFULL=Symbol("resourcetimingbufferfull"),t.RESULT=Symbol("result"),t.RESUME=Symbol("resume"),t.SCROLL=Symbol("scroll"),t.SEEKED=Symbol("seeked"),t.SEEKING=Symbol("seeking"),t.SELECT=Symbol("select"),t.SELECTSTART=Symbol("selectstart"),t.SELECTIONCHANGE=Symbol("selectionchange"),t.SHOW=Symbol("show"),t.SOUNDEND=Symbol("soundend"),t.SOUNDSTART=Symbol("soundstart"),t.SPEECHEND=Symbol("speechend"),t.SPEECHSTART=Symbol("speechstart"),t.STALLED=Symbol("stalled"),t.START=Symbol("start"),t.STORAGE=Symbol("storage"),t.SUBMIT=Symbol("submit"),t.SUCCESS=Symbol("success"),t.SUSPEND=Symbol("suspend"),t.SVGABORT=Symbol("SVGAbort"),t.SVGERROR=Symbol("SVGError"),t.SVGLOAD=Symbol("SVGLoad"),t.SVGRESIZE=Symbol("SVGResize"),t.SVGSCROLL=Symbol("SVGScroll"),t.SVGUNLOAD=Symbol("SVGUnload"),t.SVGZOOM=Symbol("SVGZoom"),t.TIMEOUT=Symbol("timeout"),t.TIMEUPDATE=Symbol("timeupdate"),t.TOUCHCANCEL=Symbol("touchcancel"),t.TOUCHEND=Symbol("touchend"),t.TOUCHMOVE=Symbol("touchmove"),t.TOUCHSTART=Symbol("touchstart"),t.TRANSITIONEND=Symbol("transitionend"),t.UNLOAD=Symbol("unload"),t.UPDATEREADY=Symbol("updateready"),t.UPGRADENEEDED=Symbol("upgradeneeded"),t.USERPROXIMITY=Symbol("userproximity"),t.VOICESCHANGED=Symbol("voiceschanged"),t.VERSIONCHANGE=Symbol("versionchange"),t.VISIBILITYCHANGE=Symbol("visibilitychange"),t.VOLUMECHANGE=Symbol("volumechange"),t.WAITING=Symbol("waiting"),t.WHEEL=Symbol("wheel"),t.AFTERSCRIPTEXECUTE=Symbol("afterscriptexecute"),t.BEFORESCRIPTEXECUTE=Symbol("beforescriptexecute"),t.BEFOREINSTALLPROMPT=Symbol("beforeinstallprompt"),t.CARDSTATECHANGE=Symbol("cardstatechange"),t.CONNECTION_INFO_UPDATE=Symbol("connectionInfoUpdate"),t.CFSTATECHANGE=Symbol("cfstatechange"),t.DATACHANGE=Symbol("datachange"),t.DATAERROR=Symbol("dataerror"),t.DOMMOUSE_SCROLL=Symbol("DOMMouseScroll"),t.DRAGDROP=Symbol("dragdrop"),t.DRAGEXIT=Symbol("dragexit"),t.DRAGGESTURE=Symbol("draggesture"),t.ICCCARDLOCKERROR=Symbol("icccardlockerror"),t.ICCINFOCHANGE=Symbol("iccinfochange"),t.LOCALIZED=Symbol("localized"),t.MOUSEWHEEL=Symbol("mousewheel"),t.MOZ_AUDIO_AVAILABLE=Symbol("MozAudioAvailable"),t.MOZ_BEFORE_RESIZE=Symbol("MozBeforeResize"),t.MOZBROWSERACTIVITYDONE=Symbol("mozbrowseractivitydone"),t.MOZBROWSERASYNCSCROLL=Symbol("mozbrowserasyncscroll"),t.MOZBROWSERAUDIOPLAYBACKCHANGE=Symbol("mozbrowseraudioplaybackchange"),t.MOZBROWSERCARETSTATECHANGED=Symbol("mozbrowsercaretstatechanged"),t.MOZBROWSERCLOSE=Symbol("mozbrowserclose"),t.MOZBROWSERCONTEXTMENU=Symbol("mozbrowsercontextmenu"),t.MOZBROWSERDOCUMENTFIRSTPAINT=Symbol("mozbrowserdocumentfirstpaint"),t.MOZBROWSERERROR=Symbol("mozbrowsererror"),t.MOZBROWSERFINDCHANGE=Symbol("mozbrowserfindchange"),t.MOZBROWSERFIRSTPAINT=Symbol("mozbrowserfirstpaint"),t.MOZBROWSERICONCHANGE=Symbol("mozbrowsericonchange"),t.MOZBROWSERLOCATIONCHANGE=Symbol("mozbrowserlocationchange"),t.MOZBROWSERLOADEND=Symbol("mozbrowserloadend"),t.MOZBROWSERLOADSTART=Symbol("mozbrowserloadstart"),t.MOZBROWSERMANIFESTCHANGE=Symbol("mozbrowsermanifestchange"),t.MOZBROWSERMETACHANGE=Symbol("mozbrowsermetachange"),t.MOZBROWSEROPENSEARCH=Symbol("mozbrowseropensearch"),t.MOZBROWSEROPENTAB=Symbol("mozbrowseropentab"),t.MOZBROWSEROPENWINDOW=Symbol("mozbrowseropenwindow"),t.MOZBROWSERRESIZE=Symbol("mozbrowserresize"),t.MOZBROWSERSCROLL=Symbol("mozbrowserscroll"),t.MOZBROWSERSCROLLAREACHANGED=Symbol("mozbrowserscrollareachanged"),t.MOZBROWSERSCROLLVIEWCHANGE=Symbol("mozbrowserscrollviewchange"),t.MOZBROWSERSECURITYCHANGE=Symbol("mozbrowsersecuritychange"),t.MOZBROWSERSELECTIONSTATECHANGED=Symbol("mozbrowserselectionstatechanged"),t.MOZBROWSERSHOWMODALPROMPT=Symbol("mozbrowsershowmodalprompt"),t.MOZBROWSERTITLECHANGE=Symbol("mozbrowsertitlechange"),t.MOZBROWSERUSERNAMEANDPASSWORDREQUIRED=Symbol("mozbrowserusernameandpasswordrequired"),t.MOZBROWSERVISIBILITYCHANGE=Symbol("mozbrowservisibilitychange"),t.MOZ_GAMEPAD_BUTTON_DOWN=Symbol("MozGamepadButtonDown"),t.MOZ_GAMEPAD_BUTTON_UP=Symbol("MozGamepadButtonUp"),t.MOZ_MOUSE_PIXEL_SCROLL=Symbol("MozMousePixelScroll"),t.MOZ_ORIENTATION=Symbol("MozOrientation"),t.MOZ_SCROLLED_AREA_CHANGED=Symbol("MozScrolledAreaChanged"),t.MOZTIMECHANGE=Symbol("moztimechange"),t.MOZ_TOUCH_DOWN=Symbol("MozTouchDown"),t.MOZ_TOUCH_MOVE=Symbol("MozTouchMove"),t.MOZ_TOUCH_UP=Symbol("MozTouchUp"),t.ALERTING=Symbol("alerting"),t.BUSY=Symbol("busy"),t.CALLSCHANGED=Symbol("callschanged"),t.ONCONNECTED=Symbol("onconnected"),t.CONNECTING=Symbol("connecting"),t.DELIVERED=Symbol("delivered"),t.DIALING=Symbol("dialing"),t.DISABLED=Symbol("disabled"),t.DISCONNECTED=Symbol("disconnected"),t.DISCONNECTING=Symbol("disconnecting"),t.ENABLED=Symbol("enabled"),t.HELD=Symbol("held"),t.HOLDING=Symbol("holding"),t.INCOMING=Symbol("incoming"),t.RECEIVED=Symbol("received"),t.RESUMING=Symbol("resuming"),t.SENT=Symbol("sent"),t.STATECHANGE=Symbol("statechange"),t.STATUSCHANGE=Symbol("statuschange"),t.OVERFLOW=Symbol("overflow"),t.SMARTCARD=Symbol("smartcard"),t.STKCOMMAND=Symbol("stkcommand"),t.STKSESSIONEND=Symbol("stksessionend"),t.TEXT=Symbol("text"),t.TOUCHENTER=Symbol("touchenter"),t.TOUCHLEAVE=Symbol("touchleave"),t.UNDERFLOW=Symbol("underflow"),t.UPLOADPROGRESS=Symbol("uploadprogress"),t.USSDRECEIVED=Symbol("ussdreceived"),t.VOICECHANGE=Symbol("voicechange"),t.BROADCAST=Symbol("broadcast"),t.CHECKBOX_STATE_CHANGE=Symbol("CheckboxStateChange"),t.COMMAND=Symbol("command"),t.COMMANDUPDATE=Symbol("commandupdate"),t.DOMMENU_ITEM_ACTIVE=Symbol("DOMMenuItemActive"),t.DOMMENU_ITEM_INACTIVE=Symbol("DOMMenuItemInactive"),t.POPUPHIDDEN=Symbol("popuphidden"),t.POPUPHIDING=Symbol("popuphiding"),t.POPUPSHOWING=Symbol("popupshowing"),t.POPUPSHOWN=Symbol("popupshown"),t.RADIO_STATE_CHANGE=Symbol("RadioStateChange"),t.VALUE_CHANGE=Symbol("ValueChange"),t.ADD=Symbol("Add"),t.MOZ_SWIPE_GESTURE=Symbol("MozSwipeGesture"),t.MOZ_MAGNIFY_GESTURE_START=Symbol("MozMagnifyGestureStart"),t.MOZ_MAGNIFY_GESTURE_UPDATE=Symbol("MozMagnifyGestureUpdate"),t.MOZ_MAGNIFY_GESTURE=Symbol("MozMagnifyGesture"),t.MOZ_ROTATE_GESTURE_START=Symbol("MozRotateGestureStart"),t.MOZ_ROTATE_GESTURE_UPDATE=Symbol("MozRotateGestureUpdate"),t.MOZ_ROTATE_GESTURE=Symbol("MozRotateGesture"),t.MOZ_TAP_GESTURE=Symbol("MozTapGesture"),t.MOZ_PRESS_TAP_GESTURE=Symbol("MozPressTapGesture"),t.MOZ_EDGE_UIGESTURE=Symbol("MozEdgeUIGesture"),t.MOZ_AFTER_PAINT=Symbol("MozAfterPaint"),t.DOMPOPUP_BLOCKED=Symbol("DOMPopupBlocked"),t.DOMWINDOW_CREATED=Symbol("DOMWindowCreated"),t.DOMWINDOW_CLOSE=Symbol("DOMWindowClose"),t.DOMTITLE_CHANGED=Symbol("DOMTitleChanged"),t.DOMLINK_ADDED=Symbol("DOMLinkAdded"),t.DOMLINK_REMOVED=Symbol("DOMLinkRemoved"),t.DOMMETA_ADDED=Symbol("DOMMetaAdded"),t.DOMMETA_REMOVED=Symbol("DOMMetaRemoved"),t.DOMWILL_OPEN_MODAL_DIALOG=Symbol("DOMWillOpenModalDialog"),t.DOMMODAL_DIALOG_CLOSED=Symbol("DOMModalDialogClosed"),t.DOMAUTO_COMPLETE=Symbol("DOMAutoComplete"),t.DOMFRAME_CONTENT_LOADED=Symbol("DOMFrameContentLoaded"),t.ALERT_ACTIVE=Symbol("AlertActive"),t.ALERT_CLOSE=Symbol("AlertClose"),t.FULLSCREEN=Symbol("fullscreen"),t.SIZEMODECHANGE=Symbol("sizemodechange"),t.MOZ_ENTERED_DOM_FULLSCREEN=Symbol("MozEnteredDomFullscreen"),t.SSWINDOW_CLOSING=Symbol("SSWindowClosing"),t.SSTAB_CLOSING=Symbol("SSTabClosing"),t.SSTAB_RESTORING=Symbol("SSTabRestoring"),t.SSTAB_RESTORED=Symbol("SSTabRestored"),t.SSWINDOW_STATE_READY=Symbol("SSWindowStateReady"),t.SSWINDOW_STATE_BUSY=Symbol("SSWindowStateBusy"),t.TAB_OPEN=Symbol("TabOpen"),t.TAB_CLOSE=Symbol("TabClose"),t.TAB_SELECT=Symbol("TabSelect"),t.TAB_SHOW=Symbol("TabShow"),t.TAB_HIDE=Symbol("TabHide"),t.TAB_PINNED=Symbol("TabPinned"),t.TAB_UNPINNED=Symbol("TabUnpinned"),t.CSS_RULE_VIEW_REFRESHED=Symbol("CssRuleViewRefreshed"),t.CSS_RULE_VIEW_CHANGED=Symbol("CssRuleViewChanged"),t.CSS_RULE_VIEW_CSSLINK_CLICKED=Symbol("CssRuleViewCSSLinkClicked"),t}();var Oh=new Map([[I.INTERACT,[I.CLICK,I.TOUCH]],[I.CURSOR_DOWN,[I.MOUSEDOWN,I.TOUCHSTART]],[I.CURSOR_MOVE,[I.MOUSEMOVE,I.TOUCHMOVE]],[I.CURSOR_UP,[I.MOUSEUP,I.TOUCHEND]]]);var bV=new Map([[I.ABORT,!0],[I.AFTERPRINT,!0],[I.ANIMATIONEND,!0],[I.ANIMATIONITERATION,!0],[I.ANIMATIONSTART,!0],[I.APPINSTALLED,!0],[I.AUDIOPROCESS,!0],[I.AUDIOEND,!0],[I.AUDIOSTART,!0],[I.BEFOREPRINT,!0],[I.BEFOREUNLOAD,!0],[I.BEGIN_EVENT,!0],[I.BLOCKED,!0],[I.BLUR,!0],[I.BOUNDARY,!0],[I.CACHED,!0],[I.CANPLAY,!0],[I.CANPLAYTHROUGH,!0],[I.CHANGE,!0],[I.CHARGINGCHANGE,!0],[I.CHARGINGTIMECHANGE,!0],[I.CHECKING,!0],[I.CLICK,!0],[I.CLOSE,!0],[I.COMPLETE,!0],[I.THE,!0],[I.COMPOSITIONEND,!0],[I.COMPOSITIONSTART,!0],[I.COMPOSITIONUPDATE,!0],[I.CONTEXTMENU,!0],[I.COPY,!0],[I.CUT,!0],[I.DBLCLICK,!0],[I.DEVICECHANGE,!0],[I.DEVICELIGHT,!0],[I.DEVICEMOTION,!0],[I.DEVICEORIENTATION,!0],[I.DEVICEPROXIMITY,!0],[I.DISCHARGINGTIMECHANGE,!0],[I.DOMACTIVATE,!0],[I.DOMATTRIBUTE_NAME_CHANGED,!0],[I.DOMATTR_MODIFIED,!0],[I.DOMCHARACTER_DATA_MODIFIED,!0],[I.DOMCONTENT_LOADED,!0],[I.DOMELEMENT_NAME_CHANGED,!0],[I.DOMFOCUS_IN,!0],[I.DOMFOCUS_OUT,!0],[I.DOMNODE_INSERTED,!0],[I.DOMNODE_INSERTED_INTO_DOCUMENT,!0],[I.DOMNODE_REMOVED,!0],[I.DOMNODE_REMOVED_FROM_DOCUMENT,!0],[I.DOMSUBTREE_MODIFIED,!0],[I.DOWNLOADING,!0],[I.DRAG,!0],[I.DRAGEND,!0],[I.DRAGENTER,!0],[I.DRAGLEAVE,!0],[I.DRAGOVER,!0],[I.DRAGSTART,!0],[I.DROP,!0],[I.DURATIONCHANGE,!0],[I.EMPTIED,!0],[I.END,!0],[I.ENDED,!0],[I.END_EVENT,!0],[I.ERROR,!0],[I.FOCUS,!0],[I.FOCUSIN,!0],[I.FOCUSOUT,!0],[I.FULLSCREENCHANGE,!0],[I.FULLSCREENERROR,!0],[I.GAMEPADCONNECTED,!0],[I.GAMEPADDISCONNECTED,!0],[I.GOTPOINTERCAPTURE,!0],[I.HASHCHANGE,!0],[I.LOSTPOINTERCAPTURE,!0],[I.INPUT,!0],[I.INVALID,!0],[I.KEYDOWN,!0],[I.KEYPRESS,!0],[I.KEYUP,!0],[I.LANGUAGECHANGE,!0],[I.LEVELCHANGE,!0],[I.LOAD,!0],[I.LOADEDDATA,!0],[I.LOADEDMETADATA,!0],[I.LOADEND,!0],[I.LOADSTART,!0],[I.MARK,!0],[I.MESSAGE,!0],[I.MESSAGEERROR,!0],[I.MOUSEDOWN,!0],[I.MOUSEENTER,!0],[I.MOUSELEAVE,!0],[I.MOUSEMOVE,!0],[I.MOUSEOUT,!0],[I.MOUSEOVER,!0],[I.MOUSEUP,!0],[I.NOMATCH,!0],[I.NOTIFICATIONCLICK,!0],[I.NOUPDATE,!0],[I.OBSOLETE,!0],[I.OFFLINE,!0],[I.ONLINE,!0],[I.OPEN,!0],[I.ORIENTATIONCHANGE,!0],[I.PAGEHIDE,!0],[I.PAGESHOW,!0],[I.PASTE,!0],[I.PAUSE,!0],[I.POINTERCANCEL,!0],[I.POINTERDOWN,!0],[I.POINTERENTER,!0],[I.POINTERLEAVE,!0],[I.POINTERLOCKCHANGE,!0],[I.POINTERLOCKERROR,!0],[I.POINTERMOVE,!0],[I.POINTEROUT,!0],[I.POINTEROVER,!0],[I.POINTERUP,!0],[I.PLAY,!0],[I.PLAYING,!0],[I.POPSTATE,!0],[I.PROGRESS,!0],[I.PUSH,!0],[I.PUSHSUBSCRIPTIONCHANGE,!0],[I.RATECHANGE,!0],[I.READYSTATECHANGE,!0],[I.REPEAT_EVENT,!0],[I.RESET,!0],[I.RESIZE,!0],[I.RESOURCETIMINGBUFFERFULL,!0],[I.RESULT,!0],[I.RESUME,!0],[I.SCROLL,!0],[I.SEEKED,!0],[I.SEEKING,!0],[I.SELECT,!0],[I.SELECTSTART,!0],[I.SELECTIONCHANGE,!0],[I.SHOW,!0],[I.SOUNDEND,!0],[I.SOUNDSTART,!0],[I.SPEECHEND,!0],[I.SPEECHSTART,!0],[I.STALLED,!0],[I.START,!0],[I.STORAGE,!0],[I.SUBMIT,!0],[I.SUCCESS,!0],[I.SUSPEND,!0],[I.SVGABORT,!0],[I.SVGERROR,!0],[I.SVGLOAD,!0],[I.SVGRESIZE,!0],[I.SVGSCROLL,!0],[I.SVGUNLOAD,!0],[I.SVGZOOM,!0],[I.TIMEOUT,!0],[I.TIMEUPDATE,!0],[I.TOUCHCANCEL,!0],[I.TOUCHEND,!0],[I.TOUCHMOVE,!0],[I.TOUCHSTART,!0],[I.TRANSITIONEND,!0],[I.UNLOAD,!0],[I.UPDATEREADY,!0],[I.UPGRADENEEDED,!0],[I.USERPROXIMITY,!0],[I.VOICESCHANGED,!0],[I.VERSIONCHANGE,!0],[I.VISIBILITYCHANGE,!0],[I.VOLUMECHANGE,!0],[I.WAITING,!0],[I.WHEEL,!0],[I.AFTERSCRIPTEXECUTE,!0],[I.BEFORESCRIPTEXECUTE,!0],[I.BEFOREINSTALLPROMPT,!0],[I.CARDSTATECHANGE,!0],[I.CONNECTION_INFO_UPDATE,!0],[I.CFSTATECHANGE,!0],[I.DATACHANGE,!0],[I.DATAERROR,!0],[I.DOMMOUSE_SCROLL,!0],[I.DRAGDROP,!0],[I.DRAGEXIT,!0],[I.DRAGGESTURE,!0],[I.ICCCARDLOCKERROR,!0],[I.ICCINFOCHANGE,!0],[I.LOCALIZED,!0],[I.MOUSEWHEEL,!0],[I.MOZ_AUDIO_AVAILABLE,!0],[I.MOZ_BEFORE_RESIZE,!0],[I.MOZBROWSERACTIVITYDONE,!0],[I.MOZBROWSERASYNCSCROLL,!0],[I.MOZBROWSERAUDIOPLAYBACKCHANGE,!0],[I.MOZBROWSERCARETSTATECHANGED,!0],[I.MOZBROWSERCLOSE,!0],[I.MOZBROWSERCONTEXTMENU,!0],[I.MOZBROWSERDOCUMENTFIRSTPAINT,!0],[I.MOZBROWSERERROR,!0],[I.MOZBROWSERFINDCHANGE,!0],[I.MOZBROWSERFIRSTPAINT,!0],[I.MOZBROWSERICONCHANGE,!0],[I.MOZBROWSERLOCATIONCHANGE,!0],[I.MOZBROWSERLOADEND,!0],[I.MOZBROWSERLOADSTART,!0],[I.MOZBROWSERMANIFESTCHANGE,!0],[I.MOZBROWSERMETACHANGE,!0],[I.MOZBROWSEROPENSEARCH,!0],[I.MOZBROWSEROPENTAB,!0],[I.MOZBROWSEROPENWINDOW,!0],[I.MOZBROWSERRESIZE,!0],[I.MOZBROWSERSCROLL,!0],[I.MOZBROWSERSCROLLAREACHANGED,!0],[I.MOZBROWSERSCROLLVIEWCHANGE,!0],[I.MOZBROWSERSECURITYCHANGE,!0],[I.MOZBROWSERSELECTIONSTATECHANGED,!0],[I.MOZBROWSERSHOWMODALPROMPT,!0],[I.MOZBROWSERTITLECHANGE,!0],[I.MOZBROWSERUSERNAMEANDPASSWORDREQUIRED,!0],[I.MOZBROWSERVISIBILITYCHANGE,!0],[I.MOZ_GAMEPAD_BUTTON_DOWN,!0],[I.MOZ_GAMEPAD_BUTTON_UP,!0],[I.MOZ_MOUSE_PIXEL_SCROLL,!0],[I.MOZ_ORIENTATION,!0],[I.MOZ_SCROLLED_AREA_CHANGED,!0],[I.MOZTIMECHANGE,!0],[I.MOZ_TOUCH_DOWN,!0],[I.MOZ_TOUCH_MOVE,!0],[I.MOZ_TOUCH_UP,!0],[I.ALERTING,!0],[I.BUSY,!0],[I.CALLSCHANGED,!0],[I.ONCONNECTED,!0],[I.CONNECTING,!0],[I.DELIVERED,!0],[I.DIALING,!0],[I.DISABLED,!0],[I.DISCONNECTED,!0],[I.DISCONNECTING,!0],[I.ENABLED,!0],[I.HELD,!0],[I.HOLDING,!0],[I.INCOMING,!0],[I.RECEIVED,!0],[I.RESUMING,!0],[I.SENT,!0],[I.STATECHANGE,!0],[I.STATUSCHANGE,!0],[I.OVERFLOW,!0],[I.SMARTCARD,!0],[I.STKCOMMAND,!0],[I.STKSESSIONEND,!0],[I.TEXT,!0],[I.TOUCHENTER,!0],[I.TOUCHLEAVE,!0],[I.UNDERFLOW,!0],[I.UPLOADPROGRESS,!0],[I.USSDRECEIVED,!0],[I.VOICECHANGE,!0],[I.BROADCAST,!0],[I.CHECKBOX_STATE_CHANGE,!0],[I.COMMAND,!0],[I.COMMANDUPDATE,!0],[I.DOMMENU_ITEM_ACTIVE,!0],[I.DOMMENU_ITEM_INACTIVE,!0],[I.POPUPHIDDEN,!0],[I.POPUPHIDING,!0],[I.POPUPSHOWING,!0],[I.POPUPSHOWN,!0],[I.RADIO_STATE_CHANGE,!0],[I.VALUE_CHANGE,!0],[I.ADD,!0],[I.MOZ_SWIPE_GESTURE,!0],[I.MOZ_MAGNIFY_GESTURE_START,!0],[I.MOZ_MAGNIFY_GESTURE_UPDATE,!0],[I.MOZ_MAGNIFY_GESTURE,!0],[I.MOZ_ROTATE_GESTURE_START,!0],[I.MOZ_ROTATE_GESTURE_UPDATE,!0],[I.MOZ_ROTATE_GESTURE,!0],[I.MOZ_TAP_GESTURE,!0],[I.MOZ_PRESS_TAP_GESTURE,!0],[I.MOZ_EDGE_UIGESTURE,!0],[I.MOZ_AFTER_PAINT,!0],[I.DOMPOPUP_BLOCKED,!0],[I.DOMWINDOW_CREATED,!0],[I.DOMWINDOW_CLOSE,!0],[I.DOMTITLE_CHANGED,!0],[I.DOMLINK_ADDED,!0],[I.DOMLINK_REMOVED,!0],[I.DOMMETA_ADDED,!0],[I.DOMMETA_REMOVED,!0],[I.DOMWILL_OPEN_MODAL_DIALOG,!0],[I.DOMMODAL_DIALOG_CLOSED,!0],[I.DOMAUTO_COMPLETE,!0],[I.DOMFRAME_CONTENT_LOADED,!0],[I.ALERT_ACTIVE,!0],[I.ALERT_CLOSE,!0],[I.FULLSCREEN,!0],[I.SIZEMODECHANGE,!0],[I.MOZ_ENTERED_DOM_FULLSCREEN,!0],[I.SSWINDOW_CLOSING,!0],[I.SSTAB_CLOSING,!0],[I.SSTAB_RESTORING,!0],[I.SSTAB_RESTORED,!0],[I.SSWINDOW_STATE_READY,!0],[I.SSWINDOW_STATE_BUSY,!0],[I.TAB_OPEN,!0],[I.TAB_CLOSE,!0],[I.TAB_SELECT,!0],[I.TAB_SHOW,!0],[I.TAB_HIDE,!0],[I.TAB_PINNED,!0],[I.TAB_UNPINNED,!0],[I.CSS_RULE_VIEW_REFRESHED,!0],[I.CSS_RULE_VIEW_CHANGED,!0],[I.CSS_RULE_VIEW_CSSLINK_CLICKED,!0]]);function wV(t){var e=t.toString().split("Symbol(").slice(1).join("Symbol(");return e.split(")").slice(0,-1).join(")")}var xK=0,Ov=Ae.usingFunction(function(t){var e=wV(t);return bV.has(t)?e:"CustomEvent_"+xK++});function na(t,e,r){if(Oh.has(e))return Oh.get(e).forEach(function(s){return na(t,s,r)});var n=Ov.get(e);t.addEventListener(n,r)}function ld(t,e,r){if(Oh.has(e))return Oh.get(e).forEach(function(s){return ld(t,s,r)});var n=Ov.get(e);t.removeEventListener(n,r)}var sa=new ke(0,0);var TK=function(){function t(){this.currentFrame=0,this.render()}return t.prototype.render=function(){var e=this;se.framecount(function(){e.currentFrame++,se.cleanup(function(){return e.render()})})},t.prototype.getFrame=function(){return this.currentFrame},t.getSingleton=function(){return this.singleton||(this.singleton=new this)},t.singleton=null,t}(),Dv=TK.getSingleton();function ml(t,e){for(var r=0;r<t.length&&e(t[r],r);)r++;return t.slice(0,r)}function SV(t,e){return ml(t,function(r,n){return!e(r,n)})}var AK=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n};function EV(t,e){var r=SV(t,e);return r.length<t.length?AK(r,[t[r.length]]):r}var cd=function(){function t(e,r){this.position_=e,this.pressed_=r,this.frame_=Dv.getFrame(),this.time_=new Date}return t.fromXY=function(e,r,n){return new this(new ke(e,r),n)},t.prototype.getFrame=function(){return this.frame_},t.prototype.isForFrame=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.indexOf(this.getFrame())!==-1},t.prototype.isPressed=function(){return this.pressed_},t.prototype.getPosition=function(){return this.position_},t.prototype.getTime=function(){return this.time_},t}();var xV=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},MK=1e3,CK=100,PK=new cd(sa,!1),Fv=function(){function t(e){e===void 0&&(e=PK);for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.positions_=xV([e],r)}return t.prototype.update=function(e){return new(t.bind.apply(t,xV([void 0,e],this.positions_.slice(0,CK-1))))},t.prototype.getLatestPosition=function(){return this.positions_[0]},t.prototype.getPosition=function(){return this.getLatestPosition().getPosition()},t.prototype.getFrameDelta=function(){return this.getFrameDelta_(!1)},t.prototype.getPressedFrameDelta=function(){return this.getFrameDelta_(!0)},t.prototype.getFrameDelta_=function(e){var r=this.getPositionsForFrameDelta_(e);return r.length===0?sa:ke.sumDeltas.apply(ke,r.map(function(n){return n.getPosition()}))},t.prototype.getPositionsForFrameDelta_=function(e){var r=Dv.getFrame();if(!this.getLatestPosition().isForFrame(r))return[];var n=function(a){return!a.isForFrame(r)},s=EV(this.positions_,n);if(e){var o=function(a){return a.isPressed()};return ml(s,o)}else return s},t.prototype.getGestureDelta=function(){return t.getGestureDeltaFromPositions_.apply(t,this.positions_)},t.prototype.getPressedGestureDelta=function(){return t.getGestureDeltaFromPositions_.apply(t,this.getPressedGesturePositions_())},t.prototype.getLastFrameVelocity=function(){var e=this.getFramesWithTimeDifference_(),r=e[0],n=e.slice(-1)[0],s=(r.getTime().valueOf()-n.getTime().valueOf())/1e3;return this.getLastFrameDelta().scale(1/s)},t.prototype.getLastFrameDelta=function(){var e=this.getFramesWithTimeDifference_(),r=e[0],n=e.slice(-1)[0];return r.getPosition().subtract(n.getPosition())},t.prototype.getFramesWithTimeDifference_=function(){var e=this.positions_[0],r=this.positions_.find(function(n){return n.getTime().valueOf()!==e.getTime().valueOf()});return this.positions_.slice(0,this.positions_.indexOf(r)+1)},t.prototype.getPressedGesturePositions_=function(){var e=new Date().valueOf(),r=function(n){var s=e-n.getTime().valueOf();return s<MK&&n.isPressed()};return ml(this.positions_,r)},t.getGestureDeltaFromPositions_=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=ke.getDeltas.apply(ke,e.map(function(o){return o.getPosition()})),s=n.map(function(o,a){return o.scale((n.length-a)/n.length)});return ke.add.apply(ke,s)},t}();var fx=new Set,hd=null,Nv=function(){function t(){var e=this;this.clientPosition_=new Fv,this.pagePosition_=new Fv,this.screenPosition_=new Fv,this.pressed_=!1,this.frame_=0,this.cursorDownHandler_=function(r){return e.updatePress_(r,!0)},this.cursorUpHandler_=function(r){return e.updatePress_(r,!1)},this.cursorMoveHandler_=function(r){return e.updatePosition_(r)},this.init_()}return t.prototype.init_=function(){na(window,I.CURSOR_DOWN,this.cursorDownHandler_),na(window,I.CURSOR_UP,this.cursorUpHandler_),na(window,I.CURSOR_MOVE,this.cursorMoveHandler_)},t.getSingleton=function(e){return fx.add(e),hd===null&&(hd=new t),hd},t.prototype.isPressed=function(){return this.pressed_},t.prototype.getClient=function(){return this.clientPosition_},t.prototype.getPage=function(){return this.pagePosition_},t.prototype.getScreen=function(){return this.screenPosition_},t.prototype.updatePress_=function(e,r){this.pressed_=r,this.updatePosition_(e)},t.prototype.updatePosition_=function(e){e instanceof MouseEvent?this.updatePositionFromEvent_(e):e instanceof TouchEvent&&this.updatePositionFromTouchEvent_(e)},t.prototype.updatePositionFromTouchEvent_=function(e){e.touches.length>0?this.updatePositionFromEvent_(e.touches[0]):this.endTouch_()},t.prototype.endTouch_=function(){var e=this;se.premeasure(function(){e.pagePosition_=e.duplicatePosition_(e.pagePosition_),e.clientPosition_=e.duplicatePosition_(e.clientPosition_),e.screenPosition_=e.duplicatePosition_(e.screenPosition_)})},t.prototype.updatePositionFromEvent_=function(e){var r=this;se.premeasure(function(){r.pagePosition_=r.updatePositionWithXY_(r.pagePosition_,e.pageX,e.pageY),r.clientPosition_=r.updatePositionWithXY_(r.clientPosition_,e.clientX,e.clientY),r.screenPosition_=r.updatePositionWithXY_(r.screenPosition_,e.screenX,e.screenY)})},t.prototype.duplicatePosition_=function(e){return e.update(new cd(e.getPosition(),this.isPressed()))},t.prototype.updatePositionWithXY_=function(e,r,n){return e.update(cd.fromXY(r,n,this.isPressed()))},t.prototype.destroy=function(e){this===hd?(fx.delete(e),fx.size<=0&&(hd=null,this.destroy_())):this.destroy_()},t.prototype.destroy_=function(){ld(window,I.CURSOR_DOWN,this.cursorDownHandler_),ld(window,I.CURSOR_UP,this.cursorUpHandler_),ld(window,I.CURSOR_MOVE,this.cursorMoveHandler_)},t}();var IK=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n},kv=function(){function t(e,r){var n=(r===void 0?{}:r).constraints,s=n===void 0?[]:n;this.element_=e,this.interacting_=!1,this.constraints_=IK(s),this.cursor_=Nv.getSingleton(this),this.init_()}return t.prototype.init_=function(){this.initInteraction_(),this.render_()},t.prototype.initInteraction_=function(){var e=this;na(this.element_,I.CURSOR_DOWN,function(){return e.startInteraction_()});var r=[I.CONTEXTMENU,I.DRAGSTART,I.CURSOR_UP],n=function(){return e.endInteraction_()};r.forEach(function(s){return na(window,s,n)})},t.prototype.startInteraction_=function(){this.interacting_=!0,eo.dispatchEvent(new Av(this))},t.prototype.endInteraction_=function(){var e=this;!this.interacting_||(this.interacting_=!1,se.measure(function(){eo.dispatchEvent(new Tv(e,e.getDelta_(),e.cursor_.getClient().getLastFrameVelocity()))}))},t.prototype.isInteracting_=function(){return this.interacting_},t.prototype.render_=function(){var e=this;se.measure(function(){e.renderDrag_(),se.cleanup(function(){return e.render_()})})},t.prototype.renderDrag_=function(){if(!!this.isInteracting_()){var e=this.getDelta_();!e.getLength()||(Pv.getSingleton().renderDrag(this,e),eo.dispatchEvent(new xv(this,this.element_,e)))}},t.prototype.getDelta_=function(){var e=this;return this.constraints_.reduce(function(r,n){return n.constrain(e,r)},this.cursor_.getClient().getPressedFrameDelta())},t.prototype.getElement=function(){return this.element_},t.prototype.destroy=function(){this.cursor_.destroy(this)},t}();var dx=function(){function t(){this.counter_=0}return t.getSingleton=function(){return this.singleton=this.singleton||new this},t.prototype.lockScroll=function(){if(Sr.getBrowser()!==kn){if(this.counter_===0){var e=Tt.offsetWidth;de(Tt,"overflow","hidden"),de(Tt,"width",e+"px")}this.counter_++}},t.prototype.unlockScroll=function(){Sr.getBrowser()!==kn&&(this.counter_===1?(de(Tt,"overflow",""),de(Tt,"width","")):this.counter_<1&&ot.throw("You have tried to unlock the scroll more times than you have locked the scroll."),this.counter_--)},t}();var RK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LK=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,s++)n[s]=o[a];return n};function TV(t){return Math.abs(t.getX())*1.05>Math.abs(t.getY())}var AV=function(t){RK(e,t);function e(r,n){var s=(n===void 0?{}:n).constraints,o=s===void 0?[]:s,a=this,l=LK(o,[new Rv]);return a=t.call(this,r,{constraints:l})||this,a.dragDelta_=sa,a.potentialInteractionStarted_=!1,a}return e.prototype.startInteraction_=function(){this.potentialInteractionStarted_=!0},e.prototype.renderDrag_=function(){if(!!this.potentialInteractionStarted_){var r=this.cursor_.getClient().getPressedFrameDelta();if(r.getLength()!==0){if(!this.isInteracting_())TV(r)?(dx.getSingleton().lockScroll(),this.dragDelta_=r,t.prototype.startInteraction_.call(this)):this.potentialInteractionStarted_=!1;else if(this.dragDelta_=this.dragDelta_.add(r),!TV(this.dragDelta_)){this.endInteraction_();return}t.prototype.renderDrag_.call(this)}}},e.prototype.endInteraction_=function(){!this.interacting_||(this.dragDelta_=sa,this.potentialInteractionStarted_=!1,t.prototype.endInteraction_.call(this),dx.getSingleton().unlockScroll())},e}(kv);var OK=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DK=new Rv,MV=function(t){OK(e,t);function e(r,n){n===void 0&&(n=!1);var s=this,o=[];n||o.push(DK),r.allowsLooping()||o.push(new _V(r));var a={constraints:o},l=n?function(c){return new AV(c,a)}:function(c){return new kv(c,a)};return s=t.call(this,[],Map,l)||this,s}return e}(Ae);var CV=function(){function t(e,r,n){this.translationRange_=n,this.target_=e,this.timeRange_=r}return t.prototype.getTarget=function(){return this.target_},t.prototype.getEndTime=function(){return this.timeRange_.getMax()},t.prototype.getTranslationRange=function(){return this.translationRange_},t.prototype.getTimeRange=function(){return this.timeRange_},t.prototype.getTargetTime=function(){return console.warn("TransitionTarget.getTargetTime() is deprecated."),this.getEndTime()},t}();function px(t,e){var r=ps(t,e.getContainer());return-r}function PV(t,e,r,n){for(var s=[],o=t.length,a=bs(n),l=Ei(r,o),c=Ei(e,o);c!==l;)s.push(t[c]),c=Ei(c+a,o);return s}function mx(t,e,r,n,s){var o=FK(t,e,r,s),a=n.get(r),l=o-a;l!==0&&to(r,new ke(l,0))}function FK(t,e,r,n){if(e===r)return 0;var s=NK(t,e,r,n),o=Lv(s),a=r.offsetWidth/2,l=e.offsetWidth/2;return(a+o+l)*n}function NK(t,e,r,n){var s=t.getSlideIndex(e),o=t.getSlideIndex(r)-n;return t.allowsLooping()?PV(t.getSlides(),o,s,-n):s===o?[]:t.getSlides().slice(Math.min(s+1,o),Math.max(s,o+n))}var kK=Lh.getSingleton();function IV(t,e){if(!!t.allowsLooping()){var r=t.getSlides().reduce(function(c,h){return c+h.offsetWidth},0),n=ps(e)+kK.getAlteredXTranslation(e),s=bs(n),o=Math.abs(n)>r/2;if(o){var a=-r*s,l=ji.clientWidth*s+n+a;Math.abs(l)<Math.abs(n)&&to(e,new ke(a,0))}}}function RV(t,e){return e===void 0&&(e=null),Sv(t,e)>0}var LV=Symbol("Physical Slide Interaction"),gx=function(){function t(e){var r=this,n=e===void 0?{}:e,s=n.transitionTime,o=s===void 0?500:s,a=n.easingFunction,l=a===void 0?vV.EASES_IN_OUT_SINE:a,c=n.lockScroll,h=c===void 0?!1:c;this.matrixService_=Lh.getSingleton(),this.carousels_=new Set,this.carouselListeners_=Ae.usingFunction(function(){return new Set}),this.draggableBySlide_=Ae.usingFunction(function(f){return new MV(f,h)}),this.easingFunction_=l,this.interactionStartPosition_=Ae.usingFunction(function(){return null}),this.interactionStartTime_=Ae.usingFunction(function(){return null}),this.transitionTime_=o,this.transitionTargets_=new Map,this.resizeTimeout_=null,this.resizeHandler_=function(){window.clearTimeout(r.resizeTimeout_),r.resizeTimeout_=window.setTimeout(function(){Jr(r.carousels_.values(),function(f){r.transition(f.getActiveSlide(),f,0)})})},window.addEventListener("resize",this.resizeHandler_)}return t.prototype.init=function(e,r){var n=this;this.carousels_.add(r),r.onDestroy(function(s){return n.destroy_(s)}),this.initActiveSlide_(e,r),this.initDraggableSlides_(r)},t.prototype.validateCarousel_=function(e){this.carousels_.has(e)||ot.throw("PhysicalSlide instance not initialized for this carousel.")},t.prototype.initActiveSlide_=function(e,r){var n=this;se.measure(function(){return n.transition(e,r,0)})},t.prototype.initDraggableSlides_=function(e){var r,n=this,s=e.getSlides().map(function(o){var a=n.draggableBySlide_.get(e).get(o),l=eo.addListener(a,Av,function(f){return n.startInteraction_(f,e)}),c=eo.addListener(a,xv,function(f){return n.adjustSplit_(e,f.getElement())}),h=eo.addListener(a,Tv,function(f){return n.endInteraction_(f,e)});return n.carouselListeners_.get(e).add(l),n.carouselListeners_.get(e).add(c),n.carouselListeners_.get(e).add(h),a});(r=Pv.getSingleton()).syncDraggables.apply(r,s)},t.prototype.renderLoop=function(e){var r=this;this.validateCarousel_(e),se.measure(function(){e.isBeingInteractedWith()||(r.transitionTargets_.has(e)?r.transitionToTarget_(e):r.adjustSplit_(e)),e.getSlides().forEach(function(n){RV(n,e.getContainer())?de(n,"visibility",""):de(n,"visibility","hidden")})})},t.prototype.transitionToTarget_=function(e){var r=this.transitionTargets_.get(e),n=r.getTimeRange().getValueAsPercent(performance.now()),s=this.easingFunction_(n),o=r.getTranslationRange().getPercentAsValue(s),a=ke.fromElementTransform(r.getTarget()).x,l=o-a;e.getSlides().forEach(function(c){return to(c,new ke(l,0))}),this.adjustSplit_(e,r.getTarget()),n===1&&this.transitionTargets_.delete(e)},t.prototype.adjustSplit_=function(e,r){r===void 0&&(r=null),r!==null&&IV(e,r);for(var n=r||e.getActiveSlide(),s=this.getDistancesFromTarget_(e,n),o=kl(n),a=o+n.offsetWidth,l=e.getSlides(),c=l.filter(function(_){return _!==n}),h=e.getSlideIndex(n),f=new Set(c),u=l.length,m=e.allowsLooping()?Math.max(o,0):di.apply(void 0,l.slice(0,h).map(function(_){return _.offsetWidth})),d=Tt.clientWidth,v=h,p=e.allowsLooping()?Math.min(d,d-a):di.apply(void 0,l.slice(h+1).map(function(_){return _.offsetWidth})),g=h;f.size>0;)if(m>p){if(v=Ei(v-1,u),v===h)continue;var y=l[v];if(!f.has(y))continue;mx(e,n,y,s,-1),m-=y.offsetWidth,f.delete(y)}else{if(g=Ei(g+1,u),g===h)continue;var y=l[g];if(!f.has(y))continue;mx(e,n,y,s,1),p-=y.offsetWidth,f.delete(y)}},t.prototype.getDistancesFromTarget_=function(e,r){var n=this,s=new Map;return e.getSlides().forEach(function(o){var a=ps(o,r)+n.matrixService_.getAlteredXTranslation(o)-n.matrixService_.getAlteredXTranslation(r);s.set(o,a)}),s},t.prototype.startInteraction_=function(e,r){this.interactionStartPosition_.get(r)===null&&(this.transitionTargets_.delete(r),this.interactionStartTime_.set(r,performance.now()),this.interactionStartPosition_.set(r,ke.fromElementTransform(e.getTarget().getElement())),r.startInteraction(LV))},t.prototype.endInteraction_=function(e,r){if(this.interactionStartPosition_.get(r)!==null){r.endInteraction(LV);var n=performance.now()-this.interactionStartTime_.get(r),s=this.getActiveSlide(r),o=px(s,r),a=ke.fromElementTransform(e.getTarget().getElement()).subtract(this.interactionStartPosition_.get(r)),l=Math.abs(a.getX())>Math.abs(a.getY()),c=n>700&&l?0:a.getX();this.interactionStartTime_.set(r,null),this.interactionStartPosition_.set(r,null);var h=bs(c),f=bs(o),u=r.allowsLooping();o===0||f===h||c===0?r.transitionToSlide(s):h===1?u||s!==r.getFirstSlide()?r.previous():r.transitionToSlide(s):u||s!==r.getLastSlide()?r.next():r.transitionToSlide(s)}},t.prototype.transition=function(e,r,n){if(n===void 0&&(n=null),this.validateCarousel_(r),!(this.transitionTargets_.has(r)&&this.transitionTargets_.get(r).getTarget()===e)){var s=n===null?this.transitionTime_:n,o=performance.now(),a=new ce(o,o+s),l=ke.fromElementTransform(e).getX(),c=px(e,r)+l,h=new ce(l,c),f=new CV(e,a,h);this.transitionTargets_.set(r,f)}},t.prototype.getActiveSlide=function(e){this.validateCarousel_(e);var r=e.getLastActiveSlide();return Qs(e.getSlides(),function(n){return Math.abs(ps(n,e.getContainer()))},function(n){return n===r?0:1})},t.prototype.hasTransitionedTo=function(e,r){this.validateCarousel_(r);var n=ps(e,r.getContainer());return n===0},t.prototype.destroy_=function(e){window.removeEventListener("resize",this.resizeHandler_),window.clearTimeout(this.resizeTimeout_),Jr(this.carouselListeners_.get(e).values(),function(r){return eo.removeListener(r)}),this.carouselListeners_.delete(e),this.carousels_.delete(e),this.transitionTargets_.delete(e)},t}();var ms={TITLES_CONTAINER:j.mqnCssName("mqn2-cdh"),TITLE:j.mqnCssName("mqn2-cdi"),TITLE_CENTER:j.mqnCssName("mqn2-cdl"),TITLE_LEFT:j.mqnCssName("mqn2-cdk"),TITLE_RIGHT:j.mqnCssName("mqn2-cdm"),SLIDES_CONTAINER:j.mqnCssName("mqn2-cdo"),SLIDE:j.mqnCssName("mqn2-cdb"),SLIDE_CENTER:j.mqnCssName("mqn2-cde"),SLIDE_LEFT:j.mqnCssName("mqn2-d45"),SLIDE_RIGHT:j.mqnCssName("mqn2-d46")},ud=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.slideCarousel=ud.createSlideCarousel_(this.el),this.titleCarousel=ud.createTitleCarousel_(this.el),Ih.getSingleton().syncCarousels(this.slideCarousel,this.titleCarousel),r.$on("$destroy",()=>this.dispose_())}handleNext(){ul.trackCarouselNavigationClick(this.el,null,"next"),this.slideCarousel.next()}handlePrevious(){ul.trackCarouselNavigationClick(this.el,null,"prev"),this.slideCarousel.previous()}static createTitleCarousel_(e){let r=e.querySelector(`.${ms.TITLES_CONTAINER}`),n=Array.from(e.querySelectorAll(`.${ms.TITLE}`));return new ux(r,n,{activeCssClass:ms.TITLE_CENTER,beforeCssClass:ms.TITLE_LEFT,afterCssClass:ms.TITLE_RIGHT})}static createSlideCarousel_(e){let r=e.querySelector(`.${ms.SLIDES_CONTAINER}`),n=Array.from(e.querySelectorAll(`.${ms.SLIDE}`));return new ux(r,n,{activeCssClass:ms.SLIDE_CENTER,beforeCssClass:ms.SLIDE_LEFT,afterCssClass:ms.SLIDE_RIGHT,transition:new gx({transitionTime:1e3})})}dispose_(){this.slideCarousel.destroy(),this.titleCarousel.destroy()}},OV=ud;function DV(t,e){se.measure(function(){se.mutate(function(){return new Ll().translate(e).applyToElementTransform(t)})})}var VK={BK_IMAGE:j.mqnCssName("mqn2-aan"),SCROLLER_ITEM_IMAGE:j.mqnCssName("mqn2-akc")},BK={ITEM:"mqn-parallax-carousel-item",ITEM_BG_IMAGE:"mqn-parallax-carousel-item-background-image",ITEM_DEPTH:"mqn-parallax-carousel-item-depth"};function UK(){return window.innerWidth||document.documentElement.clientWidth}var FV=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.rl_=se.getDestroyableInstance(),this.backgroundImages_=Ae.usingFunction(n=>n.querySelector(`.${VK.BK_IMAGE}`)),this.pxCarouselItems_=Array.from(e[0].querySelectorAll(`[${BK.ITEM}]`)),this.lastWindowWidth_=null,this.lastElementCenters_=new Map,this.init_(),r.$on("$destroy",()=>this.dispose_())}init_(){this.renderLoop_()}renderLoop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.renderLoop_());let e=UK();this.pxCarouselItems_.forEach((r,n)=>this.translateElement_(r,n,e)),this.lastWindowWidth_=e})}translateElement_(e,r,n){let s=ps(e);if(this.lastWindowWidth_===n&&this.lastElementCenters_.get(s)===s)return;this.lastElementCenters_.set(e,s);let o=n/2,a=e.offsetWidth/2,l=o+a,c=new ce(-l,l),h=this.backgroundImages_.get(e),u=h.offsetWidth/2-a,m=new ce(u,-u);if(c.contains(s)){let d=c.getValueAsPercent(s),v=m.getPercentAsValue(d);DV(h,new ke(v,0))}}dispose_(){this.backgroundImages_.clear(),this.lastElementCenters_.clear(),this.rl_.destroy()}},NV=FV;var HK=tu(),kV=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.jQuery=window.jQuery,this.$scope=n,this.$rootScope=e,this.$window=s,this.el=r[0],this.originalData=null,this.data=null,this.categoryData=null,this.activeCategories=[],this.query=null,this.toggleState=null,window.URLSearchParams&&(this.queryString=new URLSearchParams(location.search),this.queryStringCategories=this.queryString.getAll("category")||[],this.queryStringQuery=this.queryString.get("search")||null)}init(e){this.data=e,this.originalData=e,this.resetFiltersAndQuery(),this.queryString&&window.setTimeout(()=>{this.queryStringCategories.forEach(r=>{this.categoryFilterClick(r)}),this.query=this.queryStringQuery,this.update()}),location.hash&&(this.$window.onload=()=>{let r=this.jQuery(location.hash).offset(),n=0;if(r){n=parseInt(r.top);let s=document.querySelector("[pdp-bar]");s&&(n-=s.offsetHeight)}window.setTimeout(()=>{this.jQuery("html, body").scrollTop(n)})})}defaultFilterSelection(){return this.activeCategories.length===this.originalData.length}resetFiltersAndQuery(){this.activeCategories=this.originalData.map(e=>e.category.id),this.categoryData=this.originalData.map(e=>e.category),this.query=null,this.update(!0)}resetQuery(){this.query=null,this.update()}isActiveCategory(e){return this.activeCategories.indexOf(e)!==-1}getOriginalItem(e){let r=e.category.id;return this.originalData.filter(s=>s.category.id==r)[0]}clearCategories(){this.activeCategories=[],this.update()}toggleCategory(e){this.isActiveCategory(e)?this.removeCategoryFilter_(e):this.addCategoryFilter_(e)}categoryFilterClick(e){this.defaultFilterSelection()?this.getCheckedCategories().length>1?this.toggleCategory(e):(this.clearCategories(),this.addCategoryFilter_(e)):this.toggleCategory(e),this.activeCategories.length===0&&(this.activeCategories=this.originalData.map(r=>r.category.id),this.update())}addCategoryFilter_(e){this.activeCategories.push(e),this.update()}removeCategoryFilter_(e){let r=this.activeCategories.indexOf(e);r>-1&&this.activeCategories.splice(r,1),this.update()}getCheckedCategories(){return this.categoryData.filter((e,r)=>e.isChecked)}update(e){let r=JSON.parse(JSON.stringify(this.originalData));this.data=r.filter(n=>{let s=!1;return this.activeCategories.forEach(o=>{o==n.category.id&&(s=!0)}),s}),this.data.forEach((n,s)=>{let o=n.products.filter(a=>this.query?a.title.toLowerCase().includes(this.query.toLowerCase()):!0);this.data[s].products=o}),this.data=this.data.filter((n,s)=>n.products.length>=1),this.checkedCategories=this.getCheckedCategories(),this.categoryData.forEach(n=>{e||this.defaultFilterSelection()?e||this.checkedCategories.length!==this.originalData.length?n.isChecked=!1:n.isChecked=this.isActiveCategory(n.id):n.isChecked=this.isActiveCategory(n.id)}),window.setTimeout(()=>{this.$scope.$apply()}),this.updateQueryString()}updateQueryString(){if(this.queryString){let e=this.categoryData.filter(r=>r.isChecked===!0).map(r=>r.id);if(this.queryString.delete("category"),e.forEach(r=>{this.queryString.append("category",r)}),this.query&&this.query!==""?this.queryString.set("search",this.query):this.queryString.delete("search"),window.history.replaceState){let r=location.pathname;this.queryString&&this.queryString.toString()!==""&&(r+="?"+this.queryString.toString()),r+=location.hash,window.history.replaceState({},document.title,r)}}}getProductByCategory(e){let r=this.data.filter(n=>n.category.id==e);return r&&r[0]?r[0].products:[]}getProductCountByCategory(e){return this.getProductByCategory(e).length}hasNoResults(){return console.log(this.data.map(e=>e.category.id)),this.originalData.map(e=>e.category.id).every(e=>this.getProductCountByCategory(e)===0)}convertToWebp(e){return e.endsWith(".svg")?e:HK.appendFifeWebpParam(e)}toggle(e){this.toggleState=this.toggleState==e?null:e,window.setTimeout(()=>{this.$scope.$apply()})}},VV=kV;var HV=re(dn());var qV=re(yt()),vx=re(Ye()),yx=re(ua());function BV(t,e){for(var r=t.next();!r.done;){if(e(r.value))return!0;r=t.next()}return!1}function UV(t,e){for(var r=[],n=t.next();!n.done;)e(n.value)&&r.push(n.value),n=t.next();return r}var zV=Ae.usingFunction(t=>new WV(t)),WV=class{constructor(e){this.selectedIds_=new Map,this.groupId_=e}isSelectedElsewhere(e,r){return BV(this.selectedIds_.entries(),([n,s])=>s===r&&n!==e)}updateId(e){this.selectedIds_.set(e,e.id),UV(this.selectedIds_.keys(),r=>r!==e).forEach(r=>r.digestIfPossible())}registerController(e){this.updateId(e)}deregisterController(e){this.selectedIds_.delete(e),this.selectedIds_.size<1&&zV.delete(this.groupId_)}},GV=class{static get $inject(){return["$rootScope","$element","$scope","$attrs"]}constructor(e,r,n,s){this.el=r[0],this.$scope=n,this.$rootScope=e,this.domWatcher=new qV.DomWatcher,this.togglerId=+this.el.getAttribute("data-toggler-index"),this.nonFilterUrlParams_="",this.id=null,this.pdpTogglerSelected="pdpTogglerSelected",s.togglerGroup&&(this.pdpTogglerSelected+=s.togglerGroup),this.groupState_=zV.get(this.pdpTogglerSelected),this.groupState_.registerController(this),this.domWatcher.add({element:window,on:"smartResize",callback:()=>{window.setTimeout(()=>{let o=Array.from(this.el.querySelectorAll("[contents]")),a=0;o.forEach(l=>{let c=vx.dom.getStyle(l),h=l.offsetTop+yx.cssUnit.parse(c.paddingTop).value+yx.cssUnit.parse(c.marginTop).value;a=Math.max(a,h)}),vx.dom.setCssVariable(this.el,"--toggler-top",a+"px")})},eventOptions:{passive:!0},id:"resize"}),this.domWatcher.run("resize"),n.$on("$destroy",()=>{this.dispose_()})}getIdFromUrl_(e){if(!window.URLSearchParams||!location.search)return!1;let n=new URLSearchParams(location.search.slice(1)).get("toggler"+this.togglerId);return e.indexOf(n)!==-1?n:!1}getUrlParams_(){if(!window.URLSearchParams)return this.nonFilterUrlParams_;let e=new URLSearchParams(location.search.slice(1));return e.delete("toggler"+this.togglerId),e.append("toggler"+this.togglerId,this.id),e.toString()}setUrlParams_(){if(window.history.replaceState){let e=this.getUrlParams_(),r=location.pathname;e&&(r+="?"+e),window.history.replaceState({},document.title,r)}}init(e,r){let n=this.getIdFromUrl_(r)||e;if(this.groupState_.isSelectedElsewhere(this,n)){for(let s=0;s<r.length;s++)if(!this.groupState_.isSelectedElsewhere(this,r[s])){n=r[s];break}}this.updateId(n),window.setTimeout(()=>this.$scope.$apply())}shouldShowProductOption(e){let r=this.id===e,n=this.groupState_.isSelectedElsewhere(this,e);return r||!n}digestIfPossible(){this.$scope.$$phase||this.$scope.$apply()}handleChange(){setTimeout(()=>{this.groupState_.updateId(this),this.setUrlParams_(),this.sendChangeEvent(),this.cleanUpEmptyOptions()})}updateId(e){this.id=e,this.groupState_.updateId(this)}sendChangeEvent(){let e=mt.getClosestMqnFrame(this.el),r=e.getAttribute("mqn-autotrack-action"),n=e.getAttribute("mqn-autotrack-partial-type"),s={event:"module click",eventCategory:"module click",eventAction:"toggle comparison",eventLabel:this.id,pageName:window.location.pathname,moduleName:r,moduleType:n,nonInteraction:"0"};HV.default.trackDataLayer(s),window.setTimeout(()=>{this.$rootScope.$emit("mqnRunEqualSize")})}cleanUpEmptyOptions(){window.setTimeout(()=>{Array.from(this.el.querySelectorAll("option")).forEach(r=>{r.hidden==!0&&r.remove(),r.value.startsWith("?")&&r.remove()})},200)}getCurrentNumberOfOptionsDisplayed(){return this.el.querySelector("select").options.length}dispose_(){this.windowResizeListener&&this.windowResizeListener(),this.domWatcher.dispose(),this.groupState_.deregisterController(this),this.groupState_=null}},$V=GV;var jV=re(dn());function Vv(t,e){return t.filter(function(r){return e.indexOf(r)===-1})}var Dh={DROP_DOWN_ICON:j.mqnCssName("mqn2-h36"),OPTION:j.mqnCssName("mqn2-h37"),SELECT:j.mqnCssName("mqn2-h38"),TOGGLER:j.mqnCssName("mqn2-h39"),TOGGLER_STICKY_BG:j.mqnCssName("mqn2-ioq"),VALUE_DISPLAY:j.mqnCssName("mqn2-h3a")},YV=class{constructor(e){this.element_=e,this.rl_=se.getDestroyableInstance(),this.domWatcher_=new on,this.togglers_=[]}init(){this.domWatcher_.add({element:window,on:"smartResize",callback:()=>{this.hideInvalidOptions(),this.updateContent()},eventOptions:{passive:!0},id:"resize"});let e=Array.from(this.element_.querySelectorAll(`.${Dh.TOGGLER}`)).map(r=>new XV(r,this));e.forEach(r=>this.togglers_.push(r)),e.forEach(r=>r.init())}updateToggler(e,r){let n=e.getProduct();r!==null&&this.togglers_.filter(s=>s!==e).filter(s=>s.getProduct()===n).forEach(s=>s.setProduct(r,!1)),this.hideInvalidOptions(),this.updateContent()}updateContent(){let e=new Map,r=Te.isDsTabletLt()?2:this.togglers_.length;this.togglers_.filter((n,s)=>s<r).forEach(n=>{e.set(n.getProduct(),n.getColumnStyle())}),this.rl_.measure(()=>{Array.from(this.element_.querySelectorAll("[data-product]")).forEach(s=>{let o=s.dataset.product;this.rl_.mutate(()=>{e.has(o)?(de(s,"display",""),de(s,"grid-column",e.get(o))):(de(s,"grid-column",""),de(s,"display","none"))})})})}hideInvalidOptions(){this.togglers_.forEach(e=>e.hideInvalidOptions())}getSelectedProducts(){return new Set(this.togglers_.map(e=>e.getProduct()))}getTabletLtTogglers(){return this.togglers_.filter((e,r)=>r<2)}getProductsSelectedOnTabletLt(){return new Set(this.getTabletLtTogglers().map(e=>e.getProduct()))}dispose(){this.domWatcher_.dispose(),this.rl_.destroy(),this.togglers_.forEach(e=>e.dispose()),this.togglers_=null}},XV=class{constructor(e,r){this.element_=e,this.select_=this.element_.querySelector(`.${Dh.SELECT}`),this.options_=Array.from(this.select_.querySelectorAll(`.${Dh.OPTION}`)),this.togglerId=+this.element_.getAttribute("data-toggler-index"),this.columnStyle_=`${parseInt(this.togglerId)+1} / span 1`,this.lastKnownValue_=this.select_.value,this.group_=r,this.valueDisplay_=this.element_.querySelector(`.${Dh.VALUE_DISPLAY}`),this.wasSingleOption_=null,this.optionState_=Ae.usingFunction(()=>null),this.dropdownIcon_=this.element_.querySelector(`.${Dh.DROP_DOWN_ICON}`),this.rl_=se.getDestroyableInstance()}init(){let e=this.getProductFromUrl_()||this.select_.value;this.initializeProduct_(e),this.renderLoop_()}getProductFromUrl_(){return!window.URLSearchParams||!location.search?null:new URLSearchParams(location.search.slice(1)).get(`toggler${this.togglerId}`)}initializeProduct_(e){let r=this.select_.value;this.lastKnownValue_=e,this.select_.value=e,this.valueDisplay_.innerText=e,this.group_.updateToggler(this,r)}getColumnStyle(){return this.columnStyle_}getProduct(){return this.lastKnownValue_}renderLoop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.renderLoop_()),this.setProduct(this.select_.value)})}setProduct(e,r=!0){if(e===this.lastKnownValue_)return;let n=this.lastKnownValue_;this.lastKnownValue_=e;let s=this.options_.find(o=>o.value===e);s&&this.enableOption_(s),this.select_.value=e,this.valueDisplay_.innerText=e,r&&this.group_.updateToggler(this,n),this.setUrlParams_(),this.sendChangeEvent_()}hideInvalidOptions(){let e=this.options_.filter(s=>this.shouldShowOption(s));Vv(this.options_,e).forEach(s=>this.disableOption_(s)),e.forEach(s=>this.enableOption_(s));let n=e.length===1;n!==this.wasSingleOption_&&(this.wasSingleOption_=n,this.rl_.mutate(()=>{n?(this.select_.setAttribute("aria-hidden",!0),this.select_.setAttribute("role","heading"),this.valueDisplay_.removeAttribute("aria-hidden"),de(this.dropdownIcon_,"display","none")):(this.select_.removeAttribute("aria-hidden"),this.select_.removeAttribute("role"),this.valueDisplay_.setAttribute("aria-hidden",!0),de(this.dropdownIcon_,"display",""))}))}disableOption_(e){this.optionState_.get(e)!==!1&&(this.optionState_.set(e,!1),this.rl_.mutate(()=>{if(e.setAttribute("disabled",!0),!kn.isCurrentBrowser())e.setAttribute("hidden",!0),e.setAttribute("aria-hidden",!0);else try{this.select_.removeChild(e)}catch(r){}}))}enableOption_(e){this.optionState_.get(e)!==!0&&(this.optionState_.set(e,!0),this.rl_.mutate(()=>{e.removeAttribute("disabled"),kn.isCurrentBrowser()?this.select_.appendChild(e):(e.removeAttribute("hidden"),e.removeAttribute("aria-hidden"))}))}generateUrlParams_(){if(!window.URLSearchParams)return"";let e=new URLSearchParams(location.search.slice(1));return e.delete("toggler"+this.togglerId),e.append("toggler"+this.togglerId,this.getProduct()),e.toString()}setUrlParams_(){if(window.history.replaceState){let e=this.generateUrlParams_(),r=location.pathname;e&&(r+="?"+e),window.history.replaceState({},document.title,r)}}shouldShowOption(e){let r=e.value,n=this.getProduct()===r,s=Te.isDsTabletLt()?this.group_.getProductsSelectedOnTabletLt().has(r):this.group_.getSelectedProducts().has(r);return n||!s}sendChangeEvent_(){let e=mt.getClosestMqnFrame(this.element_),r=e.getAttribute("mqn-autotrack-action"),n=e.getAttribute("mqn-autotrack-partial-type"),s={event:"module click",eventCategory:"module click",eventAction:"toggle comparison",eventLabel:this.id,pageName:window.location.pathname,moduleName:r,moduleType:n,nonInteraction:"0"};jV.default.trackDataLayer(s)}dispose(){this.rl_.destroy()}},ZV=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.togglerGroup_=new YV(this.element_),this.togglerStickyBg_=this.element_.querySelector(`.${Dh.TOGGLER_STICKY_BG}`),this.raf_=new Jo(this.rafLoop.bind(this)),this.raf_.runWhenElementIsInview(this.element_),this.raf_.start(),r.$on("$destroy",()=>this.dispose_())}init(){this.togglerGroup_.init(),this.checkForMissingIcons()}rafLoop(){!this.togglerStickyBg_||this.raf_.read(()=>{let e=this.getStickyOffset(this.togglerStickyBg_),r=document.querySelector("[data-test-navbar]");this.raf_.write(()=>{this.element_.classList.toggle("mqn-opt--is-sticky",e<=0),this.element_.classList.toggle("mqn-opt--is-sticky-scroll-past",e<0),r&&(r.style.boxShadow=e===0?"none":null)})})}getStickyOffset(e){let r=window.getComputedStyle(e),n=e.getBoundingClientRect(),s=this.pxToNumber(r.top);return n.top-s}pxToNumber(e){return parseInt(e.slice(0,e.length-2))}checkForMissingIcons(){let e=Array.from(this.element_.querySelectorAll("[data-section]")),r=new Set;e.map(n=>n.getAttribute("data-section")).forEach(n=>n&&r.add(n)),r.forEach(n=>{let s=!1,o=e.filter(a=>a.getAttribute("data-section")===n?(a.querySelector('[data-element="icon-image"]')&&(s=!0),!0):!1);s&&o.forEach(a=>{a.querySelector('[data-element="icon-image"]')||a.classList.add("mqn-opt--missing-icons")})})}dispose_(){this.raf_.dispose(),this.togglerGroup_.dispose()}},QV=ZV;var Fh=re(Ye()),JV=re(fa()),eB=re(yt());function KV(t,e){e===void 0&&(e=null);var r=e||Tt;r.scrollTop=t}var _x=.34,fd={LOTTIE:j.mqnCssName("mqn2-g98"),ELEVATOR:j.mqnCssName("mqn2-g9k"),SPACER:j.mqnCssName("mqn2-g96"),SHAFT:j.mqnCssName("mqn2-g97"),COVER:"mqn-ext-lottie-elevator--cover",EARLY_SCROLL_HEIGHT:j.mqnCssName("mqn2-gv5")},tB=class{constructor(e){this.element_=e,this.start_=parseInt(e.getAttribute("data-start-frame")),this.end_=parseInt(e.getAttribute("data-end-frame")),this.range_=null,this.isAutoplay_=e.getAttribute("data-autoplay").toLowerCase()==="true"}getElement(){return this.element_}getRange(e){return this.range_===null&&(this.end_===-1?this.range_=new ce(this.start_,e):this.range_=new ce(this.start_,this.end_)),this.range_}getPxPerFrame(){return this.element_.offsetHeight/this.range_.getDistance()}isAutoplay(){return this.isAutoplay_}},rB=class{constructor(e){this.variable_=e.id,this.frameRange_=new ce(parseFloat(e.from),parseFloat(e.to));let r=e.cubic_bezier_values?e.cubic_bezier_values.split(",").map(s=>parseFloat(s)):[1,1,0,0];this.bezier_=new zi(...r);let n=typeof e.start=="number"?Rg:at;this.styleRange_=new qf(n.fromStyleString(e.start),n.fromStyleString(e.end))}getValueForFrame_(e){return this.styleRange_.getPercentAsValue(this.bezier_.getAdjustedPercent(this.frameRange_.getValueAsPercent(e))).toStyleString()}updateValueOnElement(e,r){se.mutate(()=>de(e,this.variable_,this.getValueForFrame_(r)))}},bx=class{static get $inject(){return["$element","$scope","mqnTemplateLottieElevatorService"]}constructor(e,r,n){this.renderFix=new oi,this.element_=e[0],this.mqnTemplateLottieElevatorService_=n,this.rl_=se.getDestroyableInstance(),this.elevator_=this.element_.querySelector(`.${fd.ELEVATOR}`),this.mqnFrame_=mt.getClosestMqnFrame(this.element_);let s=this.element_.getAttribute("data-css-variables");this.cssVariables_=s?JSON.parse(s).map(a=>new rB(a)):[],this.lottieElement_=this.element_.querySelector(`.${fd.LOTTIE}`),this.shaft_=this.element_.querySelector(`.${fd.SHAFT}`),this.spacers_=Array.from(this.element_.querySelectorAll(`.${fd.SPACER}`)).map(a=>new tB(a)),this.url_=this.element_.getAttribute("data-lottie-url");let o=this.element_.getAttribute("data-lottie-assets-path");this.lottieAssetsPath_=o.slice(-1)[0]==="/"?o:`${o}/`,this.lottieRenderer_=this.element_.getAttribute("data-lottie-renderer")||"canvas",this.introVideoEl_=this.element_.hasAttribute("data-lottie-intro-video")&&this.element_.querySelector("video"),this.hasPlayedIntroVideo_=!1,this.introFrames_=parseFloat(this.element_.getAttribute("data-lottie-intro-frames")||0),this.preserveAspectRatio_=this.element_.getAttribute("data-preserve-aspect-ratio"),this.maxPlaybackSpeed_=parseFloat(this.element_.getAttribute("data-max-playback-speed")||Number.POSITIVE_INFINITY),this.isInIntroduction_=this.introFrames_!==0,this.lottie_=null,this.durationInFrames_=null,this.fps_=null,this.autoplayTimeout_=null,this.domWatcher_=new eB.DomWatcher,this.scroll_=Zi.getSingleton(this),this.isCovered_=this.element_.classList.contains(fd.COVER),this.lastElevatorDimensions_=null,this.rafProgress=new Fh.RafProgress(a=>this.onRafProgressUpdate_(a)),this.init(),r.$on("$destroy",()=>this.dispose_())}onRafProgressUpdate_(e){this.targetFrame_=new ce(0,this.durationInFrames_).getPercentAsValue(e),this.cssVariables_.forEach(r=>{r.updateValueOnElement(this.mqnFrame_,this.targetFrame_)}),this.targetFrame_===0&&this.introVideoEl_&&!this.hasPlayedIntroVideo_&&(this.introVideoEl_.play(),this.hasPlayedIntroVideo_=!0)}init(){this.mqnTemplateLottieElevatorService_.register(this.element_,this);let e={container:this.lottieElement_,assetsPath:this.lottieAssetsPath_,renderer:this.lottieRenderer_,loop:!1,autoplay:this.introFrames_!==0,rendererSettings:{preserveAspectRatio:this.preserveAspectRatio_},path:this.url_};this.lottie_=JV.default.loadAnimation(e),this.lottie_.addEventListener("DOMLoaded",()=>{let r=this.lottie_.getDuration(!0),n=this.spacers_.map(s=>s.getRange(r).getMax());this.durationInFrames_=Math.max(...n),this.fps_=this.lottie_.getDuration(!0)/this.lottie_.getDuration(!1),this.msPerFrame_=1e3/this.fps_,this.domWatcher_.add({element:window,on:"smartResize",eventOptions:{passive:!0},callback:()=>this.resize_(),id:"resize"}),this.rl_.measure(()=>{this.resize_(),this.rl_.cleanup(()=>{this.rl_.measure(()=>{this.updateProgress_(),this.scrollLoop_(),this.frameLoop_()})})})})}resize_(){this.rl_.measure(()=>{let e=this.lottie_.animationData.w,r=this.lottie_.animationData.h,n=e/r,s=this.elevator_.offsetWidth,o=this.elevator_.offsetHeight,l=s/o>n;if(this.rl_.mutate(()=>{de(this.mqnFrame_,"--lottie-width",`${e}`),de(this.mqnFrame_,"--lottie-height",`${r}`),de(this.mqnFrame_,"--lottie-ratio",`${n}`)}),this.isCovered_){let c=l?s:o*n,h=l?s/n:o;this.rl_.mutate(()=>{de(this.lottieElement_,"width",`${c}px`),de(this.lottieElement_,"height",`${h}px`),de(this.mqnFrame_,"--lottie-height-rendered",`${h}`),de(this.mqnFrame_,"--lottie-width-rendered",`${c}`)})}else{let c=l?o*n:s,h=l?o:s/n;this.rl_.mutate(()=>{de(this.mqnFrame_,"--lottie-height-rendered",`${h}`),de(this.mqnFrame_,"--lottie-width-rendered",`${c}`)})}})}updateProgress_(){clearTimeout(this.autoplayTimeout_);let e=yn(),r=ar(this.shaft_)-e,n=Math.max(0,-r),s=this.shaft_.offsetHeight,o=this.elevator_.offsetHeight,a=s-o,l=new ce(0,a).getValueAsPercent(n),c=this.getEarlyScrollHeight_(),h=new ce(0,a-c).getPercentAsValue(l),f=0,u=null,m=this.spacers_.find(d=>{let v=d.getElement().offsetHeight;return f+=v,u=new ce(f-v,f),u.contains(h)});if(!m)this.rafProgress.easeTo(1,_x,Fh.EASE.linear);else{let d=u.getValueAsPercent(h),p=m.getRange(this.durationInFrames_).getPercentAsValue(d),y=new ce(0,this.durationInFrames_).getValueAsPercent(p);if(this.rafProgress.easeTo(y,_x,Fh.EASE.linear),m.isAutoplay()&&this.scroll_.isScrollingDown()&&p!==this.durationInFrames_&&r<=0){let _=Tt.scrollTop;this.autoplayTimeout_=setTimeout(()=>{this.rl_.mutate(()=>{KV(_+m.getPxPerFrame())})},this.msPerFrame_)}}}getTotalSpacerHeight_(){return this.spacers_.reduce((e,r)=>e+r.getElement().offsetHeight,0)}getEarlyScrollHeight_(){let e=this.getTotalSpacerHeight_();return this.shaft_.offsetHeight-e-this.elevator_.offsetHeight}scrollToFrame(e){let r=0,n=this.spacers_.find(m=>m.getRange(this.durationInFrames_).contains(e)?!0:(r+=m.getElement().offsetHeight,!1)),s=this.spacers_.reduce((m,d)=>m+d.getElement().offsetHeight,0),a=n.getRange(this.durationInFrames_).getValueAsPercent(e);r+=n.getElement().offsetHeight*a;let l=r/s,c=an(this.shaft_)-yn(),h=this.shaft_.offsetHeight-this.elevator_.offsetHeight,u=new ce(c,c+h).getPercentAsValue(l);window.scroll({top:u,left:0,behavior:"smooth"})}scrollLoop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.scrollLoop_()),(!this.isInIntroduction_||Tt.scrollTop!==0)&&(this.isInIntroduction_=!1,clearTimeout(this.autoplayTimeout_),this.updateProgress_())})}frameLoop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.frameLoop_());let e=se.getElapsedMilliseconds()/this.msPerFrame_;if(this.isInIntroduction_){let n=this.lottie_.currentFrame/this.durationInFrames_;this.rafProgress.easeTo(n,_x,Fh.EASE.linear)}this.lottie_.currentFrame>=this.introFrames_&&(this.isInIntroduction_=!1);let r=er.fromElementOffset(this.lottieElement_);if((!this.lastElevatorDimensions_||!r.equals(this.lastElevatorDimensions_))&&(this.lastElevatorDimensions_=r,this.rl_.mutate(()=>this.lottie_.resize())),!this.isInIntroduction_){let n=this.lottie_.currentFrame+e,s=this.targetFrame_-n,o=this.maxPlaybackSpeed_-1,a=Math.min(o*e,s),l=n+a,c=n<this.targetFrame_?Math.min(l,this.targetFrame_):this.targetFrame_;this.rl_.mutate(()=>this.lottie_.goToAndStop(c,!0))}})}dispose_(){this.mqnTemplateLottieElevatorService_.deregister(this.element_),this.domWatcher_&&this.domWatcher_.dispose(),this.scroll_.destroy(this),this.rl_.destroy(),this.renderFix.dispose()}};function iB(t,e){e===void 0&&(e=null);var r=_i(t,e),n=Ph(e),s=new ce(-t.offsetHeight+1,n-1);return s.contains(r)?0:r>0?r-n:r+t.offsetHeight}var qK=zd.getSingleton();function Bv(t){return qK.getVisibleDistanceFromRootIgnoringSticky(t)}function nB(t,e){return e===void 0&&(e=null),e!==null?Bv(t)-Bv(e):Bv(t)}function sB(t,e){e===void 0&&(e=null);var r=nB(t,e),n=Ph(e),s=ce.clamp(r,0,n),o=ce.clamp(r+t.offsetHeight,0,n);return o-s}function oB(t,e){return Ag(t,function(r){var n=sB(r,e);return n>0?n:-Math.abs(iB(r,e))})}function aB(t,e,r){r===void 0&&(r=Number.POSITIVE_INFINITY);for(var n=t,s=[];n.indexOf(e)!==-1&&s.length<r;){var o=n.indexOf(e),a=n.slice(0,o);n=n.slice(o+1),s.push(a)}return s.length<r&&s.push(n),s}var lB=300,zK=100,Uv={DEVICE:j.mqnCssName("mqn2-gga"),DEVICE_SHAFT:j.mqnCssName("mqn2-ggc"),DEVICE_PREVIOUS:j.mqnCssName("mqn2-ggf"),DEVICE_NEXT:j.mqnCssName("mqn2-ggb"),IMAGES:j.mqnCssName("mqn2-gg0"),SCREEN:j.mqnCssName("mqn2-gg2"),SECTION:j.mqnCssName("mqn2-gg5")},cB=class{constructor(e,r,n=lB){let s=new Date().getTime(),o=Math.abs(r-e),a=n*o;this.timeRange_=new ce(s,s+a),this.reverseOrder_=r<e,this.valueRange_=ce.fromUnorderedValues(e,r)}getValueAtTime(e){let r=this.timeRange_.getValueAsPercent(e);return this.reverseOrder_?this.valueRange_.getPercentAsValue(1-r):this.valueRange_.getPercentAsValue(r)}isDoneAtTime(e){return e>=this.timeRange_.getMax()}dispose(){this.timeRange_=null,this.valueRange_=null}},hB=class{constructor(e,r){this.section_=e,this.index_=parseInt(this.section_.getAttribute("data-index"));let n=`[data-index="${this.index_}"]`;this.screen_=r.querySelector(`.${Uv.SCREEN}${n}`),this.device_=r.querySelector(`.${Uv.DEVICE}${n}`),this.deviceShaft_=this.device_.querySelector(`.${Uv.DEVICE_SHAFT}`),this.maintainsPreviousDevice_=this.device_.getAttribute("data-maintain-previous-device").toUpperCase()==="TRUE",this.transition_=null,this.rl_=se.getDestroyableInstance(),this.loop_()}maintainsPreviousDevice(){return this.maintainsPreviousDevice_}getDeviceShaftElement(){return this.deviceShaft_}getDeviceElement(){return this.device_}getSectionElement(){return this.section_}loop_(){this.rl_.mutate(()=>{if(this.rl_.cleanup(()=>this.loop_()),this.isTransitioning()){let e=new Date().getTime(),r=this.transition_.getValueAtTime(e);de(this.screen_,"opacity",`${r}`),this.transition_.isDoneAtTime(e)&&this.stopTransition()}})}transitionScreenTo(e,r=lB){let n=Si(this.screen_,"opacity");n!==e?this.transition_=new cB(n,e,r):this.stopTransition()}snapTransitionScreenTo(e){this.transitionScreenTo(e,zK)}setScreenTo(e){this.stopTransition(),this.rl_.mutate(()=>de(this.screen_,"opacity",`${e}`))}isTransitioning(){return this.transition_!==null}stopTransition(){this.isTransitioning()&&(this.transition_.dispose(),this.transition_=null)}dispose(){this.stopTransition(),this.rl_.destroy()}},uB=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el_=e[0],this.rl_=se.getDestroyableInstance(),this.sections_=Array.from(this.el_.querySelectorAll(`.${Uv.SECTION}`)).map(n=>new hB(n,this.el_)),this.sectionsByElement_=new Map(this.sections_.map(n=>[n.getSectionElement(),n])),this.lastTargetSection_=null,this.init_(),r.$on("$destroy",()=>this.dispose_())}init_(){this.setupDeviceShafts_(),this.loop_()}setupDeviceShafts_(){this.sections_.forEach((e,r)=>{if(e.maintainsPreviousDevice())return;let n=e.getDeviceShaftElement(),o=ml(this.sections_.slice(r+1),(a,l)=>a.maintainsPreviousDevice()).length+1;de(n,"--device-shaft-height-in-sections",`${o}`)})}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_());let e=oB(this.getSectionElements_()),r=this.sectionsByElement_.get(e),[n,[s,...o]]=aB(this.sections_,this.sectionsByElement_.get(e));r.isTransitioning()||n.forEach(a=>a.setScreenTo(1)),this.lastTargetSection_!==r&&(r.transitionScreenTo(1),s&&(s.transitionScreenTo(0),o.forEach(a=>a.snapTransitionScreenTo(0)))),this.lastTargetSection_=r})}getSectionElements_(){return this.sectionsByElement_.keys()}dispose_(){this.sections_.forEach(e=>e.dispose()),this.rl_.destroy()}},fB=uB;var SB=re(dn());function gs(t){return getComputedStyle(t)}function xi(t,e){for(var r in e){var n=e[r];typeof n=="number"&&(n=n+"px"),t.style[r]=n}return t}function Hv(t){var e=document.createElement("div");return e.className=t,e}var dB=typeof Element!="undefined"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function oa(t,e){if(!dB)throw new Error("No element matching method supported");return dB.call(t,e)}function Nh(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function pB(t,e){return Array.prototype.filter.call(t.children,function(r){return oa(r,e)})}var wr={main:"ps",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},mB={x:null,y:null};function gB(t,e){var r=t.element.classList,n=wr.state.scrolling(e);r.contains(n)?clearTimeout(mB[e]):r.add(n)}function vB(t,e){mB[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(wr.state.scrolling(e))},t.settings.scrollingThreshold)}function WK(t,e){gB(t,e),vB(t,e)}var dd=function(e){this.element=e,this.handlers={}},yB={isEmpty:{configurable:!0}};dd.prototype.bind=function(e,r){typeof this.handlers[e]=="undefined"&&(this.handlers[e]=[]),this.handlers[e].push(r),this.element.addEventListener(e,r,!1)};dd.prototype.unbind=function(e,r){var n=this;this.handlers[e]=this.handlers[e].filter(function(s){return r&&s!==r?!0:(n.element.removeEventListener(e,s,!1),!1)})};dd.prototype.unbindAll=function(){var e=this;for(var r in e.handlers)e.unbind(r)};yB.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(dd.prototype,yB);var kh=function(){this.eventElements=[]};kh.prototype.eventElement=function(e){var r=this.eventElements.filter(function(n){return n.element===e})[0];return r||(r=new dd(e),this.eventElements.push(r)),r};kh.prototype.bind=function(e,r,n){this.eventElement(e).bind(r,n)};kh.prototype.unbind=function(e,r,n){var s=this.eventElement(e);s.unbind(r,n),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)};kh.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};kh.prototype.once=function(e,r,n){var s=this.eventElement(e),o=function(a){s.unbind(r,o),n(a)};s.bind(r,o)};function qv(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}var zv=function(t,e,r,n,s){n===void 0&&(n=!0),s===void 0&&(s=!1);var o;if(e==="top")o=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")o=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");GK(t,r,o,n,s)};function GK(t,e,r,n,s){var o=r[0],a=r[1],l=r[2],c=r[3],h=r[4],f=r[5];n===void 0&&(n=!0),s===void 0&&(s=!1);var u=t.element;t.reach[c]=null,u[l]<1&&(t.reach[c]="start"),u[l]>t[o]-t[a]-1&&(t.reach[c]="end"),e&&(u.dispatchEvent(qv("ps-scroll-"+c)),e<0?u.dispatchEvent(qv("ps-scroll-"+h)):e>0&&u.dispatchEvent(qv("ps-scroll-"+f)),n&&WK(t,c)),t.reach[c]&&(e||s)&&u.dispatchEvent(qv("ps-"+c+"-reach-"+t.reach[c]))}function Jt(t){return parseInt(t,10)||0}function $K(t){return oa(t,"input,[contenteditable]")||oa(t,"select,[contenteditable]")||oa(t,"textarea,[contenteditable]")||oa(t,"button,[contenteditable]")}function jK(t){var e=gs(t);return Jt(e.width)+Jt(e.paddingLeft)+Jt(e.paddingRight)+Jt(e.borderLeftWidth)+Jt(e.borderRightWidth)}var Vh={isWebKit:typeof document!="undefined"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window!="undefined"&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator!="undefined"&&navigator.msMaxTouchPoints,isChrome:typeof navigator!="undefined"&&/Chrome/i.test(navigator&&navigator.userAgent)},ro=function(t){var e=t.element;if(!e)return;var r=Math.floor(e.scrollTop);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(pB(e,wr.element.rail("x")).forEach(function(s){return Nh(s)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(pB(e,wr.element.rail("y")).forEach(function(s){return Nh(s)}),e.appendChild(t.scrollbarYRail));let n=t.settings.xMargin||0;!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth-n,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=_B(t,Jt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=Jt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=_B(t,Jt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=Jt(r*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),YK(e,t),t.scrollbarXActive?e.classList.add(wr.state.active("x")):(e.classList.remove(wr.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=0),t.scrollbarYActive?e.classList.add(wr.state.active("y")):(e.classList.remove(wr.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)};function _B(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function YK(t,e){var r={width:e.railXWidth},n=Math.floor(t.scrollTop);e.isRtl?r.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:r.left=t.scrollLeft,e.isScrollbarXUsingBottom?r.bottom=e.scrollbarXBottom-n:r.top=e.scrollbarXTop+n,xi(e.scrollbarXRail,r);var s={top:n,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?s.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:s.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?s.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:s.left=e.scrollbarYLeft+t.scrollLeft,xi(e.scrollbarYRail,s),xi(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),xi(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var XK=function(t){t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var r=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,n=r>t.scrollbarYTop?1:-1;t.element.scrollTop+=n*t.containerHeight,ro(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var r=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,n=r>t.scrollbarXLeft?1:-1,s=t.element.scrollLeft,o=t.scrollbarXRail.getBoundingClientRect().width,a=e.pageX/o,l=t.scrollbarX.getBoundingClientRect().width,s=(t.element.scrollWidth-window.innerWidth)*a;t.element.dispatchEvent(new CustomEvent("ps-update-position",{detail:{x:s,type:"railClick"}})),ro(t),e.stopPropagation()})},ZK=function(t){bB(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),bB(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])};function bB(t,e){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],h=e[7],f=e[8],u=t.element,m=null,d=null,v=null;function p(y){let _=m+v*(y[s]-d);t.element.dispatchEvent(new CustomEvent("ps-update-position",{detail:{x:_,type:"mousemove"}})),gB(t,h),ro(t),y.stopPropagation(),y.cancelable&&y.preventDefault()}function g(){vB(t,h),t[f].classList.remove(wr.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",p)}t.event.bind(t[a],"mousedown",function(y){m=u[c],d=y[s],v=(t[n]-t[r])/(t[o]-t[l]),t.event.bind(t.ownerDocument,"mousemove",p),t.event.once(t.ownerDocument,"mouseup",g),t[f].classList.add(wr.state.clicking),y.stopPropagation(),y.cancelable&&y.preventDefault()})}var QK=function(t){var e=t.element,r=function(){return oa(e,":hover")},n=function(){return oa(t.scrollbarX,":focus")||oa(t.scrollbarY,":focus")};function s(o,a){var l=Math.floor(e.scrollTop);if(o===0){if(!t.scrollbarYActive)return!1;if(l===0&&a>0||l>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var c=e.scrollLeft;if(a===0){if(!t.scrollbarXActive)return!1;if(c===0&&o<0||c>=t.contentWidth-t.containerWidth&&o>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(o){if(!(o.isDefaultPrevented&&o.isDefaultPrevented()||o.defaultPrevented)&&!(!r()&&!n())){var a=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(a){if(a.tagName==="IFRAME")a=a.contentDocument.activeElement;else for(;a.shadowRoot;)a=a.shadowRoot.activeElement;if($K(a))return}var l=0,c=0;switch(o.which){case 37:o.metaKey?l=-t.contentWidth:o.altKey?l=-t.containerWidth:l=-30;break;case 38:o.metaKey?c=t.contentHeight:o.altKey?c=t.containerHeight:c=30;break;case 39:o.metaKey?l=t.contentWidth:o.altKey?l=t.containerWidth:l=30;break;case 40:o.metaKey?c=-t.contentHeight:o.altKey?c=-t.containerHeight:c=-30;break;case 32:o.shiftKey?c=t.containerHeight:c=-t.containerHeight;break;case 33:c=t.containerHeight;break;case 34:c=-t.containerHeight;break;case 36:c=t.contentHeight;break;case 35:c=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&l!==0||t.settings.suppressScrollY&&c!==0||(e.scrollTop-=c,t.element.dispatchEvent(new CustomEvent("ps-update-position",{detail:{x:e.scrollLeft+l,type:"keyboard"}})),ro(t),s(l,c)&&o.cancelable&&o.preventDefault())}})},KK=function(t){var e=t.element;function r(a,l){var c=Math.floor(e.scrollTop),h=e.scrollTop===0,f=c+e.offsetHeight===e.scrollHeight,u=e.scrollLeft===0,m=e.scrollLeft+e.offsetWidth===e.scrollWidth,d;return Math.abs(l)>Math.abs(a)?d=h||f:d=u||m,d?!t.settings.wheelPropagation:!0}function n(a){var l=a.deltaX,c=-1*a.deltaY;return(typeof l=="undefined"||typeof c=="undefined")&&(l=-1*a.wheelDeltaX/6,c=a.wheelDeltaY/6),a.deltaMode&&a.deltaMode===1&&(l*=10,c*=10),l!==l&&c!==c&&(l=0,c=a.wheelDelta),a.shiftKey?[-c,-l]:[l,c]}function s(a,l,c){if(!Vh.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(a))return!1;for(var h=a;h&&h!==e;){if(h.classList.contains(wr.element.consuming))return!0;var f=gs(h),u=[f.overflow,f.overflowX,f.overflowY].join("");if(u.match(/(scroll|auto)/)){var m=h.scrollHeight-h.clientHeight;if(m>0&&!(h.scrollTop===0&&c>0)&&!(h.scrollTop===m&&c<0))return!0;var d=h.scrollWidth-h.clientWidth;if(d>0&&!(h.scrollLeft===0&&l<0)&&!(h.scrollLeft===d&&l>0))return!0}h=h.parentNode}return!1}function o(a){var l=n(a),c=l[0],h=l[1];if(!s(a.target,c,h)){var f=!1;if(t.settings.useBothWheelAxes)t.scrollbarYActive&&!t.scrollbarXActive?(h?e.scrollTop-=h*t.settings.wheelSpeed:e.scrollTop+=c*t.settings.wheelSpeed,f=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(c?e.scrollLeft+=c*t.settings.wheelSpeed:e.scrollLeft-=h*t.settings.wheelSpeed,f=!0);else{e.scrollTop-=h*t.settings.wheelSpeed;let u=e.scrollLeft+c*t.settings.wheelSpeed;t.element.dispatchEvent(new CustomEvent("ps-update-position",{detail:{x:u,type:"mousewheel"}}))}ro(t),f=f||r(c,h),f&&!a.ctrlKey&&(a.stopPropagation(),a.cancelable&&a.preventDefault())}}typeof window.onwheel!="undefined"?t.event.bind(e,"wheel",o):typeof window.onmousewheel!="undefined"&&t.event.bind(e,"mousewheel",o)},JK=function(t){if(!Vh.supportsTouch&&!Vh.supportsIePointer)return;var e=t.element;function r(v,p){var g=Math.floor(e.scrollTop),y=e.scrollLeft,_=Math.abs(v),b=Math.abs(p);if(b>_){if(p<0&&g===t.contentHeight-t.containerHeight||p>0&&g===0)return window.scrollY===0&&p>0&&Vh.isChrome}else if(_>b&&(v<0&&y===t.contentWidth-t.containerWidth||v>0&&y===0))return!0;return!0}function n(v,p){e.scrollTop-=p;let g=e.scrollLeft-v;t.element.dispatchEvent(new CustomEvent("ps-update-position",{detail:{x:g,type:"touch"}})),ro(t)}var s={},o=0,a={},l=null;function c(v){return v.targetTouches?v.targetTouches[0]:v}function h(v){return v.pointerType&&v.pointerType==="pen"&&v.buttons===0?!1:!!(v.targetTouches&&v.targetTouches.length===1||v.pointerType&&v.pointerType!=="mouse"&&v.pointerType!==v.MSPOINTER_TYPE_MOUSE)}function f(v){if(!!h(v)){var p=c(v);s.pageX=p.pageX,s.pageY=p.pageY,o=new Date().getTime(),l!==null&&clearInterval(l)}}function u(v,p,g){if(!e.contains(v))return!1;for(var y=v;y&&y!==e;){if(y.classList.contains(wr.element.consuming))return!0;var _=gs(y),b=[_.overflow,_.overflowX,_.overflowY].join("");if(b.match(/(scroll|auto)/)){var w=y.scrollHeight-y.clientHeight;if(w>0&&!(y.scrollTop===0&&g>0)&&!(y.scrollTop===w&&g<0))return!0;var S=y.scrollLeft-y.clientWidth;if(S>0&&!(y.scrollLeft===0&&p<0)&&!(y.scrollLeft===S&&p>0))return!0}y=y.parentNode}return!1}function m(v){if(h(v)){var p=c(v),g={pageX:p.pageX,pageY:p.pageY},y=g.pageX-s.pageX,_=g.pageY-s.pageY;if(u(v.target,y,_))return;n(y,_),s=g;var b=new Date().getTime(),w=b-o;w>0&&(a.x=y/w,a.y=_/w,o=b),r(y,_)&&v.cancelable&&v.preventDefault()}}function d(){t.settings.swipeEasing&&(clearInterval(l),l=setInterval(function(){if(t.isInitialized){clearInterval(l);return}if(!a.x&&!a.y){clearInterval(l);return}if(Math.abs(a.x)<.01&&Math.abs(a.y)<.01){clearInterval(l);return}n(a.x*30,a.y*30),a.x*=.8,a.y*=.8},10))}Vh.supportsTouch?(t.event.bind(e,"touchstart",f),t.event.bind(e,"touchmove",m),t.event.bind(e,"touchend",d)):Vh.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",f),t.event.bind(e,"pointermove",m),t.event.bind(e,"pointerup",d)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",f),t.event.bind(e,"MSPointerMove",m),t.event.bind(e,"MSPointerUp",d)))},eJ=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1,xMargin:0}},tJ={"click-rail":XK,"drag-thumb":ZK,keyboard:QK,wheel:KK,touch:JK},pd=function(e,r){var n=this;if(r===void 0&&(r={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(wr.main),this.settings=eJ();for(var s in r)n.settings[s]=r[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o=function(){return e.classList.add(wr.state.focus)},a=function(){return e.classList.remove(wr.state.focus)};this.isRtl=gs(e).direction==="rtl",this.isNegativeScroll=function(){var h=e.scrollLeft,f=null;return e.scrollLeft=-1,f=e.scrollLeft<0,e.scrollLeft=h,f}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new kh,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=Hv(wr.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=Hv(wr.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",o),this.event.bind(this.scrollbarX,"blur",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=gs(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=Jt(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=Jt(l.borderLeftWidth)+Jt(l.borderRightWidth),xi(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=Jt(l.marginLeft)+Jt(l.marginRight),xi(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Hv(wr.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=Hv(wr.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",o),this.event.bind(this.scrollbarY,"blur",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var c=gs(this.scrollbarYRail);this.scrollbarYRight=parseInt(c.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=Jt(c.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?jK(this.scrollbarY):null,this.railBorderYWidth=Jt(c.borderTopWidth)+Jt(c.borderBottomWidth),xi(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=Jt(c.marginTop)+Jt(c.marginBottom),xi(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(h){return tJ[h](n)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(h){return n.onScroll(h)}),ro(this)};pd.prototype.update=function(){!this.isAlive||(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,xi(this.scrollbarXRail,{display:"block"}),xi(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=Jt(gs(this.scrollbarXRail).marginLeft)+Jt(gs(this.scrollbarXRail).marginRight),this.railYMarginHeight=Jt(gs(this.scrollbarYRail).marginTop)+Jt(gs(this.scrollbarYRail).marginBottom),xi(this.scrollbarXRail,{display:"none"}),xi(this.scrollbarYRail,{display:"none"}),ro(this),zv(this,"top",0,!1,!0),zv(this,"left",0,!1,!0),xi(this.scrollbarXRail,{display:""}),xi(this.scrollbarYRail,{display:""}))};pd.prototype.onScroll=function(e){!this.isAlive||(ro(this),zv(this,"top",this.element.scrollTop-this.lastScrollTop),zv(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};pd.prototype.destroy=function(){!this.isAlive||(this.event.unbindAll(),Nh(this.scrollbarX),Nh(this.scrollbarY),Nh(this.scrollbarXRail),Nh(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};pd.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};var wB=pd;var Wv=re(Ye()),EB=re(Et()),xB=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.$element=r,this.perfectScrollbar=null,this.scrollEl=this.el.querySelector("div[mqn-scroller]"),this.mousePos={x:0,down:!1,start:0},this.windowResizeListener=null,this.raf=new Wv.Raf(this.onRaf.bind(this)),this.originalLerpSpeed=.12,this.lerpSpeed=this.originalLerpSpeed,this.options=null,this.targetX=0,this.mouseMoveListener=null,this.mouseUpListener=null,this.mouseDownListener=null,this.mouseOutListener=null,window.setTimeout(()=>{this.setUpMouseDrag_()});let s=o=>{this.createScrollbar(),this.perfectScrollbar&&this.perfectScrollbar.update(),this.lerp=!this.isMobile()&&this.options.lerp};window.MQN_RESIZER?(window.MQN_RESIZER.addListener(s),this.windowResizeListener=()=>{window.MQN_RESIZER&&window.MQN_RESIZER.removeListener(s)}):($window.addEventListener("resize",s,{passive:!0}),this.windowResizeListener=()=>{$window.removeEventListener("resize",s)})}init(e){this.mobileOnly=e.mobileOnly,this.lerp=!this.isMobile()&&e.lerp,this.options=e,this.ev=EB.elementVisibility.inview(this.el,{},(r,n)=>{this.lerp&&(n.isIntersecting&&!this.isMobile()?this.raf.start():this.raf.stop())}),this.createScrollbar()}onRaf(){let e=this.scrollEl.scrollLeft;this.scrollEl.scrollLeft=Wv.mathf.lerp(e,this.targetX,this.lerpSpeed),this.perfectScrollbar.update();let r=e-this.targetX}setUpMouseDrag_(){this.mouseMoveListener=null;let e=l=>{if(window.innerWidth<Te.TABLET)return;let c=Math.abs(this.mousePos.x-this.mousePos.start);if(this.mousePos.down){let h=this.mousePos.x-l.pageX;this.lerp?(this.lerpSpeed=this.originalLerpSpeed,this.targetX+=h):this.scrollEl.scrollLeft+=h,this.mousePos.x=l.pageX,c>=0&&this.enablePointerEvents(!1)}else this.enablePointerEvents(!0)};this.mouseMoveListener=()=>{this.scrollEl.removeEventListener("mousemove",e)},this.scrollEl.addEventListener("mousemove",e),this.mouseUpListener=null;let r=l=>{this.mousePos.down=!1,this.enablePointerEvents(!0)};this.mouseUpListener=()=>{this.scrollEl.removeEventListener("mouseup",r)},this.scrollEl.addEventListener("mouseup",r),this.mouseOutListener=null;let n=l=>{(l.target||l.srcElement)===this.scrollEl&&r(l)};this.mouseOutListener=()=>{this.scrollEl.removeEventListener("mouseleave",n)},this.scrollEl.addEventListener("mouseleave",n,!0),this.mouseDownListener=null;let s=l=>{window.setTimeout(()=>{this.mousePos={x:l.pageX,down:!0,start:l.pageX}})};this.mouseUpListener=()=>{this.scrollEl.removeEventListener("mousedown",s)},this.scrollEl.addEventListener("mousedown",s);let o=this.scrollEl.querySelector(".ps__thumb-x");o&&o.setAttribute("aria-hidden","true");let a=this.scrollEl.querySelector(".ps__rail-x");a&&a.setAttribute("aria-hidden","true")}enablePointerEvents(e){Array.prototype.slice.call(this.scrollEl.children).forEach(n=>{n.style.pointerEvents=e?"":"none"})}isMobile(){return window.innerWidth<=Te.TABLET}createScrollbar(){if(this.perfectScrollbar&&this.perfectScrollbar.destroy(),this.mobileOnly&&!this.isMobile())return;this.isMobile()?this.raf.stop():this.lerp&&this.raf.start(),this.perfectScrollbar=new wB(this.scrollEl,{maxScrollbarLength:window.innerWidth*.25,wheelPropagation:!0,xMargin:50}),this.perfectScrollbar.update(),this.psScrollXDebouncer=null;let e=o=>{window.clearTimeout(this.psScrollXDebouncer),this.psScrollXDebouncer=window.setTimeout(()=>{let a=o.type=="ps-scroll-right"?"scroll-right":"scroll-left",l=mt.getClosestMqnFrame(this.el),c=l.getAttribute("mqn-autotrack-action"),h=l.getAttribute("mqn-autotrack-page-type"),f=l.getAttribute("mqn-autotrack-product"),u=l.getAttribute("mqn-autotrack-partial-type"),m={event:"module click",eventCategory:"module click",eventAction:c,eventLabel:a,pageName:window.location.pathname,product:f,moduleName:c,moduleType:u,nonInteraction:"0"};SB.default.trackDataLayer(m)},300)},r=o=>{this.lerp?(o.detail.type=="mousewheel"||o.detail.type=="touch"?this.lerpSpeed=1:this.lerpSpeed=this.originalLerpSpeed,this.targetX=o.detail.x):this.scrollEl.scrollLeft=o.detail.x};this.scrollEl.addEventListener("ps-update-position",r),this.psScrollXDisposer=()=>{this.scrollEl.removeEventListener("ps-scroll-right",e),this.scrollEl.removeEventListener("ps-scroll-left",e),this.scrollEl.removeEventListener("ps-update-position",r)},this.scrollEl.addEventListener("ps-scroll-right",e),this.scrollEl.addEventListener("ps-scroll-left",e);let n=Array.from(this.scrollEl.querySelectorAll(".ps__thumb-x")),s=Array.from(this.scrollEl.querySelectorAll(".ps__thumb-y"));[...n,...s].forEach(o=>{o.setAttribute("aria-hidden","true"),o.removeAttribute("tabindex")})}refresh(){this.perfectScrollbar&&this.perfectScrollbar.update()}dispose(){this.raf.dispose(),this.windowResizeListener&&this.windowResizeListener(),this.perfectScrollbar&&this.perfectScrollbar.destroy(),this.windowResizeListener&&this.windowResizeListener(),this.scrollListener&&this.scrollListener(),this.mouseMoveListener&&this.mouseMoveListener(),this.mouseUpListener&&this.mouseUpListener(),this.mouseOutListener&&this.mouseOutListener(),this.mouseDownListener&&this.mouseDownListener(),this.perfectScrollbar&&this.perfectScrollbar.destroy(),this.psScrollXDisposer&&this.psScrollXDisposer()}},TB=xB;var AB=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.selectedTab=""}},MB=AB;var CB=class{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){this.el=r[0],this.$scope=n,this.started=!1,this.previousIndex=null,this.index=0,this.timer=0,this.autoplay=!0}init(e){this.count=+e.count,this.slideCount=+e.count-1,this.speed=e.speed||5e3,this.loop=e.loop||!1,e.forceStart&&this.start(),ht.elementInViewWatcherFirstChangeOnly(this.el,{threshold:.3},(r,n,s)=>{n.isIntersecting&&(this.started||(this.start(),s()))})}start(){this.started||(this.started=!0,this.timer=window.setInterval(()=>{this.goToNextSlide()},this.speed))}stop(){window.clearInterval(this.timer),this.autoplay=!1}goToNextSlide(){this.goToIndex(this.index+1)}goToIndex(e){window.setTimeout(()=>{this.previousIndex=this.index,this.index=e,!this.loop&&this.index==this.slideCount&&this.stop(),this.index>this.slideCount&&(this.index=0),[...this.el.querySelectorAll("video")].forEach(n=>{n.currentTime=0,n.play()}),this.$scope.$apply()})}dispose_(){}},PB=CB;var IB=class{static get $inject(){return["$element","$scope","$timeout"]}constructor(e,r,n){this.el=e[0],this.$scope=r,this.$timeout=n,this.parentWidth=this.el.offsetWidth,this.sliderPos=Math.floor(this.parentWidth/2),this.sliderStyle={},this.clipStyle={},this.dragging=!1,this.startX=0,this.intersectionObserver_=null,this.dragStartListener_=null,this.dragMoveListener_=null,this.dragEndListener_=null,this.resizeListener_=null,r.$on("$destroy",()=>{this.dispose()})}init(){this.resizeListener_=()=>this.onResize(),window.addEventListener("resize",this.resizeListener_),this.onResize(),this.initDragListeners(),window.IntersectionObserver&&(this.intersectionObserver_=new IntersectionObserver(e=>{e[0].isIntersecting&&this.onInView()},{threshold:.5}),this.intersectionObserver_.observe(this.el))}onInView(){this.intersectionObserver_&&(this.intersectionObserver_.disconnect(),this.intersectionObserver_=null);let e=700,r=200,n=1400;this.startAnimation(e),this.$timeout(()=>{let s=Math.floor(.5*this.parentWidth);this.sliderPos+=.15*s,this.updateStyles(),this.$timeout(()=>{this.sliderPos=s,this.updateStyles()},e+r),this.$timeout(()=>{this.stopAnimation()},2*(e+r))},n)}initDragListeners(){this.dragStartListener_=e=>this.onDragStart(e),this.dragger_=this.el.querySelector("."+j.mqnCssName("mqn2-anq")),this.dragger_.addEventListener("mousedown",this.dragStartListener_),this.dragger_.addEventListener("touchstart",this.dragStartListener_),this.dragMoveListener_=e=>this.onDragMove(e),window.addEventListener("mousemove",this.dragMoveListener_),window.addEventListener("touchmove",this.dragMoveListener_),this.dragEndListener_=e=>this.onDragEnd(e),window.addEventListener("mouseup",this.dragEndListener_),window.addEventListener("touchend",this.dragEndListener_),window.addEventListener("touchcancel",this.dragEndListener_)}onDragStart(e){this.dragging||(this.stopAnimation(),this.dragging=!0,this.startSliderPos=this.sliderPos,this.startX=e.pageX?e.pageX:e.touches[0].pageX)}onDragMove(e){if(!this.dragging)return;this.stopAnimation();let n=(e.pageX?e.pageX:e.touches[0].pageX)-this.startX;this.sliderPos=this.startSliderPos+n,this.sliderPos<0&&(this.sliderPos=0),this.sliderPos>this.parentWidth&&(this.sliderPos=this.parentWidth),this.updateStyles()}onDragEnd(e){!this.dragging||(this.stopAnimation(),this.dragging=!1,this.updateStyles())}onResize(){let e=this.parentWidth,r=this.el.offsetWidth;this.sliderPos=Math.floor(this.sliderPos*r/e),this.parentWidth=r,this.updateStyles()}startAnimation(e){this.sliderStyle.transition=`left ${e}ms ease`,this.clipStyle.transition=`clip ${e}ms ease`}stopAnimation(){delete this.sliderStyle.transition,delete this.clipStyle.transition}updateStyles(){this.sliderStyle.left=`${this.sliderPos}px`,this.clipStyle.clip=`rect(0, ${this.sliderPos}px, ${this.el.offsetHeight}px, 0)`,this.$scope.$$phase||this.$scope.$apply()}dispose(){this.intersectionObserver_&&(this.intersectionObserver_.disconnect(),this.intersectionObserver_=null),this.dragStartListener_&&(this.dragger_.removeEventListener("mousedown",this.dragStartListener_),this.dragger_.removeEventListener("touchstart",this.dragStartListener_),this.dragStartListener_=null),this.dragMoveListener_&&(window.removeEventListener("mousemove",this.dragMoveListener_),window.removeEventListener("touchmove",this.dragMoveListener_),this.dragMoveListener_=null),this.dragEndListener_&&(window.removeEventListener("mouseup",this.dragEndListener_),window.removeEventListener("touchend",this.dragEndListener_),window.removeEventListener("touchcancel",this.dragEndListener_),this.dragEndListener_=null),this.resizeListener_&&(window.removeEventListener("resize",this.resizeListener_),this.resizeListener_=null)}},RB=IB;var Ln=re(Ye()),LB=re(Et()),OB=re(yt()),wx=re(dn());var DB=class{static get $inject(){return["$element","$scope","$rootScope"]}constructor(e,r,n){this.rl_=se.getDestroyableInstance(),this.element=e[0],this.scrollEl=this.element.querySelector("[scroll-snap]"),this.scrollElOuter=this.element.querySelector("[scroll-snap-outer]"),this.items=Array.from(this.scrollEl.querySelectorAll("[scroll-snap-item]")),this.itemsCount=this.items.length,this.middle=this.itemsCount/2,this.skipDisplayIndexUpdate=!1,this.$scope=r,this.$rootScope=n,this.childrenPositions=[],this.originalLerpSpeed=.04,this.lerpSpeed=this.originalLerpSpeed,this.domWatcher=new OB.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:this.onWindowResize.bind(this)}),this.index=0,this.displayIndex=0,this.mouseState={x:0,down:!1,start:0},this.raf=new Ln.Raf(this.onRaf.bind(this)),this.targetX=0,this.currentX=0,this.ev=LB.elementVisibility.inview(this.element,{},(s,o)=>{o.isIntersecting?this.raf.start():this.raf.stop()}),this.setupMouseDrag(),this.onWindowResize(),this.slideTo_(this.middle,!0),r.$on("$destroy",()=>this.dispose_())}onWindowResize(){this.childrenPositions=[],this.items.forEach(e=>{let r=this.currentX,s=e.getBoundingClientRect().left+r,o=e.offsetWidth,a=this.scrollEl.offsetWidth;this.childrenPositions.push({el:e,x:s,centerX:s-(a*.5-o*.5),width:o})}),this.slideTo_(this.index,!0)}setupMouseDrag(){let e=s=>{let o=s.touches&&s.touches[0].clientX||s.x;this.mouseState={x:o,down:!0,lastX:o,start:o},this.skipDisplayIndexUpdate=!1,this.targetX=this.currentX};this.domWatcher.add({element:this.scrollEl,on:"touchstart",callback:e.bind(this)}),this.domWatcher.add({element:this.scrollEl,on:"mousedown",callback:e.bind(this)});let r=s=>{let o=s.touches&&s.touches[0].clientX||s.x;if(this.mouseState.down){this.mouseState.x=o;let a=this.mouseState.lastX-this.mouseState.x,l=Ln.mathf.inverseLerp(300,1e3,window.innerWidth),c=Ln.mathf.lerp(1.4,1.8,l);this.targetX+=a*c,this.mouseState.lastX=this.mouseState.x}};this.domWatcher.add({element:this.scrollEl,on:"touchmove",callback:r.bind(this)}),this.domWatcher.add({element:this.scrollEl,on:"mousemove",callback:r.bind(this)});let n=s=>{if(!this.mouseState.down)return;this.mouseState.down=!1;let o=this.findClosestIndexToX(this.targetX);this.slideTo_(o,!1,!0)};this.domWatcher.add({element:this.scrollEl,on:"touchend",callback:n.bind(this),options:{passive:!0}}),this.domWatcher.add({element:this.scrollEl,on:"mouseup",callback:n.bind(this),options:{passive:!0}}),this.domWatcher.add({element:this.scrollEl,on:"mouseleave",callback:n.bind(this),options:{passive:!0}})}slideTo_(e,r=!1,n=!1){e==-1&&(e=this.childrenPositions.length-1),e>this.childrenPositions.length-1&&(e=0),r&&this.setScrollPosition(this.getChildPosition(e).centerX),this.targetX=this.getChildPosition(e).centerX,this.index=e,n||(this.skipDisplayIndexUpdate=!0,this.displayIndex=Ln.mathf.wrap(this.index,0,this.middle)),window.setTimeout(()=>this.$scope.$apply())}increment(e){let r=this.index+e,n=e<0;n&&r==-1&&(r=this.itemsCount/2-1),n&&this.index==this.itemsCount-1&&(r=this.itemsCount/2-2),!n&&r==this.itemsCount&&(r=this.itemsCount/2),e==-1&&this.triggerClickEvent("prev"),e==1&&this.triggerClickEvent("next"),this.slideTo_(r)}getChildPosition(e){return e==-1?this.childrenPositions[this.childrenPositions.length-1]:e>this.childrenPositions.length-1?this.childrenPositions[0]:this.childrenPositions[e]}onRaf(){let e=this.currentX;if(this.currentX==this.targetX)return;let r=e>this.targetX,n=this.getChildPosition(1).centerX,s=n-e,o=this.getChildPosition(this.itemsCount-2).centerX,a=o-e,l=e-this.targetX;if(r&&e<=n){let f=this.getChildPosition(this.itemsCount/2+1).centerX;this.setScrollPosition(f-s),this.targetX=f,this.targetX-=l;return}if(!r&&e>=o){let f=this.findClosestIndexToX(this.targetX/2);n=this.getChildPosition(f-1).centerX,this.setScrollPosition(n-a),this.targetX=n,this.targetX-=l;return}let c=Ln.mathf.damp(e,this.targetX,.4,.2);this.setScrollPosition(c);let h=Ln.mathf.wrap(this.findClosestIndexToX(this.currentX),0,this.middle);h!==this.displayIndex&&!this.skipDisplayIndexUpdate&&(this.displayIndex=h,window.setTimeout(()=>this.$scope.$apply()))}setScrollPosition(e){this.currentX!==e&&(this.currentX=e,this.rl_.mutate(()=>Ln.dom.setCssVariable(this.scrollEl,"--x",-e+"px")))}goTo(e){let r=Ln.mathf.wrap(this.index,0,this.middle),n=e-r,s=this.index+n;this.index==this.itemsCount-1&&n<0&&(s=e),this.index==0&&n>0&&(s=e+this.itemsCount/2),s!=this.index&&(this.slideTo_(s),this.triggerClickEvent("click"))}findClosestIndexToX(e){let r,n=1e4;return this.childrenPositions.forEach((s,o)=>{let a=Math.abs(s.x-e);a<=n&&(r=o,n=a)}),r}triggerClickEvent(e="click"){let r=this.displayIndex,n=wx.default.getClosestTrackingId(this.element),s=mt.getClosestMqnFrame(this.element);if(!s)return;let o=s.getAttribute("mqn-autotrack-product"),a=s.getAttribute("mqn-autotrack-partial-type");(e!=="prev"||e!=="next")&&(e=e+"-"+r);let l={event:"module interaction",eventCategory:"module click",eventAction:n,eventLabel:e,pageName:window.location.pathname,product:o,moduleName:n,moduleType:a,nonInteraction:"0"};wx.default.trackDataLayer(l)}dispose_(){this.rl_.destroy(),this.raf.dispose()}},FB=DB;var gl=re(Ye()),NB=re(Bl());var rJ=.4,iJ=0,kB=47,nJ=10,sJ=kB,md=47,oJ=gl.is.supportingWebp(),aJ=new ce(iJ/md,kB/md),lJ=new zi(.45,0,.55,1),cJ=new ce(0,5/md),hJ=new ce(nJ/md,sJ/md),uJ=new zi(.45,0,.55,1),Bh={WEBP:j.mqnCssName("mqn2-h0o"),DEAD_SCROLL:j.mqnCssName("mqn2-gzx"),SEQUENCE_SPACER:j.mqnCssName("mqn2-gzv"),WIPE_SPACER:j.mqnCssName("mqn2-gzw"),SEQUENCE:j.mqnCssName("mqn2-gxw"),STICKY_PARENT:j.mqnCssName("mqn2-gxq")},Gv=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.disposed=!1,this.rl_=se.getDestroyableInstance(),this.sequenceSpacer_=this.element_.querySelector(`.${Bh.SEQUENCE_SPACER}`),this.wipeSpacer_=this.element_.querySelector(`.${Bh.WIPE_SPACER}`),this.deadScroll_=this.element_.querySelector(`.${Bh.DEAD_SCROLL}`),this.stickyParentElement_=this.element_.querySelector(`.${Bh.STICKY_PARENT}`),this.sequenceElement_=this.element_.querySelector(`.${Bh.SEQUENCE}`),this.targetProgress_=null,this.lastSequenceWidth_=null,this.lastDistance_=null,this.lottieProgress_=null,this.sequenceProgress_=null,this.wipeProgress_=null,this.init_(),r.$on("$destroy",()=>this.dispose())}init_(){this.rafProgress=new gl.RafProgress(e=>this.onProgressUpdate(e)),oJ&&this.rl_.mutate(()=>gn(this.element_,Bh.WEBP)),this.initSequence_(),this.rafProgress.setCurrentProgress(0)}resizeLoop_(){this.rl_.measure(()=>{if(this.disposed)return;this.rl_.cleanup(()=>this.resizeLoop_());let e=this.sequenceElement_.offsetWidth;this.lastSequenceWidth_!==e&&(this.lastSequenceWidth_=e,this.sequenceCanvas.resize())})}easeTo_(e){e!==this.targetProgress_&&(this.targetProgress_=e,this.rafProgress.easeTo(e,rJ,gl.EASE.linear))}initSequence_(){this.sequenceSrcs_=gl.is.safari()?JSON.parse(this.element_.getAttribute("data-sequence-safari")):JSON.parse(this.element_.getAttribute("data-sequence")),this.sequenceCanvas=new NB.WebGlImageSequence(this.sequenceElement_,[{images:this.sequenceSrcs_}],{bottom:0}),this.sequenceCanvas.load().then(()=>{this.element_.classList.add("loaded"),this.sequenceCanvas.renderByProgress(this.rafProgress.currentProgress),this.resizeLoop_(),this.onAssetLoadComplete()})}onAssetLoadComplete(){this.rl_.measure(()=>{this.disposed||(this.sequenceCanvas.renderByProgress(0),this.loop_())})}getViewportHeight_(){return window.innerHeight-yn()-fo()}getScrollRange_(){let e=this.getViewportHeight_()+this.deadScroll_.offsetHeight-this.stickyParentElement_.offsetHeight;return new ce(yn(),e)}loop_(){this.rl_.measure(()=>{if(this.disposed)return;this.rl_.cleanup(()=>this.loop_());let e=ar(this.stickyParentElement_);if(this.lastDistance_===e)return;this.lastDistance_=e;let r=this.getScrollRange_().getValueAsPercent(e);this.easeTo_(r)})}getSequenceShareOfProgress_(){let e=this.sequenceSpacer_.offsetHeight,r=this.wipeSpacer_?this.wipeSpacer_.offsetHeight:0,n=e+r;return e/n}onProgressUpdate(e){let r=this.sequenceSpacer_.offsetHeight,n=this.wipeSpacer_?this.wipeSpacer_.offsetHeight:0,s=r+n,o=new ce(0,1),a=new ce(0,r/s),l=new ce(r/s,1),c=o.getValueAsPercent(e),h=a.getValueAsPercent(e),f=l.getValueAsPercent(e);this.updateLottie_(c),this.updateSequence_(h),this.wipeSpacer_&&this.updateWipe_(f)}updateLottie_(e){e!==this.lottieProgress_&&!isNaN(e)&&(this.lottieProgress_=e,de(this.element_,"--lottie-progress",`${e}`))}updateSequence_(e){if(e===this.sequenceProgress_||isNaN(e))return;this.sequenceProgress_=e,this.sequenceCanvas.renderByProgress(e);let r=aJ.getValueAsPercent(e),n=lJ.getAdjustedPercent(r),s=hJ.getValueAsPercent(e),o=uJ.getAdjustedPercent(s),a=cJ.getValueAsPercent(e);this.rl_.mutate(()=>{this.disposed||(de(this.element_,"--eased-scrubbed-progress",`${n}`),de(this.element_,"--case-progress",`${o}`),de(this.element_,"--chapter-opacity",`${a}`))})}updateWipe_(e){e!==this.wipeProgress_&&!isNaN(e)&&(this.wipeProgress_=e,de(this.element_,"--wipe-progress",`${e}`),de(this.element_,"--lottie-complete",`${e>0?1:0}`))}dispose(){this.disposed=!0,this.rafProgress.dispose(),this.sequenceCanvas.dispose()}};var fJ="https://storage.googleapis.com/mannequin/data/retailers/",VB=class{static get $inject(){return["$element","$scope","$window","$timeout","$http","$rootScope"]}constructor(e,r,n,s,o,a){this.element=e[0],this.$element=e,this.started=!1,this.$scope=r,this.$window=window,this.$timeout=s,this.$http=o,this.$rootScope=a,this.ready=!1,this.drawerOpen=!1,this.locale=null,this.productName=null,this.featured=null,this.extra=null,this.setVisible(!1),this.inviewWatcher=ht.elementInViewWatcherFirstChangeOnly(this.element,{threshold:0,rootMargin:"0px 0px 300% 0px"},(l,c,h)=>{c.isIntersecting&&(this.isReady(),h())})}setOpen(e){this.drawerOpen=e}toggleDrawer(){this.drawerOpen=!this.drawerOpen}init(e,r,n){this.productName=r,this.locale=e,n&&this.setOpen(!0)}isReady(){let e=new Date().getTime(),r=fJ+this.productName+".json?"+e;this.$http({method:"GET",url:r}).then(n=>{let s=n.data,o=s[this.locale];if(!n||!s||!o){this.setVisible(!1);return}this.featured=o.filter(a=>a.featured),this.extra=o.filter(a=>!a.featured),this.ready=!0,this.setVisible(!0)},()=>{console.log("MQN: Failed to retreive 3PRs."),this.setVisible(!1)})}setVisible(e){let r=this.element,n=j.mqnCssName("mqn2-aaa");for(;r;)r.classList.contains(n)?(r.style.height=e?"":"1px",r.style.overflow=e?"":"hidden",r=null,r=null):r=r.parentNode}},BB=VB;var UB=class{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){this.currentVariant=0}handleVariantClick(e){this.currentVariant=e}},HB=UB;var dJ=10;function pJ(){var t=document.querySelector(".navbar");return t?t.offsetHeight+dJ:0}var qB=pJ;var zB={SORT_MENU:j.mqnCssName("mqn2-ah3"),SORT_TOGGLE_BUTTON:j.mqnCssName("mqn2-agv")},WB=class{static get $inject(){return["$rootScope","$element","$scope","$timeout","$sce","$http","$sanitize"]}constructor(e,r,n,s,o,a,l){this.$scope=n,this.$rootScope=e,this.el=r[0],this.$element=r,this.$timeout=s,this.$sce=o,this.$http=a,this.$sanitize=l,this.locale="en_US",this.productType="accessories",this.loading=!0,this.products_=[],this.env="prod",this.hasDocIdPricing_=!1,this.validProductFilters=new Uh,this.validProductFiltersOfResults=new Uh,this.filters=new Uh,this.filterGroups=[],this.filteredProducts=[],this.filteredProductsCurrentPage=[],this.productsByFilterGroup=[],this.filterGroupsMap_={},this.filterValueToGroupNameMap_={},this.allFilterGroupNames={},this.nonFilterUrlParams_="",this.sortPanelOpen=!1,this.sortDisplayLabel="",this.sortType="",Te.IS_DESKTOP_OR_TABLET()?(this.numCols=3,this.numRows=8):(this.numCols=2,this.numRows=7),this.numProductsPerPage=this.numCols*this.numRows,this.page=0,this.numPages=1,this.mobileToggleState=null,this.mainElementStyle={},this.termsModalActive=!1,this.termsTitle="",this.termsBody="",this.filtersWrapEl_=this.el.querySelector("."+j.mqnCssName("mqn2-ah9")),this.filtersEl_=this.el.querySelector("."+j.mqnCssName("mqn2-aha")),this.filtersContentEl_=this.el.querySelector("."+j.mqnCssName("mqn2-ahf")+"."+j.mqnCssName("mqn2-aap")),this.scrollListener_=null,this.fixedFilters=!1,this.navbarOffset=0,this.lastScrollPos_=0,this.scrollDirection_=null,this.filtersBarStyles={},this.filtersState="top",this.resizeListener_=null,this.updatingImages_=!1,n.$on("$destroy",()=>{this.dispose_()})}init(e,r){this.sortType=e,this.sortDisplayLabel=r;let n=document.querySelector(".footer-container");n&&(n.style.position="relative",n.style.zIndex=1)}toggleMobileMenu(e){this.mobileToggleState=this.mobileToggleState==e?null:e}toggleSortPanel(){this.sortPanelOpen=!this.sortPanelOpen,this.sortPanelOpen&&window.setTimeout(()=>{let e=this.el.querySelector(`.${zB.SORT_MENU}`);console.log("menu: ",e);let r=e.firstElementChild;r&&(console.log("focus: ",r),r.focus())},100)}applyMobileFilters(){this.mobileToggleState=null,this.smoothScrollTop_()}setNumCols(e){e==2?this.numCols=2:this.numCols=3,this.numProductsPerPage=this.numCols*this.numRows,this.update_(!0)}updateImageWidths_(){this.products_.forEach(e=>{e.images.forEach(r=>{let n=r.url;if(Ul(n)){let s=window.innerWidth<768?2:3,o=window.innerWidth/s,a=1+.06*window.devicePixelRatio,l=Math.ceil(o*a*window.devicePixelRatio);n=n.split("=")[0]+"=w"+l}r.url=n})}),this.updatingImages_=!1,this.$scope.$$phase||this.$scope.$apply()}fetchData(e){let r=Math.floor(new Date/1e3),n=this.locale.toLowerCase(),s=e.replace("{locale}",n)+"?c="+r;this.$http.get(s).then(o=>{this.setData(o.data)})}getTimestamp_(){if(this.env!=="prod"){let s=new URL(window.location.href).searchParams.get("fcd");if(s&&s.length==16)return this.parseFcdString_(s)}let e=new Date;return Math.floor(e.getTime()/1e3)}parseFcdString_(e){let r=e.split("T"),n=r[0],s=r[1],o=new Date(e).toLocaleString("en",{timeZone:"America/Los_Angeles",timeStyle:"long"}).split(" ").slice(-1)[0];return Math.floor(Date.parse(`${n} ${s} ${o}`)/1e3)}setData(e){this.el.classList.add("ready"),console.log(e);let r=this.getTimestamp_();this.products_=e.products.filter(n=>!(!(n.locales||[]).includes(this.locale)||n.start_ts&&n.start_ts>r||n.end_ts&&r>n.end_ts)),this.products_.forEach(n=>{n.eyebrow&&(n.eyebrow=this.$sanitize(n.eyebrow),n.eyebrow.includes("Black Friday")&&(n.eyebrowClass="black-friday")),n.doc_id&&(this.hasDocIdPricing_=!0);let s=n.images||[],o={};n.images=s.filter(l=>{let c=l.locales||[];return c.length==0||c.includes(this.locale)}).filter(l=>{if(!l.color)return!0;let c=l.color.color_name;return o[c]?!1:(o[c]=!0,!0)}),n.images.length>0&&(n.images[0].active=!0),(n.filter_matches||[]).forEach(l=>{this.validProductFilters.enable(l.filter_category,l.filter_value);let c=l.filter_group_name||l.filter_category;this.allFilterGroupNames[c]=!0,this.setFilterGroupNameForValue_(l.filter_category,l.filter_value,c)})}),this.filterGroups=e.filter_groups,this.filterGroups.forEach(n=>{Te.IS_DESKTOP_OR_TABLET()?(n.collapsed=!1,(this.productType=="accessories"&&n.name!="Compatibility"||this.productType=="offers")&&(n.collapsed=!0)):n.collapsed=!0,this.productType=="accessories"&&n.name=="Compatibility"&&(n.subfilters||[]).forEach(o=>{o.filters=o.filters.filter(a=>!(a.start_ts&&a.start_ts>r||a.end_ts&&r>a.end_ts))}),n.id=n.name.toLowerCase().replace(/ /g,""),this.filterGroupsMap_[n.name]=n}),this.updateImageWidths_(),this.resizeListener_||(this.resizeListener_=()=>{this.updatingImages_||(this.updatingImages_=!0,this.$timeout(()=>this.updateImageWidths_(),1e3))},window.addEventListener("resize",this.resizeListener_,{passive:!0})),this.$timeout(()=>{this.scrollListener_||(this.scrollListener_=()=>{this.onScroll_()},window.addEventListener("scroll",this.scrollListener_,{passive:!0}),this.onScroll_())},1e3),this.initFiltersFromUrlParams_(),this.$timeout(()=>{this.jumpToSectionFromParams_()},500),this.updateFilters_(!1)}getCount(){return this.products_.length}onScroll_(){let e=qB();this.navbarOffset=e;let r=this.getScrollPos_(),n=r-this.lastScrollPos_;if(n<0?this.scrollDirection_="up":this.scrollDirection_="down",this.lastScrollPos_=r,Te.IS_DESKTOP_OR_TABLET()){let s=this.el.querySelector("."+j.mqnCssName("mqn2-aie"));if(s&&s.offsetHeight<=this.filtersEl_.scrollHeight)this.filtersState="top",this.filtersEl_.scrollTop=0;else{let a=this.getTopRelativeTo_(this.filtersWrapEl_,document.body)+this.filtersWrapEl_.offsetHeight,l=r+this.getViewportHeight_();this.filtersWrapEl_.getBoundingClientRect().top>e?this.filtersState="top":l>=a?this.filtersState="bottom":this.filtersState="fixed"}}else this.filtersState="top";this.filtersState=="fixed"?(this.filtersBarStyles["margin-top"]=`${e}px`,this.filtersBarStyles.height=`calc(100vh - ${e}px)`,this.scrollDirection_=="down"&&this.filtersEl_.offsetHeight+this.filtersEl_.scrollTop<this.filtersContentEl_.offsetHeight+48&&(this.filtersEl_.scrollTop+=n),this.scrollDirection_=="up"&&this.filtersEl_.scrollTop>0&&(this.filtersEl_.scrollTop+=n)):this.filtersBarStyles={},this.$scope.$$phase||this.$scope.$apply()}getTopRelativeTo_(e,r){return _i(e,r)}getScrollPos_(){return window.pageYOffset!==void 0?window.pageYOffset:document.documentElement.scrollTop}getViewportHeight_(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}hasAnyFilters(){return this.filterGroups.some(e=>this.shouldShowFilterGroup(e))}shouldShowFilterGroup(e){return this.productType=="accessories"?this.getActiveFilterCount(e.name)>1:this.allFilterGroupNames[e.name]}getActiveFilterCount(e){return this.validProductFilters.getValuesForCategory(e).length}getFilterGroupNameForValue_(e,r){let n=e+"|"+r;return this.filterValueToGroupNameMap_[n]}setFilterGroupNameForValue_(e,r,n){let s=e+"|"+r;this.filterValueToGroupNameMap_[s]=n}jumpToSectionFromParams_(){if(!window.URLSearchParams||!location.search)return;let r=new URLSearchParams(location.search.slice(1)).get("jump"),n=document.getElementById(r);if(r&&n){let s=60;window.scrollTo({top:window.scrollY+n.getBoundingClientRect().top-s,behavior:"smooth"})}}initFiltersFromUrlParams_(){if(!window.URLSearchParams||!location.search)return;let e=new URLSearchParams(location.search.slice(1)),r=new URLSearchParams(location.search.slice(1)),n=null,s=null;this.filterGroups.forEach(o=>{let a=o.name;this.productType=="offers"&&(a="Products"),a=="Compatibility"&&(n=o);let l=o.url_param;!l||(r.delete(l),e.getAll(l).forEach(c=>{this.validProductFilters.isEnabled(a,c)&&(this.filters.enable(a,c),o.collapsed=!1,a=="Colors"&&(s=c))}))}),n&&e.getAll("compatibilityCategory").forEach(o=>{n.subfilters.forEach(a=>{a.name==o&&a.filters.forEach(l=>{this.validProductFilters.isEnabled(l.filter_category,l.filter_value)&&this.filters.enable(l.filter_category,l.filter_value)})})}),s&&this.updateProductColors(s),this.nonFilterUrlParams_=r.toString(),e.get("page")&&window.setTimeout(()=>{this.goToPage(e.get("page")-1)})}hasActiveFilters(){return this.filters.getCount()>0}isFilterEnabled(e,r){return this.filters.isEnabled(e,r)}isFilterEnabledForCategory(e){return this.filters.isCategoryEnabled(e)}isSubfilterActive(e){return e.filters.some(r=>this.validProductFilters.isEnabled(r.filter_category,r.filter_value))}isSubfilterEnabled(e){return e.filters.some(r=>this.filters.isEnabled(r.filter_category,r.filter_value))}resetFiltersForSubcategory(e){e.filters.forEach(r=>{this.filters.disable(r.filter_category,r.filter_value)}),this.updateFilters_()}toggleFilter(e,r){let n=this.filters.toggle(e,r);e=="Colors"&&n&&this.updateProductColors(r);let s=this.updateFilters_();Te.IS_DESKTOP_OR_TABLET()&&s.then(()=>this.smoothScrollTop_())}resetFilters(){this.filters.reset();let e=this.updateFilters_();Te.IS_DESKTOP_OR_TABLET()&&e.then(()=>this.smoothScrollTop_())}resetFiltersForCategory(e){this.filters.resetCategory(e);let r=this.updateFilters_();Te.IS_DESKTOP_OR_TABLET()&&r.then(()=>this.smoothScrollTop_())}setSort(e,r){this.mobileToggleState=null,this.page=0,this.sortType=e,this.sortDisplayLabel=r,this.sortPanelOpen=!1,this.update_().then(()=>{if(this.smoothScrollTop_(),Te.IS_DESKTOP_OR_TABLET()){let n=this.el.querySelector(`.${zB.SORT_TOGGLE_BUTTON}`);n&&n.focus()}})}goToPage(e){this.page=e,this.page<0&&(this.page=0),this.page>this.numPages-1&&(this.page=this.numPages-1),this.update_().then(()=>this.smoothScrollTop_()),this.setUrlParams_()}nextPage(){this.goToPage(this.page+1)}prevPage(){this.goToPage(this.page-1)}range(e){let r=[];for(let n=0;n<e;n++)r.push(n);return r}setProductActiveImage(e,r){e.images.forEach((n,s)=>{n.active=s==r})}getProductActiveImage(e){let r=this.getProductActiveImageIndex(e);return e.images[r]}getProductActiveImageIndex(e){for(let r=0;r<e.images.length;r++)if(e.images[r].active)return r;return 0}updateProductColors(e){this.products_.forEach(r=>{for(let n=0;n<r.images.length;n++){let s=r.images[n];if(s.color&&s.color.color_name===e){this.setProductActiveImage(r,n);return}}})}hasMultipleProductImages(e){return e.images&&e.images.length>1}nextProductImage(e){let n=(this.getProductActiveImageIndex(e)+1)%e.images.length;this.setProductActiveImage(e,n)}prevProductImage(e){let n=(this.getProductActiveImageIndex(e)-1)%e.images.length;n<0&&(n+=e.images.length),this.setProductActiveImage(e,n)}updateFilters_(e=!0){return this.page=0,this.filteredProducts=this.products_.filter(r=>this.shouldShowProduct_(r)),this.numPages=Math.ceil(this.filteredProducts.length/this.numProductsPerPage),this.validProductFiltersOfResults.reset(),this.filteredProducts.forEach(r=>{(r.filter_matches||[]).forEach(s=>{this.validProductFiltersOfResults.enable(s.filter_category,s.filter_value)})}),e&&this.setUrlParams_(),this.update_()}update_(e=!1){return new Promise((r,n)=>{let s=()=>{this.filteredProducts.sort(this.getSortFunc_(this.sortType)),this.productType=="offers"&&this.groupProductsByFilterGroup_();let o=this.page*this.numProductsPerPage;this.filteredProductsCurrentPage=this.filteredProducts.slice(o,o+this.numProductsPerPage),this.loading=!1,this.$scope.$$phase||this.$scope.$apply(),this.hasDocIdPricing_?this.$timeout(()=>{let a=new Event("populatePrices");document.dispatchEvent(a),r()},0):r()};e?s():(this.loading=!0,this.$timeout(s,300))})}shouldDisableFilter(e,r){if(this.productType!="accessories"||this.filters.getCount()==0||this.filters.isEnabled(e,r))return!1;let n=this.filters.copy();return n.resetCategory(e),n.getCount()==0?!1:(n.enable(e,r),!this.matchesAnyProductWithFilters_(n))}matchesAnyProductWithFilters_(e){return this.products_.some(r=>this.shouldShowProduct_(r,e=e))}groupProductsByFilterGroup_(){this.productsByFilterGroup=[],this.filters.getCount()>0?this.filters.getValues().forEach(e=>{e.filterValues.forEach(n=>{this.productsByFilterGroup.push({title:n,products:this.filteredProducts.filter(s=>(s.filter_matches||[]).some(a=>a.filter_value==n))})})}):this.filterGroups.forEach(e=>{!this.allFilterGroupNames[e.name]||this.productsByFilterGroup.push({title:e.display_name||e.name,id:e.id,products:this.filteredProducts.filter(r=>this.isProductInFilterGroup_(r,e))})})}isProductInFilterGroup_(e,r){let n={};return r.filters.forEach(o=>{let a=n[o.filter_category];a||(a={},n[o.filter_category]=a),a[o.filter_value]=!0}),(e.filter_matches||[]).some(o=>n[o.filter_category]&&n[o.filter_category][o.filter_value])}smoothScrollTop_(){let e=this.el.querySelector("."+j.mqnCssName("mqn2-ah7"));if(!this.isTopOfElementVisible_(e)){let r=this.el.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)+this.navbarOffset;window.scroll({top:r,left:0,behavior:"smooth"})}this.onScroll_()}isTopOfElementVisible_(e){let r=e.getBoundingClientRect().top,n=window.innerHeight||document.documentElement.clientHeight;return r>=0&&r<=n}shouldShowProduct_(e,r=null){return r||(r=this.filters),r.getCount()==0?!0:r.getValues().every(n=>{let s=n.filterCategory,o=n.filterValues;return(e.filter_matches||[]).some(c=>c.filter_category==s&&o.includes(c.filter_value))})}getSortFunc_(e){switch(e){case"newest":return jB;case"newest_offers":return gJ;case"price_offers_low":return YB;case"price_offers_high":return vJ;case"featured":default:return mJ}}setUrlParams_(){if(window.history.replaceState){let e=this.getUrlParams_(),r=location.pathname;e&&(r+="?"+e),window.history.replaceState({},document.title,r)}}getUrlParams_(){if(!window.URLSearchParams)return this.nonFilterUrlParams_;let e=new URLSearchParams(this.nonFilterUrlParams_);return this.filters.getCount()>0&&this.filters.getValues().forEach(r=>{r.filterValues.forEach(n=>{let s=this.getFilterGroupNameForValue_(r.filterCategory,n),o=this.filterGroupsMap_[s];if(!o)return;let a=o.url_param;!a||e.append(a,n)})}),this.page>0?e.set("page",this.page+1):e.delete("page"),e.toString()}showTermsModal(e,r){this.termsModalActive=!0,this.termsTitle=e,this.termsBody=this.$sanitize(r)}closeTermsModal(){this.termsModalActive=!1}dispose_(){this.resizeListener_&&(window.removeEventListener("resize",this.resizeListener_,{passive:!0}),this.resizeListener_=null),this.scrollListener_&&(window.removeEventListener("scroll",this.scrollListener_,{passive:!0}),this.scrollListener_=null)}},GB=WB,Uh=class{constructor(){this.filters={},this.count_=0}isEnabled(e,r){let n=this.filters[e];return n?!!n[r]:!1}isCategoryEnabled(e){return this.count_===0?!1:!!this.filters[e]}toggle(e,r){return this.isEnabled(e,r)?(this.disable_(e,r),!1):(this.enable_(e,r),!0)}enable(e,r){this.isEnabled(e,r)||this.enable_(e,r)}enable_(e,r){let n=this.filters[e];n||(n={},this.filters[e]=n),n[r]=!0,this.count_+=1}disable(e,r){!this.isEnabled(e,r)||this.disable_(e,r)}disable_(e,r){let n=this.filters[e];!n||!n[r]||(delete n[r],Object.keys(n).length==0&&delete this.filters[e],this.count_-=1)}getValuesForCategory(e){let r=this.filters[e];return r?Object.keys(r):[]}getValues(){return Object.keys(this.filters).map(e=>({filterCategory:e,filterValues:Object.keys(this.filters[e])}))}copy(){let e=new Uh;return this.getValues().forEach(r=>{r.filterValues.forEach(n=>{e.enable(r.filterCategory,n)})}),e}reset(){this.filters={},this.count_=0}resetCategory(e){let r=this.filters[e];!r||(this.count_-=Object.keys(r).length,delete this.filters[e])}getCount(){return this.count_}};function $B(t,e){return t.order-e.order}function mJ(t,e){return t.featured&&!e.featured?-1:!t.featured&&e.featured?1:$B(t,e)}function jB(t,e){return t.start_date>e.start_date?-1:t.start_date<e.start_date?1:$B(t,e)}function gJ(t,e){return jB(t,e)}function YB(t,e){let r=XB(t.price_sale),n=XB(e.price_sale);return r-n}function XB(t){let e=t.replace(/[^0-9.-]+/g,"");return e?window.parseInt(e):0}function vJ(t,e){return-1*YB(t,e)}var ZB=re(o_()),QB=class{static get $inject(){return["$rootScope","$element","$scope","$interval","$http","$sanitize"]}constructor(e,r,n,s,o,a){this.$scope=n,this.$rootScope=e,this.el=r[0],this.$element=r,this.$interval=s,this.$http=o,this.$sanitize=a,this.resizeListener_=null,this.autoplayInterval_=null,this.locale="en_US",this.loading=!0,this.offers=[],this.env="prod",this.imageHeightRatioDesktop_=0,this.imageHeightRatioMobile_=0,this.slideIndex=0,this.autoplay=!0,this.termsModalActive=!1,this.termsTitle="",this.termsBody="",n.$on("$destroy",()=>{this.dispose_()})}dispose_(){this.stopAutoplay(),this.resizeListener_&&(window.removeEventListener("resize",this.resizeListener_,{passive:!0}),this.resizeListener_=null)}onResize_(){this.imageWidth_=Math.ceil(window.innerWidth*window.devicePixelRatio);let e=this.el.querySelector("."+j.mqnCssName("mqn2-bq3"));if(e){let r=Te.IS_DESKTOP_OR_TABLET()?this.imageHeightRatioDesktop_:this.imageHeightRatioMobile_,s=`${(e.offsetWidth*r).toFixed(2)}px`;e.style.minHeight=s}this.$scope.$$phase||this.$scope.$apply()}shouldLoad(){return!ZB.default.getParameterValue("wall")}fetchData(e){let r=Math.floor(new Date/1e3),n=this.locale.toLowerCase(),s=e.replace("{locale}",n)+"?c="+r;this.$http.get(s).then(o=>{this.setData(o.data)})}setData(e){this.loading=!1;let r=this.getTimestamp_();this.offers=e.featured_offers.filter(n=>{if(!(n.locales||[]).includes(this.locale)||n.start_ts&&n.start_ts>r||n.end_ts&&r>n.end_ts||!n.image_desktop||!n.image_mobile)return!1;let o=n.image_desktop.height/n.image_desktop.width;o>this.imageHeightRatioDesktop_&&(this.imageHeightRatioDesktop_=o);let a=n.image_mobile.height/n.image_mobile.width;return a>this.imageHeightRatioMobile_&&(this.imageHeightRatioMobile_=a),!0}),!this.resizeListener_&&this.offers.length&&(this.resizeListener_=()=>this.onResize_(),window.addEventListener("resize",this.resizeListener_,{passive:!0}),this.onResize_()),this.offers.length>1&&this.startAutoplay(),this.$scope.$$phase||this.$scope.$apply()}currentOffer(){return this.offers[this.slideIndex]}prevSlide(e=!1){this.slideIndex-=1,this.slideIndex<0&&(this.slideIndex+=this.offers.length),e&&this.stopAutoplay()}nextSlide(e=!1){this.slideIndex=(this.slideIndex+1)%this.offers.length,e&&this.stopAutoplay()}goToSlide(e){this.slideIndex=e,this.stopAutoplay()}startAutoplay(){this.autoplayInterval_||(this.autoplayInterval_=this.$interval(()=>{this.nextSlide()},5e3))}stopAutoplay(){this.autoplayInterval_&&(this.$interval.cancel(this.autoplayInterval_),this.autoplayInterval_=null),this.autoplay=!1}getTimestamp_(){if(this.env!=="prod"){let s=new URL(window.location.href).searchParams.get("fcd");if(s&&s.length==16){let o=this.parseDateString_(s);return Math.floor(o.getTime()/1e3)}}let e=new Date;return Math.floor(e.getTime()/1e3)}parseDateString_(e){let r=e.split(/[^0-9]/).map(n=>parseInt(n));return new Date(r[0],r[1]-1,r[2],r[3],r[4])}getImageStyle(e){return{"background-image":`url(${e.url}=w${this.imageWidth_})`}}showTermsModal(e,r){this.termsModalActive=!0,this.termsTitle=e,this.termsBody=this.$sanitize(r)}closeTermsModal(){this.termsModalActive=!1}},KB=QB;var JB=class{static get $inject(){return["$scope","$element","$http"]}constructor(e,r,n){this.$http=n,this.data={ajax:!0},this.submitUrl=null,this.submitted=!1,this.isProcessing=!1,this.submissionSuccessful=!1,this.serverError=!1}init(e){this.submitUrl=e}isInvalid(e){return e.$invalid&&(e.$dirty||this.submitted)}submit(e){if(this.submitted=!0,!e.$valid)return;this.data.collects&&(this.data["collects-pii-spii-checkbox"]=!0),this.isProcessing=!0,this.$http.post(this.submitUrl,this.data,{headers:{"Content-Type":"application/x-www-form-urlencoded"},cache:!1,transformRequest:s=>{let o=[];for(let a in s)a&&o.push(encodeURIComponent(a)+"="+encodeURIComponent(s[a]));return o.join("&")}}).then(s=>{this.isProcessing=!1,s.data&&s.data.result=="accepted"?this.submissionSuccessful=!0:(this.serverError=!0,console.log(s))},s=>{this.isProcessing=!1,this.serverError=!0,console.log(s)})}},eU=JB;var Sx=re(Et()),or=re(Ye()),tU=re(yt()),rU=re(Ci()),iU=re(Vn());var nU=j.mqnCssName("mqn2-btg"),Ex=j.mqnCssName("mqn2-btn"),yJ=j.mqnCssName("mqn2-gqb"),_J=j.mqnCssName("mqn2-dfs"),$v=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.ev=Sx.elementVisibility.inview(this.el,{rootMargin:"500px"},(s,o)=>{this.isMobile()&&this.onInviewMobile(this.ev.state().inview)}),this.evDesktop=Sx.elementVisibility.inview(this.el,null,(s,o)=>{this.isMobile()||this.onInviewDesktop(this.evDesktop.state().inview)}),this.cssInterpolater=new rU.CssVarInterpolate(this.el),this.rafProgress=new or.RafProgress(s=>{this.onEasedScroll(s)}),this.rafProgress.setPrecision(5),this.queryBubbles=this.el.getElementsByClassName(yJ),this.domWatcher=new tU.DomWatcher,this.domWatcher.add({element:window,on:"scroll",eventOptions:{passive:!0},runWhen:()=>window.innerWidth>=768&&this.ev.state().inview,id:"calculateActiveStep",callback:or.func.throttle(()=>{this.calculateActiveStep()},48)}),this.domWatcher.add({element:window,on:"scroll",callback:or.func.throttle(()=>{this.onScroll()},24),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0},id:"scroll"}),this.domWatcher.add({element:window,on:"smartResize",eventOptions:{passive:!0},id:"resize",callback:or.func.debounce(()=>{this.onResize()},100)}),this.innerElement=this.el.querySelector("[inner]"),this.headerElement=this.el.querySelector("[header]"),this.headerTitleElement=this.el.querySelector("[title]"),this.toutContentElements=Array.from(this.el.querySelectorAll("[tout-contents]")),this.stepElements=Array.from(this.el.querySelectorAll("[steps]")),this.stepInnerElements=Array.from(this.el.querySelectorAll("[steps-inner]")),this.activeStepElement=null,this.stepsContainerElement=this.el.querySelector("[steps-container]"),this.progress=0,this.innerHeight=null,this.ev.readyPromise.then(()=>{this.onResize(),this.domWatcher.run("scroll"),this.domWatcher.run("calculateActiveStep")}),this.updateActiveStep_=or.func.runOnceOnChange(this.updateActiveStep_.bind(this)),this.onInviewMobile=or.func.runOnceOnChange(this.onInviewMobile.bind(this)),n.$on("$destroy",()=>this.dispose_())}onInviewDesktop(e){e?or.dom.unflushVideos(this.el,!0):(this.stepElements.forEach((r,n)=>{or.dom.resetAllVideosInElement(r,!0),or.dom.pauseAllVideosInElement(r,!0)}),or.dom.flushVideos(this.el,"mqn-lazyimage-src"),this.updateActiveStep_(this.stepElements.length))}onInviewMobile(e){e?this.activeStepElement&&or.dom.playAllVideosInElement(this.activeStepElement):this.stepElements.forEach((r,n)=>{or.dom.pauseAllVideosInElement(r,!0)})}isMobile(){return window.innerWidth<768}applyQueryBubbleOffsets(){[...this.queryBubbles].forEach(e=>{let r=e.getElementsByClassName(_J)[0];e.style.setProperty("--quote-height",`${r.offsetHeight}px`)})}onResize(){this.innerHeight=this.innerElement.offsetHeight;let e=.1,r=.2;this.cssInterpolater.setInterpolations({interpolations:[{id:"--header-opacity",progress:[{from:e,to:r,start:0,end:1,easingFunction:iU.CubicBezier.makeEasingFunction(.2,.17,.83,.67)}]}]}),this.applyQueryBubbleOffsets()}onScroll(){let e=or.dom.getElementScrolledPercent(this.el);this.rafProgress.easeTo(e,.16,or.EASE.linear);let r=window.innerHeight*.2/this.el.offsetHeight;e>=r&&this.el.classList.add(Ex),e<=0&&this.el.classList.remove(Ex)}onEasedScroll(e){this.cssInterpolater.update(e)}calculateActiveStep(){let e=[],r=window.innerHeight/2;if(this.stepInnerElements.forEach((n,s)=>{let o=n.getBoundingClientRect(),a=o.height*.5,l=Math.abs(r-(o.top+a));e.push({element:this.stepElements[s],distance:Math.abs(l)})}),e=e.sort((n,s)=>n.distance>s.distance?1:s.distance>n.distance?-1:0),e.length){let n=e[0].element,s=this.stepElements.indexOf(n);this.updateActiveStep(s)}}updateActiveStep(e){this.el.classList.contains(Ex)&&this.updateActiveStep_(e)}updateActiveStep_(e){this.stepElements.forEach((r,n)=>{if(n==e){r.classList.add(nU),this.activeStepElement=r;let s=Array.from(r.querySelectorAll("video"));s&&(s=s.filter(o=>or.dom.getComputedStyle(o.parentNode).display!=="none"),or.dom.whenVideosLoaded(s).then(()=>{or.dom.playAllVideosInElement(r)}))}else r.classList.remove(nU),or.dom.pauseAllVideosInElement(r)})}dispose_(){this.ev&&this.ev.dispose(),this.evDesktop&&this.evDesktop.dispose(),this.domWatcher&&this.domWatcher.dispose()}};var xx;(function(t){t.number="num",t.unit="unit",t.cssHex="cssHex",t.rgba="rgba",t.rgb="rgb"})(xx||(xx={}));var oU=class{static get $inject(){return["$rootScope","$scope","$sce","$element","$compile"]}constructor(e,r,n,s,o){this.jQuery=window.jQuery,this.$rootScope=e,this.$sce=n,this.$element=s,this.element=s[0],this.$compile=o,this.$scope=r,window.URLSearchParams&&new URLSearchParams(window.location.search).has("MQN_DEBUG")&&(window.MQN_ENABLE_DEBUG=!0),this.flipSide=!1,this.wombatImage=new mi({multiplier:1.7}),this.data=null,this.mockDatas=null,this.editor=document.getElementById("wombat-editor"),this.getData_();let a=()=>{this.data&&(this.data=this.processImages_(this.data),this.$rootScope.$apply())};window.addEventListener("resize",a),r.$on("$destroy",()=>{window.removeEventListener("resize",a),this.dispose_()})}isMobile(){return window.innerWidth<768}getData_(){let e=this.element.closest("[data-wombat]");if(this.data=JSON.parse(e.getAttribute("data-wombat")),this.data=this.processImages_(this.data),this.editor){let r={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(s,o,a)=>{r[o]=a});let n=r["mqn-wombat-mock"]||0;n&&(this.mockDatas=JSON.parse(e.getAttribute("data-wombat-sample-mocks")),this.data=this.processImages_(this.mockDatas[+n])),this.updateEditor_()}window.MQN_ENABLE_DEBUG&&console.log(JSON.stringify(this.data)),window.setTimeout(()=>{this.$scope.$apply()})}getEditorValue(){return JSON.stringify(this.data,void 0,4)}getEncodedEditorValue(){return encodeURIComponent(this.editorValue)}updateEditor_(){this.editor&&(this.editorValue=this.getEditorValue(),this.$rootScope.$broadcast("MQN2_BREAKPOINT_STYLE_REFRESH"))}processImages_(e){for(let r in e)Array.isArray(e[r])?e[r]=e[r].map(n=>{for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(n[s]=this.wombatImage.processImage(n[s]));return n}):e[r]=this.wombatImage.processImage(e[r]);return e}htmlSafe(e){return this.$sce.trustAsHtml(e)}jumpToFootnotes(){let e=document.querySelector(".footnotes");if(!e)return;let r=Zf.getScrollElement().scrollTop+e.getBoundingClientRect().top;window.scrollTo({top:r,behavior:"smooth"})}focusOn(e){let r=this.element.querySelector(`[${e}]`);r&&window.setTimeout(()=>{Zf.forceVOFocus(r)})}dispose_(){}},aU=oU;var lU=class{static get $inject(){return["$scope"]}constructor(e){this.isReady_=!0,this.ngScope_=e,this.upHandler_=()=>this.setReady_(!0),this.downHandler_=()=>this.setReady_(!1),document.addEventListener("speedtestClientUp",this.upHandler_),document.addEventListener("speedtestClientDown",this.downHandler_),e.$on("$destroy",()=>this.dispose_())}setReady_(e){this.isReady_=e,this.ngScope_.$digest()}isReady(){return this.isReady_}dispose_(){document.removeEventListener("speedtestClientUp",this.upHandler_),document.removeEventListener("speedtestClientDown",this.downHandler_)}},cU=lU;var hU=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.initialized=!1,this.gallery=null,this.jQuery=window.jQuery,this.$scope=n,this.$rootScope=e,n.$on("$destroy",()=>{this.dispose_()})}init(e){this.options=e,this.options.infinite=!1,this.options.rows="0",this.originalOptions=JSON.parse(JSON.stringify(this.options));let r=document.getElementById(e.galleryRootId);r||(r=this.el.querySelector(["[mqn-slick-gallery]"])||this.el),this.gallery=this.jQuery(r),this.initialized=!0,window.setTimeout(()=>{this.gallery.slick(this.options),this.gallery.slick("reinit")}),this.gallery.on("init",(s,o,a)=>{this.slick=o,this.initialized=!0,this.index=o.currentSlide,this.count=o.slideCount,this.updateOptions_(),window.setTimeout(()=>{this.$scope.$apply()})}),this.gallery.on("afterChange",(s,o,a)=>{this.slick=o,this.index=o.currentSlide,window.setTimeout(()=>{this.$scope.$apply()})});let n=()=>{this.updateOptions_()};window.addEventListener("resize",n,{passive:!0}),this.windowResizeDispose=()=>{window.removeEventListener("resize",n)},this.postCreateSlick_&&this.postCreateSlick_(),window.unslick=()=>{this.gallery&&this.gallery.slick("unslick")},window.slick=()=>{this.gallery.slick(this.options)}}updateOptions_(){let e=window.innerWidth;this.options=JSON.parse(JSON.stringify(this.originalOptions)),this.options.responsive&&this.options.responsive&&this.options.responsive.forEach(r=>{let n=r.breakpoint,s=r.settings;window.innerWidth<n&&(this.options=Object.assign(this.options,s))}),window.setTimeout(()=>{this.$scope.$apply()})}getCurrentSlideIndex(){if(!!this.galleryEl)return this.gallery.slick("slickCurrentSlide")}isFirstSlide(){return this.index==0}isLastSlide(){return this.count-this.index<=this.options.numberVisible}goToIndex(e){return this.gallery.hasClass("slick-initialized")&&this.gallery.slick("slickGoTo",e),!0}next(){this.goToIndex(this.index+this.options.slidesToScroll)}prev(){this.goToIndex(this.index-this.options.slidesToScroll)}dispose_(){this.windowResizeDispose&&this.windowResizeDispose(),this.gallery&&this.gallery.slick("unslick"),this.gallery=null,this.slick=null}},uU=hU;var fU=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.$scope=n,this.$rootScope=e,this.slides=[],this.activeSlide=null,this.nextSlideInterval=null,n.$on("$destroy",()=>{this.dispose_()})}init(e){this.slides=e,this.goToSlide(this.slides[0])}goToSlide(e){this.activeSlide!=e&&(window.clearTimeout(this.nextSlideInterval),this.activeSlide=e,this.nextSlideInterval=window.setTimeout(()=>{let n=this.slides.indexOf(this.activeSlide)+1,s=this.slides[n];s||(s=this.slides[0]),this.goToSlide(s),this.$scope.$apply()},5e3))}goToNextSlide(){let e=this.slides.indexOf(this.activeSlide)+1;e>=this.slides.length?this.goToSlide(this.slides[0]):this.goToSlide(this.slides[e])}goToPreviousSlide(){let e=this.slides.indexOf(this.activeSlide)-1;e<0?this.goToSlide(this.slides[this.slides.length-1]):this.goToSlide(this.slides[e])}dispose_(){}},dU=fU;var pU=re(Et()),mU=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.slides=Array.from(e[0].querySelectorAll("[slide]")),this.nextSlideInterval=null,this.autoplayDuration=8e3,this.ev=pU.elementVisibility.inview(this.el,{},(n,s)=>{s.isIntersecting?(this.activeSlideIndex=0,this.$scope.$broadcast("TemplateCarouselUpdateEvent",this.activeSlideIndex),this.nextSlideInterval=window.setTimeout(()=>{this.goToSlide(1,!1),this.$scope.$apply()},this.autoplayDuration)):window.clearTimeout(this.nextSlideInterval)}),r.$on("$destroy",()=>this.dispose_())}goToSlide(e,r=!0){let n=(this.slides.length+e)%this.slides.length;this.activeSlideIndex!==n&&(window.clearTimeout(this.nextSlideInterval),this.activeSlideIndex=n,this.$scope.$broadcast("TemplateCarouselUpdateEvent",this.activeSlideIndex),this.ev.state().inview&&r&&Mh(this.el,"tab",this.activeSlideIndex),this.nextSlideInterval=window.setTimeout(()=>{this.goToSlide(n+1,!1),this.$scope.$apply()},this.autoplayDuration))}setAutoplayDuration(e){this.autoplayDuration=e}goToNextSlide(){this.goToSlide(this.activeSlideIndex+1)}goToPreviousSlide(){this.goToSlide(this.activeSlideIndex-1)}dispose_(){window.clearTimeout(this.nextSlideInterval),this.ev.dispose()}},gU=mU;var vU=re(Et());var PJ=new pn([[["xs","1","square"],1],[["xs","1","rectangle"],1],[["xs","1","l"],2],[["xs","2","square"],1],[["xs","2","rectangle"],2],[["xs","2","l"],2],[["xs","3","square"],2],[["xs","3","rectangle"],3],[["xs","3","l"],3],[["sm","1","square"],2],[["sm","1","rectangle"],2],[["sm","1","l"],3],[["sm","2","square"],2],[["sm","2","rectangle"],3],[["sm","2","l"],3],[["sm","3","square"],3],[["sm","3","rectangle"],4],[["sm","3","l"],4],[["md","1","square"],3],[["md","1","rectangle"],3],[["md","1","l"],4],[["md","2","square"],3],[["md","2","rectangle"],4],[["md","2","l"],4],[["md","3","square"],4],[["md","3","rectangle"],4],[["md","3","l"],4],[["lg","1","square"],4],[["lg","1","rectangle"],4],[["lg","1","l"],4],[["lg","2","square"],4],[["lg","2","rectangle"],4],[["lg","2","l"],4],[["lg","3","square"],4],[["lg","3","rectangle"],4],[["lg","3","l"],4]]),yU=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.el=r[0],this.answers={},this.$scope=n,this.inView=!1;let s=this.el.querySelector("[cards]");this.ev=vU.elementVisibility.inview(s,null,()=>{this.inView=this.ev.state().inview,this.$scope.$apply()})}isCardVisible(e){if(e=="size"){let r=Object.keys(this.answers).length;return this.inView||r>0}return e=="floors"?"size"in this.answers:e=="shape"?"floors"in this.answers:!1}setAnswer(e,r){this.answers[e]=r}goBack(e,r){delete this.answers[e],delete this.answers[r]}getRecommendation(){return PJ.get([this.answers.size,this.answers.floors,this.answers.shape])}},_U=yU;var bU=re(Vn()),wU=re(yt()),SU=re(Ci()),li=re(Ye()),EU=re(Et()),jv=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.el=r[0],this.ev=EU.elementVisibility.inview(this.el,{rootMargin:"100px"}),this.elements={stickyParent:this.el.querySelector("[sticky-parent]"),stickyChild:this.el.querySelector("[sticky-child]"),header:this.el.querySelector("[header]"),header2:this.el.querySelector("[header2]"),images:this.el.querySelector("[images]"),image1:this.el.querySelector("[image1]"),image2:this.el.querySelector("[image2]"),image3:this.el.querySelector("[image3]"),toutsWrapper:this.el.querySelector("[touts-wrapper]"),content:this.el.querySelector("[content]"),touts:this.el.querySelector("[touts]"),tout1:this.el.querySelector("[tout1]"),tout2:this.el.querySelector("[tout2]"),tout3:this.el.querySelector("[tout3]"),expander:this.el.querySelector("[expander]")},this.domWatcher=new wU.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:this.onResize.bind(this),eventOptions:{passive:!0},id:"resize"}),this.domWatcher.add({element:window,on:"scroll",callback:li.func.debounce(()=>{this.onScroll()},0),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0},id:"scroll"}),this.interpolations=new SU.CssVarInterpolate(this.el),this.interpolations.renderOnlyWhenInview=!1,this.rafProgress=new li.RafProgress(o=>{this.onProgressUpdate(o)}),this.onResize(),this.updateProgress(1),this.ev.readyPromise.then(()=>{this.onScroll()}),n.$on("$destroy",()=>this.dispose())}isSlowerDevice(){return li.is.safari()}isMobile(){return window.innerWidth<768}isPortait(){return window.innerWidth<window.innerHeight}onScroll(){this.updateProgress(.14)}updateProgress(e){let r=this.isMobile()?li.dom.getElementScrolledPercent(this.el,0,0):li.dom.getElementScrolledPercent(this.el,0,-300);this.rafProgress.easeTo(r,e,li.EASE.linear);let n=window.innerHeight*.4/this.el.offsetHeight;r>=n&&this.el.classList.add("inview"),r<=0&&this.el.classList.remove("inview")}onProgressUpdate(e){this.progress=e,this.interpolations.update(e)}onResize(){this.interpolations.flush(),this.calculateImageSize(),li.func.wait(3).then(()=>{this.calculateInterpolation(),this.onScroll()})}calculateImageSize(){this.expanderBox={width:this.elements.expander.offsetWidth,height:this.elements.expander.offsetHeight},this.elements.stickyChild.style.top="",this.elements.stickyChild.style.paddingBottom="",this.elements.stickyChild.style.marginBottom="",this.elements.stickyParent.style.height="",this.elements.header.style.marginBottom="",this.elements.header2.style.top="",this.elements.header2.style.bottom="",this.expandYStart=0,this.elements.expander.style.left=(window.innerWidth-this.expanderBox.width)/2+"px",this.yOffset=(window.innerHeight-this.expanderBox.height)/2}calculateInterpolation(){let e={width:this.elements.image1.offsetWidth,height:this.elements.image1.offsetHeight},r=li.mathf.calculateBackgroundCover(e,this.expanderBox),n={x:r.xOffset/r.width*100,y:r.yOffset/r.height*100},s=(window.innerHeight-this.elements.touts.offsetHeight)/2,o=window.innerHeight-this.elements.touts.offsetHeight,a=Math.min(s,o);if(!this.isMobile()){if(window.innerWidth<window.innerHeight&&window.innerWidth<830){let d=window.innerHeight-window.innerWidth;this.expandYStart=this.expandYStart-d*.1}this.elements.header.style.marginBottom=-a+"px"}let l=this.elements.stickyParent.offsetHeight,h=(this.elements.header.offsetHeight+this.elements.touts.offsetHeight+a)/l,f=(1-h)/2;if(this.markers={headerOpacityStart:Math.max(0,h-.1),expandPoint:h,expandPointEnd:h+f*1,blurPointStart:h+f*1.1,blurPointEnd:h+f*1.15,opacityStart:h+f*1.2,opacityEnd:h+f*1.3},this.isMobile()){let d=window.innerWidth<window.innerHeight;if(this.expandYStart=this.elements.tout2.offsetTop-r.yOffset,d){this.elements.stickyChild.style.top=-(this.elements.tout3.offsetTop+this.elements.tout3.offsetHeight)+(window.innerHeight-this.elements.tout3.offsetHeight)/2+"px";let y=window.innerHeight*.25;this.elements.stickyChild.style.marginBottom=-y+"px",this.elements.header2.style.bottom=y+"px",this.yOffset=this.elements.tout2.offsetTop}else this.elements.stickyChild.style.top=-(this.elements.tout3.offsetTop+this.elements.tout3.offsetHeight)+"px";let v=window.innerHeight*.25;this.elements.stickyChild.style.marginBottom=-v+"px",this.elements.header2.style.bottom=v+"px";let p=this.elements.tout2.offsetTop+this.elements.header.offsetHeight+window.innerHeight;a=0;let g;g=p/l,f=1-g,this.markers={headerOpacityStart:Math.max(0,g-.3),expandPoint:g,expandPointEnd:g+f*.3,blurPointStart:g+f*.3,blurPointEnd:g+f*.4,opacityStart:g+f*.45,opacityEnd:g+f*.5}}let u=this.isMobile()?li.EASE.linear:bU.CubicBezier.makeEasingFunction(.41,.28,.71,.13),m=[{id:"--stagger-factor-expand",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:0,end:1}]},{id:"--sticky-offset-y",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:a+"px",end:0+"px",easingFunction:u}]},{id:"--sticky-offset-y-reverse",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:"0px",end:-a+"px",easingFunction:u}]},{id:"--header-opacity",progress:[{from:this.markers.headerOpacityStart,to:this.markers.expandPoint,start:1,end:0,easingFunction:u}]},{id:"--expander-clip-y",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:n.y+"%",end:"0%",easingFunction:u}]},{id:"--expander-clip-x",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:n.x+"%",end:"0%",easingFunction:u}]},{id:"--expander-scale",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:r.scalar,end:1,easingFunction:u}]},{id:"--expander-y",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:a+this.expandYStart+"px",end:this.yOffset+"px",easingFunction:u}]},{id:"--expander-y-mobile",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:a+this.expandYStart+"px",end:a+this.expandYStart+"px",easingFunction:u}]},{id:"--tout1-y",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:"0px",end:this.yOffset+"px",easingFunction:u}]},{id:"--tout3-y",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:"0px",end:this.yOffset+"px",easingFunction:u}]},{id:"--tout1-x",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:"0px",end:-(window.innerWidth/2)+"px",easingFunction:u}]},{id:"--tout3-x",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:"0px",end:window.innerWidth/2+"px",easingFunction:u}]},{id:"--tout2-mobile-y",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:"0vh",end:"80vh",easingFunction:u}]},{id:"--image-swipe",progress:[{from:this.markers.expandPoint,to:this.markers.expandPointEnd,start:"100%",end:"0%"}]},{id:"--image-blur-opacity",progress:[{from:this.markers.blurPointStart,to:this.markers.blurPointEnd,start:0,end:1}]},{id:"--header2-opacity",progress:[{from:this.markers.opacityStart,to:this.markers.opacityEnd,start:0,end:1}]}];this.interpolations.setInterpolations({interpolations:m})}dispose(){this.domWatcher.dispose(),this.ev.dispose()}};var gd=re(Ye()),TU=re(yt()),AU=re(Et()),MU=re(Ax());var CU=re(Ye()),Yv=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.el=r[0],this.$scope=n,n.$on("$destroy",()=>this.dispose()),this.loaded=!1,this.currentIndex=null,this.in=!1,this.activeClass="active",this.outgoingClass="out",this.slideTimer=null,this.wombatImage=new mi(1),this.elements={images:Array.from(this.el.querySelectorAll("[image]")),queries:Array.from(this.el.querySelectorAll("[query] > span")),swiper:this.el.querySelector("[swiper]"),header:this.el.querySelector("[header]")},this.headerHeight=null,this.ev=AU.elementVisibility.inview(this.el,{},(o,a,l)=>{a.isIntersecting||(this.stop(),this.in=!1,this.currentIndex=null,this.el.classList.remove("in"),this.elements.queries.forEach(c=>{c.classList.remove(this.activeClass),c.classList.remove(this.outgoingClass)}),this.elements.images.forEach(c=>{c.classList.remove(this.activeClass),c.classList.remove(this.outgoingClass)}))}),this.domWatcher=new TU.DomWatcher,this.domWatcher.add({element:window,on:"scroll",callback:this.onScroll.bind(this),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0},id:"scroll"}),this.domWatcher.add({element:window,on:"smartResize",callback:()=>{this.headerHeight=this.elements.header.offsetHeight},eventOptions:{passive:!0},id:"resize"}),this.domWatcher.run("scroll"),this.domWatcher.run("resize"),this.splitQueries()}splitQueries(){this.elements.queries.forEach(e=>{new MU.TextSplit({element:e,split:" "}).split()})}onScroll(){if(this.progress=gd.dom.getElementScrolledPercent(this.el,this.headerHeight),this.progress>=0&&this.ev.state().inview&&!this.in){if(!this.ev.state().inview)return;this.in=!0,this.el.classList.add("in"),this.slideTo(0,!0)}}stop(){window.clearTimeout(this.slideTimer)}slideTo(e){e!=this.currentIndex&&(this.transitioning||(this.stop(),this.transitioning=!0,CU.func.wait(600).then(()=>{this.transitioning=!1}),this.updateActiveSlides_(e),window.setTimeout(()=>{this.updateActiveQueries_(e)},300),this.elements.swiper.classList.remove(this.activeClass),window.setTimeout(()=>{this.elements.swiper.classList.add(this.activeClass)}),this.currentIndex=e,window.setTimeout(()=>{this.$scope.$digest()}),this.slideTimer=window.setTimeout(()=>{let r=this.currentIndex<this.elements.images.length-1?this.currentIndex+1:0;this.slideTo(r)},5400)))}updateActiveSlides_(e){this.elements.images.forEach(r=>{r.classList.remove(this.activeClass),r.classList.remove(this.outgoingClass)}),gd.is.number(this.currentIndex)&&this.elements.images[this.currentIndex].classList.add(this.outgoingClass),window.setTimeout(()=>{this.elements.images[e].classList.add(this.activeClass)})}updateActiveQueries_(e){gd.is.number(this.currentIndex)&&this.elements.queries[this.currentIndex].classList.add(this.outgoingClass),this.elements.queries.forEach(r=>{r.classList.remove(this.activeClass),r.classList.remove(this.outgoingClass)}),window.setTimeout(()=>{this.elements.queries[e].classList.add(this.activeClass)})}dispose(){this.domWatcher.dispose(),this.ev.dispose()}};var PU=re(Vn()),IU=re(Et()),Wi=re(Ye()),RU=re(yt()),LU=re(Bl()),OU=re(Ci());var Xv=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.$window=s,this.$scope=n,this.$rootScope=e,this.$element=r,this.el=r[0],this.stickyParentElement=this.el.querySelector("[sticky-parent]"),this.sequenceElement=this.el.querySelector("[intro-sequence]"),this.loading=!1,this.progress=0,this.wombatImage=new mi(1),this.gdnHeaderHeight=0,this.ev=IU.elementVisibility.inview(this.el,{rootMargin:"40px"}),this.ev.readyPromise.then(()=>{this.init()}),n.$on("$destroy",()=>this.dispose())}init(){this.domWatcher=new RU.DomWatcher,this.updateCanvasHeight();let e=2,r=Wi.is.supportingWebp();this.sequenceSrcs=JSON.parse(this.el.getAttribute("data-sequence")),this.sequenceSrcs=this.sequenceSrcs.map((o,a)=>this.wombatImage.appendFifeParams(o,r)),this.sequenceSrcs=this.sequenceSrcs.filter((o,a)=>a%e==0),this.sequenceSrcs=Zt.addFifeUrlParamsToUrls(this.sequenceSrcs),this.sequenceMobileSrcs=JSON.parse(this.el.getAttribute("data-sequence-mobile")),this.sequenceMobileSrcs=this.sequenceMobileSrcs.map((o,a)=>this.wombatImage.appendFifeParams(o,r)),this.sequenceMobileSrcs=this.sequenceMobileSrcs.filter((o,a)=>a%e==0),this.sequenceMobileSrcs=Zt.addFifeUrlParamsToUrls(this.sequenceMobileSrcs);let n={cover:!0};this.sequenceCanvas=new LU.WebGlImageSequence(this.sequenceElement,[{images:this.sequenceSrcs,when:()=>!this.isMobile()},{images:this.sequenceMobileSrcs,when:()=>this.isMobile()}],n),this.sectionCssVarInterpolation=new OU.CssVarInterpolate(this.el),this.sectionCssVarInterpolation.renderOnlyWhenInview=!1,this.setInterpolations(),this.rafProgress=new Wi.RafProgress(o=>{this.onProgressUpdate(o)});let s=this.getProgress();this.rafProgress.setCurrentProgress(s),this.ev.state().ready&&this.ev.state().inview?this.loadImages().then(()=>this.addListeners()):Wi.dom.runAfterNotTopOfScreen(()=>{this.loadImages().then(()=>this.addListeners())})}loadImages(){this.loading=!0;let e=[];return e.push(this.sequenceCanvas.load()),Promise.all(e).then(()=>{this.loading=!1,this.el.classList.add("loaded"),this.sequenceCanvas.renderByProgress(this.rafProgress.currentProgress)})}updateCanvasHeight(){let e=document.querySelector("[pdp-bar]");if(e){let o=e.offsetHeight||0;this.gdnHeaderHeight=o}let r=0,n=0,s=window.innerHeight-this.gdnHeaderHeight;if(!this.isMobile()){s=window.innerWidth*1800/2880,s<window.innerHeight&&(s=window.innerHeight);let o=(window.innerHeight-s)/2;r=o+this.gdnHeaderHeight,n=o-this.gdnHeaderHeight}if(window.innerWidth<900){let o=375/667*window.innerWidth;s<o&&(s=o)}this.sequenceElement.style.height=`${s}px`,this.sequenceElement.style.top=`${r}px`,this.sequenceElement.style.marginBottom=`${n}px`}addListeners(){this.domWatcher.add({element:window,on:"scroll",callback:Wi.func.debounce(()=>{this.onScroll()},24),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0},id:"scroll"}),this.domWatcher.add({element:window,on:"smartResize",callback:this.onResize.bind(this),eventOptions:{passive:!0},id:"resize"}),this.domWatcher.run("resize"),this.domWatcher.run("scroll")}isMobile(){return window.innerWidth<=1024}setInterpolations(){let e=[{id:"--title-y",progress:[{from:.59,to:.74,start:"0vh",end:"-30vh",easingFunction:PU.CubicBezier.makeEasingFunction(.41,.28,.71,.13)}]},{id:"--compare-title-opacity",progress:[{from:.55,to:.71,start:0,end:1}]},{id:"--compare-title-y",progress:[{from:.55,to:.71,start:"30px",end:"0px"}]},{id:"--canvas-y",progress:[{from:.57,to:.75,start:"0vh",end:"-12vh"}]}];this.sectionCssVarInterpolation.setInterpolations({interpolations:e})}onAssetLoadComplete(){}getProgress(){return Wi.dom.getElementScrolledPercent(this.stickyParentElement,window.innerHeight-this.gdnHeaderHeight,0)}onScroll(){let e=this.getProgress();this.rafProgress.easeTo(e,.16,Wi.EASE.linear)}onResize(){this.updateCanvasHeight(),this.sequenceCanvas.resize();let e=j.mqnCssName("mqn2-c7q"),r=this.el.querySelector(`.${e}`),n=window.innerWidth/window.innerHeight,a=2880/1800;if(this.isMobile()||n>a)r.style.width=null;else{let l=.815,c=a*window.innerHeight*l;r.style.width=`${c}px`}this.setInterpolations()}onProgressUpdate(e){this.progress=e;let r=Wi.mathf.childProgress(e,0,1);this.sequenceCanvas.renderByProgress(r),this.sectionCssVarInterpolation.update(this.progress),this.el.classList.toggle("--compare-section-inview",e>=.5),this.el.classList.toggle("--show-compare-title",e>=.5),this.el.classList.toggle("--show-compare",e>=.9)}dispose(){this.ev.dispose(),this.domWatcher.dispose(),this.sequenceCanvas.dispose()}};var On=re(Vn()),DU=re(Et()),FU=re(yt()),Xr=re(Ye()),NU=re(Ci());var Zv=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.$window=s,this.$scope=n,this.$rootScope=e,this.$element=r,this.el=r[0],this.elements={sticky_parent:this.el.querySelector("[parent]"),sticky_child:this.el.querySelector("[child]"),header:this.el.querySelector("[header]"),chapters:this.el.querySelector("[chapters]"),chapter1:this.el.querySelector("[chapter1]"),chapter2:this.el.querySelector("[chapter2]"),videos:this.el.querySelector("[videos]"),video1:this.el.querySelector("[video1]"),video2:this.el.querySelector("[video2]"),video1Video:this.el.querySelector("[video1] video"),video2Video:this.el.querySelector("[video2] video")},this.scrollToOnFocus=new Pn({element:this.elements.sticky_parent,debug:!1,setTabIndex:!0,top:window.innerHeight}),this.ev=DU.elementVisibility.inview(this.el,{rootMargin:"100px"}),this.cssVarInterpolater=new NU.CssVarInterpolate(this.el),this.cssVarInterpolater.useBatchUpdate(!0),this.cssVarInterpolater.renderOutview(!0),this.rafProgress=new Xr.RafProgress,this.rafProgress.easeTo(this.getProgress(),1,Xr.EASE.Linear),this.rafProgress.watch(this.onProgressUpdate.bind(this)),this.domWatcher=new FU.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:this.onResize.bind(this),eventOptions:{passive:!0},id:"resize"});let o=0;this.domWatcher.add({element:window,on:"scroll",callback:Xr.func.throttle(a=>{this.onScroll()},o),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0}}),this.domWatcher.run("resize"),this.domWatcher.run("scroll"),n.$on("$destroy",()=>this.dispose())}forceProgressUpdate(){this.onProgressUpdate(this.progress)}getProgress(){return Xr.dom.getElementScrolledPercent(this.el,window.innerHeight)}onScroll(){this.rafProgress.easeTo(this.getProgress(),.08,Xr.EASE.Linear)}onResize(){this.setInterpolations(),this.scrollToOnFocus.updateOffset(window.innerHeight,0),window.setTimeout(()=>{this.cssVarInterpolater.flush(),this.forceProgressUpdate()})}isMobile(){return window.innerWidth<768}isPortait(){return window.innerWidth<window.innerHeight}onProgressUpdate(e,r){this.progress=e,this.cssVarInterpolater.update(this.progress)}setInterpolations(){let e=70,r=this.elements.chapter1.offsetHeight,n=this.elements.chapter2.offsetHeight,s=Math.max(r,n),o={width:this.isMobile()?1472:2880,height:1920},a=this.elements.header.offsetHeight,l=2,c=1,h=Xr.mathf.calculateBackgroundCover({width:window.innerWidth,height:window.innerHeight},o),f=.25,u=h.height*f,m=s+e,d=Math.max(0,m-u),v=this.isMobile()?0:Math.max(0,h.height-window.innerHeight),p=this.isMobile()?0:v+d;if(this.isMobile()&&this.isPortait()){let P=Xr.mathf.calculateBackgroundContain({width:window.innerWidth,height:window.innerHeight},o),z=o.height*P,V=Math.max(0,z+s-window.innerHeight);v=V,p=V}this.elements.sticky_child.style.height=window.innerHeight+p+"px",this.elements.video1.style.height=window.innerHeight+v+"px",this.elements.video2.style.height=window.innerHeight+v+"px",this.elements.videos.style.height=window.innerHeight+p+"px";let g=a+e,y=p,_=window.innerHeight-s,b=window.innerHeight-_,S=-g+g/2;this.isMobile()&&this.isPortait()&&(l=2,d=-window.innerHeight*.08);let E=g/this.elements.sticky_parent.offsetHeight,x=1-E,T={intro:0,enter:E,chapterEnter:E+x*.15,chapterEnterComplete:E+x*.2,chapterEnterOut:E+x*.5,chapter2Enter:E+x*.55,chapter2EnterOut:E+x*.65},A=[{id:"--edge-opacity",progress:[{from:T.enter,to:T.chapterEnter,start:0,end:1}]},{id:"--intro-shift-y",progress:[{from:T.intro,to:T.enter,start:"0px",end:S+"px"},{from:T.enter+(T.chapterEnter-T.enter)*.5,to:T.chapterEnter,start:S+"px",end:"0px",easingFunction:On.CubicBezier.makeEasingFunction(1,.1,.96,.61)}]},{id:"--video-1-scale",progress:[{from:T.enter,to:T.chapterEnter,start:l,end:c,easingFunction:this.isMobile()?On.CubicBezier.makeEasingFunction(.9,.08,1,.41):Xr.EASE.linear}]},{id:"--video-1-origin",progress:[{from:T.enter,to:T.chapterEnter,start:this.isMobile()?"75%":"70%",end:this.isMobile()?"100%":"50%",easingFunction:this.isMobile()?On.CubicBezier.makeEasingFunction(.9,.08,1,.41):Xr.EASE.linear}]},{id:"--video-1-y",progress:[{from:T.enter,to:T.chapterEnter,start:"0px",end:d+"px",easingFunction:this.isMobile()?On.CubicBezier.makeEasingFunction(.9,.08,1,.41):Xr.EASE.linear}]},{id:"--video-clip-x",progress:[{from:T.enter,to:T.chapterEnter,start:Xr.mathf.interpolateRange(window.innerWidth,300,800,window.innerWidth*0,window.innerWidth*.1)+"px",end:"0px"}]},{id:"--video-clip-top",progress:[{from:T.enter,to:T.chapterEnter,start:g+"px",end:"0px"}]},{id:"--video-clip-bottom",progress:[{from:T.enter,to:T.chapterEnter,start:y+"px",end:"0px"}]},{id:"--header-y",progress:[{from:T.enter,to:T.enter+(T.chapterEnter-T.enter)/2,start:"0px",end:-a-20+"px",easingFunction:On.CubicBezier.makeEasingFunction(.41,.28,.71,.13)}]},{id:"--chapter1-y",progress:[{from:T.chapterEnter,to:T.chapterEnterComplete,start:"30px",end:"0px",easingFunction:On.CubicBezier.makeEasingFunction(.41,.28,.71,.13)}]},{id:"--chapter1-opacity",progress:[{from:T.chapterEnter,to:T.chapterEnterComplete,start:0,end:1,easingFunction:On.CubicBezier.makeEasingFunction(.41,.28,.71,.13)},{from:T.chapterEnterOut,to:T.chapter2Enter,start:1,end:0,easingFunction:On.CubicBezier.makeEasingFunction(.41,.28,.71,.13)}]},{id:"--chapter2-y",progress:[{from:T.chapter2Enter,to:T.chapter2EnterOut,start:"30px",end:"0px",easingFunction:On.CubicBezier.makeEasingFunction(.41,.28,.71,.13)}]},{id:"--chapter2-opacity",progress:[{from:T.chapter2Enter,to:T.chapter2EnterOut,start:0,end:1,easingFunction:On.CubicBezier.makeEasingFunction(.41,.28,.71,.13)}]}];this.cssVarInterpolater.setInterpolations({interpolations:A})}dispose(){this.scrollToOnFocus&&this.scrollToOnFocus.dispose(),this.domWatcher.dispose(),this.ev.dispose()}};var kU=re(Ye()),yIe=re(yt()),bIe=re(Et()),VU=re(Ax()),SIe=re(Ye()),Qv=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.el=r[0],this.$scope=n,this.activeClass="active",this.outgoingClass="out",this.elements={queries:Array.from(this.el.querySelectorAll("[query] > span"))},n.$on("$destroy",()=>this.dispose()),this.$scope.$on("TemplateCarouselUpdateEvent",(o,a)=>{this.updateActiveQueries(a)}),this.splitQueries()}splitQueries(){this.elements.queries.forEach(e=>{new VU.TextSplit({element:e,split:" "}).split()})}updateActiveQueries(e){kU.is.number(e)&&this.elements.queries[e].classList.add(this.outgoingClass),this.elements.queries.forEach(r=>{r.classList.remove(this.activeClass),r.classList.remove(this.outgoingClass)}),window.setTimeout(()=>{this.elements.queries[e].classList.add(this.activeClass)})}dispose(){this.ev.dispose()}};var Mx=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.effects_=[],this.useWipeEffect_=this.el.attributes["mqn2-masked-hero-wipe-effect"]&&this.el.attributes["mqn2-masked-hero-wipe-effect"].value==="true",this.destroyed_=!1,this.renderFix=new oi,this.init(r)}init(e){this.initScrollEffects(),se.runScrollLoop(),e.$on("$destroy",()=>{this.dispose()})}initScrollEffects(){if(!this.useWipeEffect_)return;let e=this.getElement("masked-bg"),r=new bi(this.el,{startDistance:()=>-.5*window.innerHeight,endDistance:()=>this.el.offsetHeight,getDistanceFunction:Hi.DISTANCE_FROM_DOCUMENT_TOP,effects:[new jt([[0,"opacity: 0;"],[.333,"opacity: 1; transform: translateY(0);"],[.667,"opacity: 1;"],[1,"opacity: 0; transform: translateY(40vh);"]],{styleTarget:e})]});this.effects_.push(r)}getElement(e){return this.el.querySelector(`[data-element-id="${e}"]`)}dispose(){this.renderFix.dispose(),this.disposeScrollEffects_(),this.destroyed_=!0}disposeScrollEffects_(){this.effects_.forEach(e=>e.destroy()),this.effects_=[]}};var Cx="width",Px="0px",BU={QUERY_FADE_TIME:400,REQUEST_WORD_TIME:200},Ix=class{constructor(e,r,n,s,o,a,l=!1){this.landscapeWidth_=e,this.landscapeHeight_=r,this.landscapeFilledHeight_=n,this.portraitWidth_=s,this.portraitHeight_=o,this.portraitFilledHeight_=a,this.isCoveredAndCentered_=l}getNativeHeight_(){return Te.isPortrait()?this.portraitHeight_:this.landscapeHeight_}getNativeWidth_(){return Te.isPortrait()?this.portraitWidth_:this.landscapeWidth_}getNativeFilledHeight_(){return Te.isPortrait()?this.portraitFilledHeight_:this.landscapeFilledHeight_}getCoverScaleFactor_(){return this.isCoveredAndCentered_?Math.max(window.innerWidth/this.getNativeWidth_(),window.innerHeight/this.getNativeHeight_()):window.innerWidth/this.getNativeWidth_()}getFilledHeight(){let e=this.getNativeFilledHeight_()*this.getCoverScaleFactor_();if(this.isCoveredAndCentered_){let r=this.getNativeHeight_()*this.getCoverScaleFactor_()-window.innerHeight;return e-r*.5}else return e}},IJ=new Ix(2880,1522,422,640,1136,356,!0),RJ=new Ix(2880,1098,428,640,552,304),ci={REQUEST_WORD:j.mqnCssName("mqn2-cov"),QUERY:j.mqnCssName("mqn2-cou"),QUERY_DIM_LIGHTS:j.mqnCssName("mqn2-d9s"),QUERY_TURN_ON_TV:j.mqnCssName("mqn2-d9t"),CHAPTERS:j.mqnCssName("mqn2-cp3"),BACKGROUND_DARK:j.mqnCssName("mqn2-d9o"),BACKGROUND_TV_ON:j.mqnCssName("mqn2-d9r"),CONTENT_FRAME:j.mqnCssName("mqn2-d9u"),PLACEHOLDER:j.mqnCssName("mqn2-d9v"),ACTIVE:j.mqnCssName("--active"),PAST:j.mqnCssName("--past")};function UU(t){let e=Array.from(t.querySelectorAll(`.${ci.REQUEST_WORD}`)).length*BU.REQUEST_WORD_TIME;return BU.QUERY_FADE_TIME+e}var HU=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.rl_=se.getDestroyableInstance(),this.stf_=new Pn({element:this.element_,setTabIndex:!0,debug:!1,setAriaRole:"region",topProgressOffset:0,bottomProgressOffset:0}),this.requestWords_=Array.from(this.element_.querySelectorAll(`.${ci.REQUEST_WORD}`)),this.dimLightsQuery_=this.element_.querySelector(`.${ci.QUERY_DIM_LIGHTS}`),this.turnOnTvQuery_=this.element_.querySelector(`.${ci.QUERY_TURN_ON_TV}`),this.darkBackgrounds_=Array.from(this.element_.querySelectorAll(`.${ci.BACKGROUND_DARK}`)),this.turnedOnTvBackgrounds_=Array.from(this.element_.querySelectorAll(`.${ci.BACKGROUND_TV_ON}`)),this.contentPieces_=Array.from(this.element_.querySelectorAll(`.${ci.CONTENT_FRAME}`)),this.placeholders_=Array.from(this.element_.querySelectorAll(`.${ci.PLACEHOLDER}`)),this.placeholdersToContent_=new Map(kt(this.placeholders_,this.contentPieces_)),this.tvOnPiece_=this.contentPieces_.find(n=>!!n.querySelector(`.${ci.QUERY_TURN_ON_TV}`)),this.darkPiece_=this.contentPieces_.find(n=>!!n.querySelector(`.${ci.QUERY_DIM_LIGHTS}`)),this.lastActivePiece_=null,this.isPastMapping_=Ae.usingFunction(()=>!1),this.lastDark_=!1,this.lastTvOn_=!1,this.init_(),this.handleResizeListenerFn_=()=>this.handleResize_(),window.addEventListener("resize",this.handleResizeListenerFn_),r.$on("$destroy",()=>this.dispose_())}init_(){this.handleResize_(),this.renderLoop_(),this.scrollLoop_()}renderLoop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.renderLoop_()),this.renderWords_()})}scrollLoop_(){this.rl_.scrollMeasure(()=>{this.rl_.scrollCleanup(()=>this.scrollLoop_()),this.markActiveContent_()})}markActiveContent_(){let e=new Map,r=new Map;this.placeholders_.forEach(s=>{let o=ar(s),a=this.placeholdersToContent_.get(s);e.set(a,o),r.set(Math.abs(o),a)});let n=r.get(Math.min(...r.keys()));this.updateOnTvBg_(e.get(this.tvOnPiece_)<window.innerHeight/2),this.updateDarkBg_(e.get(this.darkPiece_)<window.innerHeight/2),n!==this.lastActivePiece_&&(this.contentPieces_.forEach(s=>{s===n?this.rl_.scrollMutate(()=>gn(s,ci.ACTIVE)):s===this.lastActivePiece_&&this.rl_.scrollMutate(()=>vn(s,ci.ACTIVE))}),this.lastActivePiece_=n),this.contentPieces_.forEach(s=>{let o=e.get(s)<=window.innerHeight/2;o!==this.isPastMapping_.get(s)&&(this.rl_.scrollMutate(()=>{o?gn(s,ci.PAST):vn(s,ci.PAST)}),this.isPastMapping_.set(s,o))})}handleResize_(){this.setupContentPadding_()}setupContentPadding_(){this.rl_.measure(()=>{let e=RJ.getFilledHeight(),r=IJ.getFilledHeight(),n=Array.from(this.element_.querySelectorAll(`.${ci.CONTENT_FRAME}`));this.rl_.mutate(()=>{n.forEach(s=>{de(s,"padding-top",`${e}px`),de(s,"padding-bottom",`${r}px`)})})})}updateDarkBg_(e){if(e===this.lastDark_)return;let r=e?"1":"0",n=e?UU(this.dimLightsQuery_):0;this.rl_.scrollMutate(()=>{this.darkBackgrounds_.forEach(s=>{de(s,"transition-delay",`${n}ms`),this.rl_.measure(()=>{this.rl_.mutate(()=>de(s,"opacity",r))})})}),this.lastDark_=e}updateOnTvBg_(e){if(e===this.lastTvOn_)return;let r=e?"1":"0",n=e?UU(this.turnOnTvQuery_):0;this.rl_.scrollMutate(()=>{this.turnedOnTvBackgrounds_.forEach(s=>{de(s,"transition-delay",`${n}ms`),this.rl_.measure(()=>{this.rl_.mutate(()=>de(s,"opacity",r))})})}),this.lastTvOn_=e}renderWords_(){let e=[],r=[];this.requestWords_.forEach(n=>{let s=ut(n,"opacity"),o=ut(n,Cx);s==="0"&&o!==Px?e.push(n):s!=="0"&&o===Px&&r.push(n)}),this.rl_.mutate(()=>{e.forEach(n=>de(n,Cx,Px)),r.forEach(n=>de(n,Cx,""))})}dispose_(){window.removeEventListener("resize",this.handleResizeListenerFn_),this.rl_.destroy(),this.stf_&&this.stf_.dispose()}},qU=HU;var zU=re(yt()),WU=re(Et()),GU=re(Gi()),vl=re(Ye());var $U=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element=e[0],this.rl_=se.getDestroyableInstance(),r.$on("$destroy",()=>this.dispose_()),this.domWatcher=new zU.DomWatcher,this.ev=WU.elementVisibility.inview(this.element,{rootMargin:"100px"}),this.scrollToCenterOfScreenOnFocus=new Zs({element:this.element,debug:!1,setTabIndex:!0,setAriaRole:"region"}),this.soundwaveVideo=this.element.querySelector("[soundwave] video"),this.soundwaveVideoIsPlaying=!1,this.init()}init(){this.domWatcher.add({id:"resize",element:window,on:"smartResize",callback:GU.func.debounce(()=>this.onResize(),300),eventOptions:{passive:!0}}),this.domWatcher.add({element:window,on:"scroll",callback:this.onScroll.bind(this),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0}}),window.setTimeout(()=>{this.domWatcher.run("resize")},100)}onResize(){this.rl_.measure(()=>{let e=this.element.querySelector('[data-device="1"]'),r=e.firstElementChild,n=e.offsetHeight,s=r.offsetWidth,o=r.offsetHeight;this.rl_.mutate(()=>{vl.dom.setCssVariable(this.element,"--device-width",`${s}px`),vl.dom.setCssVariable(this.element,"--device-height",`${o}px`),n>o?vl.dom.setCssVariable(this.element,"--device-justify","flex-end"):vl.dom.setCssVariable(this.element,"--device-justify","flex-start")})}),window.setTimeout(()=>{this.rl_.measure(()=>{let e=this.element.querySelector('[data-layer="2"]'),s=this.element.querySelector('[data-device="2"]').firstElementChild.getBoundingClientRect().top-e.getBoundingClientRect().top;this.rl_.mutate(()=>{vl.dom.setCssVariable(this.element,"--device-top",`${s}px`)})})},100)}getProgress(){return vl.dom.getElementScrolledPercent(this.element.querySelector("[elevator]"),.5*window.innerHeight,0)}onScroll(){this.progress=this.getProgress()}dispose_(){this.scrollToCenterOfScreenOnFocus&&this.scrollToCenterOfScreenOnFocus,this.rl_.destroy()}},jU=$U;var YU=re(Et()),Dn=re(Ye()),XU=re(yt()),Rx=re(Ci());var Kv=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.$scope=n,this.$rootScope=e,this.$element=r,this.el=r[0],this.scrollInner=this.el.querySelector("[scroll-inner]"),this.ev=YU.elementVisibility.inview(this.el,{rootMargin:"100px"}),this.scrollToOnFocus=new Pn({element:this.scrollInner,debug:!1,setTabIndex:!0,setAriaRole:"region",top:0}),this.scrollToCenterOfScreenOnFocus=new Zs({element:this.el,debug:!1,setTabIndex:!0,setAriaRole:"region"}),this.xCssInterpolation=new Rx.CssVarInterpolate(this.el,{interpolations:[{id:"--rotate-y",progress:[{from:0,to:1,start:"-5deg",end:"5deg"}]}]}),this.xRafProgress=new Dn.RafProgress(s=>{this.xCssInterpolation.update(s)}),this.xRafProgress.setCurrentProgress(.5),this.yCssInterpolation=new Rx.CssVarInterpolate(this.el,{interpolations:[{id:"--rotate-x",progress:[{from:0,to:1,start:"5deg",end:"-5deg"}]}]}),this.yRafProgress=new Dn.RafProgress(s=>{this.yCssInterpolation.update(s)}),this.yRafProgress.setCurrentProgress(.5),this.domWatcher=new XU.DomWatcher,this.domWatcher.add({element:window,on:"mousemove",callback:Dn.func.debounce(s=>{this.onMouseMove(s)},24),runWhen:()=>!this.isMobile()&&this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0},id:"mousemove"}),this.domWatcher.add({element:window,on:"smartResize",callback:Dn.func.debounce(()=>{this.onResize()},300),eventOptions:{passive:!0}}),this.onResize(),n.$on("$destroy",()=>this.dispose())}onMouseMove(e){if(!e)return;let r=document.body.getBoundingClientRect(),n=e.pageX||e.clientX,s=(e.pageY||e.clientY)+r.top,o=n/window.innerWidth,a=s/window.innerHeight;this.xRafProgress.easeTo(o,.32,Dn.EASE.linear),this.yRafProgress.easeTo(a,.32,Dn.EASE.linear)}onResize(){let e=this.el.querySelector("[query-device]");if(e){let r=e.firstElementChild;e.offsetHeight>=r.offsetHeight?e.style.justifyContent="flex-end":e.style.justifyContent="flex-start"}this.isMobile()&&(this.xRafProgress.easeTo(.5,.32,Dn.EASE.linear),this.yRafProgress.easeTo(.5,.32,Dn.EASE.linear))}isMobile(){return window.innerWidth<=768}dispose(){this.scrollToOnFocus&&this.scrollToOnFocus.dispose(),this.scrollToCenterOfScreenOnFocus&&this.scrollToCenterOfScreenOnFocus.dispose(),this.ev.dispose(),this.domWatcher.dispose()}};var ln={GRID:j.mqnCssName("mqn2-cqp"),ITEM:j.mqnCssName("mqn2-cqr"),VIDEO_CONTAINER:j.mqnCssName("mqn2-d4b"),MODAL:j.mqnCssName("mqn2-cqz"),MODAL_OPENING:j.mqnCssName("mqn2-cr3"),MODAL_OPEN:j.mqnCssName("mqn2-cr0"),MODAL_CLOSING:j.mqnCssName("mqn2-cr1"),MODAL_CLOSED:j.mqnCssName("mqn2-d4c")},LJ=4,OJ=5,ZU=class{constructor(e){this.items_=e,this.relatedItems_=new Set,this.displayedIndex_=0,this.generateRelatedItems_()}getItems(){return this.items_}getItemElements(){return this.items_.map(e=>e.element)}isRelatedItem(e){return this.relatedItems_.has(this.items_[e])}generateRelatedItems_(){let e=this.getDisplayedItem();this.relatedItems_.clear();for(let r=0;r<this.items_.length;r++){let n=this.items_[r];if(n!==e&&n.category===e.category&&(this.relatedItems_.add(n),this.relatedItems_.size>=LJ))break}}getDisplayedItem(){return this.items_[this.displayedIndex_]}getNextItem(){return this.items_[Ei(this.displayedIndex_+1,this.items_.length)]}getPrevItem(){return this.items_[Ei(this.displayedIndex_-1,this.items_.length)]}showItem(e){this.displayedIndex_=Ei(e,this.items_.length),this.generateRelatedItems_()}dispose(){this.items_=null,this.relatedItems_.clear(),this.relatedItems_=null}},QU=class extends Th{static get $inject(){return["$rootScope","$element","$scope","$compile","$timeout","$window"]}constructor(e,r,n,s,o,a){super(e,r,n,s);this.$timeout=o,this.el_=r[0],this.lastY_=null,this.modalEl_=null;let l=Array.from(this.el_.querySelectorAll("[data-grid-item-index]")).map(c=>{let h=c.querySelector("[data-grid-item-category]"),f=c.querySelector("[data-grid-item-title]");return{element:c,category:h&&h.textContent.trim(),title:f&&f.textContent.trim()}});this.grid_=new ZU(l),this.gridEl_=this.el_.querySelector(`.${ln.GRID}`),this.lastMaxHeight_=null,this.displayedRows_=this.getInitialRowCount_(),this.resizeHandler_=()=>this.handleResize_(),this.window_=a,this.window_.addEventListener("resize",this.resizeHandler_),this.rl_=se.getDestroyableInstance(),this.currentItem=null,this.rl_.mutate(()=>de(this.gridEl_,"transition","none")),this.render_(),n.$on("destroy",()=>this.dispose_())}render_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.render_());let e=this.getMaxHeight_();e!==this.lastMaxHeight_&&(this.adjustMaxHeight_(e),this.lastMaxHeight_=e)})}init(e){super.init(e),this.gallery.on("afterChange",(r,n,s)=>{this.currentItem!==null&&this.showItem(s,!1)})}handleResize_(){this.rl_.measure(()=>{this.displayedRows_=Math.max(this.displayedRows_,this.getInitialRowCount_())})}getMaxHeight_(){let e=this.grid_.getItems().slice(0,this.getDisplayedItemCount_()),r=this.getItemCountPerRow_(),n=this.getDisplayedRowCount_(),s=e.slice((n-1)*r,n*r),o=Math.max(...s.map(l=>l.element.offsetHeight)),a=s[0].element.offsetTop;return o+a}adjustMaxHeight_(e){this.rl_.measure(()=>{let r=`${e}px`,s=this.gridEl_.offsetHeight+OJ,o=this.gridEl_.style.height;(!o&&s!==e||o&&o!==r)&&this.rl_.mutate(()=>de(this.gridEl_,"height",r))})}getDisplayedRowCount_(){return Math.ceil(this.getDisplayedItemCount_()/this.getItemCountPerRow_())}getItemCountPerRow_(){let e=this.grid_.getItemElements(),r=e[0].offsetTop;return e.filter(s=>s.offsetTop===r).length}getDisplayedItemCount_(){return Math.min(this.displayedRows_*this.getItemCountPerRow_(),this.grid_.getItems().length)}moreCanBeShown(){return this.getDisplayedItemCount_()<this.grid_.getItems().length}hasMultipleRows(){return this.grid_.getItems().length>this.getInitialDisplayedItemCount_()}getInitialDisplayedItemCount_(){return this.getInitialRowCount_()*this.getItemCountPerRow_()}clearTransition_(){this.rl_.mutate(()=>de(this.gridEl_,"transition",""))}showExpandRows(){this.moreCanBeShown()?this.showMore():this.showLess()}showMore(){this.clearTransition_(),this.displayedRows_+=2}showLess(){this.clearTransition_(),this.displayedRows_=this.getInitialRowCount_()}getInitialRowCount_(){return window.innerWidth<461?3:2}showItem(e,r=!1){this.grid_.showItem(e),e>=0&&(this.gallery.slick("slickGoTo",e,r),this.grid_.getDisplayedItem()!==this.currentItem&&this.openModal()),this.currentItem=this.grid_.getDisplayedItem(),this.nextItem=this.grid_.getNextItem(),this.prevItem=this.grid_.getPrevItem(),this.disposePlayer_()}disposePlayer_(){this.player&&(this.player.destroy(),this.player=null)}playVideoInModal(e){window.MQN_YOUTUBEMODAL?window.MQN_YOUTUBEMODAL.play(e):console.error("youtube modal not initialized")}playVideo(e){let n=this.modalEl_.querySelector(`[data-grid-carousel-item-index="${e}"]`).querySelector("[data-youtube-id]"),s=n.getAttribute("data-youtube-id");this.player=new YT.Player(n,{videoId:s,events:{onReady:()=>this.player.playVideo()},playerVars:{autohide:1,autoplay:1,fs:1,modestbranding:1,rel:0,showinfo:0,iv_load_policy:3}})}isRelatedItem(e){return this.grid_.isRelatedItem(e)}openModal(){this.modalEl_&&(Xf.removeElement(this.modalEl_),this.el.appendChild(this.modalEl_)),this.player&&this.player.pauseVideo(),this.scrollY=window.scrollY,document.body.style.position!=="fixed"&&(document.body.style.position="fixed",document.body.style.top=`-${this.scrollY}px`,document.body.style.paddingRight="0"),this.modalEl_=this.el.querySelector(`.${ln.MODAL}`),this.modalEl_.classList.remove(ln.MODAL_CLOSED),this.modalEl_.classList.remove(ln.MODAL_CLOSING),this.modalEl_.classList.add(ln.MODAL_OPENING),Xf.removeElement(this.modalEl_),document.body.appendChild(this.modalEl_),this.$timeout(()=>{this.modalEl_.classList.remove(ln.MODAL_OPENING),this.modalEl_.classList.add(ln.MODAL_OPEN)},100)}closeModal(){this.currentItem=null,document.body.style.position="",document.body.style.top="",document.body.style.paddingRight="",window.scrollTo(0,this.scrollY+100),this.$timeout(()=>{this.modalEl_.classList.add(ln.MODAL_CLOSING),this.modalEl_.classList.remove(ln.MODAL_OPEN),window.scrollTo(0,this.scrollY)},200),this.$timeout(()=>{this.modalEl_.classList.add(ln.MODAL_CLOSED),this.modalEl_.classList.remove(ln.MODAL_CLOSING),this.modalEl_.classList.remove(ln.MODAL_OPENING),this.player&&this.player.pauseVideo()},500)}dispose_(){this.modalEl_&&this.modalEl_.parentNode&&(Xf.removeElement(this.modalEl_),this.el.appendChild(this.modalEl_)),super.dispose_(),this.rl_.destroy(),this.window_.removeEventListener("resize",this.resizeHandler_),this.disposePlayer_(),this.grid_.dispose()}},KU=QU;var JU=re(Ye()),eH=re(yt());var Jv={STEP_NAV_ITEM:j.mqnCssName("mqn2-grf"),STEP:j.mqnCssName("mqn2-grr"),STEPS:j.mqnCssName("mqn2-grb")},tH=class{static get $inject(){return["$rootScope","$element","$scope","$timeout","$window"]}constructor(e,r,n,s,o){this.$timeout=s,this.$window=o,this.$scope=n,this.el=r[0],this.rl_=se.getDestroyableInstance(),this.categoryNavItems=Array.from(this.el.querySelectorAll("[data-category-nav-item]")),this.categoryEls=this.el.querySelectorAll("[data-steps]"),this.selectedCategory=null,this.selectedStep=null,this.selectedAccordionItem=null,this.lastSelectedAccordionItem=null,this.focusedCategoryNavItems=new Set,this.focusedCategorySteps=new Set,this.carouselIndex=0,this.carouselTimer=null,this.carouselSlideDuration=5e3,this.lazyLoadedSteps={},this.stepsByCategory=new Map,this.stepNavItemsByCategory=new Map,this.domWatcher=new eH.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:()=>this.setProgressBar(),eventOptions:{passive:!0},id:"resize"}),this.init(),n.$on("$destroy",()=>this.dispose_())}init(){this.cacheDomElements(),this.setCategory(this.categoryNavItems[0].getAttribute("data-category-nav-item"),!0)}cacheDomElements(){let e=this.el.querySelectorAll(`.${Jv.STEPS}`);e.forEach((r,n)=>{let s=Array.from(r.querySelectorAll(`.${Jv.STEP_NAV_ITEM}`)),o=Array.from(r.querySelectorAll(`.${Jv.STEP}`));this.stepsByCategory.set(n,o),this.stepNavItemsByCategory.set(n,s),o.forEach((a,l)=>{if(l===o.length-1&&n===e.length-1)return;let c=l===o.length-1?this.categoryNavItems[n+1]:s[l+1],h=this.getFocusableEls(a).slice(-1)[0];this.domWatcher.add({element:h,on:"keydown",callback:f=>{f.key==="Tab"&&!f.shiftKey&&(f.preventDefault(),c.focus())}})})})}focusCategory(e){this.focusedCategoryNavItems.add(+e);let r=e>this.selectedCategory;this.disableSteps(!r)}blurCategory(e){this.focusedCategoryNavItems.delete(+e)}isFocusedCategory(e){return this.focusedCategoryNavItems.has(+e)}handleStepKeydown(e,r){let n=e.target.parentElement,s=Array.from(n.querySelectorAll(`.${Jv.STEP_NAV_ITEM}`)),o=+r,a=null;if(e.key==="ArrowLeft")a=(s.length+o-1)%s.length;else if(e.key==="ArrowRight")a=(s.length+o+1)%s.length;else return;s[a].focus()}focusStep(e,r){this.focusedCategorySteps.add(`${e}-${r}`),this.disableSteps(this.selectedStep===r)}disableSteps(e){Array.from(this.stepsByCategory.entries()).forEach(([r,n])=>{n.forEach((s,o)=>{e&&this.selectedCategory===r&&this.selectedStep===o?s.querySelectorAll("[disabled-tabindex]").forEach(l=>{let c=l.getAttribute("disabled-tabindex");l.setAttribute("tabindex",c),l.removeAttribute("disabled-tabindex")}):this.getFocusableEls(s).forEach(l=>{let c=l.getAttribute("tabindex")||0;l.setAttribute("disabled-tabindex",c),l.setAttribute("tabindex","-1")})})})}blurStep(e,r){this.disableSteps(this.selectedStep===r),this.focusedCategorySteps.delete(`${e}-${r}`);let n=this.stepsByCategory.get(this.selectedCategory).length;r===n-1&&this.selectedCategory<this.categoryNavItems.length-1&&this.selectedStep!==r&&this.categoryNavItems[this.selectedCategory+1].focus()}isFocusedOrSelectedCategory(e){return this.selectedCategory===+e||this.focusedCategoryNavItems.has(+e)}isCategoryTabbable(e){if(this.selectedCategory>=+e)return!0;let r=this.categoryNavItems.length;for(let n=this.selectedCategory+1;n<r;n++)if(this.focusedCategoryNavItems.has(+n))return!0;return!1}isStepTabbable(e,r){if(this.selectedCategory!==+e)return!1;let n=this.categoryNavItems.length;for(let o=this.selectedCategory+1;o<n;o++)if(this.focusedCategoryNavItems.has(+o))return!1;if(this.selectedStep>=+r)return!0;let s=this.stepsByCategory.get(this.selectedCategory).length;for(let o=this.selectedStep+1;o<s;o++)if(this.focusedCategorySteps.has(`${e}-${o}`))return!0;return!1}focusCategoryPanel(e){let r=this.el.querySelector(`#${e}`);r&&setTimeout(()=>{let n=this.getFocusableEls(r);n.length&&n[0].focus()},0)}getFocusableEls(e){let r="button, [href], input, select, textarea, [tabindex]";return Array.from(e.querySelectorAll(r)).filter(n=>n.getAttribute("tabindex")!=="-1")}isMobile(){return window.innerWidth<768}handleCategoryClick(e,r=!1){this.scrollToTop_(),this.setCategory(+e,r)}handleCategoryKeydown(e,r){let n=+r,s=null;if(e.key==="ArrowLeft")s=(this.categoryNavItems.length+n-1)%this.categoryNavItems.length;else if(e.key==="ArrowRight")s=(this.categoryNavItems.length+n+1)%this.categoryNavItems.length;else return;this.categoryNavItems[s].focus()}setCategory(e,r=!1){let n=+e;if(n===this.selectedCategory&&r===!1)return;this.selectedCategory=n,this.categoryEls.forEach(o=>{o.removeAttribute("data-current")}),this.$timeout(()=>{this.categoryEls.forEach(a=>{a.setAttribute("data-hidden",""),a.setAttribute("aria-hidden",!0)});let o=this.el.querySelector(`[data-category="${this.selectedCategory}"]`);o.removeAttribute("data-hidden"),o.removeAttribute("aria-hidden"),o.setAttribute("data-current","")},500);let s=this.el.querySelector(`[data-category-nav-item="${this.selectedCategory}"]`);if(s){let o=this.el.querySelector("[data-category-nav]"),a=s.getBoundingClientRect().x+o.scrollLeft,l=s.getBoundingClientRect().width;this.scrollTo(0,a+l/2-document.documentElement.clientWidth/2,o)}this.setStep(0,!0)}scrollTo(e,r,n){JU.is.edge()?(n?window.jQuery(n):window.jQuery("body")).stop().animate({scrollTop:e||0},200):(n||window).scrollTo({top:e||0,left:r||0,behavior:"smooth"})}handleStepClick(e,r){this.scrollToTop_(),this.setStep(r),this.stepNavItemsByCategory.get(e)[r].focus(),this.disableSteps(!0)}scrollToTop_(){this.rl_.measure(()=>{let e=this.el.querySelector("[data-category-nav-wrap]"),s=an(e)+e.offsetHeight-50;this.scrollTo(s,0)})}setStep(e,r=!1){if(e===this.selectedStep&&r===!1)return;this.selectedStep=e,window.setTimeout(()=>{this.lazyLoadedSteps[this.selectedCategory+"-"+e]=!0,this.$scope.$$phase||this.$scope.$apply()},300);let n=this.stepsByCategory.get(this.selectedCategory);n.forEach(s=>{s.removeAttribute("data-current")}),this.$timeout(()=>{n.forEach(s=>{s.setAttribute("data-hidden",""),s.setAttribute("aria-hidden",!0)}),n[e].removeAttribute("data-hidden"),n[e].removeAttribute("aria-hidden"),n[e].setAttribute("data-current",""),this.setProgressBar()},500),this.$timeout(()=>{this.setAccordionItem(1)},600),this.$timeout(()=>{this.setProgressBar()})}setProgressBar(){if(this.stepsByCategory.get(this.selectedCategory).length<=1)return;let r=this.el.querySelector(`[data-category="${this.selectedCategory}"] [data-step-nav-wrap]`),n=this.el.querySelector(`[data-category="${this.selectedCategory}"] [data-step-nav]`),s=this.el.querySelector(`[data-category="${this.selectedCategory}"] [data-progress-bar]`),o=this.el.querySelectorAll(`[data-category="${this.selectedCategory}"] [data-step-nav-label]`);if(o){let a=o[this.selectedStep],l=a.getBoundingClientRect().left-n.getBoundingClientRect().left,c=a.getBoundingClientRect().width,h=l+c;this.scrollTo(0,l+c/2-document.documentElement.clientWidth/2,r),s.style.width=`${h}px`}else s.style.width="0"}setAccordionItem(e,r=null){if(this.selectedAccordionItem==e&&r!==null){this.selectedAccordionItem=-1;return}this.lastSelectedAccordionItem=e,this.selectedAccordionItem=e,this.carouselTo(0)}getCarouselCount(){let e=this.stepsByCategory.get(this.selectedCategory)[this.selectedStep],r=0;if(e){let n=e.querySelector("[data-slide-enabled=true]");r=n?+n.getAttribute("data-slide-count"):0}return r}carouselNext(){let e=this.getCarouselCount();this.carouselIndex==e-1?this.carouselTo(0):this.carouselTo(this.carouselIndex+1)}carouselPrev(){let e=this.getCarouselCount();this.carouselIndex==0?this.carouselTo(e-1):this.carouselTo(this.carouselIndex-1)}carouselTo(e){this.carouselIndex=e,window.clearTimeout(this.carouselTimer),this.carouselTimer=window.setTimeout(()=>{this.carouselNext(),this.$scope.$$phase||this.$scope.$apply()},this.carouselSlideDuration)}dispose_(){this.domWatcher.dispose(),this.rl_.destroy()}},rH=tH;var iH=class{static get $inject(){return["$element"]}constructor(e){this.el=e[0],this.isFrontVisible_=!0,this.isFlipControlHovered_=!1}isFrontVisible(){return this.isFrontVisible_}unhoverFlipControl(){this.isFlipControlHovered_=!1}hoverFlipControl(){this.isFlipControlHovered_=!0}isFlipControlHovered(){return this.isFlipControlHovered_}getFront_(){return this.el.querySelector("[mqn-use-case-card-front]")}getBack_(){return this.el.querySelector("[mqn-use-case-card-back]")}toggle(){let e=this.getFront_(),r=this.getBack_();this.isFrontVisible_=!this.isFrontVisible_;let n=this.isFrontVisible_?e.firstElementChild:r.firstElementChild,s=n.hasAttribute("tabindex");s||n.setAttribute("tabindex",0),n.focus(),s||n.removeAttribute("tabindex")}},nH=iH;var sH=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element=e[0],this.$scope=r,this.category="",this.previousFocusedElement=null,this.cardModalActive=!1,this.cardModalData={},this.modalScrollPosition_=null,this.mobileSubnavToggled=!1,this.expanded=!1,this.keyboardListener_=null,r.$on("$destroy",()=>this.dispose())}init(e){e.category&&(this.category=e.category);let r=window.location.hash;if(r){let n=r.slice(1),s=this.getCardByPermalink(n);s&&(this.category=s.category,this.openCardModal(s))}this.keyboardListener_=n=>this.onKeyPress(n),window.addEventListener("keydown",this.keyboardListener_)}onKeyPress(e){(e.key=="Esc"||e.key=="Escape")&&this.closeCardModal()}getCardByPermalink(e){let r=`[data-permalink="${e}"]`,n=this.element.querySelector(r);if(!n)return null;let s=n.getAttribute("data-card");return s?JSON.parse(s):null}showMore(){this.expanded=!0,this.$scope.$$phase||this.$scope.$apply()}showLess(){this.expanded=!1;let e=this.element.querySelector('[data-element="nest-eco-expand-button"]');e&&e.scrollIntoView&&e.scrollIntoView(),this.$scope.$$phase||this.$scope.$apply()}onCardClick(e){e.stopPropagation();let r=e.target.closest('[data-element="nest-eco-card"]');if(!r)return;let n=r.getAttribute("data-card");if(!n)return;let s=JSON.parse(n);this.openCardModal(s)}openCardModal(e){this.cardModalData=e,this.cardModalActive=!0,e.permalink&&this.setHash(e.permalink),this.previousFocusedElement=document.activeElement;let r=this.element.querySelector('[data-element="nest-eco-modal"]');r&&r.focus(),this.modalScrollPosition_=window.pageYOffset||document.documentElement.scrollTop,this.$scope.$$phase||this.$scope.$apply()}closeCardModal(){!this.cardModalActive||(this.cardModalActive=!1,this.clearHash(),this.previousFocusedElement&&(this.previousFocusedElement.focus(),this.previousFocusedElement=null),this.modalScrollPosition_!==null&&(window.scrollTo({top:this.modalScrollPosition_}),this.modalScrollPosition_=null),this.$scope.$$phase||this.$scope.$apply())}setHash(e){let r=window.location.pathname+window.location.search+"#"+e;history.replaceState("",document.title,r)}clearHash(){let e=window.location.pathname+window.location.search;history.replaceState("",document.title,e)}toggleMobileSubnav(){this.mobileSubnavToggled=!this.mobileSubnavToggled}setCategory(e){this.category=e,this.mobileSubnavToggled=!1,this.expanded=!1,EM()}isGoogleDomain(e){if(!e)return!1;let n=new URL(e).hostname;return n?n.endsWith("google.com"):!1}dispose(){this.keyboardListener_&&(window.removeEventListener("keypress",this.keyboardListener_),this.keyboardListener_=null)}},oH=sH;var aH=re(Et()),cn=re(Ye()),lH=re(yt()),cH=re(Bl()),hH=re(Ci());var ey=class{static get $inject(){return["$rootScope","$element","$scope","$window"]}constructor(e,r,n,s){this.$window=s,this.$scope=n,this.$rootScope=e,this.$element=r,this.el=r[0],this.stickyParentElement=this.el.querySelector("[mqn-container]"),this.sequenceElement=this.el.querySelector("[sequence]"),this.chapter2Element=this.el.querySelector("[chapter-2]"),this.chapterElement=this.el.querySelector("[chapter]"),this.chapterElementHeight=0,this.loading=!1,this.progress=0,this.ev=aH.elementVisibility.inview(this.el,{rootMargin:"100px"}),this.wombatImage=new mi(1),this.readyForLoad(),n.$on("$destroy",()=>this.dispose())}readyForLoad(){this.domWatcher=new lH.DomWatcher,this.domWatcher.add({element:window,on:"scroll",callback:cn.func.debounce(()=>{this.onScroll()},24),runWhen:()=>this.ev.state().ready&&this.ev.state().inview,eventOptions:{passive:!0},id:"scroll"}),this.domWatcher.add({element:window,on:"smartResize",callback:this.onResize.bind(this),eventOptions:{passive:!0},id:"resize"});let e=cn.is.supportingWebp();this.sequenceSrcs=JSON.parse(this.el.getAttribute("data-sequence")),this.sequenceSrcs=this.sequenceSrcs.map((r,n)=>this.wombatImage.appendFifeParams(r,e)),this.sequenceSrcs=Zt.addFifeUrlParamsToUrls(this.sequenceSrcs),this.sequenceCanvas=new cH.WebGlImageSequence(this.sequenceElement,[{images:this.sequenceSrcs,when:()=>!0}],{cover:!0}),this.sequenceCanvas.load().then(()=>{this.loading=!1,this.el.classList.add("loaded"),this.sequenceCanvas.renderByProgress(this.rafProgress.currentProgress)}),this.cssVarInterpolator=new hH.CssVarInterpolate(this.el),this.cssVarInterpolator.renderOnlyWhenInview=!1,this.cssVarInterpolator.setInterpolations({interpolations:JSON.parse(this.el.getAttribute("data-sequence-interpolations"))}),this.rafProgress=new cn.RafProgress(r=>{this.onProgressUpdate(r)}),this.rafProgress.setCurrentProgress(this.getProgress()),this.ev.readyPromise.then(()=>{this.domWatcher.run("scroll"),this.domWatcher.run("resize")})}isMobile(){return window.innerWidth<768}getProgress(){return cn.dom.getElementScrolledPercent(this.stickyParentElement,window.innerHeight,-window.innerHeight*.2)}onScroll(){this.rafProgress.easeTo(this.getProgress(),.16,cn.EASE.linear)}onResize(){}onProgressUpdate(e){this.progress=e;let r=cn.mathf.childProgress(this.progress,.65,.99);this.sequenceCanvas.renderByProgress(r),this.cssVarInterpolator.update(this.progress)}dispose(){this.ev.dispose(),this.domWatcher.dispose(),this.sequenceCanvas.dispose()}};var yl={SUB:j.mqnCssName("mqn2-fp6"),PREVIOUS:j.mqnCssName("mqn2-fp7"),ACTIVE:j.mqnCssName("mqn2-fp8"),NEXT:j.mqnCssName("mqn2-fp9")},DJ=new Set([yl.PREVIOUS,yl.ACTIVE,yl.NEXT]),uH=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.rl_=se.getDestroyableInstance(),this.subs_=this.element_.querySelectorAll(`.${yl.SUB}`),this.activeIndex_=0,this.activeTime_=parseInt(ut(this.element_,"--active-time")),this.wordTransitionTime_=parseInt(ut(this.element_,"--word-transition-time")),this.widthTransitionTime_=parseInt(ut(this.element_,"--width-transition-time")),this.updateTimeout_=null,this.widthTimeout_=null,this.transitionTimeout_=null,this.init_(r)}init_(e){e.$on("$destroy",()=>this.dispose_()),this.rl_.measure(()=>{let r=this.element_.offsetWidth;this.rl_.mutate(()=>de(this.element_,"width",`${r}px`))}),this.update_()}updateWidth_(e,r){let n=this.subs_[e].offsetWidth,s=this.subs_[r].offsetWidth,o=this.activeTime_-this.widthTransitionTime_,a=n<=s?o+this.wordTransitionTime_*.5:o+this.wordTransitionTime_,l=()=>{de(this.element_,"width",`${s}px`)};this.widthTimeout_=setTimeout(()=>this.rl_.mutate(l),a)}update_(){this.rl_.measure(()=>{let e=this.activeIndex_;this.activeIndex_=Ei(this.activeIndex_+1,this.subs_.length);let r=Ei(this.activeIndex_+1,this.subs_.length);this.updateWidth_(e,this.activeIndex_),this.transitionTimeout_=setTimeout(()=>this.updateWords_(e,this.activeIndex_,r),this.activeTime_);let n=this.activeTime_+this.wordTransitionTime_;this.updateTimeout_=setTimeout(()=>this.update_(),n)})}updateWords_(e,r,n){this.rl_.mutate(()=>{this.subs_.forEach((s,o)=>{let a=new Set;o===e&&a.add(yl.PREVIOUS),o===r&&a.add(yl.ACTIVE),o===n&&a.add(yl.NEXT);let l=ea(DJ,a);Jr(l.values(),c=>s.classList.remove(c)),Jr(a.values(),c=>s.classList.add(c))})})}dispose_(){this.rl_.destroy(),clearTimeout(this.updateTimeout_),clearTimeout(this.widthTimeout_),clearTimeout(this.transitionTimeout_)}},fH=uH;function FJ(t){for(var e=t,r=0,n=0;e&&e!==document.body;){if(ut(e,"position")==="fixed")return new ke(r+e.offsetLeft,n+e.offsetTop);var s=ke.fromElementTransform(e);r+=e.offsetLeft+s.x-e.scrollLeft,n+=e.offsetTop+s.y-e.scrollTop,e=e.offsetParent}var o=Zi.getSingleton(this),a=o.getPosition().invert();return o.destroy(this),new ke(r+a.x,n+a.y)}function dH(t){return ut(t,"position")==="fixed"?ke.fromElementOffset(t):ke.add(ke.fromElementOffset(t),ke.fromElementTransform(t),FJ(t.offsetParent))}var NJ=600,Lx={CIRCLE:j.mqnCssName("mqn2-fpg"),CIRCLE_TRANSLATE:j.mqnCssName("mqn2-fq7")},pH=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.rl_=se.getDestroyableInstance(),this.ease_=new zi(.66,0,.06,.99),this.element_=e[0],this.lastUpdate_=+new Date,this.lastFrame_=this.lastUpdate_,this.lastPosition_=sa,this.motionRange_=new ce(0,NJ),this.circles_=this.element_.querySelectorAll(`.${Lx.CIRCLE}`),this.startPositions_=Ae.usingFunction(n=>ke.fromElementTransform(n.querySelector(`.${Lx.CIRCLE_TRANSLATE}`))),this.cursor_=Nv.getSingleton(this),this.init_(r)}init_(e){e.$on("$destroy",()=>this.dispose_()),this.update_()}update_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.update_());let e=Si(this.element_,"--final-circle-scale"),r=this.cursor_.getClient().getPosition(),n=!r.equals(this.lastPosition_),s=+new Date,o=n?s-this.lastFrame_:s-this.lastUpdate_;n&&(this.lastPosition_=r,this.lastUpdate_=this.lastFrame_,this.startPositions_.clear());let a=this.motionRange_.getValueAsPercent(o);this.circles_.forEach(l=>this.updateCircle_(l,r,e,a)),this.lastFrame_=s})}updateCircle_(e,r,n,s){let a=e.offsetWidth/2,l=dH(e).add(new ke(a,a)),c=a*(1-n)*1.025,h=a,f=r.subtract(l).clampLength(h).scale(1/h).scale(c),u=this.startPositions_.get(e),d=f.subtract(u).scale(s),v=u.add(d),p=e.querySelector(`.${Lx.CIRCLE_TRANSLATE}`);this.rl_.mutate(()=>{de(p,"transform",`translate(${v.getX()}px, ${v.getY()}px)`)})}dispose_(){this.rl_.destroy(),this.cursor_.destroy(this)}},mH=pH;var Dx=re(fa()),vH=re(yt()),qt=re(Ye()),Fx=re(ua()),yH=re(Et()),Nx=re(Vn()),kx=re(gH()),VJ=70,BJ=366,UJ=375,io={bezier:"0.05,0.2,0.5,1",desktop_end_offset_pixels:300,translate_amount:"30vh",translate_start:"0",translate_end:"1.2",translate_offset:100,translate_ease:"0.01,0.08,0.05,1",mobile_bezier:"1.8,0.8,2,1.8",mobile_end_offset_pixels:1e3},_H=class{static get $inject(){return["$scope","$element"]}constructor(e,r){this.el=r[0],this.elTop=0,this.lottieContainerElement=this.el.querySelector("[lottie-container]"),this.footerElement=this.el.querySelector("[footer]"),this.lottieContainerElementStyle,this.lottieFileLandscape=this.el.dataset.landscapePath,this.lottieFileLandscapeImagePath=this.el.dataset.landscapeImagePath,this.lottieFilePortrait=this.el.dataset.portraitPath,this.lottieFilePortraitImagePath=this.el.dataset.portraitImagePath,this.$scope=e,this.lottieLandscape,this.lottiePortrait,this.activeLottie,this.playedIntroAnimation=!1,this.targetFrame=70,this.easedPercent=0,this.linearPercent=0,this.translatePercent=0,this.secondaryTranslatePercent=0,this.containerTopMargin=0,this.containerBottomMargin=0,this.chapterHeight=0,this.raf=new qt.Raf(this.onRaf.bind(this)),this.elementVisibility,this.debugMode=!!kx.urlParams.getValue("sf-debug"),this.disable=!!kx.urlParams.getValue("sf-hero-disable"),!this.disable&&(this.isPortraitMode=qt.is.isPortrait(),this.domWatcher=new vH.DomWatcher,this.domWatcher.add({id:"resize",element:window,on:"smartResize",callback:qt.func.debounce(this.setGdnHeightAsCssVar.bind(this),300),eventOptions:{passive:!0}}),this.domWatcher.run("resize"),this.onResize(),this.loadLottie(),e.$on("$destroy",()=>this.dispose()))}setGdnHeightAsCssVar(){let e=document.querySelector("[global-header]"),r=document.querySelector("[pdp-bar]");qt.dom.setCssVariable(this.el,"--gdn-header",(e?e.offsetHeight:r?r.offsetHeight:0)+"px")}loadLottie(){return new Promise(e=>{this.activeLottie&&this.activeLottie.destroy(),this.activeLottie=null;let r;this.isPortraitMode?r=Dx.default.loadAnimation({container:this.el.querySelector("[lottie-container-portrait]"),assetsPath:this.lottieFilePortraitImagePath,renderer:"canvas",loop:!1,autoplay:!1,rendererSettings:{preserveAspectRatio:"xMidYMid slice"},path:this.lottieFilePortrait}):r=Dx.default.loadAnimation({container:this.el.querySelector("[lottie-container-landscape]"),assetsPath:this.lottieFileLandscapeImagePath,renderer:"canvas",loop:!1,autoplay:!1,rendererSettings:{scaleMode:"noScale",preserveAspectRatio:"xMidYMin slice"},path:this.lottieFileLandscape}),r.setSubframe(!1),r.addEventListener("loaded_images",()=>{this.playedIntroAnimation?(this.activeLottie=r,e()):this.introAnimation(r).then(()=>{this.playedIntroAnimation=!0,r.setSpeed(1),this.activeLottie=r,this.initPostIntroScrollAnimations(),e()})})})}introAnimation(e){return new Promise(r=>{this.percent=this.getPercent(),this.targetFrame=this.getFrame(this.percent),e.setSpeed(this.targetFrame/70),e.playSegments([0,this.targetFrame],!0),this.el.classList.add("animation-start"),e.addEventListener("complete",()=>{r()})})}initPostIntroScrollAnimations(){this.domWatcher.add({element:window,on:"smartResize",eventOptions:{passive:!0},callback:this.onResize.bind(this),id:"resize"}),this.elementVisibility=yH.elementVisibility.inview(this.el,{},(e,r)=>{r.isIntersecting?this.raf.start():this.raf.stop()}),this.elementVisibility.readyPromise.then(()=>{this.elementVisibility.state().inview&&this.raf.start()})}getPercent(){let e=qt.dom.getElementScrolledPercent(this.el,window.innerHeight,+io.desktop_end_offset_pixels);this.isPortraitMode&&(e=qt.dom.getElementScrolledPercent(this.el,window.innerHeight,+io.mobile_end_offset_pixels)),this.linearPercent=e,this.translatePercent=qt.dom.getElementScrolledPercent(this.el,window.innerHeight,+io.translate_offset),this.translatePercent=qt.mathf.childProgress(this.translatePercent,+io.translate_start,1);let r=io.translate_ease.replace(/^\s+|\s+$/g,"").split(",");this.translatePercent=qt.mathf.ease(0,1,this.translatePercent,Nx.CubicBezier.makeEasingFunction(r[0],r[1],r[2],r[3])),this.translatePercent=qt.mathf.mix(0,+io.translate_end,this.translatePercent);let n=io.bezier.replace(/^\s+|\s+$/g,"").split(",");return this.isPortraitMode&&(n=io.mobile_bezier.replace(/^\s+|\s+$/g,"").split(",")),qt.mathf.ease(0,1,e,Nx.CubicBezier.makeEasingFunction(n[0],n[1],n[2],n[3]))}getFrame(e){return qt.mathf.lerp(VJ,this.isPortraitMode?BJ:UJ,e)}onResize(){let e=this.isPortraitMode;if(this.isPortraitMode=qt.is.isPortrait(),e!==this.isPortraitMode){this.raf.stop(),this.loadLottie().then(()=>{this.onResize(),this.raf.start()});return}this.elTop=this.el.getBoundingClientRect().top+window.scrollY,this.lottieContainerElementStyle=qt.dom.getStyle(this.lottieContainerElement),this.chapterHeight=this.el.querySelector("[chapter]").offsetHeight;let r=qt.mathf.inverseLerp(200,1200,window.innerHeight);qt.dom.setCssVariables(this.el,{"--chapter-height":this.chapterHeight+"px","--device-render-size":qt.mathf.remap(.45,1,200,1200,window.innerHeight),"--landscape-render-margin-top":qt.mathf.lerp(200,450,r)*-1+"px","--landscape-render-margin-bottom":qt.mathf.lerp(200,600,r)*-1+"px"}),this.containerTopMargin=Fx.cssUnit.parse(this.lottieContainerElementStyle.marginTop).value,this.containerBottomMargin=Fx.cssUnit.parse(this.lottieContainerElementStyle.marginBottom).value,this.activeLottie&&this.activeLottie.resize(),this.targetFrame+=1,this.activeLottie&&this.activeLottie.goToAndStop(this.targetFrame,!0)}onRaf(){this.percent=this.getPercent(),this.targetFrame=this.getFrame(this.percent),this.activeLottie&&this.activeLottie.goToAndStop(this.targetFrame,!0),qt.dom.setCssVariable(this.el,"--translate",this.translatePercent),qt.dom.setCssVariable(this.el,"--translate-amount",io.translate_amount),this.debugMode&&console.log(this.raf.getCurrentFps())}dispose(){this.raf&&this.raf.dispose(),this.activeLottie&&this.activeLottie.destroy(),this.domWatcher&&this.domWatcher.dispose(),this.elementVisibility&&this.elementVisibility.dispose()}},bH=_H;function wH(t,e){return e===void 0&&(e=null),Qs(Array.from(t),function(r){return Math.abs(Sg(r,e))})}var SH=re(Ye()),EH=re(Ye()),ty=re(Md()),xH=re(Ye());var HJ=.5,hn={HEADER:j.mqnCssName("mqn2-fug"),ROOM:j.mqnCssName("mqn2-ful"),ROOM_ACTIVE:j.mqnCssName("mqn2-fut"),ROOM_END:j.mqnCssName("mqn2-g0r"),ROOM_SCROLLED:j.mqnCssName("mqn2-g0o"),ROOM_TRANSITION:j.mqnCssName("mqn2-g0s"),ROOM_TRANSITIONING:j.mqnCssName("mqn2-g0u"),SCROLL_AREA:j.mqnCssName("mqn2-fuj"),SCROLL_AREA_ROOMS:j.mqnCssName("mqn2-g0n"),WIPE_BACKGROUND:j.mqnCssName("mqn2-g0j")},ry=class{static get $inject(){return["$rootScope","$element","$scope"]}constructor(e,r,n){this.element_=r[0],this.rl_=se.getDestroyableInstance(),this.header_=this.element_.querySelector(`.${hn.HEADER}`),this.scrollArea_=this.element_.querySelector(`.${hn.SCROLL_AREA}`),this.scrolledRooms_=Array.from(this.element_.querySelectorAll(`.${hn.ROOM_SCROLLED}`)),this.endRoom_=this.element_.querySelector(`.${hn.ROOM_END}`),this.transitionRoom_=this.element_.querySelector(`.${hn.ROOM_TRANSITION}`),this.wipeBackground_=this.element_.querySelector(`.${hn.WIPE_BACKGROUND}`),this.scrolledRoom_=this.element_.querySelector(`.${hn.SCROLL_AREA_ROOMS} .${hn.ROOM}`),this.progressPerRoom_=1/(this.scrolledRooms_.length+1),this.roomProgressRanges_=Ae.usingFunction(s=>new ce(s*this.progressPerRoom_,(s+1+HJ)*this.progressPerRoom_)),this.roomColors_=Ae.usingFunction(s=>s.getAttribute("data-background-color")),this.rafProgress=new SH.RafProgress,this.rafProgress.setPrecision(5),this.rafProgress.watch(EH.func.runOnceOnChange(this.updateRafProgressValues_.bind(this))),this.lastActiveRoom_=null,this.lastWipeDistance_=null,this.offsetHeightCache_=new Map,this.init_(),n.$on("$destroy",()=>this.dispose_())}init_(){this.render_()}updateRafProgressValues_(e){this.rl_.mutate(()=>{de(this.element_,"--end-grid-transition-progress",`${e}`)})}render_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.render_()),this.updateWipeProgress_(),this.updateActiveRoom_(),this.updateHeaderHeight_(),this.updateLastRoomHeight_(),this.updateRoomsScrollAreaHeight_(),this.updateBackgroundColor_()})}updateWipeProgress_(){this.rl_.measure(()=>{let e=wg(this.endRoom_,this.wipeBackground_);if(this.lastWipeDistance_===e)return;this.lastWipeDistance_=e;let r=new ce(0,1).clamp(e/this.endRoom_.offsetHeight);this.rafProgress.easeTo(r,.08,xH.EASE.Linear),this.rl_.mutate(()=>{e>0?(de(this.element_,"--wipe-clip-distance",`${e}px`),this.transitionRoom_.classList.add(hn.ROOM_TRANSITIONING)):(de(this.element_,"--wipe-clip-distance","0px"),this.transitionRoom_.classList.remove(hn.ROOM_TRANSITIONING))})})}updateBackgroundColor_(){let e=Si(this.wipeBackground_,"--color-progress"),r;if(e>0){let n={r:255,g:255,b:255,a:1},s=n,o=n,a=0;for(let m=0;m<this.scrolledRooms_.length;m++){let d=this.roomProgressRanges_.get(m);if(e>0&&(d.contains(e)||m===this.scrolledRooms_.length-1&&e>=d.getMax())){m>0&&(s=ty.color.cssToRgba(this.roomColors_.get(this.scrolledRooms_[m-1]))),a=d.getValueAsPercent(e),o=ty.color.cssToRgba(this.roomColors_.get(this.scrolledRooms_[m]));break}}let l=1-a,c=ce.fromUnorderedValues(s.r,o.r),h=ce.fromUnorderedValues(s.g,o.g),f=ce.fromUnorderedValues(s.b,o.b),u={r:s.r<o.r?c.getPercentAsValue(a):c.getPercentAsValue(l),g:s.g<o.g?h.getPercentAsValue(a):h.getPercentAsValue(l),b:s.b<o.b?f.getPercentAsValue(a):f.getPercentAsValue(l),a:1};r=ty.color.rgbaToCss(u)}else r="white";this.rl_.mutate(()=>de(this.wipeBackground_,"background-color",r))}updateActiveRoom_(){this.rl_.measure(()=>{let e=wH(this.scrolledRooms_);this.lastActiveRoom_!==e&&(this.lastActiveRoom_=e,this.rl_.mutate(()=>{e.classList.add(hn.ROOM_ACTIVE),this.scrolledRooms_.filter(r=>r!==e).forEach(r=>r.classList.remove(hn.ROOM_ACTIVE))}))})}updateHeaderHeight_(){this.rl_.measure(()=>{let e=this.header_.offsetHeight;this.offsetHeightCache_.get(this.header_)!==e&&(this.offsetHeightCache_.set(this.header_,e),this.rl_.mutate(()=>{de(this.element_,"--r2r-header-height",`${e}px`)}))})}updateRoomsScrollAreaHeight_(){this.rl_.measure(()=>{let e=this.scrollArea_.offsetHeight;this.offsetHeightCache_.get(this.scrollArea_)!==e&&(this.offsetHeightCache_.set(this.scrollArea_,e),this.rl_.mutate(()=>{de(this.element_,"--r2r-scroll-area-height",`${e}px`)}))})}updateLastRoomHeight_(){this.rl_.measure(()=>{let e=this.scrolledRoom_.offsetHeight;this.offsetHeightCache_.get(this.scrolledRoom_)!==e&&(this.offsetHeightCache_.set(this.scrolledRoom_,e),this.rl_.mutate(()=>{de(this.element_,"--r2r-room-height",`${e}px`)}))})}dispose_(){this.rl_.destroy()}};function zh(t,e,r){r?t.classList.add(e):t.classList.remove(e)}var TH=.1,qJ=new ce(0,.5-TH/2),zJ=new ce(.5+TH/2,1),WJ=new ce(.975,1),GJ=.5,$J=new zi(.45,0,.55,1),Zr={ROOM_ACTIVE:j.mqnCssName("mqn2-fut"),ELEVATOR:j.mqnCssName("mqn2-fuk"),CAROUSEL:j.mqnCssName("mqn2-fuo"),CAROUSEL_ACTIVE:j.mqnCssName("mqn2-fuu"),CAROUSEL_VISIBLE:j.mqnCssName("mqn2-fuy"),END_VIDEO:j.mqnCssName("mqn2-fuq"),SCROLL_AREA:j.mqnCssName("mqn2-fuj"),SCROLL_AREA_INACTIVE:j.mqnCssName("mqn2-fux"),ROOM:j.mqnCssName("mqn2-ful"),CURTAIN:j.mqnCssName("mqn2-fuw"),END_VIDEO_LOCKED:j.mqnCssName("mqn2-fwd"),CAROUSEL_CONTAINER:j.mqnCssName("mqn2-fun"),CAROUSEL_SCROLLER:j.mqnCssName("mqn2-fup")},iy=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.rl_=se.getDestroyableInstance(),r.$on("$destroy",()=>this.dispose_()),this.element_=e[0],this.scroll_=Zi.getSingleton(this),this.firstRoomEl_=this.element_.querySelector(`.${Zr.ELEVATOR} :first-child`),this.scrollArea_=this.element_.querySelector(`.${Zr.SCROLL_AREA}`),this.elevator_=this.element_.querySelector(`.${Zr.ELEVATOR}`),this.carousel_=this.element_.querySelector(`.${Zr.CAROUSEL}`),this.curtain_=this.element_.querySelector(`.${Zr.CURTAIN}`),this.carouselContainer_=this.element_.querySelector(`.${Zr.CAROUSEL_CONTAINER}`),this.carouselScroller_=this.element_.querySelector(`.${Zr.CAROUSEL_SCROLLER}`),this.rooms_=Array.from(this.element_.querySelectorAll(`.${Zr.ROOM}`)),this.progressPerRoom_=1/(this.rooms_.length+1),this.roomProgressRanges_=Ae.usingFunction(n=>new ce(n*this.progressPerRoom_,(n+1+GJ)*this.progressPerRoom_)),this.roomColors_=Ae.usingFunction(n=>n.getAttribute("data-background-color")),this.scaleToCarouselRange_=new ce(1-this.progressPerRoom_*.9,1),this.fadeToCarouselRange_=new ce(1-this.progressPerRoom_*.75,1-this.progressPerRoom_*.25),this.firstCarouselVideo_=this.element_.querySelector(`.${Zr.END_VIDEO}:nth-child(2)`),this.lastScrolledVideo_=this.elevator_.lastChild,this.endVideos_=Array.from(this.element_.querySelectorAll(`.${Zr.END_VIDEO}`)),this.finalEndVideo_=this.element_.querySelector(`.${Zr.END_VIDEO}:last-child`),this.lastProgress_=-1,this.lastScroll_=-1,this.lastCarouselScroll_=-1,this.lastTransitionScale_=-1,this.renderFix=new oi,this.firstCarouselVideo_&&this.endVideos_.length&&this.finalEndVideo_&&this.rooms_.length&&this.firstRoomEl_&&this.render_()}updateDimensions_(){this.rl_.measure(()=>{let e=this.firstCarouselVideo_.offsetWidth,r=this.lastScrolledVideo_.offsetWidth,n=e/r;this.lastTransitionScale_!==n&&(this.rl_.mutate(()=>{de(this.element_,"--transition-scale",`${e/r}`)}),this.lastTransitionScale_=n)})}render_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.render_()),!(window.innerHeight<window.innerWidth)&&(this.updateDimensions_(),this.updateProgressValues_(),this.updateCarouselScroll_())})}updateCarouselScroll_(){let e=this.scroll_.getPosition().getY(),r=this.carouselScroller_.scrollLeft,n=this.carouselContainer_.offsetHeight-this.elevator_.offsetHeight*4,s=this.elevator_.offsetHeight-this.carouselScroller_.offsetHeight,o=n+s,a=new ce(0,o),l=(ar(this.carouselContainer_)+this.carousel_.offsetHeight*3)*-1,c=a.getValueAsPercent(l),h=this.carouselScroller_.scrollWidth-this.carouselScroller_.offsetWidth,f=new ce(0,h),u=f.getValueAsPercent(r);if(Math.abs(this.lastScroll_-e)>1){let m=f.getPercentAsValue(c);this.lastScroll_=e,this.lastCarouselScroll_=m,this.rl_.mutate(()=>{this.carouselScroller_.scrollLeft=m,de(this.carouselScroller_,"--carousel-scroll-x",`${m}px`)})}else if(Math.abs(this.lastCarouselScroll_-r)>1){this.lastCarouselScroll_=r;let m=a.getPercentAsValue(u),d=Math.floor(m-l);this.scrollArea_!==0&&this.rl_.mutate(()=>{Tt.scrollTop+=d,de(this.carouselScroller_,"--carousel-scroll-x",`${r}px`)}),this.lastScroll_=e+d,this.lastCarouselScroll_=r}}updateProgressValues_(){let r=this.scrollArea_.offsetHeight-this.elevator_.offsetHeight-window.innerHeight*.1,n=new ce(0,r),s=ar(this.scrollArea_),o=n.getValueAsPercent(-1*s);o!==this.lastProgress_&&(this.lastProgress_=o,this.updateRooms_(o),this.updateBackgroundColor_(o),this.updateTransitionValues_(o))}updateRooms_(e){for(let r=0;r<this.rooms_.length;r++){let s=this.roomProgressRanges_.get(r).getValueAsPercent(e),o=$J.getAdjustedPercent(qJ.getValueAsPercent(s)),a=zJ.getValueAsPercent(s),l=WJ.getValueAsPercent(s),c=this.rooms_[r];this.rl_.mutate(()=>{de(c,"--room-in-progress",`${o+1e-6}`),de(c,"--room-out-progress",`${a}`),de(c,"--room-fade-progress",`${l}`),zh(c,Zr.ROOM_ACTIVE,o>=.9)})}}updateBackgroundColor_(e){let r="transparent";for(let n=0;n<this.rooms_.length;n++){let s=this.roomProgressRanges_.get(n);e>0&&(s.contains(e)||n===this.rooms_.length-1&&e>=s.getMax())&&(r=this.roomColors_.get(this.rooms_[n]))}this.rl_.mutate(()=>de(this.curtain_,"background-color",r))}updateTransitionValues_(e){let r=this.scaleToCarouselRange_.getValueAsPercent(e),n=this.fadeToCarouselRange_.getValueAsPercent(e),s=this.elevator_.offsetHeight,a=Si(this.elevator_,"--gdn-header-no-unit")+(s-this.finalEndVideo_.offsetHeight)/2,l=1-a/window.innerHeight;this.rl_.mutate(()=>{de(this.element_,"--scale-to-carousel",`${r}`),de(this.element_,"--fade-to-carousel",`${n}`),zh(this.carousel_,Zr.CAROUSEL_ACTIVE,e===1),zh(this.scrollArea_,Zr.SCROLL_AREA_INACTIVE,r>0),zh(this.carousel_,Zr.CAROUSEL_VISIBLE,r>0),this.endVideos_.forEach(c=>zh(c,Zr.END_VIDEO_LOCKED,r>=l))})}dispose_(){this.rl_.destroy(),this.scroll_.destroy(this),this.renderFix.dispose()}};var Vx=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.toggledCategories_={}}init(e){e.initialValue&&(this.toggledCategories_[e.initialValue]=!0)}toggle(e,r,n){r===void 0&&(r=!this.toggledCategories_[e]),n&&n.closeOthers&&(this.toggledCategories_={}),this.toggledCategories_[e]=r}isToggled(e){return Boolean(this.toggledCategories_[e])}};var vd=re(Et());var AH={CROSSFADE_SEQUENCE:j.mqnCssName("mqn2-g6c"),CROSSFADE_FRAME:j.mqnCssName("mqn2-g6d")},Bx="[mqn2-photo-pair-secondary]",jJ=`${Bx} video`,YJ=`${Bx} .${AH.CROSSFADE_SEQUENCE}`,MH=`${Bx} input[type="range"]`,CH=class{constructor(e,r){this.rl_=se.getDestroyableInstance(),this.videos_=r,this.videoEvs=[],this.slider_=e.querySelector(MH),this.sliderRange_=this.slider_&&ce.fromRangeInput(this.slider_),this.init_()}init_(){this.videos_.forEach(e=>{this.videoEvs.push(vd.elementVisibility.inview(e,{threshold:.9},(r,n)=>{n.isIntersecting&&r.play().then(()=>{}).catch(o=>{})})),this.videoEvs.push(vd.elementVisibility.inview(e,{},(r,n)=>{n.isIntersecting||(r.currentTime=0,r.pause())}))}),this.loop_()}getVisibleVideo_(){return this.videos_.find(e=>_t(e,!0))}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_()),this.updateSlider_()})}updateSlider_(){this.rl_.measure(()=>{let e=this.getVisibleVideo_();if(!e||!this.slider_)return;let r=e.currentTime/e.duration,n=this.sliderRange_.getPercentAsInt(r);this.rl_.mutate(()=>this.slider_.value=n)})}dispose_(){this.videoEvs.forEach(e=>e.dispose()),this.rl_.destroy()}},PH=class{constructor(e,r){this.rl_=se.getDestroyableInstance(),this.startTime_=null,this.durations_=Ae.usingFunction(n=>n.dataset.duration),this.sequences_=r,this.sequenceEvs_=[],this.slider_=e.querySelector(MH),this.sliderRange_=this.slider_?new ce.fromRangeInput(this.slider_):null,this.stoppedIntro_=!1,this.frames_=Ae.usingFunction(n=>Array.from(n.querySelectorAll(`.${AH.CROSSFADE_FRAME}`))),this.init_()}init_(){this.sequences_.forEach(e=>{this.sequenceEvs_.push(vd.elementVisibility.inview(e,{threshold:.9},(r,n)=>{n.isIntersecting&&(this.startTime_=performance.now())})),this.sequenceEvs_.push(vd.elementVisibility.inview(e,{},(r,n)=>{n.isIntersecting||(this.startTime_=null)}))}),this.sliderInteractionHandler_=()=>this.handleSliderInteraction_(),this.slider_.addEventListener("mousedown",this.sliderInteractionHandler_),this.slider_.addEventListener("touchstart",this.sliderInteractionHandler_),this.slider_.addEventListener("keydown",this.sliderInteractionHandler_),this.loop_()}handleSliderInteraction_(){this.stoppedIntro_=!0,this.slider_.removeEventListener("mousedown",this.sliderInteractionHandler_),this.slider_.removeEventListener("touchstart",this.sliderInteractionHandler_),this.slider_.removeEventListener("keydown",this.sliderInteractionHandler_)}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_()),this.updateFrames_(),this.updateSlider_()})}getProgress_(){if(this.stoppedIntro_)return this.slider_.value/this.sliderRange_.getMax();{let e=this.durations_.get(this.getDisplayedSequence_());return new ce(this.startTime_,this.startTime_+e*1e3).getValueAsPercent(performance.now())}}getDisplayedSequence_(){return this.sequences_.find(e=>_t(e))}updateFrames_(){this.rl_.measure(()=>{let e=this.getProgress_(),r=this.getDisplayedSequence_(),n=this.frames_.get(r),o=new ce(0,n.length-1).getPercentAsValue(e),a=Math.floor(o)+1,l=o-Math.floor(o);this.rl_.mutate(()=>{n.forEach((c,h)=>{h===a?de(c,"opacity",`${l}`):de(c,"opacity",h<=a?"1":"0")})})})}updateSlider_(){!this.slider_||this.stoppedIntro_||this.rl_.measure(()=>{let e=this.getProgress_(),r=this.sliderRange_.getPercentAsInt(e);this.rl_.mutate(()=>this.slider_.value=r)})}dispose(){this.rl_.destroy(),this.sequenceEvs_.forEach(e=>e.dispose()),this.stoppedIntro_||(this.slider_.removeEventListener("mousedown",this.handleSliderInteraction_),this.slider_.removeEventListener("keydown",this.handleSliderInteraction_))}},IH=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.video_=null,this.crossfadeSequence_=null,r.$on("$destroy",()=>this.dispose_()),this.init_()}init_(){let e=Array.from(this.element_.querySelectorAll(jJ));e.length&&(this.video_=new CH(this.element_,e));let r=Array.from(this.element_.querySelectorAll(YJ));r.length&&(this.crossfadeSequence_=new PH(this.element_,r))}dispose_(){this.video_&&this.video_.dispose_(),this.crossfadeSequence_&&this.crossfadeSequence_.dispose()}},RH=IH;var LH=class{static get $inject(){return["$scope","$element"]}constructor(e,r){this.element_=r[0];let n=this.element_.querySelector("[mqn-tldr-tout-lottie-icon]");this.lottieCtrl_=new Yd(e,angular.element(n))}setHover(e){!this.lottieCtrl_.lottie||(this.lottieCtrl_.lottie.loop=e,e&&this.lottieCtrl_.lottie.play())}},OH=LH;var XJ={LOCKED:j.mqnCssName("mqn2-foa")},DH=class{static get $inject(){return["$scope","$element"]}constructor(e,r){this.element_=r[0],this.rl_=se.getDestroyableInstance(),this.videos_=Array.from(this.element_.querySelectorAll("video")),this.bgProgress_=0,this.scrollHandler_=()=>{this.videos_.forEach(n=>{n.readyState>=3?n.play():n.addEventListener("canplay",()=>n.play())}),this.maxLoop_(),window.removeEventListener("scroll",this.scrollHandler_)},e.$on("destroy",()=>this.dispose_())}init(){this.playOnFirstScroll_()}playOnFirstScroll_(){window.addEventListener("scroll",this.scrollHandler_)}maxLoop_(){this.rl_.measure(()=>{let e=this.videos_.find(s=>_t(s,!0)),r=e&&e.readyState>=3?e.currentTime/e.duration:0,n=parseFloat(ut(this.element_,"--scroll-progress"));this.bgProgress_=Math.max(r>=n?new ce(n,r).getPercentAsValue(r):n,this.bgProgress_),this.bgProgress_===1?this.rl_.mutate(()=>this.element_.classList.add(XJ.LOCKED)):this.rl_.cleanup(()=>this.maxLoop_()),this.rl_.mutate(()=>de(this.element_,"--video-progress",`${r}`))})}dispose_(){this.rl_.destroy(),window.removeEventListener("scroll",this.scrollHandler_)}},FH=DH;var NH=re(Ye()),kH=re(yt()),VH=re(Et());var Ux=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.ev=VH.elementVisibility.inview(this.el,{}),this.gallery=this.el.querySelector("[card-snap-gallery]"),this.galleryItems=Array.from(this.gallery.querySelectorAll("[card-snap-gallery-item]")),this.index=0,this.itemPositions=[],this.domWatcher=new kH.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:()=>this.onWindowResize()}),this.domWatcher.add({element:this.gallery,on:"scroll",callback:()=>this.onGalleryScroll()}),r.$on("$destroy",()=>this.dispose_()),this.onWindowResize()}onWindowResize(){this.itemPositions=[],this.galleryItems.forEach((e,r)=>{let n=this.gallery.scrollLeft-this.gallery.offsetLeft,o=e.getBoundingClientRect().left+n,a=e.offsetWidth,l=this.gallery.offsetWidth;this.itemPositions.push({el:e,x:o,centerX:o-(l*.5-a*.5),width:a})}),this.goTo(0)}onGalleryScroll(){let e=this.gallery.scrollLeft;for(let r=this.itemPositions.length-1;r>=0;r--){let s=this.itemPositions[r].x;if(e>=s){this.index=r;break}}this.$scope.$$phase||this.$scope.$apply()}goTo(e){e>=this.galleryItems.length&&(e=this.galleryItems.length-1),this.gallery.scroll({left:this.itemPositions[e].centerX,behavior:"smooth"}),NH.dom.playAllVideosInElement(this.galleryItems[e]),this.ev.state().inview&&Mh(this.el,"tab",this.index)}dispose_(){this.domWatcher.dispose(),this.ev.dispose()}};var BH=re(vs()),UH=re(Gi()),HH=re(yt());var ZJ={OPTIONS_BAR:j.mqnCssName("mqn2-al3")},Hx=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.domWatcher=new HH.DomWatcher,this.domWatcher.add({element:window,on:"smartResize",callback:UH.func.debounce(()=>this.onResize(),300),eventOptions:{passive:!0}}),this.updateCssVars(),r.$on("$destroy",()=>this.dispose())}onResize(){this.updateCssVars()}updateCssVars(){let e=this.el.querySelector(`.${ZJ.OPTIONS_BAR}`);e&&BH.dom.setCssVariable(this.el,"--options-bar-height",`${e.offsetHeight}px`)}dispose(){this.domWatcher.dispose(),this.domWatcher=null}};var qH=re(Et());var no={QUERIES:j.mqnCssName("mqn2-gdv"),QUERY:j.mqnCssName("mqn2-gdw"),QUERY_ANIMATED:j.mqnCssName("mqn2-ggr"),QUERY_IN:j.mqnCssName("mqn2-ggs"),QUERY_OUT:j.mqnCssName("mqn2-ggt")},ny=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r;let n=this.el.querySelector(`.${no.QUERIES}`);this.looper=new WH(n),r.$on("$destroy",()=>this.dispose())}dispose(){this.looper.dispose()}},zH=1e3,QJ=1500,WH=class{constructor(e){this.el=e,this.currentIndex=-1,this.started=!1,this.queries=Array.from(this.el.querySelectorAll(`.${no.QUERY}`)).map(r=>new GH(r)),this.ev=qH.elementVisibility.inview(this.el,{threshold:1},(r,n,s)=>{n.isIntersecting&&this.start()})}start(){this.started||(this.started=!0,this.playNext())}playNext(){if(!this.started)return;let e=this.currentIndex;e!=-1&&this.queries[e].animateOut().then(()=>{this.queries[e].reset()});let r=this.currentIndex+1;r>=this.queries.length&&(r=0),this.queries[r].animateIn().then(()=>this.wait(QJ)).then(()=>{this.playNext()}),this.currentIndex=r}stop(){!this.started||(this.started=!1,this.currentIndex!=-1&&this.queries[this.currentIndex].animateOut().then(()=>{this.currentIndex=-1}))}reset(){this.queries.forEach(e=>{e.reset()}),this.currentIndex=-1}wait(e){return new Promise((r,n)=>{window.setTimeout(()=>r(),e)})}dispose(){this.stop(),this.ev.dispose()}},GH=class{constructor(e){this.el=e}animateIn(){return new Promise(e=>{this.el.classList.add(no.QUERY_ANIMATED),this.el.classList.add(no.QUERY_IN),window.setTimeout(()=>e(),zH)})}animateOut(){return new Promise(e=>{this.el.classList.add(no.QUERY_ANIMATED),this.el.classList.add(no.QUERY_OUT),window.setTimeout(()=>{this.reset(),e()},zH)})}reset(){this.el.classList.remove(no.QUERY_ANIMATED),this.el.classList.remove(no.QUERY_IN),this.el.classList.remove(no.QUERY_OUT)}};var sy=re(vs()),XH=re(Et()),ZH=re(yt()),QH=re(xl()),KH=re(YH()),JH=re(Gi()),eq=re(fi()),tq=re(Ci()),zx=re(ui()),rq=re(Vn()),iq=re(ha());var nq=re(fa());var yd={CONTENT:j.mqnCssName("mqn2-gut"),CONTENT_HIDDEN:j.mqnCssName("mqn2-gv2"),LOTTIE_CANVAS:j.mqnCssName("mqn2-guv"),LOTTIE_CANVAS_DESKTOP:j.mqnCssName("mqn2-guw"),LOTTIE_CANVAS_MOBILE:j.mqnCssName("mqn2-gux")},Wx=80,tee=1150,Gx=class{static get $inject(){return["$scope","$element"]}constructor(e,r){this.el=r[0],this.$scope=e,this.ready=!1,this.domWatcher=new ZH.DomWatcher,this.ev=XH.elementVisibility.inview(this.el,{rootMargin:"100px"}),this.raf=new iq.Raf(()=>this.update()),this.rl=se.getDestroyableInstance(),this.lottieDesktop,this.lottieMobile,this.progress=0,this.targetProgress=0,this.numFrames,this.introIsComplete=!1,this.config={bezier:"0.01,0.30,0.95,0.70",translateAmount:"42vh",easeAmount:"1"},this.status={},this.bezier,this.translateAmount,this.updateConfig(),this.renderFix=new oi,e.$on("$destroy",()=>this.dispose())}updateConfig(e){this.bezier=this.createEasingFunction(this.config.bezier),this.translateAmount=this.parsePxValue(this.config.translateAmount),this.easeAmount=+this.config.easeAmount,e&&(this.onResize(),this.update())}parsePxValue(e){let r=window.parseInt(e);return e.endsWith("vh")?r/100*window.innerHeight:e.endsWith("vw")?r/100*window.innerWidth:r}init(){this.updateCssVars(),this.cssVarInterpolate=new tq.CssVarInterpolate(this.el,{interpolations:this.getInterpolations()}),this.lottieDesktop=this.loadLottiePlayer(this.el.querySelector(`.${yd.LOTTIE_CANVAS_DESKTOP}`)),this.lottieMobile=this.loadLottiePlayer(this.el.querySelector(`.${yd.LOTTIE_CANVAS_MOBILE}`));let e=window.scrollY==0,r=oy()?this.lottieMobile:this.lottieDesktop;r.init().then(()=>{this.ready=!0,this.$scope.$$phase||this.$scope.$apply(),e?r.playFrames(Wx,tee).then(()=>{this.introIsComplete=!0,this.update()}):(this.introIsComplete=!0,this.update())}),this.domWatcher.add({element:window,on:"resize",callback:JH.func.debounce(()=>this.onResize(),300),eventOptions:{passive:!0}}),this.domWatcher.add({element:window,on:"scroll",callback:()=>this.onScroll(),eventOptions:{passive:!0}}),this.raf.runWhen(()=>this.ev.state().inview),this.ev.readyPromise.then(()=>{this.raf.start()})}loadLottiePlayer(e){let r=JSON.parse(e.getAttribute("data-lottie"));return r.onFrameChange=n=>{this.status.frame=n,this.$scope.$$phase||this.$scope.$apply()},new sq(e,r)}onScroll(){this.targetProgress=this.getProgress()}onResize(){this.updateCssVars(),this.cssVarInterpolate.setInterpolations({interpolations:this.getInterpolations()}),this.cssVarInterpolate.flush(),oy()&&!this.lottieMobile.initialized?(this.progress=0,this.lottieMobile.init().then(()=>this.update())):!oy()&&!this.lottieDesktop.initialized?(this.progress=0,this.lottieDesktop.init().then(()=>this.update())):this.update()}updateCssVars(){let e=this.el.querySelector(`.${yd.CONTENT}`);sy.dom.setCssVariable(this.el,"--content-height",`${e.offsetHeight}px`),sy.dom.setCssVariable(this.el,"--translate-amount",`${this.translateAmount}px`)}update(){if(this.progress=zx.mathf.lerp(this.progress,this.targetProgress,this.easeAmount),this.cssVarInterpolate.update(this.progress),this.el.classList.toggle(yd.CONTENT_HIDDEN,this.progress>=1),this.introIsComplete){let e=oy()?this.lottieMobile:this.lottieDesktop;if(!e.initialized)return;let r=zx.mathf.ease(0,1,this.progress,this.bezier),n=(e.numFrames-Wx)*r+Wx;e.goToFrame(n)}}getProgress(){let e=window.innerHeight-yn(),r=0;return sy.dom.getElementScrolledPercent(this.el,e,r)}createEasingFunction(e){let r=e.replace(/^\s+|\s+$/g,"").split(",");return rq.CubicBezier.makeEasingFunction(+r[0],+r[1],+r[2],+r[3])}getInterpolations(){let e=this.el.querySelector(`.${yd.CONTENT}`),r=-1*(e.getBoundingClientRect().top-document.body.getBoundingClientRect().top+e.offsetHeight);return[{id:"--content-y",progress:[{from:0,to:1,start:"0px",end:`${r*.5}px`}]},{id:"--translate",progress:[{from:0,to:1,start:0,end:1}]}]}dispose(){this.renderFix.dispose(),this.rl.destroy(),this.raf.dispose(),this.ev.dispose(),this.lottieDesktop.dispose(),this.lottieMobile.dispose()}},sq=class{constructor(e,r){this.el=e,this.options=r,this.initialized=!1,this.lottie=null,this.numFrames=0,this.currentFrame=0}init(){return new Promise((e,r)=>{this.lottie=nq.default.loadAnimation({container:this.el,assetsPath:this.options.assets,autoplay:!1,renderer:"canvas",rendererSettings:{preserveAspectRatio:"xMidYMid meet"},path:this.options.data}),this.lottie.addEventListener("DOMLoaded",()=>{this.numFrames=this.lottie.getDuration(!0),this.lottie.setSubframe(!1),this.initialized=!0,e()})})}playFrames(e,r){let s=1/60,o=new KH.Easer({duration:r,delay:s,easeFunction:QH.EASE.linear});return o.onUpdate((a,l)=>{let c=a*e;this.goToFrame(c)}),o.start()}goToFrame(e){e!==this.currentFrame&&requestAnimationFrame(()=>{this.currentFrame=e,this.lottie.goToAndStop(e,!0),this.options.onFrameChange&&this.options.onFrameChange(e)})}dispose(){this.lottie&&this.lottie.destroy()}};function oy(){return eq.is.isPortrait()}var aa={TAB_BAR_ITEM:j.mqnCssName("mqn2-aef"),TAB_BAR_ITEM_ACTIVE:j.mqnCssName("mqn2-aeg"),TAB_CONTENT_ITEM:j.mqnCssName("mqn2-gbh")},$x=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.el=e[0],this.$scope=r,this.numSteps=3,this.index=0,this.keyPressHandler=null}init(e){e.numSteps&&(this.numSteps=e.numSteps),this.keyPressHandler=r=>this.onKeyPress(r),this.el.addEventListener("keydown",this.keyPressHandler)}onKeyPress(e){if(e.key==="ArrowLeft"){let r=this.index-1;r>=0&&(this.goToIndex(r),this.getTabEl(this.index).focus())}else if(e.key==="ArrowRight"){let r=this.index+1;r<this.numSteps&&(this.goToIndex(r),this.getTabEl(this.index).focus())}else e.key==="Tab"&&this.handleTab(e)}handleTab(e){if(!e.shiftKey&&e.target.classList.contains(aa.TAB_BAR_ITEM_ACTIVE)){let n=this.getContentEl(this.index),s=this.getFocusableEls(n);s.length>0&&(e.preventDefault(),s[0].focus());return}if(e.shiftKey&&e.target.classList.contains(aa.TAB_BAR_ITEM)&&!e.target.classList.contains(aa.TAB_BAR_ITEM_ACTIVE)){if(+e.target.getAttribute("data-tab-index")-1===this.index){let o=this.getContentEl(this.index),a=this.getFocusableEls(o);a.length>0&&(e.preventDefault(),a[a.length-1].focus())}return}if(!e.shiftKey&&e.target.classList.contains(aa.TAB_BAR_ITEM)&&!e.target.classList.contains(aa.TAB_BAR_ITEM_ACTIVE)){if(+e.target.getAttribute("data-tab-index")===this.numSteps-1){let s=this.getContentEl(this.index),o=this.getFocusableEls(s);o.forEach(a=>a.setAttribute("tabindex","-1")),window.setTimeout(()=>{o.forEach(a=>a.removeAttribute("tabindex"))},100)}return}let r=e.target.closest(`.${aa.TAB_CONTENT_ITEM}`);if(r){let n=this.getFocusableEls(r);if(e.shiftKey){if(!n.length||n[0]===e.target){let s=this.getTabEl(this.index);s&&(e.preventDefault(),s.focus())}}else if(!n.length||n[n.length-1]===e.target){let s=this.getTabEl(this.index+1);s&&(e.preventDefault(),s.focus())}}}getFocusableEls(e){return Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))}getTabEl(e){return this.el.querySelector(`.${aa.TAB_BAR_ITEM}[data-tab-index="${e}"]`)}getContentEl(e){return this.el.querySelector(`.${aa.TAB_CONTENT_ITEM}[data-tab-index="${e}"]`)}goToIndex(e){e<0?e=this.numSteps-1:e>=this.numSteps&&(e=0),this.index=e;let r=this.getTabEl(this.index);r&&r.focus(),this.$scope.$$phase||this.$scope.$apply()}prev(){this.goToIndex(this.index-1)}next(){this.goToIndex(this.index+1)}dispose(){this.keyPressHandler&&(this.el.removeEventListener("keydown",this.keyPressHandler),this.keyPressHandler=null)}};var oq=re(Ye());var ay={COPY:j.mqnCssName("mqn2-g9n"),OFFER:j.mqnCssName("mqn2-g9p"),ELEVATOR:j.mqnCssName("mqn2-g9m"),FRAME:j.mqnCssName("mqn2-aaa"),ONE_SCREEN:j.mqnCssName("mqn2-gv9"),THREE_SCREENS:j.mqnCssName("mqn2-gva"),NETFLIX_THREE_SCREENS:j.mqnCssName("mqn2-gvb"),NETFLIX_ONE_SCREEN:j.mqnCssName("mqn2-gv8")},ly=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.rl_=se.getDestroyableInstance(),this.copyElements_=Array.from(this.element_.querySelectorAll(`.${ay.COPY}`)),this.parentCopyElement_=new Map,this.copyElements_.forEach(n=>{let s=Array.from(n.querySelectorAll("*"));this.parentCopyElement_.set(n,n),s.forEach(o=>{this.parentCopyElement_.set(o,n)})}),this.allFocusableElements_=new Set(Array.from(this.parentCopyElement_.keys())),this.desktopTotalFrames_=+this.element_.getAttribute("data-desktop-total-frames"),this.mobileTotalFrames_=+this.element_.getAttribute("data-mobile-total-frames"),this.desktopIntroFrames_=+this.element_.getAttribute("data-desktop-intro-frames"),this.mobileIntroFrames_=+this.element_.getAttribute("data-mobile-intro-frames"),this.imageLabels_=JSON.parse(this.element_.getAttribute("data-image-labels")),this.validFilenames_=new Set(Array.from(Object.keys(this.imageLabels_))),this.filenames_=Ae.usingFunction(n=>n.getAttribute("href").split("/").slice(-1)[0]),this.lastNode_=null,this.domWatcher=new oq.DomWatcher,r.$on("$destroy",()=>this.dispose_()),this.init_()}init_(){this.copyElements_.forEach(e=>{this.domWatcher.add({element:e,on:"mousedown",callback:()=>{this.mouseDown=!0}}),this.domWatcher.add({element:e,on:"mouseup",callback:()=>{this.mouseDown=!1}})}),this.initOffersAutotrack_(),this.loop_()}updateLabels_(){let e=Array.from(this.element_.querySelectorAll("image")).filter(r=>!r.getAttribute("alt"));e.filter(r=>!this.validFilenames_.has(this.filenames_.get(r))).forEach(r=>{r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation")}),e.filter(r=>this.validFilenames_.has(this.filenames_.get(r))).forEach(r=>{let n=this.filenames_.get(r),s=this.imageLabels_[n];s&&this.rl_.mutate(()=>r.setAttribute("alt",s))})}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_()),this.updateLabels_();let e=window.getSelection();if(this.lastNode_!==e.focusNode&&(this.lastNode_=e.focusNode,!this.mouseDown&&e.focusNode&&this.allFocusableElements_.has(e.focusNode.parentElement))){let r=this.parentCopyElement_.get(e.focusNode.parentElement),n=Te.isDesktopOrTablet()?+r.getAttribute("data-desktop-frame"):+r.getAttribute("data-mobile-frame"),o=this.getFrameRange_().getValueAsPercent(n);this.scrollTo(o)}})}getFrameRange_(){return new ce(this.getIntroFrames_(),this.getTotalFrames_())}getTotalFrames_(){return Te.isDesktopOrTablet()?this.desktopTotalFrames_:this.mobileTotalFrames_}getIntroFrames_(){return Te.isDesktopOrTablet()?this.desktopIntroFrames_:this.mobileIntroFrames_}getElevator_(){return this.element_.querySelector(`.${ay.ELEVATOR}`)}scrollTo(e){let r=this.getElevator_(),n=an(r),s=window.innerHeight-fo(),o=n+r.offsetHeight-s,l=new ce(n,o).getPercentAsValue(e);window.scrollTo({behavior:"smooth",left:0,top:l})}initOffersAutotrack_(){this.element_.querySelectorAll(`.${ay.OFFER} a`).forEach(r=>{r.getAttribute("mqn-autotrack-event")||(r.setAttribute("mqn-autotrack-event","module interaction"),r.setAttribute("mqn-autotrack-category","module click"),r.setAttribute("mqn-autotrack-action",this.getTrackingId_()),r.setAttribute("mqn-autotrack-label",r.href||r.getAttribute("aria-label")||r.textContent))})}getTrackingId_(){let e=this.element_.closest(`.${ay.FRAME}`);return e&&e.id?e.id:"Chromecast-Google_TV-hero"}dispose_(){this.rl_.destroy(),this.domWatcher.dispose()}};var aq=re(Ye());var cy={COPY:j.mqnCssName("mqn2-g9n"),OFFER:j.mqnCssName("mqn2-g9p"),ELEVATOR:j.mqnCssName("mqn2-g9m"),FRAME:j.mqnCssName("mqn2-aaa")},hy=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.rl_=se.getDestroyableInstance(),this.copyElements_=Array.from(this.element_.querySelectorAll(`.${cy.COPY}`)),this.parentCopyElement_=new Map,this.copyElements_.forEach(n=>{let s=Array.from(n.querySelectorAll("*"));this.parentCopyElement_.set(n,n),s.forEach(o=>{this.parentCopyElement_.set(o,n)})}),this.allFocusableElements_=new Set(Array.from(this.parentCopyElement_.keys())),this.desktopTotalFrames_=+this.element_.getAttribute("data-desktop-total-frames"),this.mobileTotalFrames_=+this.element_.getAttribute("data-mobile-total-frames"),this.desktopIntroFrames_=+this.element_.getAttribute("data-desktop-intro-frames"),this.mobileIntroFrames_=+this.element_.getAttribute("data-mobile-intro-frames"),console.log(this.element_.getAttribute("data-image-labels")),this.imageLabels_=JSON.parse(this.element_.getAttribute("data-image-labels")),this.validFilenames_=new Set(Array.from(Object.keys(this.imageLabels_))),this.filenames_=Ae.usingFunction(n=>n.getAttribute("href").split("/").slice(-1)[0]),this.lastNode_=null,this.domWatcher=new aq.DomWatcher,r.$on("$destroy",()=>this.dispose_()),this.init_()}init_(){this.copyElements_.forEach(e=>{this.domWatcher.add({element:e,on:"mousedown",callback:()=>{this.mouseDown=!0}}),this.domWatcher.add({element:e,on:"mouseup",callback:()=>{this.mouseDown=!1}})}),this.initOffersAutotrack_(),this.loop_()}updateLabels_(){let e=Array.from(this.element_.querySelectorAll("image")).filter(r=>!r.getAttribute("alt"));e.filter(r=>!this.validFilenames_.has(this.filenames_.get(r))).forEach(r=>{r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation")}),e.filter(r=>this.validFilenames_.has(this.filenames_.get(r))).forEach(r=>{let n=this.filenames_.get(r),s=this.imageLabels_[n];s&&this.rl_.mutate(()=>r.setAttribute("alt",s))})}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_()),this.updateLabels_();let e=window.getSelection();if(this.lastNode_!==e.focusNode&&(this.lastNode_=e.focusNode,!this.mouseDown&&e.focusNode&&this.allFocusableElements_.has(e.focusNode.parentElement))){let r=this.parentCopyElement_.get(e.focusNode.parentElement),n=Te.isDesktopOrTablet()?+r.getAttribute("data-desktop-frame"):+r.getAttribute("data-mobile-frame"),o=this.getFrameRange_().getValueAsPercent(n);this.scrollTo(o)}})}getFrameRange_(){return new ce(this.getIntroFrames_(),this.getTotalFrames_())}getTotalFrames_(){return Te.isDesktopOrTablet()?this.desktopTotalFrames_:this.mobileTotalFrames_}getIntroFrames_(){return Te.isDesktopOrTablet()?this.desktopIntroFrames_:this.mobileIntroFrames_}getElevator_(){return this.element_.querySelector(`.${cy.ELEVATOR}`)}scrollTo(e){let r=this.getElevator_(),n=an(r),s=window.innerHeight-fo(),o=n+r.offsetHeight-s,l=new ce(n,o).getPercentAsValue(e);window.scrollTo({behavior:"smooth",left:0,top:l})}initOffersAutotrack_(){this.element_.querySelectorAll(`.${cy.OFFER} a`).forEach(r=>{r.getAttribute("mqn-autotrack-event")||(r.setAttribute("mqn-autotrack-event","module interaction"),r.setAttribute("mqn-autotrack-category","module click"),r.setAttribute("mqn-autotrack-action",this.getTrackingId_()),r.setAttribute("mqn-autotrack-label",r.href||r.getAttribute("aria-label")||r.textContent))})}getTrackingId_(){let e=this.element_.closest(`.${cy.FRAME}`);return e&&e.id?e.id:"Chromecast-Google_TV-hero"}dispose_(){this.rl_.destroy(),this.domWatcher.dispose()}};var ree={SECTIONS:j.mqnCssName("mqn2-gp7")},uy=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.element_=e[0],this.sectionsElement_=this.element_.querySelector(`.${ree.SECTIONS}`),this.rl_=se.getDestroyableInstance(),this.lastMaskValue_=null,this.loop_(),r.$on("$destroy",()=>this.dispose_())}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_());let e=Math.ceil(Si(this.sectionsElement_,"--mask-opacity-reveal"));e!==this.lastMaskValue_&&this.rl_.mutate(()=>{e===0?(de(this.sectionsElement_,"clip-path","none"),de(this.sectionsElement_,"-webkit-clip-path","none")):(this.sectionsElement_.style.setProperty("clip-path",null),this.sectionsElement_.style.setProperty("-webkit-clip-path",null))})})}dispose_(){this.rl_.destroy()}};var jx=re(vs()),Yx=re(fi()),lq=re(ui()),cq=re(ha());var Xx=re(dn()),hq=re(yt()),iee={OFFER:j.mqnCssName("mqn2-gna")},Zx=class{static get $inject(){return["$scope","$element"]}constructor(e,r){this.el=r[0],this.$scope=e,this.progress=0,this.domWatcher_=new hq.DomWatcher,this.videoPlayComplete=!1,this.raf=new cq.Raf(this.onRaf.bind(this)),this.raf.runWhenElementIsInview(this.el),this.raf.start(),this.PORTRAIT_SIZE={width:640,height:780},this.container=this.el.querySelector("[mqn-lottie-scroll]"),this.intro=this.el.querySelector("[intro]"),this.portraitElement=this.el.querySelector("[portrait-container]"),this.portraitVideo=this.el.querySelector("[portrait-video]"),this.landscapeElement=this.el.querySelector("[landscape-container]"),this.landscapeVideo=this.el.querySelector("[landscape-video]"),this.lastProgress_=null,this.lastScale_=null,this.initAutotrack(),e.$on("$destroy",()=>this.dispose())}initAutotrack(){let e=this.el.querySelectorAll(`.${iee.OFFER} a`),r=Xx.default.getClosestTrackingId(this.el),n={event:"trackEvent",eventCategory:"rebates",eventAction:"rebates message: pdp",eventLabel:"nest_thermostat - rebate message clicked",pageName:window.location.pathname,moduleName:r};for(let s=0;s<e.length;s++){let o=e[s];this.domWatcher_.add({element:o,on:"click",callback:()=>Xx.default.trackDataLayer(n)})}}onRaf(){this.progress=jx.dom.getElementScrolledPercent(this.el,window.innerHeight,0),this.progress===0&&!this.videoPlayComplete?(Yx.is.isPortrait()?(this.portraitVideo.play(),this.portraitVideo.addEventListener("ended",()=>this.portraitElement.classList.add("play-complete"),{once:!0})):(this.landscapeVideo.play(),this.landscapeVideo.addEventListener("ended",()=>this.landscapeElement.classList.add("play-complete"),{once:!0})),this.videoPlayComplete=!0):(this.progress>0&&(this.portraitElement.classList.add("play-complete"),this.landscapeElement.classList.add("play-complete")),this.videoPlayComplete=!0),this.updatePortrait()}updatePortrait(){if(!Yx.is.isPortrait())return;let e=.35,r=lq.mathf.childProgress(this.progress,0,e);this.lastProgress_!==this.progress&&(this.raf.write(()=>jx.dom.setCssVariables(this.el,{"--portrait-progress":r})),this.lastProgress_=this.progress)}dispose(){this.raf&&this.raf.dispose(),this.domWatcher_.dispose()}};var uq=class{constructor(e,r){this.triggerId_=e,this.target_=r,this.count_=0}getCount(){return this.count_}incrementCount(){this.count_+=1}decrementCount(){this.count_-=1}getElement(){return this.target_}},nee=ho.usingFunction(([t,e])=>new uq(t,e)),see=Ae.usingFunction(t=>new Set),fq=class{constructor(){this.targetCounts_=nee,this.targets_=see}addTarget(e,r){let n=this.targetCounts_.get([e,r]);n.incrementCount(),this.targets_.get(e).add(n)}disposeTarget(e,r){let n=this.targetCounts_.get([e,r]);n.decrementCount(),n.getCount()<=0&&this.targets_.get(e).delete(n)}getTargets(e){return Array.from(this.targets_.get(e).values())}},dq=fq;var fy=new ke(50,50),oee=64,aee=.5,_l=class{constructor(e,r,n,s,o,a,l,c=ke){this.progressRange_=new ce(o,a),this.VectorClass_=c;let h=.5,f=_l.getT(h,e,r),u=_l.getT(f,r,n),m=_l.getT(u,n,s);this.path_=[];let d=l*this.progressRange_.getDistance(),v=Math.ceil(d/oee),p=(u-f)/v;for(let g=f;g<u-p;g+=p){let y=e.scale((f-g)/(f-h)).add(r.scale((g-h)/(f-h))),_=r.scale((u-g)/(u-f)).add(n.scale((g-f)/(u-f))),b=n.scale((m-g)/(m-u)).add(s.scale((g-u)/(m-u))),w=y.scale((u-g)/(u-h)).add(_.scale((g-h)/(u-h))),S=_.scale((m-g)/(m-f)).add(b.scale((g-f)/(m-f))),E=w.scale((u-g)/(u-f)).add(S.scale((g-f)/(u-f)));this.path_.push(E)}this.path_.push(n),this.pathRange_=new ce(0,this.path_.length-1)}getPointForProgress(e,r){if(!this.progressRange_.contains(e))throw new Error(`Tried to get point for progress ${e} outside of CatmulRom range ${this.progressRange_.getMin()} to ${this.progressRange_.getMax()}`);let n=this.pathRange_.getPercentAsValue(this.progressRange_.getValueAsPercent(e));if(n<0)return null;if(n%1==0)return this.path_[n];{let s=this.path_[Math.floor(n)],o=this.path_[Math.ceil(n)],a=n%1;return new this.VectorClass_(new ce(s.getValues()[0],o.getValues()[0]).getPercentAsValue(a),new ce(s.getValues()[1],o.getValues()[1]).getPercentAsValue(a))}}static getT(e,r,n){let s=Math.pow(n.getValues()[0]-r.getValues()[0],2)+Math.pow(n.getValues()[1]-r.getValues()[1],2),o=Math.pow(s,.5);return Math.pow(o,aee)+e}};function Qx(t){return t.toLowerCase().split(" ").join("").split("x").map(e=>parseFloat(e))}var so=class{constructor(e,r,n,s){this.layer_=r.querySelector(`[mqn2-srz-layer-${n}]`),this.spacer_=r.querySelector(`[mqn2-srz-spacer-${n}]`),this.scale_=so.parseRetargetScale(e.zoom),this.center_=e.center?new ke(...Qx(e.center)):null,e.ratio?e.ratio==="auto"?this.ratio_=s:e.ratio==="container"?this.ratio_="container":this.ratio_=new er(...Qx(e.ratio)):this.ratio_=null,this.retargetCenter_=e.retarget_center?new ke(...Qx(e.retarget_center)):null,this.retargetScale_=so.parseRetargetScale(e.retarget_scale)}static parseRetargetScale(e){return e?e==="fill"?"fill":parseFloat(e):null}getElement(){return this.layer_}getCenter(){return this.center_}static getCenter(e){return e.getCenter()}getRetargetCenter(){return this.retargetCenter_}static getRetargetCenter(e){return e.getRetargetCenter()}getRatio(e){return this.ratio_==="container"?e:this.ratio_}static getRatio(e,r){return e.getRatio(r)}getRetargetScale(){return this.retargetScale_}static getRetargetScale(e){return e.getRetargetScale()}getScale(){return this.scale_}static getScale(e){return e.getScale()}getSpacerHeight(){return this.spacer_.offsetHeight}},dy=class{static get $inject(){return["$element","$scope"]}constructor(e,r){this.rl_=se.getDestroyableInstance(),r.$on("$destroy",()=>this.dispose_()),this.element_=e[0],this.clipEl_=this.element_.querySelector("[mqn2-srz-layers-clip]"),this.transformEl_=this.element_.querySelector("[mqn2-srz-layers-transform]"),this.retargetEl_=this.element_.querySelector("[mqn2-srz-layers-retarget]"),this.autoDimensions_=new er(parseFloat(this.element_.dataset.autoWidth),parseFloat(this.element_.dataset.autoHeight));let n=JSON.parse(this.element_.dataset.targets);this.targets_=n.map((s,o)=>new so(s,this.element_,o,this.autoDimensions_)),this.lastProgressValue_=null,this.resizeHandler_=()=>this.handleResize_(),window.addEventListener("resize",this.resizeHandler_),this.handleResize_(),this.render_()}handleResize_(){this.rl_.measure(()=>{_t(this.element_,!0)?(this.totalSpacerHeight_=this.getTotalSpacerHeight_(),this.targetProgressMap_=this.getTargetProgressMap_(),this.lastProgressValue_=null):(this.totalSpacerHeight_=null,this.targetProgressMap_=null)})}getTotalSpacerHeight_(){return this.targets_.reduce((e,r)=>e+r.getSpacerHeight(),0)}getTargetProgressMap_(){let e=0;return this.targets_.reduce((r,n)=>(e+=n.getSpacerHeight(),r.set(n,e/this.totalSpacerHeight_),r),new Map)}render_(){this.rl_.measure(()=>{if(this.rl_.cleanup(()=>this.render_()),this.targetProgressMap_===null||(this.containerDimensions_=er.fromElementOffset(this.clipEl_),!this.containerDimensions_||this.containerDimensions_.height===0))return;let e=Si(this.element_,"--srz-progress");this.lastProgressValue_!==e&&(this.lastProgressValue_=e,this.adjustMask_(e),this.adjustTransform_(e),this.adjustRetargeting_(e),this.hideUnclippedLayers_())})}hideUnclippedLayers_(){let e=this.clipEl_.getBoundingClientRect(),r=e.width*e.height,n=this.targets_.map(c=>c.getElement()),s,o=0,a=n.filter(c=>{let h=c.getBoundingClientRect(),f=h.width*h.height;return f>o&&(s=c,o=f),f<r});a.length===n.length&&hh(a,s);let l=Vv(n,a);this.rl_.mutate(()=>{a.map(c=>de(c,"opacity","0")),l.map(c=>de(c,"opacity","1"))})}adjustTransform_(e){let r=this.getSplineVectorValue_(so.getCenter,e,fy),n=fy.subtract(r),s=this.getSplineScalarValue_(o=>this.getSRZTargetScale_(o),e,1);this.rl_.mutate(()=>{de(this.transformEl_,"transform",`translate(${n.getX()*s}%, ${n.getY()*s}%) scale(${s})`)})}adjustMask_(e){let r=this.getSplineVectorValue_(s=>s.getRatio(this.containerDimensions_),e,this.containerDimensions_,er),n;if(r.width/r.height>this.clipEl_.offsetWidth/this.clipEl_.offsetHeight){let s=this.clipEl_.offsetWidth/r.width,o=(this.clipEl_.offsetHeight-r.height*s)/2/this.clipEl_.offsetHeight,a=this.clipEl_.offsetHeight*o,l=this.clipEl_.offsetHeight*(1-o);n=`rect(${a}px, ${this.clipEl_.offsetWidth}px, ${l}px, 0)`}else{let s=this.clipEl_.offsetHeight/r.height,o=(this.clipEl_.offsetWidth-r.width*s)/2/this.clipEl_.offsetWidth,a=this.clipEl_.offsetWidth*o;n=`rect(0, ${this.clipEl_.offsetWidth*(1-o)}px, ${this.clipEl_.offsetHeight}px, ${a}px)`}this.rl_.mutate(()=>de(this.clipEl_,"clip",n))}adjustRetargeting_(e){let r=fy.subtract(this.getSplineVectorValue_(so.getRetargetCenter,e,fy)),n=this.getSplineScalarValue_(so.getRetargetScale,e,1);this.rl_.mutate(()=>{de(this.retargetEl_,"transform",`translate(${r.getX()}%, ${r.getY()}%) scale(${n})`)})}getSRZTargetScale_(e){let r=so.getScale(e);if(r==="fill"){let n=this.containerDimensions_,s=this.autoDimensions_,o=s.height*n.width/s.width;return o<n.height?n.height/o:1}else return r}getSplineVectorValue_(e,r,n,s=ke){let o=this.targets_.filter(a=>e(a)!==null);if(o.length===0)return n;if(r===0)return e(o[0]);if(r===1)return e(o[o.length-1]);if(o.length===1)return e(o[0]);if(o.length===2){let a=o[0],l=o[1],c=this.targetProgressMap_.get(a),h=this.targetProgressMap_.get(l);if(r<=c)return e(a);if(r>=h)return e(l);{let f=new ce(c,h).getValueAsPercent(r),u=e(a),m=e(l);return u.scale(1-f).add(m.scale(f))}}else if(o.length===3){let a=o.map(m=>e(m)),l,c,h;if(r<this.targetProgressMap_.get(o[1])){let m=a[1].subtract(a[0]);l=[a[0].subtract(m),a[0],a[1],a[2]],c=this.targetProgressMap_.get(o[0]),h=this.targetProgressMap_.get(o[1])}else{let m=a[2].subtract(a[1]);l=[a[0],a[1],a[2],a[2].add(m)],c=this.targetProgressMap_.get(o[1]),h=this.targetProgressMap_.get(o[2])}let u=new _l(...l,c,h,this.totalSpacerHeight_,s).getPointForProgress(r,this.element_);return u!==null?u:n}else{let a,l=0;for(let m=1;m<o.length&&r>this.targetProgressMap_.get(o[m]);m++)l=m;let c,h;if(l===0){let m=o.slice(0,3).map(v=>e(v)),d=m[1].subtract(m[0]);a=[m[0].subtract(d),...m],c=0,h=this.targetProgressMap_.get(o[1])}else if(l+2>=o.length){let m=o.slice(-3).map(v=>e(v)),d=m[2].subtract(m[1]);a=[...m,m[2].add(d)],c=this.targetProgressMap_.get(o[o.length-2]),h=1}else a=o.slice(l-1,l+3).map(m=>e(m)),c=this.targetProgressMap_.get(o[l]),h=this.targetProgressMap_.get(o[l+1]);let u=new _l(...a,c,h,this.totalSpacerHeight_,s).getPointForProgress(r,this.element_);return u!==null?u:n}}getSplineScalarValue_(e,r,n){return this.getSplineVectorValue_(o=>e(o)!==null?new ke(e(o),e(o)):null,r,new ke(n,n)).getX()}dispose_(){window.removeEventListener("resize",this.resizeHandler_),this.rl_.destroy()}};var pq="template_tab_carousel",mq=class{static get $inject(){return["$rootScope","$element","$scope","$compile"]}constructor(e,r,n,s){this.el=r[0],this.initialized=!1,n.$on("MQN_SLICK_INITIALIZED",this.slickInitialized.bind(this)),n.$on("MQN_SLICK_INVIEW",this.slickInview.bind(this))}slickInitialized(e,r){this.initialized||r.id!==pq||(this.slickCtrl=r.ctrl,this.initialized=!0)}slickInview(e,r){r.id===pq&&(r.inview?this.slickCtrl.start():this.slickCtrl.stop())}},gq=mq;var vq=class{constructor(){this.elementsToControllers_=new Map}get(e){return this.elementsToControllers_.get(e)}register(e,r){this.elementsToControllers_.set(e,r)}deregister(e){this.elementsToControllers_.delete(e)}},yq=vq;var _q=class{static get $inject(){return["$element","$scope"]}constructor(e,r){let n=e[0].getAttribute("data-promo-name");this.rl_=se.getDestroyableInstance(),this.promoElement_=document.querySelector(`[sitewide-promo][data-name="${n}"]`),this.promoElement_&&this.loop_(),r.$on("$destroy",()=>this.dispose_())}loop_(){this.rl_.measure(()=>{this.rl_.cleanup(()=>this.loop_()),this.promoElement_.offsetHeight&&this.rl_.mutate(()=>de(this.promoElement_,"display","none"))})}dispose_(){this.rl_.destroy(),!!this.promoElement_&&se.mutate(()=>de(this.promoElement_,"display",""))}},lee=function(){return{restrict:"A",controller:_q}},bq=lee;var py={ENTER:"DOMContentLoaded",LOAD:"load",TRACKING_NAVIGATION:"trackingNavigationEvent",LEAVE:"mannequinImpendingNavigation"};ot.getSingleton().overrideThrow(t=>{if(window.location.origin.indexOf("localhost")!==-1)throw new Error(t);console.warn(t)});var Eq=class{constructor(){this.apps=[],this.rootElements=[],this.forcePassiveJQuery(),this.destroyed_=!1,document.addEventListener(py.ENTER,this.handleLoad.bind(this),{once:!0}),document.addEventListener(py.TRACKING_NAVIGATION,this.handleTrackingNavigation.bind(this)),uo.setupNativeSmoothScroll()}forcePassiveJQuery(){window.jQuery&&(jQuery.event.special.touchstart={setup:function(e,r,n){r.includes("noPreventDefault")?this.addEventListener("touchstart",n,{passive:!1}):this.addEventListener("touchstart",n,{passive:!0})}},jQuery.event.special.touchmove={setup:function(e,r,n){r.includes("noPreventDefault")?this.addEventListener("touchmove",n,{passive:!1}):this.addEventListener("touchmove",n,{passive:!0})}})}handleLoad(){this.handleDOMContentLoaded(),document.addEventListener(py.ENTER,this.handleDOMContentLoaded.bind(this)),document.addEventListener(py.LEAVE,this.handleDestroy.bind(this))}handleTrackingNavigation(){window.MQN2_TRACKING_NAVIGATION_READY=!0}handleDOMContentLoaded(){this.loading||(this.loading=!0,window.dispatchEvent(new Event("mannequinInternalStartInstantiation")),MT(),this.initHelp(),this.initOptionSelector(),this.initHighlight(),this.initGridOverlay(),this.createAngularApps(),this.modal_=new XT,this.createAirkitModal(),wq.default.init(),this.rewriteGoogleUrls(),this.makeBrAccessible())}handleDestroy(){this.loading=!1,window.MQN2_TRACKING_NAVIGATION_READY=!1,this.destroyAngularApps(),this.destroyAirkitModal(),document.documentElement.style.overflow="",document.body.style.height="",document.body.style.width="",document.body.style.overflow="",document.body.style.marginTop="",uo.disposeNativeSmoothScroll()}makeBrAccessible(){document.querySelectorAll("[mqn2-app] br").forEach(r=>{let n=r.closest('[role="heading"]')||r.closest('[role="text"]')||r.parentElement,s=n.textContent;s&&!n.hasAttribute("aria-label")&&!n.querySelectorAll("a").length&&n.setAttribute("aria-label",s)}),Array.from(document.querySelectorAll('div[mqn2-frame] [role="heading"] br, [role="text"] br')).forEach(r=>{r.setAttribute("aria-hidden","true")})}rewriteGoogleUrls(){let e=['[mqn2-app] a[href^="https://apps.apple.com"]','[mqn2-app] a[href^="https://one.google.com"]','[mqn2-app] a[href^="https://play.google.com"]','[mqn2-app] a[href^="https://safety.google"]','[mqn2-app] a[href^="https://support.google.com"]'],r=document.querySelectorAll(e.join(", "));[].forEach.call(r,function(n){n.target="_blank"})}initHighlight(){if(!window.URLSearchParams||!window.isGoogler||!(new URLSearchParams(window.location.search).has("highlight")||document.documentElement.hasAttribute("mqn2-highlight")))return;let n=document.querySelectorAll(".page-module");[].forEach.call(n,function(s){let o=Boolean(s.querySelector("[data-wombat]")||s.querySelector("[mqn2-pnp]")),a=Boolean(s.querySelector("[wombat-template]")),l=!o&&!a&&Boolean(s.querySelector(".mannequin")),c=!l&&!o&&!a,h=s.querySelector("[data-title]")&&s.querySelector("[data-title]").getAttribute("data-title"),f=s.querySelector("[id]")&&s.querySelector("[id]").id;if(h){let m=document.createElement("a");m.setAttribute("mqn2-highlight__item",""),m.setAttribute("mqn2-highlight__item--right",""),f&&(m.href="#"+f),m.innerText=h.replace("(Mannequin)","(Static)"),s.appendChild(m)}let u=document.createElement("div");u.setAttribute("mqn2-highlight__item",""),o||a?u.innerText="Template":l?u.innerText="Custom":c&&(u.innerText="Gordon"),s.appendChild(u)}),document.documentElement.setAttribute("mqn2-highlight","")}initHelp(){if(!window.URLSearchParams||window.location.host=="store.google.com")return;let e=new URLSearchParams(window.location.search);e.get("help")!="1"&&(e.get("help")=="0"||window.localStorage.getItem("help"))?window.localStorage.setItem("help","1"):(document.body.classList.add("mqn2-body--help"),window.localStorage.removeItem("help"))}initOptionSelector(){if(!window.URLSearchParams||window.location.host=="store.google.com")return;Array.from(document.querySelectorAll("[option-selector]")).forEach(r=>{r.addEventListener("click",()=>{r.classList.toggle("active");let n=r.parentNode.parentNode.parentNode.querySelector("[mqn2-frame]"),s="mqn-opt--"+r.textContent.replace(/\s/g,"");n.firstElementChild.classList.toggle(s)})})}initGridOverlay(){if(!window.URLSearchParams||window.location.host=="store.google.com")return;let e=new URLSearchParams(window.location.search);if(!(e.get("mqnGrid")==="true"))return;let n=document.createElement("div");n.classList.add("mqn-grid-overlay");let s=document.createElement("div");s.classList.add("mqn-grid");for(let o=0;o<12;o++){let a=document.createElement("div");a.classList.add("mqn-grid__col"),a.textContent=o+1,s.appendChild(a)}n.appendChild(s),document.body.appendChild(n),document.body.setAttribute("mqn-grid-overlay","true"),e.get("disableMargins")!=="true"&&(console.log("init margins"),this.initMarginOutliner())}initMarginOutliner(){let e=[4,8,12,16,20,24,32,40,60,80],r=(s,o,a,l,c)=>{let h=document.createElement("div");h.classList.add("mqn-ext-internal-spacer-outline"),h.style.setProperty("--left",`${a}px`),h.style.setProperty("--top",o),h.style.setProperty("--width",`${s.offsetWidth}px`),h.style.setProperty("--height",`${l}px`),c&&h.classList.add("mqn-ext-internal-spacer-outline--padding"),h.innerText=`${l}px`,s.parentElement.appendChild(h)},n=()=>{[].forEach.call(document.querySelectorAll(".mqn-ext-internal-spacer-outline"),s=>{s.parentNode.removeChild(s)}),[].forEach.call(document.querySelectorAll("div[mqn2-frame] div[class^=mqn2]"),s=>{e.forEach(o=>{if(!s.offsetWidth)return;let a=window.getComputedStyle(s),l=s.getBoundingClientRect();a.marginTop==`${o}px`&&r(s,`${l.top-o}px`,l.left,o,!1),a.marginBottom==`${o}px`&&r(s,`${l.bottom}px`,l.left,o,!1),a.paddingTop==`${o}px`&&r(s,`${l.top}px`,l.left,o,!0),a.paddingBottom==`${o}px`&&r(s,`${l.bottom-o}px`,l.left,o,!0)})})};n(),window.setTimeout(()=>n(),100),window.addEventListener("click",n),window.addEventListener("resize",n),window.addEventListener("scroll",n,{passive:!0})}createAirkitModal(){this.modal_.createAirkitModal()}destroyAirkitModal(){this.modal_.destroyAirkitModal()}runStaticVideos(e){let r=Array.from(e.querySelectorAll("video"));r=r.filter(n=>Wh.dom.getComputedStyle(n.parentNode).display!=="none"),r.forEach(n=>{n.autoplay=!1,n.preload="metadata",n.removeAttribute("mqn-video-inview-play"),n.removeAttribute("mqn-lazyimage-video-no-play"),n.removeAttribute("mqn-video-inview-no-reset"),n.poster="https://lh3.googleusercontent.com/mDoI41yKds39hftVLDzN6CJu4Ck6U8KxUFGsctnItGOnGbQxXsiU6-UY0xctmSWSnZFpbxnvkdzfs0MJrXTC4nU=v0-rw-w1130",Array.from(n.querySelectorAll("source")).forEach(s=>{let o=s.getAttribute("mqn-lazyimage-src");St.lazyVideoBustCache()&&(o+="?"+Date.now()),o&&(s.removeAttribute("mqn-lazyimage-src"),s.src=o)})})}createAngularApp(e){if(St.staticVideos()&&this.runStaticVideos(e),St.debugLoadedModules()){let s=e.querySelector("[mqn-tracking-id]")||e;console.log("Created app",s.getAttribute("mqn-tracking-id")||e)}if(angular.module("mqn2",["ngSanitize","ngTouch","ngAria"]).config(["$interpolateProvider",function(s){s.startSymbol("[[").endSymbol("]]")}]).controller("mqnDevController",_3).controller("mqnAtMoveController",Gg).controller("mqnChromecastAppsController",$g).controller("mqnPickerController",sN).controller("mqnTemplateEnrichmentPickerController",aN).controller("mqnPicker3dController",EN).controller("mqnPicker3d2Controller",u3).controller("mqnCarousel2Controller",v3).controller("mqnEqualHeightsController",S3).controller("mqnSlickController",Th).controller("mqnSlideshowController",PB).controller("mqnPerfectScrollerController",TB).controller("mqnPartnersGridController",VV).controller("mqnGridAppsController",x3).controller("mqnGridAppsStaticController",I3).controller("mqnGridDrawersController",nx).controller("mqnPdpTogglerController",$V).controller("mqnTemplateProductComparisonController",QV).controller("mqnTemplateLottieElevatorController",bx).controller("mqnTemplateLockedScreenController",fB).controller("mqnModalController",L3).controller("mqnAppGardenController",mv).controller("mqnAppGardenGridController",m3).controller("mqnFlNgaController",vv).controller("mqnMaskedHeroController",Mx).controller("mqnMtSpeedSecurityController",jv).controller("mqnMtSmartSpeakersController",Yv).controller("mqnMtHardwareController",Xv).controller("mqnMtQuizController",_U).controller("mqnMtSoftwareController",Zv).controller("mqnNwCamController",D3).controller("mqnNwConnectController",k3).controller("mqnNwFacematchController",U3).controller("mqnTemplateTabCarouselController",gq).controller("mqnNwHomeController",z3).controller("mqnNwPhotos2Controller",$3).controller("mqnNwScrollSpeakersController",eV).controller("mqnNwStreamController",OV).controller("mqnStHeroController",Gv).controller("mqnOpaQueryController",Qv).controller("mqnParallaxCarouselController",NV).controller("mqnSimpleTabsController",MB).controller("mqnRetailersController",BB).controller("mqnTechspecsHeroController",HB).controller("mqnPhotoPairController",RH).controller("mqnProductWallController",GB).controller("mqnRoomToRoomPortraitController",iy).controller("mqnRoomToRoomLandscapeController",ry).controller("mqnFeaturedOffersController",KB).controller("mqnSplitImagesController",RB).controller("mqnFormboxController",eU).controller("mqnFootstepsController",$v).controller("mqnYetiSpeedTestController",cU).controller("mqnWombatController",aU).controller("mqnWombatSlickController",uU).controller("mqnWombatCarouselController",dU).controller("mqnTemplateCarouselController",gU).controller("mqnValChController",qU).controller("mqnValDbController",jU).controller("mqnValEntertainmentController",Kv).controller("mqnSwitchStepsController",rH).controller("mqnScrollSnapController",FB).controller("mqnSfHeroController",bH).controller("mqnSuperResZoomController",dy).controller("mqnTldrToutController",OH).controller("mqnVideoGridController",KU).controller("mqnUseCaseCardController",nH).controller("mqnCountdownController",tx).controller("mqnNestEcosystemController",oH).controller("mqnConciergeHeroScrollController",ey).controller("mqnDrawerHeroController",FH).controller("mqnPremiumSoundSubsController",fH).controller("mqnPremiumSoundCirclesController",mH).controller("mqnAccordionController",Vx).controller("mqnCardSnapGallery",Ux).controller("mqnTwoWaysController",Hx).controller("mqnOpaInlineQueriesController",ny).controller("mqnBRHeroController",Gx).controller("mqnZRHeroController",Zx).controller("mqnStepsController",$x).controller("mqnSabrinaHeroController",ly).controller("mqnSabrinaMaxHeroController",hy).controller("mqnSpeedHighlightsController",uy).directive("mqnLottieScroll",Sq.lottieScrollDirective).directive("mqnScrollRenderFix",zF).directive("mqnAccessibleOutline",t1).directive("mqnAddBrowserName",l1).directive("mqnAutotrack",u1).directive("mqnAutotrackDecorator",f1).directive("mqnBlurryVideo",m1).directive("mqnInview",j1).directive("mqnClickAnimation",A1).directive("mqnVideoCssTriggers",ID).directive("mqnVideoIntroLoop",VD).directive("mqnVideoInviewPlay",OD).directive("mqnVideoPlayOnHover",ND).directive("mqnDynamicCta",u_).directive("mqnDynamicPricing",f_).directive("mqnHorizontalScroll",z1).directive("mqnLottie",y_).directive("mqnMinHeight",bM).directive("mqnRewriteLinkTargets",SD).directive("mqnStyledRangeInput",qF).directive("mqnElevator",O1).directive("mqnBreakpointStyle",T1).directive("mqnBreakpointClass",v1).directive("mqnSwipe",TD).directive("mqnParallax",wD).directive("mqnStopPropagation",xD).directive("mqnLazyimage",Z1).directive("mqn2ScrubOnFramePosition",HD).directive("mqnNativeSticky",mD).directive("mqnCssParallax",DF).directive("mqnVisibilityOptimizer",NF).directive("mqnVideoCssTriggersTarget",zD).directive("mqnGridWithDeviceImagesMetaOffset",GD).directive("mqn2LerpedScrolledFrameSequence",yM).directive("mqn2SectionBreakerHeader",G2).directive("mqn2WombatDataAttrs",kF).directive("mqnGdnHeight",V1).directive("mqnWindowAspectRatio",BF).directive("mqnElementDimensions",VF).directive("mqnHeightToVar",B1).directive("mqnWidthToVar",U1).directive("mqnMultilineEllipsis",xM).directive("mqnViewInAr",dD).directive("mqnTabindexGroup",iE).directive("mqnScrollToCenterOnFocus",JF).directive("mqnScrollLottieElevatorOnFocus",nE).directive("mqnAutotrackGdnLinks",QF).directive("mqnPageSettings",bq).service("mqnTemplateLottieElevatorService",yq).service("mqnVideoCssTriggerTargetCollection",dq).run(["$rootScope",s=>{s.isMobile=Te.isMobile,s.isTabletOrMobile=Te.isTabletOrMobile,s.isDesktopOrTablet=Te.isDesktopOrTablet,s.isDesktop=Te.isDesktop,s.isLandscape=Te.isLandscape,s.isPortrait=Te.isPortrait,window.addEventListener("resize",()=>{s.$$phase||s.$apply()})}]),!!e.getAttribute("bootstrapped"))return;e.setAttribute("bootstrapped",!0);let n;try{n=angular.bootstrap(e,["mqn2"])}catch(s){console.warn(s)}return n}createAngularApps(){let e=document.querySelectorAll("[mqn2-app]"),r=window.innerHeight;this.watchers_=[],this.apps=[],this.rootElements=[],[...e].forEach((n,s)=>{let o=n.getAttribute("mqn-enabled-for");if(!!o&&!{onlyEdge:()=>Wh.is.edge(),exceptEdge:()=>!Wh.is.edge(),exceptIPadHighRes:()=>St.forceIpadHighRes()||!(Wh.is.ipad()&&window.devicePixelRatio>=2)}[o]()){n.parentNode.removeChild(n);return}let l=n.getAttribute("data-delay-instantiation")!==null,c=St.debugModules();if(l&&!St.turnOffLazyInstantiate()&&!c){let h=+n.getAttribute("data-delay-instantiation-scalar")||1,f=r*h;this.watchers_.push(ht.elementInViewWatcherFirstChangeOnly(n,{threshold:0,rootMargin:f+"px"},(u,m,d)=>{m.isIntersecting&&(this.apps.push(this.createAngularApp(u)),this.rootElements.push(u),d())}))}else if(!c)this.apps.push(this.createAngularApp(n)),this.rootElements.push(n);else{let h=n.querySelector("[mqn-tracking-id]"),f=h&&h.getAttribute("mqn-tracking-id");f&&c.includes(f)?(this.apps.push(this.createAngularApp(n)),this.rootElements.push(n)):n.parentNode.removeChild(n)}}),window.dispatchEvent(new Event("mannequinInternalReady")),window.setTimeout(function(){window.dataLayer&&window.dataLayer.push({event:"optimize.activate"})},500)}destroyAngularApps(){this.apps.forEach(e=>{e.get("$rootScope").$destroy()}),this.apps=[],this.rootElements.forEach(e=>{e.removeAttribute("mqn2-app")}),this.rootElements=[],this.watchers_.forEach(e=>{e.done()})}};new Eq;})();
